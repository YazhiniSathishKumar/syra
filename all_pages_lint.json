[{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\Dashboard\\AdminDashboard\\AdminDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\Dashboard\\AdminDashboard\\AdminDashboardContent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\Dashboard\\AdminDashboard\\AdminSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\Dashboard\\AuditDetails\\AuditDetailsContent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\Dashboard\\AuditDetails\\AuditDetailsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\Dashboard\\AuditDetails\\FindingDetailsContent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\Dashboard\\AuditDetails\\FindingDetailsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\Dashboard\\Dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\Dashboard\\Help\\Help.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\Dashboard\\Help\\HelpContent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\Dashboard\\Projects.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\Dashboard\\Settings\\Settings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\Dashboard\\Settings\\SettingsContent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\Dashboard\\TestingDashboard\\TestingDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\Dashboard\\TestingDashboard\\TestingDashboardContent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\Dashboard\\UserDashboardContent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\ForgotPasswordPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1102,1105],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1102,1105],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { motion } from 'framer-motion';\nimport { Mail, Sun, Moon, ArrowLeft } from 'lucide-react';\nimport AuthCard from '../components/ui/AuthCard';\nimport Input from '../components/ui/Input';\nimport Button from '../components/ui/Button';\nimport { useTheme } from '../context/ThemeContext';\nimport apiClient from '../lib/api'; // Ô£à New import\n\nconst ForgotPasswordPage = () => {\n  const { theme, toggleTheme } = useTheme();\n  const [isLoading, setIsLoading] = useState(false);\n  const [isEmailSent, setIsEmailSent] = useState(false);\n  const [email, setEmail] = useState('');\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    document.title = 'Forgot Password | syra';\n  }, []);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!email) {\n      setError('Email is required');\n      return;\n    }\n\n    setIsLoading(true);\n    setError('');\n\n    try {\n      await apiClient.post('/auth/forgot-password', { email });\n      setIsEmailSent(true);\n    } catch (err: any) {\n      setError(\n        err.response?.data?.message || 'Failed to send reset instructions'\n      );\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleResend = () => {\n    setIsEmailSent(false);\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-4 relative overflow-hidden\">\n      {/* Animated background elements */}\n      <motion.div\n        className=\"absolute inset-0 z-0\"\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ duration: 1 }}\n      >\n        <div className=\"absolute top-1/3 left-1/3 w-64 h-64 bg-secondary-dark/20 dark:bg-secondary-light/20 rounded-full blur-3xl animate-float\" />\n        <div className=\"absolute bottom-1/3 right-1/3 w-64 h-64 bg-accent-dark/20 dark:bg-accent-light/20 rounded-full blur-3xl animate-pulse-slow\" />\n      </motion.div>\n\n      {/* Theme toggle button */}\n      <motion.button\n        className=\"fixed top-4 right-4 p-2 rounded-full bg-[#e0e0e0] dark:bg-surface-light/50 backdrop-blur-sm\"\n        whileHover={{ scale: 1.1 }}\n        whileTap={{ scale: 0.9 }}\n        onClick={toggleTheme}\n      >\n        {theme === 'dark' ? (\n          <Sun className=\"w-6 h-6 text-yellow-400\" />\n        ) : (\n          <Moon className=\"w-6 h-6 text-indigo-600\" />\n        )}\n      </motion.button>\n\n      <Link\n        to=\"/\"\n        className=\"fixed top-4 left-4 p-2 rounded-full bg-[#e0e0e0] dark:bg-surface-light/50 backdrop-blur-sm\"\n      >\n        <ArrowLeft className=\"w-6 h-6 text-red-800\" />\n      </Link>\n\n      <AuthCard\n        title={isEmailSent ? 'Check Your Email' : 'Reset Password'}\n        subtitle={\n          isEmailSent\n            ? 'WeÔÇÖve sent instructions to reset your password'\n            : 'Enter your email to receive reset instructions'\n        }\n      >\n        {error && (\n          <p className=\"text-center text-sm text-red-500\">{error}</p>\n        )}\n\n        {!isEmailSent ? (\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <Input\n              type=\"email\"\n              label=\"Email\"\n              placeholder=\"Enter your email\"\n              leftIcon={<Mail className=\"w-5 h-5\" />}\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n            />\n\n            <Button type=\"submit\" isLoading={isLoading} className=\"w-full\">\n              Send Reset Link\n            </Button>\n\n            <p className=\"text-center text-sm\">\n              Remember your password?{' '}\n              <Link\n                to=\"/\"\n                className=\"text-secondary-dark dark:text-secondary-light hover:underline\"\n              >\n                Sign In\n              </Link>\n            </p>\n          </form>\n        ) : (\n          <div className=\"text-center space-y-6\">\n            <p className=\"text-sm opacity-80\">\n              We've sent instructions to <strong>{email}</strong>. Please check your inbox (and spam/junk folder).\n            </p>\n            <Button\n              onClick={handleResend}\n              variant=\"outline\"\n              className=\"w-full\"\n              disabled={isLoading}\n            >\n              Try Another Email\n            </Button>\n          </div>\n        )}\n      </AuthCard>\n    </div>\n  );\n};\n\nexport default ForgotPasswordPage;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\LoginPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\OTPVerificationPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'location' is assigned a value but never used.","line":220,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":220,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setId' is assigned a value but never used.","line":240,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":240,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setEmail' is assigned a value but never used.","line":246,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":246,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":332,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":332,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10658,10661],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10658,10661],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":352,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":352,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11209,11212],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11209,11212],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// import { useState, useRef, useEffect } from 'react';\n// import { motion } from 'framer-motion';\n// import { Sun, Moon } from 'lucide-react';\n// import { useNavigate, useLocation } from 'react-router-dom';\n// import AuthCard from '../components/ui/AuthCard';\n// import Button from '../components/ui/Button';\n// import { useTheme } from '../context/ThemeContext';\n// import apiClient from '../lib/api';\n\n// const OTPVerificationPage = () => {\n//   const { theme, toggleTheme } = useTheme();\n//   const navigate = useNavigate();\n//   const location = useLocation();\n\n//   useEffect(() => {\n//     document.title = 'Verify | syra';\n//   }, []);\n\n//   const [isLoading, setIsLoading] = useState(false);\n//   const [otp, setOtp] = useState(['', '', '', '', '', '']);\n//   const inputRefs = useRef<(HTMLInputElement | null)[]>([]);\n\n//   const [id, setId] = useState(() => {\n//     return localStorage.getItem('id') || '';\n//   });\n\n//   const [email, setEmail] = useState(() => {\n//     const locationEmail = location.state?.email;\n//     if (locationEmail) return locationEmail;\n//     return localStorage.getItem('otp_email') || '';\n//   });\n\n//   useEffect(() => {\n//     inputRefs.current[0]?.focus();\n//   }, []);\n\n//   const handleChange = (index: number, value: string) => {\n//     if (value.length <= 1) {\n//       const newOtp = [...otp];\n//       newOtp[index] = value;\n//       setOtp(newOtp);\n\n//       if (value && index < 5) {\n//         inputRefs.current[index + 1]?.focus();\n//       }\n//     }\n//   };\n\n//   const handleKeyDown = (index: number, e: React.KeyboardEvent<HTMLInputElement>) => {\n//     if (e.key === 'Backspace' && !otp[index] && index > 0) {\n//       inputRefs.current[index - 1]?.focus();\n//     }\n//   };\n\n//   const handleSubmit = async (e: React.FormEvent) => {\n//     e.preventDefault();\n//     const code = otp.join('');\n\n//     if (code.length !== 6) {\n//       alert('Please enter all 6 digits of the OTP code.');\n//       return;\n//     }\n\n//     if (!id && !email) {\n//       alert('ID and email is missing. Please go back and try again.');\n//       return;\n//     }\n\n//     setIsLoading(true);\n\n//     try {\n//       const response = await apiClient.post('/auth/verify-otp', { id, email, code });\n//       const token = response.data.token;\n//       if (token) {\n//         localStorage.setItem('token', token);\n//         localStorage.removeItem('id');\n//       }\n\n//       // Ô£à Role-based navigation\n//       if (user.role === 'admin') navigate('/admin');\n//       else if (user.role === 'tester') navigate('/tester');\n//       else navigate('/dashboard'); // fallback for any other role\n//     } catch (error: any) {\n//       alert(error.response?.data?.message || 'Invalid or expired OTP. Please try again.');\n//     } finally {\n//       setIsLoading(false);\n//     }\n//   };\n\n//   const handleResendOTP = async () => {\n//     if (!id) {\n//       alert('ID is missing. Please go back and try again.');\n//       return;\n//     }\n\n//     try {\n//       await apiClient.post('/resend-otp', { id });\n//       alert('New OTP sent to your email!');\n//       setOtp(['', '', '', '', '', '']);\n//       inputRefs.current[0]?.focus();\n//     } catch (error: any) {\n//       alert(error.response?.data?.message || 'Failed to resend OTP. Please try again.');\n//     }\n//   };\n\n//   return (\n//     <motion.div\n//       className=\"min-h-screen flex items-center justify-center p-4 relative overflow-hidden\"\n//       initial={{ opacity: 0 }}\n//       animate={{ opacity: 1 }}\n//       transition={{ duration: 0.5 }}\n//     >\n//       {/* Animated background */}\n//       <motion.div\n//         className=\"absolute inset-0 z-0\"\n//         initial={{ opacity: 0 }}\n//         animate={{ opacity: 1 }}\n//         transition={{ duration: 1 }}\n//       >\n//         <div className=\"absolute top-1/4 right-1/3 w-64 h-64 bg-secondary-dark/20 dark:bg-secondary-light/20 rounded-full blur-3xl animate-float\" />\n//         <div className=\"absolute bottom-1/4 left-1/3 w-64 h-64 bg-accent-dark/20 dark:bg-accent-light/20 rounded-full blur-3xl animate-pulse-slow\" />\n//       </motion.div>\n\n//       {/* Theme toggle */}\n//       <motion.button\n//         className=\"fixed top-4 right-4 p-2 rounded-full bg-[#e0e0e0] dark:bg-surface-light/50 backdrop-blur-sm z-50\"\n//         whileHover={{ scale: 1.1 }}\n//         whileTap={{ scale: 0.9 }}\n//         onClick={toggleTheme}\n//       >\n//         {theme === 'dark' ? (\n//           <Sun className=\"w-6 h-6 text-yellow-400\" />\n//         ) : (\n//           <Moon className=\"w-6 h-6 text-indigo-600\" />\n//         )}\n//       </motion.button>\n\n//       {/* OTP Form */}\n//       <AuthCard\n//         title=\"Verify Your Email\"\n//         subtitle={email \n//           ? `Enter the 6-digit code sent to ${email}`\n//           : \"Enter the 6-digit code sent to your email\"\n//         }\n//       >\n//         <form onSubmit={handleSubmit} className=\"space-y-6\">\n//           <div className=\"flex justify-center space-x-3\">\n//             {otp.map((digit, index) => (\n//               <motion.input\n//                 key={index}\n//                 ref={(el) => (inputRefs.current[index] = el)}\n//                 type=\"text\"\n//                 inputMode=\"numeric\"\n//                 pattern=\"[0-9]*\"\n//                 maxLength={1}\n//                 value={digit}\n//                 onChange={(e) => handleChange(index, e.target.value)}\n//                 onKeyDown={(e) => handleKeyDown(index, e)}\n//                 className={`w-12 h-12 text-center text-lg font-semibold rounded-lg outline-none transition-all duration-300\n//                   ${theme === 'dark'\n//                     ? 'bg-surface-dark/50 border border-secondary-dark/30 focus:border-secondary-dark text-text-dark'\n//                     : 'bg-surface-light/50 border border-secondary-light/30 focus:border-secondary-light text-text-light'\n//                   }`}\n//                 initial={{ scale: 0.9, opacity: 0 }}\n//                 animate={{ scale: 1, opacity: 1 }}\n//                 transition={{ delay: index * 0.1 }}\n//               />\n//             ))}\n//           </div>\n\n//           <Button type=\"submit\" isLoading={isLoading} className=\"w-full\">\n//             Verify\n//           </Button>\n\n//           <div className=\"text-center space-y-2\">\n//             <p className=\"text-sm\">\n//               Didn't receive the code{email ? ` at ${email}` : ''}?{' '}\n//               <button\n//                 type=\"button\"\n//                 className=\"text-secondary-dark dark:text-secondary-light hover:underline\"\n//                 onClick={handleResendOTP}\n//               >\n//                 Resend\n//               </button>\n//             </p>\n\n//             <button\n//               type=\"button\"\n//               className=\"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300\"\n//               onClick={() => navigate(-1)}\n//             >\n//               ÔåÉ Go back\n//             </button>\n//           </div>\n//         </form>\n//       </AuthCard>\n//     </motion.div>\n//   );\n// };\n\n// export default OTPVerificationPage;\n\n\n\n\n\n\nimport { useState, useRef, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { Sun, Moon } from 'lucide-react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport AuthCard from '../components/ui/AuthCard';\nimport Button from '../components/ui/Button';\nimport { useTheme } from '../context/ThemeContext';\nimport apiClient from '../lib/api';\n\nconst OTPVerificationPage = () => {\n  const { theme, toggleTheme } = useTheme();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  useEffect(() => {\n    document.title = 'Verify | syra';\n  }, []);\n\n\n  // useEffect(() => {\n  //   if (!location.state?.email) {\n  //     // No context, redirect to login\n  //     navigate('/');\n  //   }\n  // }, [location]);\n\n  // OTP state (6 digits)\n  const [otp, setOtp] = useState(['', '', '', '', '', '']);\n  const inputRefs = useRef<(HTMLInputElement | null)[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // Fetch stored ID and email\n  const [id, setId] = useState(() => localStorage.getItem('id') || '');\n  // const [email, setEmail] = useState(() => {\n  //   const locationEmail = location.state?.email;\n  //   return locationEmail || localStorage.getItem('otp_email') || '';\n  // });\n\n  const [email, setEmail] = useState(() => localStorage.getItem('otp_email') || '');\n\n  useEffect(() => {\n    if (!email) {\n      alert(\"Email not found. Please sign up again.\");\n      navigate('/signup'); // or '/login' if more appropriate\n    }\n  }, [email, navigate]);\n\n\n\n  // Autofocus on first input\n  useEffect(() => {\n    inputRefs.current[0]?.focus();\n  }, []);\n\n  // Handle OTP digit input\n  const handleChange = (index: number, value: string) => {\n    if (value.length <= 1) {\n      const newOtp = [...otp];\n      newOtp[index] = value;\n      setOtp(newOtp);\n\n      if (value && index < 5) {\n        inputRefs.current[index + 1]?.focus();\n      }\n    }\n  };\n\n  // Backspace navigation\n  const handleKeyDown = (index: number, e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Backspace' && !otp[index] && index > 0) {\n      inputRefs.current[index - 1]?.focus();\n    }\n  };\n\n  // Ô£à Handle OTP Submission\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    const code = otp.join('');\n\n    if (code.length !== 6) {\n      alert('Please enter all 6 digits of the OTP code.');\n      return;\n    }\n\n    if (!id && !email) {\n      alert('ID and email are missing. Please go back and try again.');\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      const response = await apiClient.post('/api/auth/verify-otp', { id, email, code });\n\n      const { token, user } = response.data;\n\n      if (token && user) {\n        // Store token and user info\n        localStorage.setItem('token', token);\n        localStorage.setItem('user', JSON.stringify(user));\n        localStorage.removeItem('id');\n        localStorage.removeItem('otp_email'); // Ô£à Cleanup\n\n        // Ô£à Reset introSeen so ParticleText shows\n        localStorage.removeItem('introSeen');\n\n\n        // ­ƒöÉ Role-based redirection (type-safe)\n        type UserRole = 'admin' | 'tester' | 'user';\n        const role = user.role as UserRole;\n\n        switch (role) {\n          case 'admin':\n            navigate('/admin');\n            break;\n          case 'tester':\n            navigate('/testing');\n            break;\n          default:\n            navigate('/dashboard'); // Normal user\n        }\n      } else {\n        alert('Invalid response from server.');\n      }\n    } catch (error: any) {\n      alert(error.response?.data?.message || 'Invalid or expired OTP. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n\n  };\n\n  // Resend OTP handler\n  const handleResendOTP = async () => {\n    if (!email) {\n      alert('Email is missing. Please go back and try again.');\n      return;\n    }\n\n    try {\n      await apiClient.post('/api/auth/resend-otp', { email, type: 'signup' });\n      alert('New OTP sent to your email!');\n      setOtp(['', '', '', '', '', '']);\n      inputRefs.current[0]?.focus();\n    } catch (error: any) {\n      alert(error.response?.data?.message || 'Failed to resend OTP. Please try again.');\n    }\n  };\n\n  return (\n    <motion.div\n      className=\"min-h-screen flex items-center justify-center p-4 relative overflow-hidden\"\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ duration: 0.5 }}\n    >\n      {/* Background animations */}\n      <motion.div className=\"absolute inset-0 z-0\" initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ duration: 1 }}>\n        <div className=\"absolute top-1/4 right-1/3 w-64 h-64 bg-secondary-dark/20 dark:bg-secondary-light/20 rounded-full blur-3xl animate-float\" />\n        <div className=\"absolute bottom-1/4 left-1/3 w-64 h-64 bg-accent-dark/20 dark:bg-accent-light/20 rounded-full blur-3xl animate-pulse-slow\" />\n      </motion.div>\n\n      {/* Theme toggle button */}\n      <motion.button\n        className=\"fixed top-4 right-4 p-2 rounded-full bg-[#e0e0e0] dark:bg-surface-light/50 backdrop-blur-sm z-50\"\n        whileHover={{ scale: 1.1 }}\n        whileTap={{ scale: 0.9 }}\n        onClick={toggleTheme}\n      >\n        {theme === 'dark' ? <Sun className=\"w-6 h-6 text-yellow-400\" /> : <Moon className=\"w-6 h-6 text-indigo-600\" />}\n      </motion.button>\n\n      {/* OTP Verification Card */}\n      <AuthCard\n        title=\"Verify Your Email\"\n        subtitle={email ? `Enter the 6-digit code sent to ${email}` : 'Enter the 6-digit code sent to your email'}\n      >\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div className=\"flex justify-center space-x-3\">\n            {otp.map((digit, index) => (\n              <motion.input\n                key={index}\n                ref={(el) => (inputRefs.current[index] = el)}\n                type=\"text\"\n                inputMode=\"text\" // optional, helps mobile keyboards\n                pattern=\"[A-Za-z0-9]{1}\" // Ô£à Allow 1 alphanumeric character\n                maxLength={1}\n                value={digit}\n                onChange={(e) => handleChange(index, e.target.value)}\n                onKeyDown={(e) => handleKeyDown(index, e)}\n                className={`w-12 h-12 text-center text-lg font-semibold rounded-lg outline-none transition-all duration-300\n                  ${theme === 'dark'\n                    ? 'bg-surface-dark/50 border border-secondary-dark/30 focus:border-secondary-dark text-text-dark'\n                    : 'bg-surface-light/50 border border-secondary-light/30 focus:border-secondary-light text-text-light'\n                  }`}\n                initial={{ scale: 0.9, opacity: 0 }}\n                animate={{ scale: 1, opacity: 1 }}\n                transition={{ delay: index * 0.1 }}\n              />\n            ))}\n          </div>\n\n          <Button type=\"submit\" isLoading={isLoading} className=\"w-full\">\n            Verify\n          </Button>\n\n          {/* Resend & Go Back */}\n          <div className=\"text-center space-y-2\">\n            <p className=\"text-sm\">\n              Didn't receive the code{email ? ` at ${email}` : ''}?{' '}\n              <button\n                type=\"button\"\n                className=\"text-secondary-dark dark:text-secondary-light hover:underline\"\n                onClick={handleResendOTP}\n              >\n                Resend\n              </button>\n            </p>\n\n            <button\n              type=\"button\"\n              className=\"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300\"\n              onClick={() => navigate(-1)}\n            >\n              ÔåÉ Go back\n            </button>\n          </div>\n        </form>\n      </AuthCard>\n    </motion.div>\n  );\n};\n\nexport default OTPVerificationPage;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\yazhu\\Downloads\\scomode-main\\scomode-main\\src\\pages\\SignupPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
