function $N(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function ME(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var rx={exports:{}},Tf={},ix={exports:{}},en={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bw;function qN(){if(Bw)return en;Bw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function x(j){return j===null||typeof j!="object"?null:(j=y&&j[y]||j["@@iterator"],typeof j=="function"?j:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,T={};function M(j,X,ee){this.props=j,this.context=X,this.refs=T,this.updater=ee||v}M.prototype.isReactComponent={},M.prototype.setState=function(j,X){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,X,"setState")},M.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function _(){}_.prototype=M.prototype;function N(j,X,ee){this.props=j,this.context=X,this.refs=T,this.updater=ee||v}var A=N.prototype=new _;A.constructor=N,b(A,M.prototype),A.isPureReactComponent=!0;var R=Array.isArray,D=Object.prototype.hasOwnProperty,U={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function W(j,X,ee){var fe,Ae={},ke=null,Pe=null;if(X!=null)for(fe in X.ref!==void 0&&(Pe=X.ref),X.key!==void 0&&(ke=""+X.key),X)D.call(X,fe)&&!z.hasOwnProperty(fe)&&(Ae[fe]=X[fe]);var Xe=arguments.length-2;if(Xe===1)Ae.children=ee;else if(1<Xe){for(var Ke=Array(Xe),qe=0;qe<Xe;qe++)Ke[qe]=arguments[qe+2];Ae.children=Ke}if(j&&j.defaultProps)for(fe in Xe=j.defaultProps,Xe)Ae[fe]===void 0&&(Ae[fe]=Xe[fe]);return{$$typeof:n,type:j,key:ke,ref:Pe,props:Ae,_owner:U.current}}function O(j,X){return{$$typeof:n,type:j.type,key:X,ref:j.ref,props:j.props,_owner:j._owner}}function I(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function K(j){var X={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ee){return X[ee]})}var ie=/\/+/g;function oe(j,X){return typeof j=="object"&&j!==null&&j.key!=null?K(""+j.key):X.toString(36)}function Z(j,X,ee,fe,Ae){var ke=typeof j;(ke==="undefined"||ke==="boolean")&&(j=null);var Pe=!1;if(j===null)Pe=!0;else switch(ke){case"string":case"number":Pe=!0;break;case"object":switch(j.$$typeof){case n:case e:Pe=!0}}if(Pe)return Pe=j,Ae=Ae(Pe),j=fe===""?"."+oe(Pe,0):fe,R(Ae)?(ee="",j!=null&&(ee=j.replace(ie,"$&/")+"/"),Z(Ae,X,ee,"",function(qe){return qe})):Ae!=null&&(I(Ae)&&(Ae=O(Ae,ee+(!Ae.key||Pe&&Pe.key===Ae.key?"":(""+Ae.key).replace(ie,"$&/")+"/")+j)),X.push(Ae)),1;if(Pe=0,fe=fe===""?".":fe+":",R(j))for(var Xe=0;Xe<j.length;Xe++){ke=j[Xe];var Ke=fe+oe(ke,Xe);Pe+=Z(ke,X,ee,Ke,Ae)}else if(Ke=x(j),typeof Ke=="function")for(j=Ke.call(j),Xe=0;!(ke=j.next()).done;)ke=ke.value,Ke=fe+oe(ke,Xe++),Pe+=Z(ke,X,ee,Ke,Ae);else if(ke==="object")throw X=String(j),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Pe}function le(j,X,ee){if(j==null)return j;var fe=[],Ae=0;return Z(j,fe,"","",function(ke){return X.call(ee,ke,Ae++)}),fe}function Q(j){if(j._status===-1){var X=j._result;X=X(),X.then(function(ee){(j._status===0||j._status===-1)&&(j._status=1,j._result=ee)},function(ee){(j._status===0||j._status===-1)&&(j._status=2,j._result=ee)}),j._status===-1&&(j._status=0,j._result=X)}if(j._status===1)return j._result.default;throw j._result}var me={current:null},$={transition:null},re={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:$,ReactCurrentOwner:U};function te(){throw Error("act(...) is not supported in production builds of React.")}return en.Children={map:le,forEach:function(j,X,ee){le(j,function(){X.apply(this,arguments)},ee)},count:function(j){var X=0;return le(j,function(){X++}),X},toArray:function(j){return le(j,function(X){return X})||[]},only:function(j){if(!I(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},en.Component=M,en.Fragment=t,en.Profiler=i,en.PureComponent=N,en.StrictMode=r,en.Suspense=d,en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,en.act=te,en.cloneElement=function(j,X,ee){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var fe=b({},j.props),Ae=j.key,ke=j.ref,Pe=j._owner;if(X!=null){if(X.ref!==void 0&&(ke=X.ref,Pe=U.current),X.key!==void 0&&(Ae=""+X.key),j.type&&j.type.defaultProps)var Xe=j.type.defaultProps;for(Ke in X)D.call(X,Ke)&&!z.hasOwnProperty(Ke)&&(fe[Ke]=X[Ke]===void 0&&Xe!==void 0?Xe[Ke]:X[Ke])}var Ke=arguments.length-2;if(Ke===1)fe.children=ee;else if(1<Ke){Xe=Array(Ke);for(var qe=0;qe<Ke;qe++)Xe[qe]=arguments[qe+2];fe.children=Xe}return{$$typeof:n,type:j.type,key:Ae,ref:ke,props:fe,_owner:Pe}},en.createContext=function(j){return j={$$typeof:o,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:s,_context:j},j.Consumer=j},en.createElement=W,en.createFactory=function(j){var X=W.bind(null,j);return X.type=j,X},en.createRef=function(){return{current:null}},en.forwardRef=function(j){return{$$typeof:l,render:j}},en.isValidElement=I,en.lazy=function(j){return{$$typeof:p,_payload:{_status:-1,_result:j},_init:Q}},en.memo=function(j,X){return{$$typeof:f,type:j,compare:X===void 0?null:X}},en.startTransition=function(j){var X=$.transition;$.transition={};try{j()}finally{$.transition=X}},en.unstable_act=te,en.useCallback=function(j,X){return me.current.useCallback(j,X)},en.useContext=function(j){return me.current.useContext(j)},en.useDebugValue=function(){},en.useDeferredValue=function(j){return me.current.useDeferredValue(j)},en.useEffect=function(j,X){return me.current.useEffect(j,X)},en.useId=function(){return me.current.useId()},en.useImperativeHandle=function(j,X,ee){return me.current.useImperativeHandle(j,X,ee)},en.useInsertionEffect=function(j,X){return me.current.useInsertionEffect(j,X)},en.useLayoutEffect=function(j,X){return me.current.useLayoutEffect(j,X)},en.useMemo=function(j,X){return me.current.useMemo(j,X)},en.useReducer=function(j,X,ee){return me.current.useReducer(j,X,ee)},en.useRef=function(j){return me.current.useRef(j)},en.useState=function(j){return me.current.useState(j)},en.useSyncExternalStore=function(j,X,ee){return me.current.useSyncExternalStore(j,X,ee)},en.useTransition=function(){return me.current.useTransition()},en.version="18.3.1",en}var jw;function I0(){return jw||(jw=1,ix.exports=qN()),ix.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vw;function YN(){if(Vw)return Tf;Vw=1;var n=I0(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,d,f){var p,y={},x=null,v=null;f!==void 0&&(x=""+f),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(v=d.ref);for(p in d)r.call(d,p)&&!s.hasOwnProperty(p)&&(y[p]=d[p]);if(l&&l.defaultProps)for(p in d=l.defaultProps,d)y[p]===void 0&&(y[p]=d[p]);return{$$typeof:e,type:l,key:x,ref:v,props:y,_owner:i.current}}return Tf.Fragment=t,Tf.jsx=o,Tf.jsxs=o,Tf}var Hw;function ZN(){return Hw||(Hw=1,rx.exports=YN()),rx.exports}var m=ZN(),V=I0();const D0=ME(V),KN=$N({__proto__:null,default:D0},[V]);var Zm={},sx={exports:{}},Xi={},ax={exports:{}},ox={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ww;function JN(){return Ww||(Ww=1,function(n){function e($,re){var te=$.length;$.push(re);e:for(;0<te;){var j=te-1>>>1,X=$[j];if(0<i(X,re))$[j]=re,$[te]=X,te=j;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var re=$[0],te=$.pop();if(te!==re){$[0]=te;e:for(var j=0,X=$.length,ee=X>>>1;j<ee;){var fe=2*(j+1)-1,Ae=$[fe],ke=fe+1,Pe=$[ke];if(0>i(Ae,te))ke<X&&0>i(Pe,Ae)?($[j]=Pe,$[ke]=te,j=ke):($[j]=Ae,$[fe]=te,j=fe);else if(ke<X&&0>i(Pe,te))$[j]=Pe,$[ke]=te,j=ke;else break e}}return re}function i($,re){var te=$.sortIndex-re.sortIndex;return te!==0?te:$.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var d=[],f=[],p=1,y=null,x=3,v=!1,b=!1,T=!1,M=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A($){for(var re=t(f);re!==null;){if(re.callback===null)r(f);else if(re.startTime<=$)r(f),re.sortIndex=re.expirationTime,e(d,re);else break;re=t(f)}}function R($){if(T=!1,A($),!b)if(t(d)!==null)b=!0,Q(D);else{var re=t(f);re!==null&&me(R,re.startTime-$)}}function D($,re){b=!1,T&&(T=!1,_(W),W=-1),v=!0;var te=x;try{for(A(re),y=t(d);y!==null&&(!(y.expirationTime>re)||$&&!K());){var j=y.callback;if(typeof j=="function"){y.callback=null,x=y.priorityLevel;var X=j(y.expirationTime<=re);re=n.unstable_now(),typeof X=="function"?y.callback=X:y===t(d)&&r(d),A(re)}else r(d);y=t(d)}if(y!==null)var ee=!0;else{var fe=t(f);fe!==null&&me(R,fe.startTime-re),ee=!1}return ee}finally{y=null,x=te,v=!1}}var U=!1,z=null,W=-1,O=5,I=-1;function K(){return!(n.unstable_now()-I<O)}function ie(){if(z!==null){var $=n.unstable_now();I=$;var re=!0;try{re=z(!0,$)}finally{re?oe():(U=!1,z=null)}}else U=!1}var oe;if(typeof N=="function")oe=function(){N(ie)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,le=Z.port2;Z.port1.onmessage=ie,oe=function(){le.postMessage(null)}}else oe=function(){M(ie,0)};function Q($){z=$,U||(U=!0,oe())}function me($,re){W=M(function(){$(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){b||v||(b=!0,Q(D))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function($){switch(x){case 1:case 2:case 3:var re=3;break;default:re=x}var te=x;x=re;try{return $()}finally{x=te}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,re){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var te=x;x=$;try{return re()}finally{x=te}},n.unstable_scheduleCallback=function($,re,te){var j=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?j+te:j):te=j,$){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=te+X,$={id:p++,callback:re,priorityLevel:$,startTime:te,expirationTime:X,sortIndex:-1},te>j?($.sortIndex=te,e(f,$),t(d)===null&&$===t(f)&&(T?(_(W),W=-1):T=!0,me(R,te-j))):($.sortIndex=X,e(d,$),b||v||(b=!0,Q(D))),$},n.unstable_shouldYield=K,n.unstable_wrapCallback=function($){var re=x;return function(){var te=x;x=re;try{return $.apply(this,arguments)}finally{x=te}}}}(ox)),ox}var Gw;function QN(){return Gw||(Gw=1,ax.exports=JN()),ax.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xw;function ek(){if(Xw)return Xi;Xw=1;var n=I0(),e=QN();function t(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,g=1;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(a,c){o(a,c),o(a+"Capture",c)}function o(a,c){for(i[a]=c,a=0;a<c.length;a++)r.add(c[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},y={};function x(a){return d.call(y,a)?!0:d.call(p,a)?!1:f.test(a)?y[a]=!0:(p[a]=!0,!1)}function v(a,c,g,S){if(g!==null&&g.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return S?!1:g!==null?!g.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function b(a,c,g,S){if(c===null||typeof c>"u"||v(a,c,g,S))return!0;if(S)return!1;if(g!==null)switch(g.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function T(a,c,g,S,C,P,F){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=S,this.attributeNamespace=C,this.mustUseProperty=g,this.propertyName=a,this.type=c,this.sanitizeURL=P,this.removeEmptyString=F}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){M[a]=new T(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];M[c]=new T(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){M[a]=new T(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){M[a]=new T(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){M[a]=new T(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){M[a]=new T(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){M[a]=new T(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){M[a]=new T(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){M[a]=new T(a,5,!1,a.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function N(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(_,N);M[c]=new T(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(_,N);M[c]=new T(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(_,N);M[c]=new T(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){M[a]=new T(a,1,!1,a.toLowerCase(),null,!1,!1)}),M.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){M[a]=new T(a,1,!1,a.toLowerCase(),null,!0,!0)});function A(a,c,g,S){var C=M.hasOwnProperty(c)?M[c]:null;(C!==null?C.type!==0:S||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(b(c,g,C,S)&&(g=null),S||C===null?x(c)&&(g===null?a.removeAttribute(c):a.setAttribute(c,""+g)):C.mustUseProperty?a[C.propertyName]=g===null?C.type===3?!1:"":g:(c=C.attributeName,S=C.attributeNamespace,g===null?a.removeAttribute(c):(C=C.type,g=C===3||C===4&&g===!0?"":""+g,S?a.setAttributeNS(S,c,g):a.setAttribute(c,g))))}var R=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),U=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),K=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),le=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),$=Symbol.iterator;function re(a){return a===null||typeof a!="object"?null:(a=$&&a[$]||a["@@iterator"],typeof a=="function"?a:null)}var te=Object.assign,j;function X(a){if(j===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);j=c&&c[1]||""}return`
`+j+a}var ee=!1;function fe(a,c){if(!a||ee)return"";ee=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(we){var S=we}Reflect.construct(a,[],c)}else{try{c.call()}catch(we){S=we}a.call(c.prototype)}else{try{throw Error()}catch(we){S=we}a()}}catch(we){if(we&&S&&typeof we.stack=="string"){for(var C=we.stack.split(`
`),P=S.stack.split(`
`),F=C.length-1,J=P.length-1;1<=F&&0<=J&&C[F]!==P[J];)J--;for(;1<=F&&0<=J;F--,J--)if(C[F]!==P[J]){if(F!==1||J!==1)do if(F--,J--,0>J||C[F]!==P[J]){var se=`
`+C[F].replace(" at new "," at ");return a.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",a.displayName)),se}while(1<=F&&0<=J);break}}}finally{ee=!1,Error.prepareStackTrace=g}return(a=a?a.displayName||a.name:"")?X(a):""}function Ae(a){switch(a.tag){case 5:return X(a.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return a=fe(a.type,!1),a;case 11:return a=fe(a.type.render,!1),a;case 1:return a=fe(a.type,!0),a;default:return""}}function ke(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case z:return"Fragment";case U:return"Portal";case O:return"Profiler";case W:return"StrictMode";case oe:return"Suspense";case Z:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case K:return(a.displayName||"Context")+".Consumer";case I:return(a._context.displayName||"Context")+".Provider";case ie:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case le:return c=a.displayName||null,c!==null?c:ke(a.type)||"Memo";case Q:c=a._payload,a=a._init;try{return ke(a(c))}catch{}}return null}function Pe(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(c);case 8:return c===W?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Xe(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ke(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function qe(a){var c=Ke(a)?"checked":"value",g=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),S=""+a[c];if(!a.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var C=g.get,P=g.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return C.call(this)},set:function(F){S=""+F,P.call(this,F)}}),Object.defineProperty(a,c,{enumerable:g.enumerable}),{getValue:function(){return S},setValue:function(F){S=""+F},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function lt(a){a._valueTracker||(a._valueTracker=qe(a))}function ne(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var g=c.getValue(),S="";return a&&(S=Ke(a)?a.checked?"true":"false":a.value),a=S,a!==g?(c.setValue(a),!0):!1}function ze(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ce(a,c){var g=c.checked;return te({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??a._wrapperState.initialChecked})}function je(a,c){var g=c.defaultValue==null?"":c.defaultValue,S=c.checked!=null?c.checked:c.defaultChecked;g=Xe(c.value!=null?c.value:g),a._wrapperState={initialChecked:S,initialValue:g,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Ne(a,c){c=c.checked,c!=null&&A(a,"checked",c,!1)}function xt(a,c){Ne(a,c);var g=Xe(c.value),S=c.type;if(g!=null)S==="number"?(g===0&&a.value===""||a.value!=g)&&(a.value=""+g):a.value!==""+g&&(a.value=""+g);else if(S==="submit"||S==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?H(a,c.type,g):c.hasOwnProperty("defaultValue")&&H(a,c.type,Xe(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function et(a,c,g){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var S=c.type;if(!(S!=="submit"&&S!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,g||c===a.value||(a.value=c),a.defaultValue=c}g=a.name,g!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,g!==""&&(a.name=g)}function H(a,c,g){(c!=="number"||ze(a.ownerDocument)!==a)&&(g==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+g&&(a.defaultValue=""+g))}var B=Array.isArray;function pe(a,c,g,S){if(a=a.options,c){c={};for(var C=0;C<g.length;C++)c["$"+g[C]]=!0;for(g=0;g<a.length;g++)C=c.hasOwnProperty("$"+a[g].value),a[g].selected!==C&&(a[g].selected=C),C&&S&&(a[g].defaultSelected=!0)}else{for(g=""+Xe(g),c=null,C=0;C<a.length;C++){if(a[C].value===g){a[C].selected=!0,S&&(a[C].defaultSelected=!0);return}c!==null||a[C].disabled||(c=a[C])}c!==null&&(c.selected=!0)}}function Ue(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return te({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Oe(a,c){var g=c.value;if(g==null){if(g=c.children,c=c.defaultValue,g!=null){if(c!=null)throw Error(t(92));if(B(g)){if(1<g.length)throw Error(t(93));g=g[0]}c=g}c==null&&(c=""),g=c}a._wrapperState={initialValue:Xe(g)}}function Le(a,c){var g=Xe(c.value),S=Xe(c.defaultValue);g!=null&&(g=""+g,g!==a.value&&(a.value=g),c.defaultValue==null&&a.defaultValue!==g&&(a.defaultValue=g)),S!=null&&(a.defaultValue=""+S)}function pt(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function Ze(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function it(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?Ze(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var St,Ot=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,g,S,C){MSApp.execUnsafeLocalFunction(function(){return a(c,g,S,C)})}:a}(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(St=St||document.createElement("div"),St.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=St.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function Ie(a,c){if(c){var g=a.firstChild;if(g&&g===a.lastChild&&g.nodeType===3){g.nodeValue=c;return}}a.textContent=c}var Qt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xt=["Webkit","ms","Moz","O"];Object.keys(Qt).forEach(function(a){Xt.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),Qt[c]=Qt[a]})});function Pt(a,c,g){return c==null||typeof c=="boolean"||c===""?"":g||typeof c!="number"||c===0||Qt.hasOwnProperty(a)&&Qt[a]?(""+c).trim():c+"px"}function bt(a,c){a=a.style;for(var g in c)if(c.hasOwnProperty(g)){var S=g.indexOf("--")===0,C=Pt(g,c[g],S);g==="float"&&(g="cssFloat"),S?a.setProperty(g,C):a[g]=C}}var ht=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ft(a,c){if(c){if(ht[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function tn(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _n=null;function jt(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var We=null,ae=null,$e=null;function Je(a){if(a=Bs(a)){if(typeof We!="function")throw Error(t(280));var c=a.stateNode;c&&(c=cd(c),We(a.stateNode,a.type,c))}}function Tt(a){ae?$e?$e.push(a):$e=[a]:ae=a}function Mt(){if(ae){var a=ae,c=$e;if($e=ae=null,Je(a),c)for(a=0;a<c.length;a++)Je(c[a])}}function fn(a,c){return a(c)}function un(){}var Ln=!1;function tr(a,c,g){if(Ln)return a(c,g);Ln=!0;try{return fn(a,c,g)}finally{Ln=!1,(ae!==null||$e!==null)&&(un(),Mt())}}function sn(a,c){var g=a.stateNode;if(g===null)return null;var S=cd(g);if(S===null)return null;g=S[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(a=a.type,S=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!S;break e;default:a=!1}if(a)return null;if(g&&typeof g!="function")throw Error(t(231,c,typeof g));return g}var nr=!1;if(l)try{var Lr={};Object.defineProperty(Lr,"passive",{get:function(){nr=!0}}),window.addEventListener("test",Lr,Lr),window.removeEventListener("test",Lr,Lr)}catch{nr=!1}function Ql(a,c,g,S,C,P,F,J,se){var we=Array.prototype.slice.call(arguments,3);try{c.apply(g,we)}catch(Fe){this.onError(Fe)}}var Ns=!1,ks=null,Qi=!1,ma=null,Cu={onError:function(a){Ns=!0,ks=a}};function Nu(a,c,g,S,C,P,F,J,se){Ns=!1,ks=null,Ql.apply(Cu,arguments)}function kh(a,c,g,S,C,P,F,J,se){if(Nu.apply(this,arguments),Ns){if(Ns){var we=ks;Ns=!1,ks=null}else throw Error(t(198));Qi||(Qi=!0,ma=we)}}function Rs(a){var c=a,g=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(g=c.return),a=c.return;while(a)}return c.tag===3?g:null}function ku(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function G(a){if(Rs(a)!==a)throw Error(t(188))}function ge(a){var c=a.alternate;if(!c){if(c=Rs(a),c===null)throw Error(t(188));return c!==a?null:a}for(var g=a,S=c;;){var C=g.return;if(C===null)break;var P=C.alternate;if(P===null){if(S=C.return,S!==null){g=S;continue}break}if(C.child===P.child){for(P=C.child;P;){if(P===g)return G(C),a;if(P===S)return G(C),c;P=P.sibling}throw Error(t(188))}if(g.return!==S.return)g=C,S=P;else{for(var F=!1,J=C.child;J;){if(J===g){F=!0,g=C,S=P;break}if(J===S){F=!0,S=C,g=P;break}J=J.sibling}if(!F){for(J=P.child;J;){if(J===g){F=!0,g=P,S=C;break}if(J===S){F=!0,S=P,g=C;break}J=J.sibling}if(!F)throw Error(t(189))}}if(g.alternate!==S)throw Error(t(190))}if(g.tag!==3)throw Error(t(188));return g.stateNode.current===g?a:c}function Se(a){return a=ge(a),a!==null?be(a):null}function be(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=be(a);if(c!==null)return c;a=a.sibling}return null}var _e=e.unstable_scheduleCallback,nt=e.unstable_cancelCallback,wt=e.unstable_shouldYield,At=e.unstable_requestPaint,rt=e.unstable_now,It=e.unstable_getCurrentPriorityLevel,kt=e.unstable_ImmediatePriority,Lt=e.unstable_UserBlockingPriority,wn=e.unstable_NormalPriority,wr=e.unstable_LowPriority,Sn=e.unstable_IdlePriority,Vn=null,vt=null;function ut(a){if(vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(Vn,a,void 0,(a.current.flags&128)===128)}catch{}}var On=Math.clz32?Math.clz32:ms,$t=Math.log,Fn=Math.LN2;function ms(a){return a>>>=0,a===0?32:31-($t(a)/Fn|0)|0}var jr=64,Hn=4194304;function Tn(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function pi(a,c){var g=a.pendingLanes;if(g===0)return 0;var S=0,C=a.suspendedLanes,P=a.pingedLanes,F=g&268435455;if(F!==0){var J=F&~C;J!==0?S=Tn(J):(P&=F,P!==0&&(S=Tn(P)))}else F=g&~C,F!==0?S=Tn(F):P!==0&&(S=Tn(P));if(S===0)return 0;if(c!==0&&c!==S&&(c&C)===0&&(C=S&-S,P=c&-c,C>=P||C===16&&(P&4194240)!==0))return c;if((S&4)!==0&&(S|=g&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=S;0<c;)g=31-On(c),C=1<<g,S|=a[g],c&=~C;return S}function Bo(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sr(a,c){for(var g=a.suspendedLanes,S=a.pingedLanes,C=a.expirationTimes,P=a.pendingLanes;0<P;){var F=31-On(P),J=1<<F,se=C[F];se===-1?((J&g)===0||(J&S)!==0)&&(C[F]=Bo(J,c)):se<=c&&(a.expiredLanes|=J),P&=~J}}function ga(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Jr(){var a=jr;return jr<<=1,(jr&4194240)===0&&(jr=64),a}function jo(a){for(var c=[],g=0;31>g;g++)c.push(a);return c}function ec(a,c,g){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-On(c),a[c]=g}function Ay(a,c){var g=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var S=a.eventTimes;for(a=a.expirationTimes;0<g;){var C=31-On(g),P=1<<C;c[C]=0,S[C]=-1,a[C]=-1,g&=~P}}function Vo(a,c){var g=a.entangledLanes|=c;for(a=a.entanglements;g;){var S=31-On(g),C=1<<S;C&c|a[S]&c&&(a[S]|=c),g&=~C}}var an=0;function Ho(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var tc,Rh,im,Ru,Pu,ja=!1,Lu=[],gs=null,qt=null,Ps=null,Va=new Map,Wo=new Map,ya=[],Cy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rr(a,c){switch(a){case"focusin":case"focusout":gs=null;break;case"dragenter":case"dragleave":qt=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":Va.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wo.delete(c.pointerId)}}function Ha(a,c,g,S,C,P){return a===null||a.nativeEvent!==P?(a={blockedOn:c,domEventName:g,eventSystemFlags:S,nativeEvent:P,targetContainers:[C]},c!==null&&(c=Bs(c),c!==null&&Rh(c)),a):(a.eventSystemFlags|=S,c=a.targetContainers,C!==null&&c.indexOf(C)===-1&&c.push(C),a)}function Ny(a,c,g,S,C){switch(c){case"focusin":return gs=Ha(gs,a,c,g,S,C),!0;case"dragenter":return qt=Ha(qt,a,c,g,S,C),!0;case"mouseover":return Ps=Ha(Ps,a,c,g,S,C),!0;case"pointerover":var P=C.pointerId;return Va.set(P,Ha(Va.get(P)||null,a,c,g,S,C)),!0;case"gotpointercapture":return P=C.pointerId,Wo.set(P,Ha(Wo.get(P)||null,a,c,g,S,C)),!0}return!1}function Iu(a){var c=Ma(a.target);if(c!==null){var g=Rs(c);if(g!==null){if(c=g.tag,c===13){if(c=ku(g),c!==null){a.blockedOn=c,Pu(a.priority,function(){im(g)});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){a.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Du(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var g=Ui(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(g===null){g=a.nativeEvent;var S=new g.constructor(g.type,g);_n=S,g.target.dispatchEvent(S),_n=null}else return c=Bs(g),c!==null&&Rh(c),a.blockedOn=g,!1;c.shift()}return!0}function nc(a,c,g){Du(a)&&g.delete(c)}function ys(){ja=!1,gs!==null&&Du(gs)&&(gs=null),qt!==null&&Du(qt)&&(qt=null),Ps!==null&&Du(Ps)&&(Ps=null),Va.forEach(nc),Wo.forEach(nc)}function rc(a,c){a.blockedOn===c&&(a.blockedOn=null,ja||(ja=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ys)))}function ic(a){function c(C){return rc(C,a)}if(0<Lu.length){rc(Lu[0],a);for(var g=1;g<Lu.length;g++){var S=Lu[g];S.blockedOn===a&&(S.blockedOn=null)}}for(gs!==null&&rc(gs,a),qt!==null&&rc(qt,a),Ps!==null&&rc(Ps,a),Va.forEach(c),Wo.forEach(c),g=0;g<ya.length;g++)S=ya[g],S.blockedOn===a&&(S.blockedOn=null);for(;0<ya.length&&(g=ya[0],g.blockedOn===null);)Iu(g),g.blockedOn===null&&ya.shift()}var Vr=R.ReactCurrentBatchConfig,Di=!0;function Uu(a,c,g,S){var C=an,P=Vr.transition;Vr.transition=null;try{an=1,Ou(a,c,g,S)}finally{an=C,Vr.transition=P}}function Ph(a,c,g,S){var C=an,P=Vr.transition;Vr.transition=null;try{an=4,Ou(a,c,g,S)}finally{an=C,Vr.transition=P}}function Ou(a,c,g,S){if(Di){var C=Ui(a,c,g,S);if(C===null)rd(a,c,S,Fu,g),rr(a,S);else if(Ny(C,a,c,g,S))S.stopPropagation();else if(rr(a,S),c&4&&-1<Cy.indexOf(a)){for(;C!==null;){var P=Bs(C);if(P!==null&&tc(P),P=Ui(a,c,g,S),P===null&&rd(a,c,S,Fu,g),P===C)break;C=P}C!==null&&S.stopPropagation()}else rd(a,c,S,null,g)}}var Fu=null;function Ui(a,c,g,S){if(Fu=null,a=jt(S),a=Ma(a),a!==null)if(c=Rs(a),c===null)a=null;else if(g=c.tag,g===13){if(a=ku(c),a!==null)return a;a=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return Fu=a,null}function sm(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(It()){case kt:return 1;case Lt:return 4;case wn:case wr:return 16;case Sn:return 536870912;default:return 16}default:return 16}}var es=null,Lh=null,Qr=null;function sc(){if(Qr)return Qr;var a,c=Lh,g=c.length,S,C="value"in es?es.value:es.textContent,P=C.length;for(a=0;a<g&&c[a]===C[a];a++);var F=g-a;for(S=1;S<=F&&c[g-S]===C[P-S];S++);return Qr=C.slice(a,1<S?1-S:void 0)}function Wa(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function Ls(){return!0}function zu(){return!1}function Hr(a){function c(g,S,C,P,F){this._reactName=g,this._targetInst=C,this.type=S,this.nativeEvent=P,this.target=F,this.currentTarget=null;for(var J in a)a.hasOwnProperty(J)&&(g=a[J],this[J]=g?g(P):P[J]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Ls:zu,this.isPropagationStopped=zu,this}return te(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Ls)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Ls)},persist:function(){},isPersistent:Ls}),c}var Ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ac=Hr(Ga),Xa=te({},Ga,{view:0,detail:0}),Go=Hr(Xa),ei,Oi,Fi,Xo=te({},Xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:va,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Fi&&(Fi&&a.type==="mousemove"?(ei=a.screenX-Fi.screenX,Oi=a.screenY-Fi.screenY):Oi=ei=0,Fi=a),ei)},movementY:function(a){return"movementY"in a?a.movementY:Oi}}),Ih=Hr(Xo),Is=te({},Xo,{dataTransfer:0}),xa=Hr(Is),Bu=te({},Xa,{relatedTarget:0}),ju=Hr(Bu),Vu=te({},Ga,{animationName:0,elapsedTime:0,pseudoElement:0}),am=Hr(Vu),om=te({},Ga,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Dh=Hr(om),Hu=te({},Ga,{data:0}),Uh=Hr(Hu),lm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Oh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $o(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=Oh[a])?!!c[a]:!1}function va(){return $o}var Wu=te({},Xa,{key:function(a){if(a.key){var c=lm[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Wa(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?cm[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:va,charCode:function(a){return a.type==="keypress"?Wa(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Wa(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Gu=Hr(Wu),zi=te({},Xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mi=Hr(zi),$a=te({},Xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:va}),Ds=Hr($a),Us=te({},Ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),qa=Hr(Us),um=te({},Xo,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Fh=Hr(um),zh=[9,13,27,32],Wr=l&&"CompositionEvent"in window,br=null;l&&"documentMode"in document&&(br=document.documentMode);var Nn=l&&"TextEvent"in window&&!br,qo=l&&(!Wr||br&&8<br&&11>=br),Bi=" ",Bh=!1;function jh(a,c){switch(a){case"keyup":return zh.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xu(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var _a=!1;function dm(a,c){switch(a){case"compositionend":return Xu(c);case"keypress":return c.which!==32?null:(Bh=!0,Bi);case"textInput":return a=c.data,a===Bi&&Bh?null:a;default:return null}}function oc(a,c){if(_a)return a==="compositionend"||!Wr&&jh(a,c)?(a=sc(),Qr=Lh=es=null,_a=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return qo&&c.locale!=="ko"?null:c.data;default:return null}}var Yo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $u(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!Yo[a.type]:c==="textarea"}function Zo(a,c,g,S){Tt(S),c=id(c,"onChange"),0<c.length&&(g=new ac("onChange","change",null,g,S),a.push({event:g,listeners:c}))}var wa=null,Ko=null;function hm(a){tl(a,0)}function Os(a){var c=Wn(a);if(ne(c))return a}function fm(a,c){if(a==="change")return c}var Jo=!1;if(l){var ti;if(l){var Ya="oninput"in document;if(!Ya){var Za=document.createElement("div");Za.setAttribute("oninput","return;"),Ya=typeof Za.oninput=="function"}ti=Ya}else ti=!1;Jo=ti&&(!document.documentMode||9<document.documentMode)}function ts(){wa&&(wa.detachEvent("onpropertychange",qu),Ko=wa=null)}function qu(a){if(a.propertyName==="value"&&Os(Ko)){var c=[];Zo(c,Ko,a,jt(a)),tr(hm,c)}}function Qo(a,c,g){a==="focusin"?(ts(),wa=c,Ko=g,wa.attachEvent("onpropertychange",qu)):a==="focusout"&&ts()}function pm(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Os(Ko)}function Vh(a,c){if(a==="click")return Os(c)}function In(a,c){if(a==="input"||a==="change")return Os(c)}function Yu(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var gi=typeof Object.is=="function"?Object.is:Yu;function Ka(a,c){if(gi(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var g=Object.keys(a),S=Object.keys(c);if(g.length!==S.length)return!1;for(S=0;S<g.length;S++){var C=g[S];if(!d.call(c,C)||!gi(a[C],c[C]))return!1}return!0}function lc(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function yi(a,c){var g=lc(a);a=0;for(var S;g;){if(g.nodeType===3){if(S=a+g.textContent.length,a<=c&&S>=c)return{node:g,offset:c-a};a=S}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=lc(g)}}function Ja(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?Ja(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function Dn(){for(var a=window,c=ze();c instanceof a.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)a=c.contentWindow;else break;c=ze(a.document)}return c}function hr(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function fr(a){var c=Dn(),g=a.focusedElem,S=a.selectionRange;if(c!==g&&g&&g.ownerDocument&&Ja(g.ownerDocument.documentElement,g)){if(S!==null&&hr(g)){if(c=S.start,a=S.end,a===void 0&&(a=c),"selectionStart"in g)g.selectionStart=c,g.selectionEnd=Math.min(a,g.value.length);else if(a=(c=g.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var C=g.textContent.length,P=Math.min(S.start,C);S=S.end===void 0?P:Math.min(S.end,C),!a.extend&&P>S&&(C=S,S=P,P=C),C=yi(g,P);var F=yi(g,S);C&&F&&(a.rangeCount!==1||a.anchorNode!==C.node||a.anchorOffset!==C.offset||a.focusNode!==F.node||a.focusOffset!==F.offset)&&(c=c.createRange(),c.setStart(C.node,C.offset),a.removeAllRanges(),P>S?(a.addRange(c),a.extend(F.node,F.offset)):(c.setEnd(F.node,F.offset),a.addRange(c)))}}for(c=[],a=g;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<c.length;g++)a=c[g],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Zu=l&&"documentMode"in document&&11>=document.documentMode,xs=null,Qa=null,cc=null,pr=!1;function Ku(a,c,g){var S=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;pr||xs==null||xs!==ze(S)||(S=xs,"selectionStart"in S&&hr(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),cc&&Ka(cc,S)||(cc=S,S=id(Qa,"onSelect"),0<S.length&&(c=new ac("onSelect","select",null,c,g),a.push({event:c,listeners:S}),c.target=xs)))}function el(a,c){var g={};return g[a.toLowerCase()]=c.toLowerCase(),g["Webkit"+a]="webkit"+c,g["Moz"+a]="moz"+c,g}var Sa={animationend:el("Animation","AnimationEnd"),animationiteration:el("Animation","AnimationIteration"),animationstart:el("Animation","AnimationStart"),transitionend:el("Transition","TransitionEnd")},ns={},rs={};l&&(rs=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function vs(a){if(ns[a])return ns[a];if(!Sa[a])return a;var c=Sa[a],g;for(g in c)if(c.hasOwnProperty(g)&&g in rs)return ns[a]=c[g];return a}var uc=vs("animationend"),dc=vs("animationiteration"),Hh=vs("animationstart"),Wh=vs("transitionend"),Gh=new Map,Xh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fs(a,c){Gh.set(a,c),s(c,[a])}for(var Ju=0;Ju<Xh.length;Ju++){var hc=Xh[Ju],fc=hc.toLowerCase(),mm=hc[0].toUpperCase()+hc.slice(1);Fs(fc,"on"+mm)}Fs(uc,"onAnimationEnd"),Fs(dc,"onAnimationIteration"),Fs(Hh,"onAnimationStart"),Fs("dblclick","onDoubleClick"),Fs("focusin","onFocus"),Fs("focusout","onBlur"),Fs(Wh,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qu=new Set("cancel close invalid load scroll toggle".split(" ").concat(ba));function ed(a,c,g){var S=a.type||"unknown-event";a.currentTarget=g,kh(S,c,void 0,a),a.currentTarget=null}function tl(a,c){c=(c&4)!==0;for(var g=0;g<a.length;g++){var S=a[g],C=S.event;S=S.listeners;e:{var P=void 0;if(c)for(var F=S.length-1;0<=F;F--){var J=S[F],se=J.instance,we=J.currentTarget;if(J=J.listener,se!==P&&C.isPropagationStopped())break e;ed(C,J,we),P=se}else for(F=0;F<S.length;F++){if(J=S[F],se=J.instance,we=J.currentTarget,J=J.listener,se!==P&&C.isPropagationStopped())break e;ed(C,J,we),P=se}}}if(Qi)throw a=ma,Qi=!1,ma=null,a}function bn(a,c){var g=c[no];g===void 0&&(g=c[no]=new Set);var S=a+"__bubble";g.has(S)||(nd(c,a,2,!1),g.add(S))}function td(a,c,g){var S=0;c&&(S|=4),nd(g,a,S,c)}var pc="_reactListening"+Math.random().toString(36).slice(2);function nl(a){if(!a[pc]){a[pc]=!0,r.forEach(function(g){g!=="selectionchange"&&(Qu.has(g)||td(g,!1,a),td(g,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[pc]||(c[pc]=!0,td("selectionchange",!1,c))}}function nd(a,c,g,S){switch(sm(c)){case 1:var C=Uu;break;case 4:C=Ph;break;default:C=Ou}g=C.bind(null,c,g,a),C=void 0,!nr||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(C=!0),S?C!==void 0?a.addEventListener(c,g,{capture:!0,passive:C}):a.addEventListener(c,g,!0):C!==void 0?a.addEventListener(c,g,{passive:C}):a.addEventListener(c,g,!1)}function rd(a,c,g,S,C){var P=S;if((c&1)===0&&(c&2)===0&&S!==null)e:for(;;){if(S===null)return;var F=S.tag;if(F===3||F===4){var J=S.stateNode.containerInfo;if(J===C||J.nodeType===8&&J.parentNode===C)break;if(F===4)for(F=S.return;F!==null;){var se=F.tag;if((se===3||se===4)&&(se=F.stateNode.containerInfo,se===C||se.nodeType===8&&se.parentNode===C))return;F=F.return}for(;J!==null;){if(F=Ma(J),F===null)return;if(se=F.tag,se===5||se===6){S=P=F;continue e}J=J.parentNode}}S=S.return}tr(function(){var we=P,Fe=jt(g),Be=[];e:{var De=Gh.get(a);if(De!==void 0){var st=ac,ft=a;switch(a){case"keypress":if(Wa(g)===0)break e;case"keydown":case"keyup":st=Gu;break;case"focusin":ft="focus",st=ju;break;case"focusout":ft="blur",st=ju;break;case"beforeblur":case"afterblur":st=ju;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=Ih;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=xa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=Ds;break;case uc:case dc:case Hh:st=am;break;case Wh:st=qa;break;case"scroll":st=Go;break;case"wheel":st=Fh;break;case"copy":case"cut":case"paste":st=Dh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=mi}var mt=(c&4)!==0,sr=!mt&&a==="scroll",ye=mt?De!==null?De+"Capture":null:De;mt=[];for(var ce=we,xe;ce!==null;){xe=ce;var He=xe.stateNode;if(xe.tag===5&&He!==null&&(xe=He,ye!==null&&(He=sn(ce,ye),He!=null&&mt.push(rl(ce,He,xe)))),sr)break;ce=ce.return}0<mt.length&&(De=new st(De,ft,null,g,Fe),Be.push({event:De,listeners:mt}))}}if((c&7)===0){e:{if(De=a==="mouseover"||a==="pointerover",st=a==="mouseout"||a==="pointerout",De&&g!==_n&&(ft=g.relatedTarget||g.fromElement)&&(Ma(ft)||ft[xi]))break e;if((st||De)&&(De=Fe.window===Fe?Fe:(De=Fe.ownerDocument)?De.defaultView||De.parentWindow:window,st?(ft=g.relatedTarget||g.toElement,st=we,ft=ft?Ma(ft):null,ft!==null&&(sr=Rs(ft),ft!==sr||ft.tag!==5&&ft.tag!==6)&&(ft=null)):(st=null,ft=we),st!==ft)){if(mt=Ih,He="onMouseLeave",ye="onMouseEnter",ce="mouse",(a==="pointerout"||a==="pointerover")&&(mt=mi,He="onPointerLeave",ye="onPointerEnter",ce="pointer"),sr=st==null?De:Wn(st),xe=ft==null?De:Wn(ft),De=new mt(He,ce+"leave",st,g,Fe),De.target=sr,De.relatedTarget=xe,He=null,Ma(Fe)===we&&(mt=new mt(ye,ce+"enter",ft,g,Fe),mt.target=xe,mt.relatedTarget=sr,He=mt),sr=He,st&&ft)t:{for(mt=st,ye=ft,ce=0,xe=mt;xe;xe=eo(xe))ce++;for(xe=0,He=ye;He;He=eo(He))xe++;for(;0<ce-xe;)mt=eo(mt),ce--;for(;0<xe-ce;)ye=eo(ye),xe--;for(;ce--;){if(mt===ye||ye!==null&&mt===ye.alternate)break t;mt=eo(mt),ye=eo(ye)}mt=null}else mt=null;st!==null&&gm(Be,De,st,mt,!1),ft!==null&&sr!==null&&gm(Be,sr,ft,mt,!0)}}e:{if(De=we?Wn(we):window,st=De.nodeName&&De.nodeName.toLowerCase(),st==="select"||st==="input"&&De.type==="file")var _t=fm;else if($u(De))if(Jo)_t=In;else{_t=pm;var Ct=Qo}else(st=De.nodeName)&&st.toLowerCase()==="input"&&(De.type==="checkbox"||De.type==="radio")&&(_t=Vh);if(_t&&(_t=_t(a,we))){Zo(Be,_t,g,Fe);break e}Ct&&Ct(a,De,we),a==="focusout"&&(Ct=De._wrapperState)&&Ct.controlled&&De.type==="number"&&H(De,"number",De.value)}switch(Ct=we?Wn(we):window,a){case"focusin":($u(Ct)||Ct.contentEditable==="true")&&(xs=Ct,Qa=we,cc=null);break;case"focusout":cc=Qa=xs=null;break;case"mousedown":pr=!0;break;case"contextmenu":case"mouseup":case"dragend":pr=!1,Ku(Be,g,Fe);break;case"selectionchange":if(Zu)break;case"keydown":case"keyup":Ku(Be,g,Fe)}var Nt;if(Wr)e:{switch(a){case"compositionstart":var Dt="onCompositionStart";break e;case"compositionend":Dt="onCompositionEnd";break e;case"compositionupdate":Dt="onCompositionUpdate";break e}Dt=void 0}else _a?jh(a,g)&&(Dt="onCompositionEnd"):a==="keydown"&&g.keyCode===229&&(Dt="onCompositionStart");Dt&&(qo&&g.locale!=="ko"&&(_a||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&_a&&(Nt=sc()):(es=Fe,Lh="value"in es?es.value:es.textContent,_a=!0)),Ct=id(we,Dt),0<Ct.length&&(Dt=new Uh(Dt,a,null,g,Fe),Be.push({event:Dt,listeners:Ct}),Nt?Dt.data=Nt:(Nt=Xu(g),Nt!==null&&(Dt.data=Nt)))),(Nt=Nn?dm(a,g):oc(a,g))&&(we=id(we,"onBeforeInput"),0<we.length&&(Fe=new Uh("onBeforeInput","beforeinput",null,g,Fe),Be.push({event:Fe,listeners:we}),Fe.data=Nt))}tl(Be,c)})}function rl(a,c,g){return{instance:a,listener:c,currentTarget:g}}function id(a,c){for(var g=c+"Capture",S=[];a!==null;){var C=a,P=C.stateNode;C.tag===5&&P!==null&&(C=P,P=sn(a,g),P!=null&&S.unshift(rl(a,P,C)),P=sn(a,c),P!=null&&S.push(rl(a,P,C))),a=a.return}return S}function eo(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function gm(a,c,g,S,C){for(var P=c._reactName,F=[];g!==null&&g!==S;){var J=g,se=J.alternate,we=J.stateNode;if(se!==null&&se===S)break;J.tag===5&&we!==null&&(J=we,C?(se=sn(g,P),se!=null&&F.unshift(rl(g,se,J))):C||(se=sn(g,P),se!=null&&F.push(rl(g,se,J)))),g=g.return}F.length!==0&&a.push({event:c,listeners:F})}var ky=/\r\n?/g,ym=/\u0000|\uFFFD/g;function $h(a){return(typeof a=="string"?a:""+a).replace(ky,`
`).replace(ym,"")}function mc(a,c,g){if(c=$h(c),$h(a)!==c&&g)throw Error(t(425))}function gc(){}var il=null,qh=null;function Yh(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Zh=typeof setTimeout=="function"?setTimeout:void 0,Kh=typeof clearTimeout=="function"?clearTimeout:void 0,sd=typeof Promise=="function"?Promise:void 0,Ry=typeof queueMicrotask=="function"?queueMicrotask:typeof sd<"u"?function(a){return sd.resolve(null).then(a).catch(xm)}:Zh;function xm(a){setTimeout(function(){throw a})}function ad(a,c){var g=c,S=0;do{var C=g.nextSibling;if(a.removeChild(g),C&&C.nodeType===8)if(g=C.data,g==="/$"){if(S===0){a.removeChild(C),ic(c);return}S--}else g!=="$"&&g!=="$?"&&g!=="$!"||S++;g=C}while(g);ic(c)}function zs(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function Jh(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var g=a.data;if(g==="$"||g==="$!"||g==="$?"){if(c===0)return a;c--}else g==="/$"&&c++}a=a.previousSibling}return null}var to=Math.random().toString(36).slice(2),ir="__reactFiber$"+to,sl="__reactProps$"+to,xi="__reactContainer$"+to,no="__reactEvents$"+to,od="__reactListeners$"+to,ld="__reactHandles$"+to;function Ma(a){var c=a[ir];if(c)return c;for(var g=a.parentNode;g;){if(c=g[xi]||g[ir]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(a=Jh(a);a!==null;){if(g=a[ir])return g;a=Jh(a)}return c}a=g,g=a.parentNode}return null}function Bs(a){return a=a[ir]||a[xi],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Wn(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function cd(a){return a[sl]||null}var Qh=[],mr=-1;function zn(a){return{current:a}}function Mn(a){0>mr||(a.current=Qh[mr],Qh[mr]=null,mr--)}function yn(a,c){mr++,Qh[mr]=a.current,a.current=c}var js={},Mr=zn(js),Gr=zn(!1),Vs=js;function ro(a,c){var g=a.type.contextTypes;if(!g)return js;var S=a.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===c)return S.__reactInternalMemoizedMaskedChildContext;var C={},P;for(P in g)C[P]=c[P];return S&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=C),C}function Ir(a){return a=a.childContextTypes,a!=null}function yc(){Mn(Gr),Mn(Mr)}function ef(a,c,g){if(Mr.current!==js)throw Error(t(168));yn(Mr,c),yn(Gr,g)}function xc(a,c,g){var S=a.stateNode;if(c=c.childContextTypes,typeof S.getChildContext!="function")return g;S=S.getChildContext();for(var C in S)if(!(C in c))throw Error(t(108,Pe(a)||"Unknown",C));return te({},g,S)}function io(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||js,Vs=Mr.current,yn(Mr,a),yn(Gr,Gr.current),!0}function tf(a,c,g){var S=a.stateNode;if(!S)throw Error(t(169));g?(a=xc(a,c,Vs),S.__reactInternalMemoizedMergedChildContext=a,Mn(Gr),Mn(Mr),yn(Mr,a)):Mn(Gr),yn(Gr,g)}var is=null,vc=!1,ud=!1;function _c(a){is===null?is=[a]:is.push(a)}function vm(a){vc=!0,_c(a)}function _s(){if(!ud&&is!==null){ud=!0;var a=0,c=an;try{var g=is;for(an=1;a<g.length;a++){var S=g[a];do S=S(!0);while(S!==null)}is=null,vc=!1}catch(C){throw is!==null&&(is=is.slice(a+1)),_e(kt,_s),C}finally{an=c,ud=!1}}return null}var so=[],ni=0,dd=null,hd=0,Xr=[],gr=0,ao=null,Ge=1,ji="";function Hs(a,c){so[ni++]=hd,so[ni++]=dd,dd=a,hd=c}function nf(a,c,g){Xr[gr++]=Ge,Xr[gr++]=ji,Xr[gr++]=ao,ao=a;var S=Ge;a=ji;var C=32-On(S)-1;S&=~(1<<C),g+=1;var P=32-On(c)+C;if(30<P){var F=C-C%5;P=(S&(1<<F)-1).toString(32),S>>=F,C-=F,Ge=1<<32-On(c)+C|g<<C|S,ji=P+a}else Ge=1<<P|g<<C|S,ji=a}function rf(a){a.return!==null&&(Hs(a,1),nf(a,1,0))}function Ws(a){for(;a===dd;)dd=so[--ni],so[ni]=null,hd=so[--ni],so[ni]=null;for(;a===ao;)ao=Xr[--gr],Xr[gr]=null,ji=Xr[--gr],Xr[gr]=null,Ge=Xr[--gr],Xr[gr]=null}var Er=null,$r=null,An=!1,Vi=null;function sf(a,c){var g=Es(5,null,null,0);g.elementType="DELETED",g.stateNode=c,g.return=a,c=a.deletions,c===null?(a.deletions=[g],a.flags|=16):c.push(g)}function af(a,c){switch(a.tag){case 5:var g=a.type;return c=c.nodeType!==1||g.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,Er=a,$r=zs(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,Er=a,$r=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(g=ao!==null?{id:Ge,overflow:ji}:null,a.memoizedState={dehydrated:c,treeContext:g,retryLane:1073741824},g=Es(18,null,null,0),g.stateNode=c,g.return=a,a.child=g,Er=a,$r=null,!0):!1;default:return!1}}function fd(a){return(a.mode&1)!==0&&(a.flags&128)===0}function pd(a){if(An){var c=$r;if(c){var g=c;if(!af(a,c)){if(fd(a))throw Error(t(418));c=zs(g.nextSibling);var S=Er;c&&af(a,c)?sf(S,g):(a.flags=a.flags&-4097|2,An=!1,Er=a)}}else{if(fd(a))throw Error(t(418));a.flags=a.flags&-4097|2,An=!1,Er=a}}}function md(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Er=a}function al(a){if(a!==Er)return!1;if(!An)return md(a),An=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!Yh(a.type,a.memoizedProps)),c&&(c=$r)){if(fd(a))throw of(),Error(t(418));for(;c;)sf(a,c),c=zs(c.nextSibling)}if(md(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var g=a.data;if(g==="/$"){if(c===0){$r=zs(a.nextSibling);break e}c--}else g!=="$"&&g!=="$!"&&g!=="$?"||c++}a=a.nextSibling}$r=null}}else $r=Er?zs(a.stateNode.nextSibling):null;return!0}function of(){for(var a=$r;a;)a=zs(a.nextSibling)}function Ea(){$r=Er=null,An=!1}function ol(a){Vi===null?Vi=[a]:Vi.push(a)}var Py=R.ReactCurrentBatchConfig;function wc(a,c,g){if(a=g.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(t(309));var S=g.stateNode}if(!S)throw Error(t(147,a));var C=S,P=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===P?c.ref:(c=function(F){var J=C.refs;F===null?delete J[P]:J[P]=F},c._stringRef=P,c)}if(typeof a!="string")throw Error(t(284));if(!g._owner)throw Error(t(290,a))}return a}function Sc(a,c){throw a=Object.prototype.toString.call(c),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function lf(a){var c=a._init;return c(a._payload)}function cf(a){function c(ye,ce){if(a){var xe=ye.deletions;xe===null?(ye.deletions=[ce],ye.flags|=16):xe.push(ce)}}function g(ye,ce){if(!a)return null;for(;ce!==null;)c(ye,ce),ce=ce.sibling;return null}function S(ye,ce){for(ye=new Map;ce!==null;)ce.key!==null?ye.set(ce.key,ce):ye.set(ce.index,ce),ce=ce.sibling;return ye}function C(ye,ce){return ye=xl(ye,ce),ye.index=0,ye.sibling=null,ye}function P(ye,ce,xe){return ye.index=xe,a?(xe=ye.alternate,xe!==null?(xe=xe.index,xe<ce?(ye.flags|=2,ce):xe):(ye.flags|=2,ce)):(ye.flags|=1048576,ce)}function F(ye){return a&&ye.alternate===null&&(ye.flags|=2),ye}function J(ye,ce,xe,He){return ce===null||ce.tag!==6?(ce=Ky(xe,ye.mode,He),ce.return=ye,ce):(ce=C(ce,xe),ce.return=ye,ce)}function se(ye,ce,xe,He){var _t=xe.type;return _t===z?Fe(ye,ce,xe.props.children,He,xe.key):ce!==null&&(ce.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===Q&&lf(_t)===ce.type)?(He=C(ce,xe.props),He.ref=wc(ye,ce,xe),He.return=ye,He):(He=Vm(xe.type,xe.key,xe.props,null,ye.mode,He),He.ref=wc(ye,ce,xe),He.return=ye,He)}function we(ye,ce,xe,He){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==xe.containerInfo||ce.stateNode.implementation!==xe.implementation?(ce=Jy(xe,ye.mode,He),ce.return=ye,ce):(ce=C(ce,xe.children||[]),ce.return=ye,ce)}function Fe(ye,ce,xe,He,_t){return ce===null||ce.tag!==7?(ce=zc(xe,ye.mode,He,_t),ce.return=ye,ce):(ce=C(ce,xe),ce.return=ye,ce)}function Be(ye,ce,xe){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=Ky(""+ce,ye.mode,xe),ce.return=ye,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case D:return xe=Vm(ce.type,ce.key,ce.props,null,ye.mode,xe),xe.ref=wc(ye,null,ce),xe.return=ye,xe;case U:return ce=Jy(ce,ye.mode,xe),ce.return=ye,ce;case Q:var He=ce._init;return Be(ye,He(ce._payload),xe)}if(B(ce)||re(ce))return ce=zc(ce,ye.mode,xe,null),ce.return=ye,ce;Sc(ye,ce)}return null}function De(ye,ce,xe,He){var _t=ce!==null?ce.key:null;if(typeof xe=="string"&&xe!==""||typeof xe=="number")return _t!==null?null:J(ye,ce,""+xe,He);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case D:return xe.key===_t?se(ye,ce,xe,He):null;case U:return xe.key===_t?we(ye,ce,xe,He):null;case Q:return _t=xe._init,De(ye,ce,_t(xe._payload),He)}if(B(xe)||re(xe))return _t!==null?null:Fe(ye,ce,xe,He,null);Sc(ye,xe)}return null}function st(ye,ce,xe,He,_t){if(typeof He=="string"&&He!==""||typeof He=="number")return ye=ye.get(xe)||null,J(ce,ye,""+He,_t);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case D:return ye=ye.get(He.key===null?xe:He.key)||null,se(ce,ye,He,_t);case U:return ye=ye.get(He.key===null?xe:He.key)||null,we(ce,ye,He,_t);case Q:var Ct=He._init;return st(ye,ce,xe,Ct(He._payload),_t)}if(B(He)||re(He))return ye=ye.get(xe)||null,Fe(ce,ye,He,_t,null);Sc(ce,He)}return null}function ft(ye,ce,xe,He){for(var _t=null,Ct=null,Nt=ce,Dt=ce=0,Fr=null;Nt!==null&&Dt<xe.length;Dt++){Nt.index>Dt?(Fr=Nt,Nt=null):Fr=Nt.sibling;var dn=De(ye,Nt,xe[Dt],He);if(dn===null){Nt===null&&(Nt=Fr);break}a&&Nt&&dn.alternate===null&&c(ye,Nt),ce=P(dn,ce,Dt),Ct===null?_t=dn:Ct.sibling=dn,Ct=dn,Nt=Fr}if(Dt===xe.length)return g(ye,Nt),An&&Hs(ye,Dt),_t;if(Nt===null){for(;Dt<xe.length;Dt++)Nt=Be(ye,xe[Dt],He),Nt!==null&&(ce=P(Nt,ce,Dt),Ct===null?_t=Nt:Ct.sibling=Nt,Ct=Nt);return An&&Hs(ye,Dt),_t}for(Nt=S(ye,Nt);Dt<xe.length;Dt++)Fr=st(Nt,ye,Dt,xe[Dt],He),Fr!==null&&(a&&Fr.alternate!==null&&Nt.delete(Fr.key===null?Dt:Fr.key),ce=P(Fr,ce,Dt),Ct===null?_t=Fr:Ct.sibling=Fr,Ct=Fr);return a&&Nt.forEach(function(vl){return c(ye,vl)}),An&&Hs(ye,Dt),_t}function mt(ye,ce,xe,He){var _t=re(xe);if(typeof _t!="function")throw Error(t(150));if(xe=_t.call(xe),xe==null)throw Error(t(151));for(var Ct=_t=null,Nt=ce,Dt=ce=0,Fr=null,dn=xe.next();Nt!==null&&!dn.done;Dt++,dn=xe.next()){Nt.index>Dt?(Fr=Nt,Nt=null):Fr=Nt.sibling;var vl=De(ye,Nt,dn.value,He);if(vl===null){Nt===null&&(Nt=Fr);break}a&&Nt&&vl.alternate===null&&c(ye,Nt),ce=P(vl,ce,Dt),Ct===null?_t=vl:Ct.sibling=vl,Ct=vl,Nt=Fr}if(dn.done)return g(ye,Nt),An&&Hs(ye,Dt),_t;if(Nt===null){for(;!dn.done;Dt++,dn=xe.next())dn=Be(ye,dn.value,He),dn!==null&&(ce=P(dn,ce,Dt),Ct===null?_t=dn:Ct.sibling=dn,Ct=dn);return An&&Hs(ye,Dt),_t}for(Nt=S(ye,Nt);!dn.done;Dt++,dn=xe.next())dn=st(Nt,ye,Dt,dn.value,He),dn!==null&&(a&&dn.alternate!==null&&Nt.delete(dn.key===null?Dt:dn.key),ce=P(dn,ce,Dt),Ct===null?_t=dn:Ct.sibling=dn,Ct=dn);return a&&Nt.forEach(function(XN){return c(ye,XN)}),An&&Hs(ye,Dt),_t}function sr(ye,ce,xe,He){if(typeof xe=="object"&&xe!==null&&xe.type===z&&xe.key===null&&(xe=xe.props.children),typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case D:e:{for(var _t=xe.key,Ct=ce;Ct!==null;){if(Ct.key===_t){if(_t=xe.type,_t===z){if(Ct.tag===7){g(ye,Ct.sibling),ce=C(Ct,xe.props.children),ce.return=ye,ye=ce;break e}}else if(Ct.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===Q&&lf(_t)===Ct.type){g(ye,Ct.sibling),ce=C(Ct,xe.props),ce.ref=wc(ye,Ct,xe),ce.return=ye,ye=ce;break e}g(ye,Ct);break}else c(ye,Ct);Ct=Ct.sibling}xe.type===z?(ce=zc(xe.props.children,ye.mode,He,xe.key),ce.return=ye,ye=ce):(He=Vm(xe.type,xe.key,xe.props,null,ye.mode,He),He.ref=wc(ye,ce,xe),He.return=ye,ye=He)}return F(ye);case U:e:{for(Ct=xe.key;ce!==null;){if(ce.key===Ct)if(ce.tag===4&&ce.stateNode.containerInfo===xe.containerInfo&&ce.stateNode.implementation===xe.implementation){g(ye,ce.sibling),ce=C(ce,xe.children||[]),ce.return=ye,ye=ce;break e}else{g(ye,ce);break}else c(ye,ce);ce=ce.sibling}ce=Jy(xe,ye.mode,He),ce.return=ye,ye=ce}return F(ye);case Q:return Ct=xe._init,sr(ye,ce,Ct(xe._payload),He)}if(B(xe))return ft(ye,ce,xe,He);if(re(xe))return mt(ye,ce,xe,He);Sc(ye,xe)}return typeof xe=="string"&&xe!==""||typeof xe=="number"?(xe=""+xe,ce!==null&&ce.tag===6?(g(ye,ce.sibling),ce=C(ce,xe),ce.return=ye,ye=ce):(g(ye,ce),ce=Ky(xe,ye.mode,He),ce.return=ye,ye=ce),F(ye)):g(ye,ce)}return sr}var oo=cf(!0),bc=cf(!1),lo=zn(null),co=null,Gs=null,ll=null;function uo(){ll=Gs=co=null}function Mc(a){var c=lo.current;Mn(lo),a._currentValue=c}function Ec(a,c,g){for(;a!==null;){var S=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,S!==null&&(S.childLanes|=c)):S!==null&&(S.childLanes&c)!==c&&(S.childLanes|=c),a===g)break;a=a.return}}function Ta(a,c){co=a,ll=Gs=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(Wt=!0),a.firstContext=null)}function vi(a){var c=a._currentValue;if(ll!==a)if(a={context:a,memoizedValue:c,next:null},Gs===null){if(co===null)throw Error(t(308));Gs=a,co.dependencies={lanes:0,firstContext:a}}else Gs=Gs.next=a;return c}var Xs=null;function uf(a){Xs===null?Xs=[a]:Xs.push(a)}function Tc(a,c,g,S){var C=c.interleaved;return C===null?(g.next=g,uf(c)):(g.next=C.next,C.next=g),c.interleaved=g,ss(a,S)}function ss(a,c){a.lanes|=c;var g=a.alternate;for(g!==null&&(g.lanes|=c),g=a,a=a.return;a!==null;)a.childLanes|=c,g=a.alternate,g!==null&&(g.childLanes|=c),g=a,a=a.return;return g.tag===3?g.stateNode:null}var mn=!1;function Ht(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gn(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function gn(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function kn(a,c,g){var S=a.updateQueue;if(S===null)return null;if(S=S.shared,(ln&2)!==0){var C=S.pending;return C===null?c.next=c:(c.next=C.next,C.next=c),S.pending=c,ss(a,g)}return C=S.interleaved,C===null?(c.next=c,uf(S)):(c.next=C.next,C.next=c),S.interleaved=c,ss(a,g)}function Dr(a,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194240)!==0)){var S=c.lanes;S&=a.pendingLanes,g|=S,c.lanes=g,Vo(a,g)}}function ho(a,c){var g=a.updateQueue,S=a.alternate;if(S!==null&&(S=S.updateQueue,g===S)){var C=null,P=null;if(g=g.firstBaseUpdate,g!==null){do{var F={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};P===null?C=P=F:P=P.next=F,g=g.next}while(g!==null);P===null?C=P=c:P=P.next=c}else C=P=c;g={baseState:S.baseState,firstBaseUpdate:C,lastBaseUpdate:P,shared:S.shared,effects:S.effects},a.updateQueue=g;return}a=g.lastBaseUpdate,a===null?g.firstBaseUpdate=c:a.next=c,g.lastBaseUpdate=c}function Bn(a,c,g,S){var C=a.updateQueue;mn=!1;var P=C.firstBaseUpdate,F=C.lastBaseUpdate,J=C.shared.pending;if(J!==null){C.shared.pending=null;var se=J,we=se.next;se.next=null,F===null?P=we:F.next=we,F=se;var Fe=a.alternate;Fe!==null&&(Fe=Fe.updateQueue,J=Fe.lastBaseUpdate,J!==F&&(J===null?Fe.firstBaseUpdate=we:J.next=we,Fe.lastBaseUpdate=se))}if(P!==null){var Be=C.baseState;F=0,Fe=we=se=null,J=P;do{var De=J.lane,st=J.eventTime;if((S&De)===De){Fe!==null&&(Fe=Fe.next={eventTime:st,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var ft=a,mt=J;switch(De=c,st=g,mt.tag){case 1:if(ft=mt.payload,typeof ft=="function"){Be=ft.call(st,Be,De);break e}Be=ft;break e;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=mt.payload,De=typeof ft=="function"?ft.call(st,Be,De):ft,De==null)break e;Be=te({},Be,De);break e;case 2:mn=!0}}J.callback!==null&&J.lane!==0&&(a.flags|=64,De=C.effects,De===null?C.effects=[J]:De.push(J))}else st={eventTime:st,lane:De,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Fe===null?(we=Fe=st,se=Be):Fe=Fe.next=st,F|=De;if(J=J.next,J===null){if(J=C.shared.pending,J===null)break;De=J,J=De.next,De.next=null,C.lastBaseUpdate=De,C.shared.pending=null}}while(!0);if(Fe===null&&(se=Be),C.baseState=se,C.firstBaseUpdate=we,C.lastBaseUpdate=Fe,c=C.shared.interleaved,c!==null){C=c;do F|=C.lane,C=C.next;while(C!==c)}else P===null&&(C.shared.lanes=0);Dc|=F,a.lanes=F,a.memoizedState=Be}}function cl(a,c,g){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var S=a[c],C=S.callback;if(C!==null){if(S.callback=null,S=g,typeof C!="function")throw Error(t(191,C));C.call(S)}}}var ws={},_i=zn(ws),fo=zn(ws),$s=zn(ws);function Yn(a){if(a===ws)throw Error(t(174));return a}function Ac(a,c){switch(yn($s,c),yn(fo,a),yn(_i,ws),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:it(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=it(c,a)}Mn(_i),yn(_i,c)}function Aa(){Mn(_i),Mn(fo),Mn($s)}function po(a){Yn($s.current);var c=Yn(_i.current),g=it(c,a.type);c!==g&&(yn(fo,a),yn(_i,g))}function ul(a){fo.current===a&&(Mn(_i),Mn(fo))}var Cn=zn(0);function as(a){for(var c=a;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var dl=[];function Ss(){for(var a=0;a<dl.length;a++)dl[a]._workInProgressVersionPrimary=null;dl.length=0}var mo=R.ReactCurrentDispatcher,go=R.ReactCurrentBatchConfig,qs=0,En=null,jn=null,on=null,os=!1,Ur=!1,Ca=0,ri=0;function Tr(){throw Error(t(321))}function Cc(a,c){if(c===null)return!1;for(var g=0;g<c.length&&g<a.length;g++)if(!gi(a[g],c[g]))return!1;return!0}function Nc(a,c,g,S,C,P){if(qs=P,En=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,mo.current=a===null||a.memoizedState===null?Tm:Am,a=g(S,C),Ur){P=0;do{if(Ur=!1,Ca=0,25<=P)throw Error(t(301));P+=1,on=jn=null,c.updateQueue=null,mo.current=Cm,a=g(S,C)}while(Ur)}if(mo.current=Sd,c=jn!==null&&jn.next!==null,qs=0,on=jn=En=null,os=!1,c)throw Error(t(300));return a}function df(){var a=Ca!==0;return Ca=0,a}function Ar(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?En.memoizedState=on=a:on=on.next=a,on}function wi(){if(jn===null){var a=En.alternate;a=a!==null?a.memoizedState:null}else a=jn.next;var c=on===null?En.memoizedState:on.next;if(c!==null)on=c,jn=a;else{if(a===null)throw Error(t(310));jn=a,a={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},on===null?En.memoizedState=on=a:on=on.next=a}return on}function hl(a,c){return typeof c=="function"?c(a):c}function kc(a){var c=wi(),g=c.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=a;var S=jn,C=S.baseQueue,P=g.pending;if(P!==null){if(C!==null){var F=C.next;C.next=P.next,P.next=F}S.baseQueue=C=P,g.pending=null}if(C!==null){P=C.next,S=S.baseState;var J=F=null,se=null,we=P;do{var Fe=we.lane;if((qs&Fe)===Fe)se!==null&&(se=se.next={lane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),S=we.hasEagerState?we.eagerState:a(S,we.action);else{var Be={lane:Fe,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null};se===null?(J=se=Be,F=S):se=se.next=Be,En.lanes|=Fe,Dc|=Fe}we=we.next}while(we!==null&&we!==P);se===null?F=S:se.next=J,gi(S,c.memoizedState)||(Wt=!0),c.memoizedState=S,c.baseState=F,c.baseQueue=se,g.lastRenderedState=S}if(a=g.interleaved,a!==null){C=a;do P=C.lane,En.lanes|=P,Dc|=P,C=C.next;while(C!==a)}else C===null&&(g.lanes=0);return[c.memoizedState,g.dispatch]}function Ys(a){var c=wi(),g=c.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=a;var S=g.dispatch,C=g.pending,P=c.memoizedState;if(C!==null){g.pending=null;var F=C=C.next;do P=a(P,F.action),F=F.next;while(F!==C);gi(P,c.memoizedState)||(Wt=!0),c.memoizedState=P,c.baseQueue===null&&(c.baseState=P),g.lastRenderedState=P}return[P,S]}function hf(){}function ff(a,c){var g=En,S=wi(),C=c(),P=!gi(S.memoizedState,C);if(P&&(S.memoizedState=C,Wt=!0),S=S.queue,gf(_m.bind(null,g,S,a),[a]),S.getSnapshot!==c||P||on!==null&&on.memoizedState.tag&1){if(g.flags|=2048,ls(9,Rc.bind(null,g,S,C,c),void 0,null),Or===null)throw Error(t(349));(qs&30)!==0||gd(g,c,C)}return C}function gd(a,c,g){a.flags|=16384,a={getSnapshot:c,value:g},c=En.updateQueue,c===null?(c={lastEffect:null,stores:null},En.updateQueue=c,c.stores=[a]):(g=c.stores,g===null?c.stores=[a]:g.push(a))}function Rc(a,c,g,S){c.value=g,c.getSnapshot=S,wm(c)&&pf(a)}function _m(a,c,g){return g(function(){wm(c)&&pf(a)})}function wm(a){var c=a.getSnapshot;a=a.value;try{var g=c();return!gi(a,g)}catch{return!0}}function pf(a){var c=ss(a,1);c!==null&&ea(c,a,1,-1)}function mf(a){var c=Ar();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hl,lastRenderedState:a},c.queue=a,a=a.dispatch=yo.bind(null,En,a),[c.memoizedState,a]}function ls(a,c,g,S){return a={tag:a,create:c,destroy:g,deps:S,next:null},c=En.updateQueue,c===null?(c={lastEffect:null,stores:null},En.updateQueue=c,c.lastEffect=a.next=a):(g=c.lastEffect,g===null?c.lastEffect=a.next=a:(S=g.next,g.next=a,a.next=S,c.lastEffect=a)),a}function Sm(){return wi().memoizedState}function bs(a,c,g,S){var C=Ar();En.flags|=a,C.memoizedState=ls(1|c,g,void 0,S===void 0?null:S)}function Pc(a,c,g,S){var C=wi();S=S===void 0?null:S;var P=void 0;if(jn!==null){var F=jn.memoizedState;if(P=F.destroy,S!==null&&Cc(S,F.deps)){C.memoizedState=ls(c,g,P,S);return}}En.flags|=a,C.memoizedState=ls(1|c,g,P,S)}function qr(a,c){return bs(8390656,8,a,c)}function gf(a,c){return Pc(2048,8,a,c)}function yf(a,c){return Pc(4,2,a,c)}function bm(a,c){return Pc(4,4,a,c)}function Mm(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function xf(a,c,g){return g=g!=null?g.concat([a]):null,Pc(4,4,Mm.bind(null,c,a),g)}function yd(){}function Em(a,c){var g=wi();c=c===void 0?null:c;var S=g.memoizedState;return S!==null&&c!==null&&Cc(c,S[1])?S[0]:(g.memoizedState=[a,c],a)}function Si(a,c){var g=wi();c=c===void 0?null:c;var S=g.memoizedState;return S!==null&&c!==null&&Cc(c,S[1])?S[0]:(a=a(),g.memoizedState=[a,c],a)}function xd(a,c,g){return(qs&21)===0?(a.baseState&&(a.baseState=!1,Wt=!0),a.memoizedState=g):(gi(g,c)||(g=Jr(),En.lanes|=g,Dc|=g,a.baseState=!0),c)}function Ly(a,c){var g=an;an=g!==0&&4>g?g:4,a(!0);var S=go.transition;go.transition={};try{a(!1),c()}finally{an=g,go.transition=S}}function Zs(){return wi().memoizedState}function vd(a,c,g){var S=gl(a);if(g={lane:S,action:g,hasEagerState:!1,eagerState:null,next:null},Lc(a))_d(c,g);else if(g=Tc(a,c,g,S),g!==null){var C=Mi();ea(g,a,S,C),wd(g,c,S)}}function yo(a,c,g){var S=gl(a),C={lane:S,action:g,hasEagerState:!1,eagerState:null,next:null};if(Lc(a))_d(c,C);else{var P=a.alternate;if(a.lanes===0&&(P===null||P.lanes===0)&&(P=c.lastRenderedReducer,P!==null))try{var F=c.lastRenderedState,J=P(F,g);if(C.hasEagerState=!0,C.eagerState=J,gi(J,F)){var se=c.interleaved;se===null?(C.next=C,uf(c)):(C.next=se.next,se.next=C),c.interleaved=C;return}}catch{}finally{}g=Tc(a,c,C,S),g!==null&&(C=Mi(),ea(g,a,S,C),wd(g,c,S))}}function Lc(a){var c=a.alternate;return a===En||c!==null&&c===En}function _d(a,c){Ur=os=!0;var g=a.pending;g===null?c.next=c:(c.next=g.next,g.next=c),a.pending=c}function wd(a,c,g){if((g&4194240)!==0){var S=c.lanes;S&=a.pendingLanes,g|=S,c.lanes=g,Vo(a,g)}}var Sd={readContext:vi,useCallback:Tr,useContext:Tr,useEffect:Tr,useImperativeHandle:Tr,useInsertionEffect:Tr,useLayoutEffect:Tr,useMemo:Tr,useReducer:Tr,useRef:Tr,useState:Tr,useDebugValue:Tr,useDeferredValue:Tr,useTransition:Tr,useMutableSource:Tr,useSyncExternalStore:Tr,useId:Tr,unstable_isNewReconciler:!1},Tm={readContext:vi,useCallback:function(a,c){return Ar().memoizedState=[a,c===void 0?null:c],a},useContext:vi,useEffect:qr,useImperativeHandle:function(a,c,g){return g=g!=null?g.concat([a]):null,bs(4194308,4,Mm.bind(null,c,a),g)},useLayoutEffect:function(a,c){return bs(4194308,4,a,c)},useInsertionEffect:function(a,c){return bs(4,2,a,c)},useMemo:function(a,c){var g=Ar();return c=c===void 0?null:c,a=a(),g.memoizedState=[a,c],a},useReducer:function(a,c,g){var S=Ar();return c=g!==void 0?g(c):c,S.memoizedState=S.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},S.queue=a,a=a.dispatch=vd.bind(null,En,a),[S.memoizedState,a]},useRef:function(a){var c=Ar();return a={current:a},c.memoizedState=a},useState:mf,useDebugValue:yd,useDeferredValue:function(a){return Ar().memoizedState=a},useTransition:function(){var a=mf(!1),c=a[0];return a=Ly.bind(null,a[1]),Ar().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,g){var S=En,C=Ar();if(An){if(g===void 0)throw Error(t(407));g=g()}else{if(g=c(),Or===null)throw Error(t(349));(qs&30)!==0||gd(S,c,g)}C.memoizedState=g;var P={value:g,getSnapshot:c};return C.queue=P,qr(_m.bind(null,S,P,a),[a]),S.flags|=2048,ls(9,Rc.bind(null,S,P,g,c),void 0,null),g},useId:function(){var a=Ar(),c=Or.identifierPrefix;if(An){var g=ji,S=Ge;g=(S&~(1<<32-On(S)-1)).toString(32)+g,c=":"+c+"R"+g,g=Ca++,0<g&&(c+="H"+g.toString(32)),c+=":"}else g=ri++,c=":"+c+"r"+g.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},Am={readContext:vi,useCallback:Em,useContext:vi,useEffect:gf,useImperativeHandle:xf,useInsertionEffect:yf,useLayoutEffect:bm,useMemo:Si,useReducer:kc,useRef:Sm,useState:function(){return kc(hl)},useDebugValue:yd,useDeferredValue:function(a){var c=wi();return xd(c,jn.memoizedState,a)},useTransition:function(){var a=kc(hl)[0],c=wi().memoizedState;return[a,c]},useMutableSource:hf,useSyncExternalStore:ff,useId:Zs,unstable_isNewReconciler:!1},Cm={readContext:vi,useCallback:Em,useContext:vi,useEffect:gf,useImperativeHandle:xf,useInsertionEffect:yf,useLayoutEffect:bm,useMemo:Si,useReducer:Ys,useRef:Sm,useState:function(){return Ys(hl)},useDebugValue:yd,useDeferredValue:function(a){var c=wi();return jn===null?c.memoizedState=a:xd(c,jn.memoizedState,a)},useTransition:function(){var a=Ys(hl)[0],c=wi().memoizedState;return[a,c]},useMutableSource:hf,useSyncExternalStore:ff,useId:Zs,unstable_isNewReconciler:!1};function Hi(a,c){if(a&&a.defaultProps){c=te({},c),a=a.defaultProps;for(var g in a)c[g]===void 0&&(c[g]=a[g]);return c}return c}function Ic(a,c,g,S){c=a.memoizedState,g=g(S,c),g=g==null?c:te({},c,g),a.memoizedState=g,a.lanes===0&&(a.updateQueue.baseState=g)}var bd={isMounted:function(a){return(a=a._reactInternals)?Rs(a)===a:!1},enqueueSetState:function(a,c,g){a=a._reactInternals;var S=Mi(),C=gl(a),P=gn(S,C);P.payload=c,g!=null&&(P.callback=g),c=kn(a,P,C),c!==null&&(ea(c,a,C,S),Dr(c,a,C))},enqueueReplaceState:function(a,c,g){a=a._reactInternals;var S=Mi(),C=gl(a),P=gn(S,C);P.tag=1,P.payload=c,g!=null&&(P.callback=g),c=kn(a,P,C),c!==null&&(ea(c,a,C,S),Dr(c,a,C))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var g=Mi(),S=gl(a),C=gn(g,S);C.tag=2,c!=null&&(C.callback=c),c=kn(a,C,S),c!==null&&(ea(c,a,S,g),Dr(c,a,S))}};function Nm(a,c,g,S,C,P,F){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(S,P,F):c.prototype&&c.prototype.isPureReactComponent?!Ka(g,S)||!Ka(C,P):!0}function u(a,c,g){var S=!1,C=js,P=c.contextType;return typeof P=="object"&&P!==null?P=vi(P):(C=Ir(c)?Vs:Mr.current,S=c.contextTypes,P=(S=S!=null)?ro(a,C):js),c=new c(g,P),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=bd,a.stateNode=c,c._reactInternals=a,S&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=C,a.__reactInternalMemoizedMaskedChildContext=P),c}function h(a,c,g,S){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,S),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,S),c.state!==a&&bd.enqueueReplaceState(c,c.state,null)}function w(a,c,g,S){var C=a.stateNode;C.props=g,C.state=a.memoizedState,C.refs={},Ht(a);var P=c.contextType;typeof P=="object"&&P!==null?C.context=vi(P):(P=Ir(c)?Vs:Mr.current,C.context=ro(a,P)),C.state=a.memoizedState,P=c.getDerivedStateFromProps,typeof P=="function"&&(Ic(a,c,P,g),C.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(c=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),c!==C.state&&bd.enqueueReplaceState(C,C.state,null),Bn(a,g,C,S),C.state=a.memoizedState),typeof C.componentDidMount=="function"&&(a.flags|=4194308)}function E(a,c){try{var g="",S=c;do g+=Ae(S),S=S.return;while(S);var C=g}catch(P){C=`
Error generating stack: `+P.message+`
`+P.stack}return{value:a,source:c,stack:C,digest:null}}function k(a,c,g){return{value:a,source:null,stack:g??null,digest:c??null}}function L(a,c){try{console.error(c.value)}catch(g){setTimeout(function(){throw g})}}var Y=typeof WeakMap=="function"?WeakMap:Map;function ue(a,c,g){g=gn(-1,g),g.tag=3,g.payload={element:null};var S=c.value;return g.callback=function(){Um||(Um=!0,Hy=S),L(a,c)},g}function Te(a,c,g){g=gn(-1,g),g.tag=3;var S=a.type.getDerivedStateFromError;if(typeof S=="function"){var C=c.value;g.payload=function(){return S(C)},g.callback=function(){L(a,c)}}var P=a.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(g.callback=function(){L(a,c),typeof S!="function"&&(pl===null?pl=new Set([this]):pl.add(this));var F=c.stack;this.componentDidCatch(c.value,{componentStack:F!==null?F:""})}),g}function Ve(a,c,g){var S=a.pingCache;if(S===null){S=a.pingCache=new Y;var C=new Set;S.set(c,C)}else C=S.get(c),C===void 0&&(C=new Set,S.set(c,C));C.has(g)||(C.add(g),a=DN.bind(null,a,c,g),c.then(a,a))}function ct(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function zt(a,c,g,S,C){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(c=gn(-1,1),c.tag=2,kn(g,c,1))),g.lanes|=1),a):(a.flags|=65536,a.lanes=C,a)}var Et=R.ReactCurrentOwner,Wt=!1;function tt(a,c,g,S){c.child=a===null?bc(c,null,g,S):oo(c,a.child,g,S)}function Cr(a,c,g,S,C){g=g.render;var P=c.ref;return Ta(c,C),S=Nc(a,c,g,S,P,C),g=df(),a!==null&&!Wt?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~C,xo(a,c,C)):(An&&g&&rf(c),c.flags|=1,tt(a,c,S,C),c.child)}function bi(a,c,g,S,C){if(a===null){var P=g.type;return typeof P=="function"&&!Zy(P)&&P.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(c.tag=15,c.type=P,ve(a,c,P,S,C)):(a=Vm(g.type,null,S,c,c.mode,C),a.ref=c.ref,a.return=c,c.child=a)}if(P=a.child,(a.lanes&C)===0){var F=P.memoizedProps;if(g=g.compare,g=g!==null?g:Ka,g(F,S)&&a.ref===c.ref)return xo(a,c,C)}return c.flags|=1,a=xl(P,S),a.ref=c.ref,a.return=c,c.child=a}function ve(a,c,g,S,C){if(a!==null){var P=a.memoizedProps;if(Ka(P,S)&&a.ref===c.ref)if(Wt=!1,c.pendingProps=S=P,(a.lanes&C)!==0)(a.flags&131072)!==0&&(Wt=!0);else return c.lanes=a.lanes,xo(a,c,C)}return Qe(a,c,g,S,C)}function he(a,c,g){var S=c.pendingProps,C=S.children,P=a!==null?a.memoizedState:null;if(S.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},yn(Ed,cs),cs|=g;else{if((g&1073741824)===0)return a=P!==null?P.baseLanes|g:g,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,yn(Ed,cs),cs|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},S=P!==null?P.baseLanes:g,yn(Ed,cs),cs|=S}else P!==null?(S=P.baseLanes|g,c.memoizedState=null):S=g,yn(Ed,cs),cs|=S;return tt(a,c,C,g),c.child}function Me(a,c){var g=c.ref;(a===null&&g!==null||a!==null&&a.ref!==g)&&(c.flags|=512,c.flags|=2097152)}function Qe(a,c,g,S,C){var P=Ir(g)?Vs:Mr.current;return P=ro(c,P),Ta(c,C),g=Nc(a,c,g,S,P,C),S=df(),a!==null&&!Wt?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~C,xo(a,c,C)):(An&&S&&rf(c),c.flags|=1,tt(a,c,g,C),c.child)}function gt(a,c,g,S,C){if(Ir(g)){var P=!0;io(c)}else P=!1;if(Ta(c,C),c.stateNode===null)Rm(a,c),u(c,g,S),w(c,g,S,C),S=!0;else if(a===null){var F=c.stateNode,J=c.memoizedProps;F.props=J;var se=F.context,we=g.contextType;typeof we=="object"&&we!==null?we=vi(we):(we=Ir(g)?Vs:Mr.current,we=ro(c,we));var Fe=g.getDerivedStateFromProps,Be=typeof Fe=="function"||typeof F.getSnapshotBeforeUpdate=="function";Be||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(J!==S||se!==we)&&h(c,F,S,we),mn=!1;var De=c.memoizedState;F.state=De,Bn(c,S,F,C),se=c.memoizedState,J!==S||De!==se||Gr.current||mn?(typeof Fe=="function"&&(Ic(c,g,Fe,S),se=c.memoizedState),(J=mn||Nm(c,g,J,S,De,se,we))?(Be||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(c.flags|=4194308)):(typeof F.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=S,c.memoizedState=se),F.props=S,F.state=se,F.context=we,S=J):(typeof F.componentDidMount=="function"&&(c.flags|=4194308),S=!1)}else{F=c.stateNode,Gn(a,c),J=c.memoizedProps,we=c.type===c.elementType?J:Hi(c.type,J),F.props=we,Be=c.pendingProps,De=F.context,se=g.contextType,typeof se=="object"&&se!==null?se=vi(se):(se=Ir(g)?Vs:Mr.current,se=ro(c,se));var st=g.getDerivedStateFromProps;(Fe=typeof st=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(J!==Be||De!==se)&&h(c,F,S,se),mn=!1,De=c.memoizedState,F.state=De,Bn(c,S,F,C);var ft=c.memoizedState;J!==Be||De!==ft||Gr.current||mn?(typeof st=="function"&&(Ic(c,g,st,S),ft=c.memoizedState),(we=mn||Nm(c,g,we,S,De,ft,se)||!1)?(Fe||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(S,ft,se),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(S,ft,se)),typeof F.componentDidUpdate=="function"&&(c.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof F.componentDidUpdate!="function"||J===a.memoizedProps&&De===a.memoizedState||(c.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||J===a.memoizedProps&&De===a.memoizedState||(c.flags|=1024),c.memoizedProps=S,c.memoizedState=ft),F.props=S,F.state=ft,F.context=se,S=we):(typeof F.componentDidUpdate!="function"||J===a.memoizedProps&&De===a.memoizedState||(c.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||J===a.memoizedProps&&De===a.memoizedState||(c.flags|=1024),S=!1)}return Vt(a,c,g,S,P,C)}function Vt(a,c,g,S,C,P){Me(a,c);var F=(c.flags&128)!==0;if(!S&&!F)return C&&tf(c,g,!1),xo(a,c,P);S=c.stateNode,Et.current=c;var J=F&&typeof g.getDerivedStateFromError!="function"?null:S.render();return c.flags|=1,a!==null&&F?(c.child=oo(c,a.child,null,P),c.child=oo(c,null,J,P)):tt(a,c,J,P),c.memoizedState=S.state,C&&tf(c,g,!0),c.child}function Bt(a){var c=a.stateNode;c.pendingContext?ef(a,c.pendingContext,c.pendingContext!==c.context):c.context&&ef(a,c.context,!1),Ac(a,c.containerInfo)}function rn(a,c,g,S,C){return Ea(),ol(C),c.flags|=256,tt(a,c,g,S),c.child}var Zn={dehydrated:null,treeContext:null,retryLane:0};function nn(a){return{baseLanes:a,cachePool:null,transitions:null}}function Ks(a,c,g){var S=c.pendingProps,C=Cn.current,P=!1,F=(c.flags&128)!==0,J;if((J=F)||(J=a!==null&&a.memoizedState===null?!1:(C&2)!==0),J?(P=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(C|=1),yn(Cn,C&1),a===null)return pd(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:a.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(F=S.children,a=S.fallback,P?(S=c.mode,P=c.child,F={mode:"hidden",children:F},(S&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=F):P=Hm(F,S,0,null),a=zc(a,S,g,null),P.return=c,a.return=c,P.sibling=a,c.child=P,c.child.memoizedState=nn(g),c.memoizedState=Zn,a):vf(c,F));if(C=a.memoizedState,C!==null&&(J=C.dehydrated,J!==null))return bN(a,c,F,S,J,C,g);if(P){P=S.fallback,F=c.mode,C=a.child,J=C.sibling;var se={mode:"hidden",children:S.children};return(F&1)===0&&c.child!==C?(S=c.child,S.childLanes=0,S.pendingProps=se,c.deletions=null):(S=xl(C,se),S.subtreeFlags=C.subtreeFlags&14680064),J!==null?P=xl(J,P):(P=zc(P,F,g,null),P.flags|=2),P.return=c,S.return=c,S.sibling=P,c.child=S,S=P,P=c.child,F=a.child.memoizedState,F=F===null?nn(g):{baseLanes:F.baseLanes|g,cachePool:null,transitions:F.transitions},P.memoizedState=F,P.childLanes=a.childLanes&~g,c.memoizedState=Zn,S}return P=a.child,a=P.sibling,S=xl(P,{mode:"visible",children:S.children}),(c.mode&1)===0&&(S.lanes=g),S.return=c,S.sibling=null,a!==null&&(g=c.deletions,g===null?(c.deletions=[a],c.flags|=16):g.push(a)),c.child=S,c.memoizedState=null,S}function vf(a,c){return c=Hm({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function km(a,c,g,S){return S!==null&&ol(S),oo(c,a.child,null,g),a=vf(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function bN(a,c,g,S,C,P,F){if(g)return c.flags&256?(c.flags&=-257,S=k(Error(t(422))),km(a,c,F,S)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(P=S.fallback,C=c.mode,S=Hm({mode:"visible",children:S.children},C,0,null),P=zc(P,C,F,null),P.flags|=2,S.return=c,P.return=c,S.sibling=P,c.child=S,(c.mode&1)!==0&&oo(c,a.child,null,F),c.child.memoizedState=nn(F),c.memoizedState=Zn,P);if((c.mode&1)===0)return km(a,c,F,null);if(C.data==="$!"){if(S=C.nextSibling&&C.nextSibling.dataset,S)var J=S.dgst;return S=J,P=Error(t(419)),S=k(P,S,void 0),km(a,c,F,S)}if(J=(F&a.childLanes)!==0,Wt||J){if(S=Or,S!==null){switch(F&-F){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=(C&(S.suspendedLanes|F))!==0?0:C,C!==0&&C!==P.retryLane&&(P.retryLane=C,ss(a,C),ea(S,a,C,-1))}return Yy(),S=k(Error(t(421))),km(a,c,F,S)}return C.data==="$?"?(c.flags|=128,c.child=a.child,c=UN.bind(null,a),C._reactRetry=c,null):(a=P.treeContext,$r=zs(C.nextSibling),Er=c,An=!0,Vi=null,a!==null&&(Xr[gr++]=Ge,Xr[gr++]=ji,Xr[gr++]=ao,Ge=a.id,ji=a.overflow,ao=c),c=vf(c,S.children),c.flags|=4096,c)}function cw(a,c,g){a.lanes|=c;var S=a.alternate;S!==null&&(S.lanes|=c),Ec(a.return,c,g)}function Iy(a,c,g,S,C){var P=a.memoizedState;P===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:S,tail:g,tailMode:C}:(P.isBackwards=c,P.rendering=null,P.renderingStartTime=0,P.last=S,P.tail=g,P.tailMode=C)}function uw(a,c,g){var S=c.pendingProps,C=S.revealOrder,P=S.tail;if(tt(a,c,S.children,g),S=Cn.current,(S&2)!==0)S=S&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&cw(a,g,c);else if(a.tag===19)cw(a,g,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}S&=1}if(yn(Cn,S),(c.mode&1)===0)c.memoizedState=null;else switch(C){case"forwards":for(g=c.child,C=null;g!==null;)a=g.alternate,a!==null&&as(a)===null&&(C=g),g=g.sibling;g=C,g===null?(C=c.child,c.child=null):(C=g.sibling,g.sibling=null),Iy(c,!1,C,g,P);break;case"backwards":for(g=null,C=c.child,c.child=null;C!==null;){if(a=C.alternate,a!==null&&as(a)===null){c.child=C;break}a=C.sibling,C.sibling=g,g=C,C=a}Iy(c,!0,g,null,P);break;case"together":Iy(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Rm(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function xo(a,c,g){if(a!==null&&(c.dependencies=a.dependencies),Dc|=c.lanes,(g&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(t(153));if(c.child!==null){for(a=c.child,g=xl(a,a.pendingProps),c.child=g,g.return=c;a.sibling!==null;)a=a.sibling,g=g.sibling=xl(a,a.pendingProps),g.return=c;g.sibling=null}return c.child}function MN(a,c,g){switch(c.tag){case 3:Bt(c),Ea();break;case 5:po(c);break;case 1:Ir(c.type)&&io(c);break;case 4:Ac(c,c.stateNode.containerInfo);break;case 10:var S=c.type._context,C=c.memoizedProps.value;yn(lo,S._currentValue),S._currentValue=C;break;case 13:if(S=c.memoizedState,S!==null)return S.dehydrated!==null?(yn(Cn,Cn.current&1),c.flags|=128,null):(g&c.child.childLanes)!==0?Ks(a,c,g):(yn(Cn,Cn.current&1),a=xo(a,c,g),a!==null?a.sibling:null);yn(Cn,Cn.current&1);break;case 19:if(S=(g&c.childLanes)!==0,(a.flags&128)!==0){if(S)return uw(a,c,g);c.flags|=128}if(C=c.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),yn(Cn,Cn.current),S)break;return null;case 22:case 23:return c.lanes=0,he(a,c,g)}return xo(a,c,g)}var dw,Dy,hw,fw;dw=function(a,c){for(var g=c.child;g!==null;){if(g.tag===5||g.tag===6)a.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Dy=function(){},hw=function(a,c,g,S){var C=a.memoizedProps;if(C!==S){a=c.stateNode,Yn(_i.current);var P=null;switch(g){case"input":C=Ce(a,C),S=Ce(a,S),P=[];break;case"select":C=te({},C,{value:void 0}),S=te({},S,{value:void 0}),P=[];break;case"textarea":C=Ue(a,C),S=Ue(a,S),P=[];break;default:typeof C.onClick!="function"&&typeof S.onClick=="function"&&(a.onclick=gc)}Ft(g,S);var F;g=null;for(we in C)if(!S.hasOwnProperty(we)&&C.hasOwnProperty(we)&&C[we]!=null)if(we==="style"){var J=C[we];for(F in J)J.hasOwnProperty(F)&&(g||(g={}),g[F]="")}else we!=="dangerouslySetInnerHTML"&&we!=="children"&&we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&we!=="autoFocus"&&(i.hasOwnProperty(we)?P||(P=[]):(P=P||[]).push(we,null));for(we in S){var se=S[we];if(J=C!=null?C[we]:void 0,S.hasOwnProperty(we)&&se!==J&&(se!=null||J!=null))if(we==="style")if(J){for(F in J)!J.hasOwnProperty(F)||se&&se.hasOwnProperty(F)||(g||(g={}),g[F]="");for(F in se)se.hasOwnProperty(F)&&J[F]!==se[F]&&(g||(g={}),g[F]=se[F])}else g||(P||(P=[]),P.push(we,g)),g=se;else we==="dangerouslySetInnerHTML"?(se=se?se.__html:void 0,J=J?J.__html:void 0,se!=null&&J!==se&&(P=P||[]).push(we,se)):we==="children"?typeof se!="string"&&typeof se!="number"||(P=P||[]).push(we,""+se):we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&(i.hasOwnProperty(we)?(se!=null&&we==="onScroll"&&bn("scroll",a),P||J===se||(P=[])):(P=P||[]).push(we,se))}g&&(P=P||[]).push("style",g);var we=P;(c.updateQueue=we)&&(c.flags|=4)}},fw=function(a,c,g,S){g!==S&&(c.flags|=4)};function _f(a,c){if(!An)switch(a.tailMode){case"hidden":c=a.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?a.tail=null:g.sibling=null;break;case"collapsed":g=a.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:S.sibling=null}}function ii(a){var c=a.alternate!==null&&a.alternate.child===a.child,g=0,S=0;if(c)for(var C=a.child;C!==null;)g|=C.lanes|C.childLanes,S|=C.subtreeFlags&14680064,S|=C.flags&14680064,C.return=a,C=C.sibling;else for(C=a.child;C!==null;)g|=C.lanes|C.childLanes,S|=C.subtreeFlags,S|=C.flags,C.return=a,C=C.sibling;return a.subtreeFlags|=S,a.childLanes=g,c}function EN(a,c,g){var S=c.pendingProps;switch(Ws(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ii(c),null;case 1:return Ir(c.type)&&yc(),ii(c),null;case 3:return S=c.stateNode,Aa(),Mn(Gr),Mn(Mr),Ss(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(a===null||a.child===null)&&(al(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Vi!==null&&(Xy(Vi),Vi=null))),Dy(a,c),ii(c),null;case 5:ul(c);var C=Yn($s.current);if(g=c.type,a!==null&&c.stateNode!=null)hw(a,c,g,S,C),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!S){if(c.stateNode===null)throw Error(t(166));return ii(c),null}if(a=Yn(_i.current),al(c)){S=c.stateNode,g=c.type;var P=c.memoizedProps;switch(S[ir]=c,S[sl]=P,a=(c.mode&1)!==0,g){case"dialog":bn("cancel",S),bn("close",S);break;case"iframe":case"object":case"embed":bn("load",S);break;case"video":case"audio":for(C=0;C<ba.length;C++)bn(ba[C],S);break;case"source":bn("error",S);break;case"img":case"image":case"link":bn("error",S),bn("load",S);break;case"details":bn("toggle",S);break;case"input":je(S,P),bn("invalid",S);break;case"select":S._wrapperState={wasMultiple:!!P.multiple},bn("invalid",S);break;case"textarea":Oe(S,P),bn("invalid",S)}Ft(g,P),C=null;for(var F in P)if(P.hasOwnProperty(F)){var J=P[F];F==="children"?typeof J=="string"?S.textContent!==J&&(P.suppressHydrationWarning!==!0&&mc(S.textContent,J,a),C=["children",J]):typeof J=="number"&&S.textContent!==""+J&&(P.suppressHydrationWarning!==!0&&mc(S.textContent,J,a),C=["children",""+J]):i.hasOwnProperty(F)&&J!=null&&F==="onScroll"&&bn("scroll",S)}switch(g){case"input":lt(S),et(S,P,!0);break;case"textarea":lt(S),pt(S);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(S.onclick=gc)}S=C,c.updateQueue=S,S!==null&&(c.flags|=4)}else{F=C.nodeType===9?C:C.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Ze(g)),a==="http://www.w3.org/1999/xhtml"?g==="script"?(a=F.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof S.is=="string"?a=F.createElement(g,{is:S.is}):(a=F.createElement(g),g==="select"&&(F=a,S.multiple?F.multiple=!0:S.size&&(F.size=S.size))):a=F.createElementNS(a,g),a[ir]=c,a[sl]=S,dw(a,c,!1,!1),c.stateNode=a;e:{switch(F=tn(g,S),g){case"dialog":bn("cancel",a),bn("close",a),C=S;break;case"iframe":case"object":case"embed":bn("load",a),C=S;break;case"video":case"audio":for(C=0;C<ba.length;C++)bn(ba[C],a);C=S;break;case"source":bn("error",a),C=S;break;case"img":case"image":case"link":bn("error",a),bn("load",a),C=S;break;case"details":bn("toggle",a),C=S;break;case"input":je(a,S),C=Ce(a,S),bn("invalid",a);break;case"option":C=S;break;case"select":a._wrapperState={wasMultiple:!!S.multiple},C=te({},S,{value:void 0}),bn("invalid",a);break;case"textarea":Oe(a,S),C=Ue(a,S),bn("invalid",a);break;default:C=S}Ft(g,C),J=C;for(P in J)if(J.hasOwnProperty(P)){var se=J[P];P==="style"?bt(a,se):P==="dangerouslySetInnerHTML"?(se=se?se.__html:void 0,se!=null&&Ot(a,se)):P==="children"?typeof se=="string"?(g!=="textarea"||se!=="")&&Ie(a,se):typeof se=="number"&&Ie(a,""+se):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(i.hasOwnProperty(P)?se!=null&&P==="onScroll"&&bn("scroll",a):se!=null&&A(a,P,se,F))}switch(g){case"input":lt(a),et(a,S,!1);break;case"textarea":lt(a),pt(a);break;case"option":S.value!=null&&a.setAttribute("value",""+Xe(S.value));break;case"select":a.multiple=!!S.multiple,P=S.value,P!=null?pe(a,!!S.multiple,P,!1):S.defaultValue!=null&&pe(a,!!S.multiple,S.defaultValue,!0);break;default:typeof C.onClick=="function"&&(a.onclick=gc)}switch(g){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}}S&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return ii(c),null;case 6:if(a&&c.stateNode!=null)fw(a,c,a.memoizedProps,S);else{if(typeof S!="string"&&c.stateNode===null)throw Error(t(166));if(g=Yn($s.current),Yn(_i.current),al(c)){if(S=c.stateNode,g=c.memoizedProps,S[ir]=c,(P=S.nodeValue!==g)&&(a=Er,a!==null))switch(a.tag){case 3:mc(S.nodeValue,g,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&mc(S.nodeValue,g,(a.mode&1)!==0)}P&&(c.flags|=4)}else S=(g.nodeType===9?g:g.ownerDocument).createTextNode(S),S[ir]=c,c.stateNode=S}return ii(c),null;case 13:if(Mn(Cn),S=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(An&&$r!==null&&(c.mode&1)!==0&&(c.flags&128)===0)of(),Ea(),c.flags|=98560,P=!1;else if(P=al(c),S!==null&&S.dehydrated!==null){if(a===null){if(!P)throw Error(t(318));if(P=c.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(t(317));P[ir]=c}else Ea(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;ii(c),P=!1}else Vi!==null&&(Xy(Vi),Vi=null),P=!0;if(!P)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=g,c):(S=S!==null,S!==(a!==null&&a.memoizedState!==null)&&S&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(Cn.current&1)!==0?Nr===0&&(Nr=3):Yy())),c.updateQueue!==null&&(c.flags|=4),ii(c),null);case 4:return Aa(),Dy(a,c),a===null&&nl(c.stateNode.containerInfo),ii(c),null;case 10:return Mc(c.type._context),ii(c),null;case 17:return Ir(c.type)&&yc(),ii(c),null;case 19:if(Mn(Cn),P=c.memoizedState,P===null)return ii(c),null;if(S=(c.flags&128)!==0,F=P.rendering,F===null)if(S)_f(P,!1);else{if(Nr!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(F=as(a),F!==null){for(c.flags|=128,_f(P,!1),S=F.updateQueue,S!==null&&(c.updateQueue=S,c.flags|=4),c.subtreeFlags=0,S=g,g=c.child;g!==null;)P=g,a=S,P.flags&=14680066,F=P.alternate,F===null?(P.childLanes=0,P.lanes=a,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=F.childLanes,P.lanes=F.lanes,P.child=F.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=F.memoizedProps,P.memoizedState=F.memoizedState,P.updateQueue=F.updateQueue,P.type=F.type,a=F.dependencies,P.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),g=g.sibling;return yn(Cn,Cn.current&1|2),c.child}a=a.sibling}P.tail!==null&&rt()>Td&&(c.flags|=128,S=!0,_f(P,!1),c.lanes=4194304)}else{if(!S)if(a=as(F),a!==null){if(c.flags|=128,S=!0,g=a.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),_f(P,!0),P.tail===null&&P.tailMode==="hidden"&&!F.alternate&&!An)return ii(c),null}else 2*rt()-P.renderingStartTime>Td&&g!==1073741824&&(c.flags|=128,S=!0,_f(P,!1),c.lanes=4194304);P.isBackwards?(F.sibling=c.child,c.child=F):(g=P.last,g!==null?g.sibling=F:c.child=F,P.last=F)}return P.tail!==null?(c=P.tail,P.rendering=c,P.tail=c.sibling,P.renderingStartTime=rt(),c.sibling=null,g=Cn.current,yn(Cn,S?g&1|2:g&1),c):(ii(c),null);case 22:case 23:return qy(),S=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==S&&(c.flags|=8192),S&&(c.mode&1)!==0?(cs&1073741824)!==0&&(ii(c),c.subtreeFlags&6&&(c.flags|=8192)):ii(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function TN(a,c){switch(Ws(c),c.tag){case 1:return Ir(c.type)&&yc(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Aa(),Mn(Gr),Mn(Mr),Ss(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return ul(c),null;case 13:if(Mn(Cn),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(t(340));Ea()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return Mn(Cn),null;case 4:return Aa(),null;case 10:return Mc(c.type._context),null;case 22:case 23:return qy(),null;case 24:return null;default:return null}}var Pm=!1,si=!1,AN=typeof WeakSet=="function"?WeakSet:Set,dt=null;function Md(a,c){var g=a.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(S){Kn(a,c,S)}else g.current=null}function Uy(a,c,g){try{g()}catch(S){Kn(a,c,S)}}var pw=!1;function CN(a,c){if(il=Di,a=Dn(),hr(a)){if("selectionStart"in a)var g={start:a.selectionStart,end:a.selectionEnd};else e:{g=(g=a.ownerDocument)&&g.defaultView||window;var S=g.getSelection&&g.getSelection();if(S&&S.rangeCount!==0){g=S.anchorNode;var C=S.anchorOffset,P=S.focusNode;S=S.focusOffset;try{g.nodeType,P.nodeType}catch{g=null;break e}var F=0,J=-1,se=-1,we=0,Fe=0,Be=a,De=null;t:for(;;){for(var st;Be!==g||C!==0&&Be.nodeType!==3||(J=F+C),Be!==P||S!==0&&Be.nodeType!==3||(se=F+S),Be.nodeType===3&&(F+=Be.nodeValue.length),(st=Be.firstChild)!==null;)De=Be,Be=st;for(;;){if(Be===a)break t;if(De===g&&++we===C&&(J=F),De===P&&++Fe===S&&(se=F),(st=Be.nextSibling)!==null)break;Be=De,De=Be.parentNode}Be=st}g=J===-1||se===-1?null:{start:J,end:se}}else g=null}g=g||{start:0,end:0}}else g=null;for(qh={focusedElem:a,selectionRange:g},Di=!1,dt=c;dt!==null;)if(c=dt,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,dt=a;else for(;dt!==null;){c=dt;try{var ft=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(ft!==null){var mt=ft.memoizedProps,sr=ft.memoizedState,ye=c.stateNode,ce=ye.getSnapshotBeforeUpdate(c.elementType===c.type?mt:Hi(c.type,mt),sr);ye.__reactInternalSnapshotBeforeUpdate=ce}break;case 3:var xe=c.stateNode.containerInfo;xe.nodeType===1?xe.textContent="":xe.nodeType===9&&xe.documentElement&&xe.removeChild(xe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(He){Kn(c,c.return,He)}if(a=c.sibling,a!==null){a.return=c.return,dt=a;break}dt=c.return}return ft=pw,pw=!1,ft}function wf(a,c,g){var S=c.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var C=S=S.next;do{if((C.tag&a)===a){var P=C.destroy;C.destroy=void 0,P!==void 0&&Uy(c,g,P)}C=C.next}while(C!==S)}}function Lm(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var g=c=c.next;do{if((g.tag&a)===a){var S=g.create;g.destroy=S()}g=g.next}while(g!==c)}}function Oy(a){var c=a.ref;if(c!==null){var g=a.stateNode;switch(a.tag){case 5:a=g;break;default:a=g}typeof c=="function"?c(a):c.current=a}}function mw(a){var c=a.alternate;c!==null&&(a.alternate=null,mw(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[ir],delete c[sl],delete c[no],delete c[od],delete c[ld])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function gw(a){return a.tag===5||a.tag===3||a.tag===4}function yw(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||gw(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Fy(a,c,g){var S=a.tag;if(S===5||S===6)a=a.stateNode,c?g.nodeType===8?g.parentNode.insertBefore(a,c):g.insertBefore(a,c):(g.nodeType===8?(c=g.parentNode,c.insertBefore(a,g)):(c=g,c.appendChild(a)),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=gc));else if(S!==4&&(a=a.child,a!==null))for(Fy(a,c,g),a=a.sibling;a!==null;)Fy(a,c,g),a=a.sibling}function zy(a,c,g){var S=a.tag;if(S===5||S===6)a=a.stateNode,c?g.insertBefore(a,c):g.appendChild(a);else if(S!==4&&(a=a.child,a!==null))for(zy(a,c,g),a=a.sibling;a!==null;)zy(a,c,g),a=a.sibling}var Yr=null,Js=!1;function fl(a,c,g){for(g=g.child;g!==null;)xw(a,c,g),g=g.sibling}function xw(a,c,g){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(Vn,g)}catch{}switch(g.tag){case 5:si||Md(g,c);case 6:var S=Yr,C=Js;Yr=null,fl(a,c,g),Yr=S,Js=C,Yr!==null&&(Js?(a=Yr,g=g.stateNode,a.nodeType===8?a.parentNode.removeChild(g):a.removeChild(g)):Yr.removeChild(g.stateNode));break;case 18:Yr!==null&&(Js?(a=Yr,g=g.stateNode,a.nodeType===8?ad(a.parentNode,g):a.nodeType===1&&ad(a,g),ic(a)):ad(Yr,g.stateNode));break;case 4:S=Yr,C=Js,Yr=g.stateNode.containerInfo,Js=!0,fl(a,c,g),Yr=S,Js=C;break;case 0:case 11:case 14:case 15:if(!si&&(S=g.updateQueue,S!==null&&(S=S.lastEffect,S!==null))){C=S=S.next;do{var P=C,F=P.destroy;P=P.tag,F!==void 0&&((P&2)!==0||(P&4)!==0)&&Uy(g,c,F),C=C.next}while(C!==S)}fl(a,c,g);break;case 1:if(!si&&(Md(g,c),S=g.stateNode,typeof S.componentWillUnmount=="function"))try{S.props=g.memoizedProps,S.state=g.memoizedState,S.componentWillUnmount()}catch(J){Kn(g,c,J)}fl(a,c,g);break;case 21:fl(a,c,g);break;case 22:g.mode&1?(si=(S=si)||g.memoizedState!==null,fl(a,c,g),si=S):fl(a,c,g);break;default:fl(a,c,g)}}function vw(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var g=a.stateNode;g===null&&(g=a.stateNode=new AN),c.forEach(function(S){var C=ON.bind(null,a,S);g.has(S)||(g.add(S),S.then(C,C))})}}function Qs(a,c){var g=c.deletions;if(g!==null)for(var S=0;S<g.length;S++){var C=g[S];try{var P=a,F=c,J=F;e:for(;J!==null;){switch(J.tag){case 5:Yr=J.stateNode,Js=!1;break e;case 3:Yr=J.stateNode.containerInfo,Js=!0;break e;case 4:Yr=J.stateNode.containerInfo,Js=!0;break e}J=J.return}if(Yr===null)throw Error(t(160));xw(P,F,C),Yr=null,Js=!1;var se=C.alternate;se!==null&&(se.return=null),C.return=null}catch(we){Kn(C,c,we)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)_w(c,a),c=c.sibling}function _w(a,c){var g=a.alternate,S=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Qs(c,a),Na(a),S&4){try{wf(3,a,a.return),Lm(3,a)}catch(mt){Kn(a,a.return,mt)}try{wf(5,a,a.return)}catch(mt){Kn(a,a.return,mt)}}break;case 1:Qs(c,a),Na(a),S&512&&g!==null&&Md(g,g.return);break;case 5:if(Qs(c,a),Na(a),S&512&&g!==null&&Md(g,g.return),a.flags&32){var C=a.stateNode;try{Ie(C,"")}catch(mt){Kn(a,a.return,mt)}}if(S&4&&(C=a.stateNode,C!=null)){var P=a.memoizedProps,F=g!==null?g.memoizedProps:P,J=a.type,se=a.updateQueue;if(a.updateQueue=null,se!==null)try{J==="input"&&P.type==="radio"&&P.name!=null&&Ne(C,P),tn(J,F);var we=tn(J,P);for(F=0;F<se.length;F+=2){var Fe=se[F],Be=se[F+1];Fe==="style"?bt(C,Be):Fe==="dangerouslySetInnerHTML"?Ot(C,Be):Fe==="children"?Ie(C,Be):A(C,Fe,Be,we)}switch(J){case"input":xt(C,P);break;case"textarea":Le(C,P);break;case"select":var De=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!P.multiple;var st=P.value;st!=null?pe(C,!!P.multiple,st,!1):De!==!!P.multiple&&(P.defaultValue!=null?pe(C,!!P.multiple,P.defaultValue,!0):pe(C,!!P.multiple,P.multiple?[]:"",!1))}C[sl]=P}catch(mt){Kn(a,a.return,mt)}}break;case 6:if(Qs(c,a),Na(a),S&4){if(a.stateNode===null)throw Error(t(162));C=a.stateNode,P=a.memoizedProps;try{C.nodeValue=P}catch(mt){Kn(a,a.return,mt)}}break;case 3:if(Qs(c,a),Na(a),S&4&&g!==null&&g.memoizedState.isDehydrated)try{ic(c.containerInfo)}catch(mt){Kn(a,a.return,mt)}break;case 4:Qs(c,a),Na(a);break;case 13:Qs(c,a),Na(a),C=a.child,C.flags&8192&&(P=C.memoizedState!==null,C.stateNode.isHidden=P,!P||C.alternate!==null&&C.alternate.memoizedState!==null||(Vy=rt())),S&4&&vw(a);break;case 22:if(Fe=g!==null&&g.memoizedState!==null,a.mode&1?(si=(we=si)||Fe,Qs(c,a),si=we):Qs(c,a),Na(a),S&8192){if(we=a.memoizedState!==null,(a.stateNode.isHidden=we)&&!Fe&&(a.mode&1)!==0)for(dt=a,Fe=a.child;Fe!==null;){for(Be=dt=Fe;dt!==null;){switch(De=dt,st=De.child,De.tag){case 0:case 11:case 14:case 15:wf(4,De,De.return);break;case 1:Md(De,De.return);var ft=De.stateNode;if(typeof ft.componentWillUnmount=="function"){S=De,g=De.return;try{c=S,ft.props=c.memoizedProps,ft.state=c.memoizedState,ft.componentWillUnmount()}catch(mt){Kn(S,g,mt)}}break;case 5:Md(De,De.return);break;case 22:if(De.memoizedState!==null){bw(Be);continue}}st!==null?(st.return=De,dt=st):bw(Be)}Fe=Fe.sibling}e:for(Fe=null,Be=a;;){if(Be.tag===5){if(Fe===null){Fe=Be;try{C=Be.stateNode,we?(P=C.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(J=Be.stateNode,se=Be.memoizedProps.style,F=se!=null&&se.hasOwnProperty("display")?se.display:null,J.style.display=Pt("display",F))}catch(mt){Kn(a,a.return,mt)}}}else if(Be.tag===6){if(Fe===null)try{Be.stateNode.nodeValue=we?"":Be.memoizedProps}catch(mt){Kn(a,a.return,mt)}}else if((Be.tag!==22&&Be.tag!==23||Be.memoizedState===null||Be===a)&&Be.child!==null){Be.child.return=Be,Be=Be.child;continue}if(Be===a)break e;for(;Be.sibling===null;){if(Be.return===null||Be.return===a)break e;Fe===Be&&(Fe=null),Be=Be.return}Fe===Be&&(Fe=null),Be.sibling.return=Be.return,Be=Be.sibling}}break;case 19:Qs(c,a),Na(a),S&4&&vw(a);break;case 21:break;default:Qs(c,a),Na(a)}}function Na(a){var c=a.flags;if(c&2){try{e:{for(var g=a.return;g!==null;){if(gw(g)){var S=g;break e}g=g.return}throw Error(t(160))}switch(S.tag){case 5:var C=S.stateNode;S.flags&32&&(Ie(C,""),S.flags&=-33);var P=yw(a);zy(a,P,C);break;case 3:case 4:var F=S.stateNode.containerInfo,J=yw(a);Fy(a,J,F);break;default:throw Error(t(161))}}catch(se){Kn(a,a.return,se)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function NN(a,c,g){dt=a,ww(a)}function ww(a,c,g){for(var S=(a.mode&1)!==0;dt!==null;){var C=dt,P=C.child;if(C.tag===22&&S){var F=C.memoizedState!==null||Pm;if(!F){var J=C.alternate,se=J!==null&&J.memoizedState!==null||si;J=Pm;var we=si;if(Pm=F,(si=se)&&!we)for(dt=C;dt!==null;)F=dt,se=F.child,F.tag===22&&F.memoizedState!==null?Mw(C):se!==null?(se.return=F,dt=se):Mw(C);for(;P!==null;)dt=P,ww(P),P=P.sibling;dt=C,Pm=J,si=we}Sw(a)}else(C.subtreeFlags&8772)!==0&&P!==null?(P.return=C,dt=P):Sw(a)}}function Sw(a){for(;dt!==null;){var c=dt;if((c.flags&8772)!==0){var g=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:si||Lm(5,c);break;case 1:var S=c.stateNode;if(c.flags&4&&!si)if(g===null)S.componentDidMount();else{var C=c.elementType===c.type?g.memoizedProps:Hi(c.type,g.memoizedProps);S.componentDidUpdate(C,g.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var P=c.updateQueue;P!==null&&cl(c,P,S);break;case 3:var F=c.updateQueue;if(F!==null){if(g=null,c.child!==null)switch(c.child.tag){case 5:g=c.child.stateNode;break;case 1:g=c.child.stateNode}cl(c,F,g)}break;case 5:var J=c.stateNode;if(g===null&&c.flags&4){g=J;var se=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":se.autoFocus&&g.focus();break;case"img":se.src&&(g.src=se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var we=c.alternate;if(we!==null){var Fe=we.memoizedState;if(Fe!==null){var Be=Fe.dehydrated;Be!==null&&ic(Be)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}si||c.flags&512&&Oy(c)}catch(De){Kn(c,c.return,De)}}if(c===a){dt=null;break}if(g=c.sibling,g!==null){g.return=c.return,dt=g;break}dt=c.return}}function bw(a){for(;dt!==null;){var c=dt;if(c===a){dt=null;break}var g=c.sibling;if(g!==null){g.return=c.return,dt=g;break}dt=c.return}}function Mw(a){for(;dt!==null;){var c=dt;try{switch(c.tag){case 0:case 11:case 15:var g=c.return;try{Lm(4,c)}catch(se){Kn(c,g,se)}break;case 1:var S=c.stateNode;if(typeof S.componentDidMount=="function"){var C=c.return;try{S.componentDidMount()}catch(se){Kn(c,C,se)}}var P=c.return;try{Oy(c)}catch(se){Kn(c,P,se)}break;case 5:var F=c.return;try{Oy(c)}catch(se){Kn(c,F,se)}}}catch(se){Kn(c,c.return,se)}if(c===a){dt=null;break}var J=c.sibling;if(J!==null){J.return=c.return,dt=J;break}dt=c.return}}var kN=Math.ceil,Im=R.ReactCurrentDispatcher,By=R.ReactCurrentOwner,Ms=R.ReactCurrentBatchConfig,ln=0,Or=null,yr=null,Zr=0,cs=0,Ed=zn(0),Nr=0,Sf=null,Dc=0,Dm=0,jy=0,bf=null,Wi=null,Vy=0,Td=1/0,vo=null,Um=!1,Hy=null,pl=null,Om=!1,ml=null,Fm=0,Mf=0,Wy=null,zm=-1,Bm=0;function Mi(){return(ln&6)!==0?rt():zm!==-1?zm:zm=rt()}function gl(a){return(a.mode&1)===0?1:(ln&2)!==0&&Zr!==0?Zr&-Zr:Py.transition!==null?(Bm===0&&(Bm=Jr()),Bm):(a=an,a!==0||(a=window.event,a=a===void 0?16:sm(a.type)),a)}function ea(a,c,g,S){if(50<Mf)throw Mf=0,Wy=null,Error(t(185));ec(a,g,S),((ln&2)===0||a!==Or)&&(a===Or&&((ln&2)===0&&(Dm|=g),Nr===4&&yl(a,Zr)),Gi(a,S),g===1&&ln===0&&(c.mode&1)===0&&(Td=rt()+500,vc&&_s()))}function Gi(a,c){var g=a.callbackNode;Sr(a,c);var S=pi(a,a===Or?Zr:0);if(S===0)g!==null&&nt(g),a.callbackNode=null,a.callbackPriority=0;else if(c=S&-S,a.callbackPriority!==c){if(g!=null&&nt(g),c===1)a.tag===0?vm(Tw.bind(null,a)):_c(Tw.bind(null,a)),Ry(function(){(ln&6)===0&&_s()}),g=null;else{switch(Ho(S)){case 1:g=kt;break;case 4:g=Lt;break;case 16:g=wn;break;case 536870912:g=Sn;break;default:g=wn}g=Iw(g,Ew.bind(null,a))}a.callbackPriority=c,a.callbackNode=g}}function Ew(a,c){if(zm=-1,Bm=0,(ln&6)!==0)throw Error(t(327));var g=a.callbackNode;if(Ad()&&a.callbackNode!==g)return null;var S=pi(a,a===Or?Zr:0);if(S===0)return null;if((S&30)!==0||(S&a.expiredLanes)!==0||c)c=jm(a,S);else{c=S;var C=ln;ln|=2;var P=Cw();(Or!==a||Zr!==c)&&(vo=null,Td=rt()+500,Oc(a,c));do try{LN();break}catch(J){Aw(a,J)}while(!0);uo(),Im.current=P,ln=C,yr!==null?c=0:(Or=null,Zr=0,c=Nr)}if(c!==0){if(c===2&&(C=ga(a),C!==0&&(S=C,c=Gy(a,C))),c===1)throw g=Sf,Oc(a,0),yl(a,S),Gi(a,rt()),g;if(c===6)yl(a,S);else{if(C=a.current.alternate,(S&30)===0&&!RN(C)&&(c=jm(a,S),c===2&&(P=ga(a),P!==0&&(S=P,c=Gy(a,P))),c===1))throw g=Sf,Oc(a,0),yl(a,S),Gi(a,rt()),g;switch(a.finishedWork=C,a.finishedLanes=S,c){case 0:case 1:throw Error(t(345));case 2:Fc(a,Wi,vo);break;case 3:if(yl(a,S),(S&130023424)===S&&(c=Vy+500-rt(),10<c)){if(pi(a,0)!==0)break;if(C=a.suspendedLanes,(C&S)!==S){Mi(),a.pingedLanes|=a.suspendedLanes&C;break}a.timeoutHandle=Zh(Fc.bind(null,a,Wi,vo),c);break}Fc(a,Wi,vo);break;case 4:if(yl(a,S),(S&4194240)===S)break;for(c=a.eventTimes,C=-1;0<S;){var F=31-On(S);P=1<<F,F=c[F],F>C&&(C=F),S&=~P}if(S=C,S=rt()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*kN(S/1960))-S,10<S){a.timeoutHandle=Zh(Fc.bind(null,a,Wi,vo),S);break}Fc(a,Wi,vo);break;case 5:Fc(a,Wi,vo);break;default:throw Error(t(329))}}}return Gi(a,rt()),a.callbackNode===g?Ew.bind(null,a):null}function Gy(a,c){var g=bf;return a.current.memoizedState.isDehydrated&&(Oc(a,c).flags|=256),a=jm(a,c),a!==2&&(c=Wi,Wi=g,c!==null&&Xy(c)),a}function Xy(a){Wi===null?Wi=a:Wi.push.apply(Wi,a)}function RN(a){for(var c=a;;){if(c.flags&16384){var g=c.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var S=0;S<g.length;S++){var C=g[S],P=C.getSnapshot;C=C.value;try{if(!gi(P(),C))return!1}catch{return!1}}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function yl(a,c){for(c&=~jy,c&=~Dm,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var g=31-On(c),S=1<<g;a[g]=-1,c&=~S}}function Tw(a){if((ln&6)!==0)throw Error(t(327));Ad();var c=pi(a,0);if((c&1)===0)return Gi(a,rt()),null;var g=jm(a,c);if(a.tag!==0&&g===2){var S=ga(a);S!==0&&(c=S,g=Gy(a,S))}if(g===1)throw g=Sf,Oc(a,0),yl(a,c),Gi(a,rt()),g;if(g===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,Fc(a,Wi,vo),Gi(a,rt()),null}function $y(a,c){var g=ln;ln|=1;try{return a(c)}finally{ln=g,ln===0&&(Td=rt()+500,vc&&_s())}}function Uc(a){ml!==null&&ml.tag===0&&(ln&6)===0&&Ad();var c=ln;ln|=1;var g=Ms.transition,S=an;try{if(Ms.transition=null,an=1,a)return a()}finally{an=S,Ms.transition=g,ln=c,(ln&6)===0&&_s()}}function qy(){cs=Ed.current,Mn(Ed)}function Oc(a,c){a.finishedWork=null,a.finishedLanes=0;var g=a.timeoutHandle;if(g!==-1&&(a.timeoutHandle=-1,Kh(g)),yr!==null)for(g=yr.return;g!==null;){var S=g;switch(Ws(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&yc();break;case 3:Aa(),Mn(Gr),Mn(Mr),Ss();break;case 5:ul(S);break;case 4:Aa();break;case 13:Mn(Cn);break;case 19:Mn(Cn);break;case 10:Mc(S.type._context);break;case 22:case 23:qy()}g=g.return}if(Or=a,yr=a=xl(a.current,null),Zr=cs=c,Nr=0,Sf=null,jy=Dm=Dc=0,Wi=bf=null,Xs!==null){for(c=0;c<Xs.length;c++)if(g=Xs[c],S=g.interleaved,S!==null){g.interleaved=null;var C=S.next,P=g.pending;if(P!==null){var F=P.next;P.next=C,S.next=F}g.pending=S}Xs=null}return a}function Aw(a,c){do{var g=yr;try{if(uo(),mo.current=Sd,os){for(var S=En.memoizedState;S!==null;){var C=S.queue;C!==null&&(C.pending=null),S=S.next}os=!1}if(qs=0,on=jn=En=null,Ur=!1,Ca=0,By.current=null,g===null||g.return===null){Nr=1,Sf=c,yr=null;break}e:{var P=a,F=g.return,J=g,se=c;if(c=Zr,J.flags|=32768,se!==null&&typeof se=="object"&&typeof se.then=="function"){var we=se,Fe=J,Be=Fe.tag;if((Fe.mode&1)===0&&(Be===0||Be===11||Be===15)){var De=Fe.alternate;De?(Fe.updateQueue=De.updateQueue,Fe.memoizedState=De.memoizedState,Fe.lanes=De.lanes):(Fe.updateQueue=null,Fe.memoizedState=null)}var st=ct(F);if(st!==null){st.flags&=-257,zt(st,F,J,P,c),st.mode&1&&Ve(P,we,c),c=st,se=we;var ft=c.updateQueue;if(ft===null){var mt=new Set;mt.add(se),c.updateQueue=mt}else ft.add(se);break e}else{if((c&1)===0){Ve(P,we,c),Yy();break e}se=Error(t(426))}}else if(An&&J.mode&1){var sr=ct(F);if(sr!==null){(sr.flags&65536)===0&&(sr.flags|=256),zt(sr,F,J,P,c),ol(E(se,J));break e}}P=se=E(se,J),Nr!==4&&(Nr=2),bf===null?bf=[P]:bf.push(P),P=F;do{switch(P.tag){case 3:P.flags|=65536,c&=-c,P.lanes|=c;var ye=ue(P,se,c);ho(P,ye);break e;case 1:J=se;var ce=P.type,xe=P.stateNode;if((P.flags&128)===0&&(typeof ce.getDerivedStateFromError=="function"||xe!==null&&typeof xe.componentDidCatch=="function"&&(pl===null||!pl.has(xe)))){P.flags|=65536,c&=-c,P.lanes|=c;var He=Te(P,J,c);ho(P,He);break e}}P=P.return}while(P!==null)}kw(g)}catch(_t){c=_t,yr===g&&g!==null&&(yr=g=g.return);continue}break}while(!0)}function Cw(){var a=Im.current;return Im.current=Sd,a===null?Sd:a}function Yy(){(Nr===0||Nr===3||Nr===2)&&(Nr=4),Or===null||(Dc&268435455)===0&&(Dm&268435455)===0||yl(Or,Zr)}function jm(a,c){var g=ln;ln|=2;var S=Cw();(Or!==a||Zr!==c)&&(vo=null,Oc(a,c));do try{PN();break}catch(C){Aw(a,C)}while(!0);if(uo(),ln=g,Im.current=S,yr!==null)throw Error(t(261));return Or=null,Zr=0,Nr}function PN(){for(;yr!==null;)Nw(yr)}function LN(){for(;yr!==null&&!wt();)Nw(yr)}function Nw(a){var c=Lw(a.alternate,a,cs);a.memoizedProps=a.pendingProps,c===null?kw(a):yr=c,By.current=null}function kw(a){var c=a;do{var g=c.alternate;if(a=c.return,(c.flags&32768)===0){if(g=EN(g,c,cs),g!==null){yr=g;return}}else{if(g=TN(g,c),g!==null){g.flags&=32767,yr=g;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Nr=6,yr=null;return}}if(c=c.sibling,c!==null){yr=c;return}yr=c=a}while(c!==null);Nr===0&&(Nr=5)}function Fc(a,c,g){var S=an,C=Ms.transition;try{Ms.transition=null,an=1,IN(a,c,g,S)}finally{Ms.transition=C,an=S}return null}function IN(a,c,g,S){do Ad();while(ml!==null);if((ln&6)!==0)throw Error(t(327));g=a.finishedWork;var C=a.finishedLanes;if(g===null)return null;if(a.finishedWork=null,a.finishedLanes=0,g===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var P=g.lanes|g.childLanes;if(Ay(a,P),a===Or&&(yr=Or=null,Zr=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||Om||(Om=!0,Iw(wn,function(){return Ad(),null})),P=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||P){P=Ms.transition,Ms.transition=null;var F=an;an=1;var J=ln;ln|=4,By.current=null,CN(a,g),_w(g,a),fr(qh),Di=!!il,qh=il=null,a.current=g,NN(g),At(),ln=J,an=F,Ms.transition=P}else a.current=g;if(Om&&(Om=!1,ml=a,Fm=C),P=a.pendingLanes,P===0&&(pl=null),ut(g.stateNode),Gi(a,rt()),c!==null)for(S=a.onRecoverableError,g=0;g<c.length;g++)C=c[g],S(C.value,{componentStack:C.stack,digest:C.digest});if(Um)throw Um=!1,a=Hy,Hy=null,a;return(Fm&1)!==0&&a.tag!==0&&Ad(),P=a.pendingLanes,(P&1)!==0?a===Wy?Mf++:(Mf=0,Wy=a):Mf=0,_s(),null}function Ad(){if(ml!==null){var a=Ho(Fm),c=Ms.transition,g=an;try{if(Ms.transition=null,an=16>a?16:a,ml===null)var S=!1;else{if(a=ml,ml=null,Fm=0,(ln&6)!==0)throw Error(t(331));var C=ln;for(ln|=4,dt=a.current;dt!==null;){var P=dt,F=P.child;if((dt.flags&16)!==0){var J=P.deletions;if(J!==null){for(var se=0;se<J.length;se++){var we=J[se];for(dt=we;dt!==null;){var Fe=dt;switch(Fe.tag){case 0:case 11:case 15:wf(8,Fe,P)}var Be=Fe.child;if(Be!==null)Be.return=Fe,dt=Be;else for(;dt!==null;){Fe=dt;var De=Fe.sibling,st=Fe.return;if(mw(Fe),Fe===we){dt=null;break}if(De!==null){De.return=st,dt=De;break}dt=st}}}var ft=P.alternate;if(ft!==null){var mt=ft.child;if(mt!==null){ft.child=null;do{var sr=mt.sibling;mt.sibling=null,mt=sr}while(mt!==null)}}dt=P}}if((P.subtreeFlags&2064)!==0&&F!==null)F.return=P,dt=F;else e:for(;dt!==null;){if(P=dt,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:wf(9,P,P.return)}var ye=P.sibling;if(ye!==null){ye.return=P.return,dt=ye;break e}dt=P.return}}var ce=a.current;for(dt=ce;dt!==null;){F=dt;var xe=F.child;if((F.subtreeFlags&2064)!==0&&xe!==null)xe.return=F,dt=xe;else e:for(F=ce;dt!==null;){if(J=dt,(J.flags&2048)!==0)try{switch(J.tag){case 0:case 11:case 15:Lm(9,J)}}catch(_t){Kn(J,J.return,_t)}if(J===F){dt=null;break e}var He=J.sibling;if(He!==null){He.return=J.return,dt=He;break e}dt=J.return}}if(ln=C,_s(),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(Vn,a)}catch{}S=!0}return S}finally{an=g,Ms.transition=c}}return!1}function Rw(a,c,g){c=E(g,c),c=ue(a,c,1),a=kn(a,c,1),c=Mi(),a!==null&&(ec(a,1,c),Gi(a,c))}function Kn(a,c,g){if(a.tag===3)Rw(a,a,g);else for(;c!==null;){if(c.tag===3){Rw(c,a,g);break}else if(c.tag===1){var S=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(pl===null||!pl.has(S))){a=E(g,a),a=Te(c,a,1),c=kn(c,a,1),a=Mi(),c!==null&&(ec(c,1,a),Gi(c,a));break}}c=c.return}}function DN(a,c,g){var S=a.pingCache;S!==null&&S.delete(c),c=Mi(),a.pingedLanes|=a.suspendedLanes&g,Or===a&&(Zr&g)===g&&(Nr===4||Nr===3&&(Zr&130023424)===Zr&&500>rt()-Vy?Oc(a,0):jy|=g),Gi(a,c)}function Pw(a,c){c===0&&((a.mode&1)===0?c=1:(c=Hn,Hn<<=1,(Hn&130023424)===0&&(Hn=4194304)));var g=Mi();a=ss(a,c),a!==null&&(ec(a,c,g),Gi(a,g))}function UN(a){var c=a.memoizedState,g=0;c!==null&&(g=c.retryLane),Pw(a,g)}function ON(a,c){var g=0;switch(a.tag){case 13:var S=a.stateNode,C=a.memoizedState;C!==null&&(g=C.retryLane);break;case 19:S=a.stateNode;break;default:throw Error(t(314))}S!==null&&S.delete(c),Pw(a,g)}var Lw;Lw=function(a,c,g){if(a!==null)if(a.memoizedProps!==c.pendingProps||Gr.current)Wt=!0;else{if((a.lanes&g)===0&&(c.flags&128)===0)return Wt=!1,MN(a,c,g);Wt=(a.flags&131072)!==0}else Wt=!1,An&&(c.flags&1048576)!==0&&nf(c,hd,c.index);switch(c.lanes=0,c.tag){case 2:var S=c.type;Rm(a,c),a=c.pendingProps;var C=ro(c,Mr.current);Ta(c,g),C=Nc(null,c,S,a,C,g);var P=df();return c.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Ir(S)?(P=!0,io(c)):P=!1,c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,Ht(c),C.updater=bd,c.stateNode=C,C._reactInternals=c,w(c,S,a,g),c=Vt(null,c,S,!0,P,g)):(c.tag=0,An&&P&&rf(c),tt(null,c,C,g),c=c.child),c;case 16:S=c.elementType;e:{switch(Rm(a,c),a=c.pendingProps,C=S._init,S=C(S._payload),c.type=S,C=c.tag=zN(S),a=Hi(S,a),C){case 0:c=Qe(null,c,S,a,g);break e;case 1:c=gt(null,c,S,a,g);break e;case 11:c=Cr(null,c,S,a,g);break e;case 14:c=bi(null,c,S,Hi(S.type,a),g);break e}throw Error(t(306,S,""))}return c;case 0:return S=c.type,C=c.pendingProps,C=c.elementType===S?C:Hi(S,C),Qe(a,c,S,C,g);case 1:return S=c.type,C=c.pendingProps,C=c.elementType===S?C:Hi(S,C),gt(a,c,S,C,g);case 3:e:{if(Bt(c),a===null)throw Error(t(387));S=c.pendingProps,P=c.memoizedState,C=P.element,Gn(a,c),Bn(c,S,null,g);var F=c.memoizedState;if(S=F.element,P.isDehydrated)if(P={element:S,isDehydrated:!1,cache:F.cache,pendingSuspenseBoundaries:F.pendingSuspenseBoundaries,transitions:F.transitions},c.updateQueue.baseState=P,c.memoizedState=P,c.flags&256){C=E(Error(t(423)),c),c=rn(a,c,S,g,C);break e}else if(S!==C){C=E(Error(t(424)),c),c=rn(a,c,S,g,C);break e}else for($r=zs(c.stateNode.containerInfo.firstChild),Er=c,An=!0,Vi=null,g=bc(c,null,S,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Ea(),S===C){c=xo(a,c,g);break e}tt(a,c,S,g)}c=c.child}return c;case 5:return po(c),a===null&&pd(c),S=c.type,C=c.pendingProps,P=a!==null?a.memoizedProps:null,F=C.children,Yh(S,C)?F=null:P!==null&&Yh(S,P)&&(c.flags|=32),Me(a,c),tt(a,c,F,g),c.child;case 6:return a===null&&pd(c),null;case 13:return Ks(a,c,g);case 4:return Ac(c,c.stateNode.containerInfo),S=c.pendingProps,a===null?c.child=oo(c,null,S,g):tt(a,c,S,g),c.child;case 11:return S=c.type,C=c.pendingProps,C=c.elementType===S?C:Hi(S,C),Cr(a,c,S,C,g);case 7:return tt(a,c,c.pendingProps,g),c.child;case 8:return tt(a,c,c.pendingProps.children,g),c.child;case 12:return tt(a,c,c.pendingProps.children,g),c.child;case 10:e:{if(S=c.type._context,C=c.pendingProps,P=c.memoizedProps,F=C.value,yn(lo,S._currentValue),S._currentValue=F,P!==null)if(gi(P.value,F)){if(P.children===C.children&&!Gr.current){c=xo(a,c,g);break e}}else for(P=c.child,P!==null&&(P.return=c);P!==null;){var J=P.dependencies;if(J!==null){F=P.child;for(var se=J.firstContext;se!==null;){if(se.context===S){if(P.tag===1){se=gn(-1,g&-g),se.tag=2;var we=P.updateQueue;if(we!==null){we=we.shared;var Fe=we.pending;Fe===null?se.next=se:(se.next=Fe.next,Fe.next=se),we.pending=se}}P.lanes|=g,se=P.alternate,se!==null&&(se.lanes|=g),Ec(P.return,g,c),J.lanes|=g;break}se=se.next}}else if(P.tag===10)F=P.type===c.type?null:P.child;else if(P.tag===18){if(F=P.return,F===null)throw Error(t(341));F.lanes|=g,J=F.alternate,J!==null&&(J.lanes|=g),Ec(F,g,c),F=P.sibling}else F=P.child;if(F!==null)F.return=P;else for(F=P;F!==null;){if(F===c){F=null;break}if(P=F.sibling,P!==null){P.return=F.return,F=P;break}F=F.return}P=F}tt(a,c,C.children,g),c=c.child}return c;case 9:return C=c.type,S=c.pendingProps.children,Ta(c,g),C=vi(C),S=S(C),c.flags|=1,tt(a,c,S,g),c.child;case 14:return S=c.type,C=Hi(S,c.pendingProps),C=Hi(S.type,C),bi(a,c,S,C,g);case 15:return ve(a,c,c.type,c.pendingProps,g);case 17:return S=c.type,C=c.pendingProps,C=c.elementType===S?C:Hi(S,C),Rm(a,c),c.tag=1,Ir(S)?(a=!0,io(c)):a=!1,Ta(c,g),u(c,S,C),w(c,S,C,g),Vt(null,c,S,!0,a,g);case 19:return uw(a,c,g);case 22:return he(a,c,g)}throw Error(t(156,c.tag))};function Iw(a,c){return _e(a,c)}function FN(a,c,g,S){this.tag=a,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Es(a,c,g,S){return new FN(a,c,g,S)}function Zy(a){return a=a.prototype,!(!a||!a.isReactComponent)}function zN(a){if(typeof a=="function")return Zy(a)?1:0;if(a!=null){if(a=a.$$typeof,a===ie)return 11;if(a===le)return 14}return 2}function xl(a,c){var g=a.alternate;return g===null?(g=Es(a.tag,c,a.key,a.mode),g.elementType=a.elementType,g.type=a.type,g.stateNode=a.stateNode,g.alternate=a,a.alternate=g):(g.pendingProps=c,g.type=a.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=a.flags&14680064,g.childLanes=a.childLanes,g.lanes=a.lanes,g.child=a.child,g.memoizedProps=a.memoizedProps,g.memoizedState=a.memoizedState,g.updateQueue=a.updateQueue,c=a.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=a.sibling,g.index=a.index,g.ref=a.ref,g}function Vm(a,c,g,S,C,P){var F=2;if(S=a,typeof a=="function")Zy(a)&&(F=1);else if(typeof a=="string")F=5;else e:switch(a){case z:return zc(g.children,C,P,c);case W:F=8,C|=8;break;case O:return a=Es(12,g,c,C|2),a.elementType=O,a.lanes=P,a;case oe:return a=Es(13,g,c,C),a.elementType=oe,a.lanes=P,a;case Z:return a=Es(19,g,c,C),a.elementType=Z,a.lanes=P,a;case me:return Hm(g,C,P,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case I:F=10;break e;case K:F=9;break e;case ie:F=11;break e;case le:F=14;break e;case Q:F=16,S=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return c=Es(F,g,c,C),c.elementType=a,c.type=S,c.lanes=P,c}function zc(a,c,g,S){return a=Es(7,a,S,c),a.lanes=g,a}function Hm(a,c,g,S){return a=Es(22,a,S,c),a.elementType=me,a.lanes=g,a.stateNode={isHidden:!1},a}function Ky(a,c,g){return a=Es(6,a,null,c),a.lanes=g,a}function Jy(a,c,g){return c=Es(4,a.children!==null?a.children:[],a.key,c),c.lanes=g,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function BN(a,c,g,S,C){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jo(0),this.expirationTimes=jo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jo(0),this.identifierPrefix=S,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function Qy(a,c,g,S,C,P,F,J,se){return a=new BN(a,c,g,J,se),c===1?(c=1,P===!0&&(c|=8)):c=0,P=Es(3,null,null,c),a.current=P,P.stateNode=a,P.memoizedState={element:S,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ht(P),a}function jN(a,c,g){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:S==null?null:""+S,children:a,containerInfo:c,implementation:g}}function Dw(a){if(!a)return js;a=a._reactInternals;e:{if(Rs(a)!==a||a.tag!==1)throw Error(t(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Ir(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(a.tag===1){var g=a.type;if(Ir(g))return xc(a,g,c)}return c}function Uw(a,c,g,S,C,P,F,J,se){return a=Qy(g,S,!0,a,C,P,F,J,se),a.context=Dw(null),g=a.current,S=Mi(),C=gl(g),P=gn(S,C),P.callback=c??null,kn(g,P,C),a.current.lanes=C,ec(a,C,S),Gi(a,S),a}function Wm(a,c,g,S){var C=c.current,P=Mi(),F=gl(C);return g=Dw(g),c.context===null?c.context=g:c.pendingContext=g,c=gn(P,F),c.payload={element:a},S=S===void 0?null:S,S!==null&&(c.callback=S),a=kn(C,c,F),a!==null&&(ea(a,C,F,P),Dr(a,C,F)),F}function Gm(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Ow(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var g=a.retryLane;a.retryLane=g!==0&&g<c?g:c}}function ex(a,c){Ow(a,c),(a=a.alternate)&&Ow(a,c)}function VN(){return null}var Fw=typeof reportError=="function"?reportError:function(a){console.error(a)};function tx(a){this._internalRoot=a}Xm.prototype.render=tx.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(t(409));Wm(a,c,null,null)},Xm.prototype.unmount=tx.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;Uc(function(){Wm(null,a,null,null)}),c[xi]=null}};function Xm(a){this._internalRoot=a}Xm.prototype.unstable_scheduleHydration=function(a){if(a){var c=Ru();a={blockedOn:null,target:a,priority:c};for(var g=0;g<ya.length&&c!==0&&c<ya[g].priority;g++);ya.splice(g,0,a),g===0&&Iu(a)}};function nx(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function $m(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function zw(){}function HN(a,c,g,S,C){if(C){if(typeof S=="function"){var P=S;S=function(){var we=Gm(F);P.call(we)}}var F=Uw(c,S,a,0,null,!1,!1,"",zw);return a._reactRootContainer=F,a[xi]=F.current,nl(a.nodeType===8?a.parentNode:a),Uc(),F}for(;C=a.lastChild;)a.removeChild(C);if(typeof S=="function"){var J=S;S=function(){var we=Gm(se);J.call(we)}}var se=Qy(a,0,!1,null,null,!1,!1,"",zw);return a._reactRootContainer=se,a[xi]=se.current,nl(a.nodeType===8?a.parentNode:a),Uc(function(){Wm(c,se,g,S)}),se}function qm(a,c,g,S,C){var P=g._reactRootContainer;if(P){var F=P;if(typeof C=="function"){var J=C;C=function(){var se=Gm(F);J.call(se)}}Wm(c,F,a,C)}else F=HN(g,c,a,C,S);return Gm(F)}tc=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var g=Tn(c.pendingLanes);g!==0&&(Vo(c,g|1),Gi(c,rt()),(ln&6)===0&&(Td=rt()+500,_s()))}break;case 13:Uc(function(){var S=ss(a,1);if(S!==null){var C=Mi();ea(S,a,1,C)}}),ex(a,1)}},Rh=function(a){if(a.tag===13){var c=ss(a,134217728);if(c!==null){var g=Mi();ea(c,a,134217728,g)}ex(a,134217728)}},im=function(a){if(a.tag===13){var c=gl(a),g=ss(a,c);if(g!==null){var S=Mi();ea(g,a,c,S)}ex(a,c)}},Ru=function(){return an},Pu=function(a,c){var g=an;try{return an=a,c()}finally{an=g}},We=function(a,c,g){switch(c){case"input":if(xt(a,g),c=g.name,g.type==="radio"&&c!=null){for(g=a;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<g.length;c++){var S=g[c];if(S!==a&&S.form===a.form){var C=cd(S);if(!C)throw Error(t(90));ne(S),xt(S,C)}}}break;case"textarea":Le(a,g);break;case"select":c=g.value,c!=null&&pe(a,!!g.multiple,c,!1)}},fn=$y,un=Uc;var WN={usingClientEntryPoint:!1,Events:[Bs,Wn,cd,Tt,Mt,$y]},Ef={findFiberByHostInstance:Ma,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GN={bundleType:Ef.bundleType,version:Ef.version,rendererPackageName:Ef.rendererPackageName,rendererConfig:Ef.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Se(a),a===null?null:a.stateNode},findFiberByHostInstance:Ef.findFiberByHostInstance||VN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ym=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ym.isDisabled&&Ym.supportsFiber)try{Vn=Ym.inject(GN),vt=Ym}catch{}}return Xi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WN,Xi.createPortal=function(a,c){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nx(c))throw Error(t(200));return jN(a,c,null,g)},Xi.createRoot=function(a,c){if(!nx(a))throw Error(t(299));var g=!1,S="",C=Fw;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(S=c.identifierPrefix),c.onRecoverableError!==void 0&&(C=c.onRecoverableError)),c=Qy(a,1,!1,null,null,g,!1,S,C),a[xi]=c.current,nl(a.nodeType===8?a.parentNode:a),new tx(c)},Xi.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=Se(c),a=a===null?null:a.stateNode,a},Xi.flushSync=function(a){return Uc(a)},Xi.hydrate=function(a,c,g){if(!$m(c))throw Error(t(200));return qm(null,a,c,!0,g)},Xi.hydrateRoot=function(a,c,g){if(!nx(a))throw Error(t(405));var S=g!=null&&g.hydratedSources||null,C=!1,P="",F=Fw;if(g!=null&&(g.unstable_strictMode===!0&&(C=!0),g.identifierPrefix!==void 0&&(P=g.identifierPrefix),g.onRecoverableError!==void 0&&(F=g.onRecoverableError)),c=Uw(c,null,a,1,g??null,C,!1,P,F),a[xi]=c.current,nl(a),S)for(a=0;a<S.length;a++)g=S[a],C=g._getVersion,C=C(g._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[g,C]:c.mutableSourceEagerHydrationData.push(g,C);return new Xm(c)},Xi.render=function(a,c,g){if(!$m(c))throw Error(t(200));return qm(null,a,c,!1,g)},Xi.unmountComponentAtNode=function(a){if(!$m(a))throw Error(t(40));return a._reactRootContainer?(Uc(function(){qm(null,null,a,!1,function(){a._reactRootContainer=null,a[xi]=null})}),!0):!1},Xi.unstable_batchedUpdates=$y,Xi.unstable_renderSubtreeIntoContainer=function(a,c,g,S){if(!$m(g))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return qm(a,c,g,!1,S)},Xi.version="18.3.1-next-f1338f8080-20240426",Xi}var $w;function EE(){if($w)return sx.exports;$w=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sx.exports=ek(),sx.exports}var qw;function tk(){if(qw)return Zm;qw=1;var n=EE();return Zm.createRoot=n.createRoot,Zm.hydrateRoot=n.hydrateRoot,Zm}var nk=tk();EE();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sp(){return sp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sp.apply(this,arguments)}var Il;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Il||(Il={}));const Yw="popstate";function rk(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return Mv("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:h0(i)}return sk(e,t,null,n)}function ur(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function TE(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ik(){return Math.random().toString(36).substr(2,8)}function Zw(n,e){return{usr:n.state,key:n.key,idx:e}}function Mv(n,e,t,r){return t===void 0&&(t=null),sp({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?wh(e):e,{state:t,key:e&&e.key||r||ik()})}function h0(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function wh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function sk(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Il.Pop,d=null,f=p();f==null&&(f=0,o.replaceState(sp({},o.state,{idx:f}),""));function p(){return(o.state||{idx:null}).idx}function y(){l=Il.Pop;let M=p(),_=M==null?null:M-f;f=M,d&&d({action:l,location:T.location,delta:_})}function x(M,_){l=Il.Push;let N=Mv(T.location,M,_);f=p()+1;let A=Zw(N,f),R=T.createHref(N);try{o.pushState(A,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(R)}s&&d&&d({action:l,location:T.location,delta:1})}function v(M,_){l=Il.Replace;let N=Mv(T.location,M,_);f=p();let A=Zw(N,f),R=T.createHref(N);o.replaceState(A,"",R),s&&d&&d({action:l,location:T.location,delta:0})}function b(M){let _=i.location.origin!=="null"?i.location.origin:i.location.href,N=typeof M=="string"?M:h0(M);return N=N.replace(/ $/,"%20"),ur(_,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,_)}let T={get action(){return l},get location(){return n(i,o)},listen(M){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Yw,y),d=M,()=>{i.removeEventListener(Yw,y),d=null}},createHref(M){return e(i,M)},createURL:b,encodeLocation(M){let _=b(M);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:x,replace:v,go(M){return o.go(M)}};return T}var Kw;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Kw||(Kw={}));function ak(n,e,t){return t===void 0&&(t="/"),ok(n,e,t)}function ok(n,e,t,r){let i=typeof e=="string"?wh(e):e,s=j1(i.pathname||"/",t);if(s==null)return null;let o=AE(n);lk(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let f=_k(s);l=yk(o[d],f)}return l}function AE(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,l)=>{let d={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};d.relativePath.startsWith("/")&&(ur(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let f=Dl([r,d.relativePath]),p=t.concat(d);s.children&&s.children.length>0&&(ur(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),AE(s.children,e,p,f)),!(s.path==null&&!s.index)&&e.push({path:f,score:mk(f,s.index),routesMeta:p})};return n.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let d of CE(s.path))i(s,o,d)}),e}function CE(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=CE(r.join("/")),l=[];return l.push(...o.map(d=>d===""?s:[s,d].join("/"))),i&&l.push(...o),l.map(d=>n.startsWith("/")&&d===""?"/":d)}function lk(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:gk(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const ck=/^:[\w-]+$/,uk=3,dk=2,hk=1,fk=10,pk=-2,Jw=n=>n==="*";function mk(n,e){let t=n.split("/"),r=t.length;return t.some(Jw)&&(r+=pk),e&&(r+=dk),t.filter(i=>!Jw(i)).reduce((i,s)=>i+(ck.test(s)?uk:s===""?hk:fk),r)}function gk(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function yk(n,e,t){let{routesMeta:r}=n,i={},s="/",o=[];for(let l=0;l<r.length;++l){let d=r[l],f=l===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",y=xk({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),x=d.route;if(!y)return null;Object.assign(i,y.params),o.push({params:i,pathname:Dl([s,y.pathname]),pathnameBase:Mk(Dl([s,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(s=Dl([s,y.pathnameBase]))}return o}function xk(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=vk(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((f,p,y)=>{let{paramName:x,isOptional:v}=p;if(x==="*"){let T=l[y]||"";o=s.slice(0,s.length-T.length).replace(/(.)\/+$/,"$1")}const b=l[y];return v&&!b?f[x]=void 0:f[x]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:o,pattern:n}}function vk(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),TE(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(r.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function _k(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return TE(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function j1(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function wk(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?wh(n):n;return{pathname:t?t.startsWith("/")?t:Sk(t,e):e,search:Ek(r),hash:Tk(i)}}function Sk(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function lx(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bk(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function V1(n,e){let t=bk(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function H1(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=wh(n):(i=sp({},n),ur(!i.pathname||!i.pathname.includes("?"),lx("?","pathname","search",i)),ur(!i.pathname||!i.pathname.includes("#"),lx("#","pathname","hash",i)),ur(!i.search||!i.search.includes("#"),lx("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=t;else{let y=e.length-1;if(!r&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),y-=1;i.pathname=x.join("/")}l=y>=0?e[y]:"/"}let d=wk(i,l),f=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}const Dl=n=>n.join("/").replace(/\/\/+/g,"/"),Mk=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Ek=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Tk=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Ak(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const NE=["post","put","patch","delete"];new Set(NE);const Ck=["get",...NE];new Set(Ck);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ap(){return ap=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ap.apply(this,arguments)}const W1=V.createContext(null),Nk=V.createContext(null),Xl=V.createContext(null),U0=V.createContext(null),Oo=V.createContext({outlet:null,matches:[],isDataRoute:!1}),kE=V.createContext(null);function kk(n,e){let{relative:t}=e===void 0?{}:e;Sh()||ur(!1);let{basename:r,navigator:i}=V.useContext(Xl),{hash:s,pathname:o,search:l}=PE(n,{relative:t}),d=o;return r!=="/"&&(d=o==="/"?r:Dl([r,o])),i.createHref({pathname:d,search:l,hash:s})}function Sh(){return V.useContext(U0)!=null}function $l(){return Sh()||ur(!1),V.useContext(U0).location}function RE(n){V.useContext(Xl).static||V.useLayoutEffect(n)}function Fo(){let{isDataRoute:n}=V.useContext(Oo);return n?Wk():Rk()}function Rk(){Sh()||ur(!1);let n=V.useContext(W1),{basename:e,future:t,navigator:r}=V.useContext(Xl),{matches:i}=V.useContext(Oo),{pathname:s}=$l(),o=JSON.stringify(V1(i,t.v7_relativeSplatPath)),l=V.useRef(!1);return RE(()=>{l.current=!0}),V.useCallback(function(f,p){if(p===void 0&&(p={}),!l.current)return;if(typeof f=="number"){r.go(f);return}let y=H1(f,JSON.parse(o),s,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Dl([e,y.pathname])),(p.replace?r.replace:r.push)(y,p.state,p)},[e,r,o,s,n])}function Pk(){let{matches:n}=V.useContext(Oo),e=n[n.length-1];return e?e.params:{}}function PE(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=V.useContext(Xl),{matches:i}=V.useContext(Oo),{pathname:s}=$l(),o=JSON.stringify(V1(i,r.v7_relativeSplatPath));return V.useMemo(()=>H1(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function Lk(n,e){return Ik(n,e)}function Ik(n,e,t,r){Sh()||ur(!1);let{navigator:i}=V.useContext(Xl),{matches:s}=V.useContext(Oo),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let f=$l(),p;if(e){var y;let M=typeof e=="string"?wh(e):e;d==="/"||(y=M.pathname)!=null&&y.startsWith(d)||ur(!1),p=M}else p=f;let x=p.pathname||"/",v=x;if(d!=="/"){let M=d.replace(/^\//,"").split("/");v="/"+x.replace(/^\//,"").split("/").slice(M.length).join("/")}let b=ak(n,{pathname:v}),T=zk(b&&b.map(M=>Object.assign({},M,{params:Object.assign({},l,M.params),pathname:Dl([d,i.encodeLocation?i.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?d:Dl([d,i.encodeLocation?i.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),s,t,r);return e&&T?V.createElement(U0.Provider,{value:{location:ap({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Il.Pop}},T):T}function Dk(){let n=Hk(),e=Ak(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:i},t):null,null)}const Uk=V.createElement(Dk,null);class Ok extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?V.createElement(Oo.Provider,{value:this.props.routeContext},V.createElement(kE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Fk(n){let{routeContext:e,match:t,children:r}=n,i=V.useContext(W1);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),V.createElement(Oo.Provider,{value:e},r)}function zk(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=(i=t)==null?void 0:i.errors;if(l!=null){let p=o.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);p>=0||ur(!1),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,f=-1;if(t&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let y=o[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=p),y.route.id){let{loaderData:x,errors:v}=t,b=y.route.loader&&x[y.route.id]===void 0&&(!v||v[y.route.id]===void 0);if(y.route.lazy||b){d=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((p,y,x)=>{let v,b=!1,T=null,M=null;t&&(v=l&&y.route.id?l[y.route.id]:void 0,T=y.route.errorElement||Uk,d&&(f<0&&x===0?(Gk("route-fallback"),b=!0,M=null):f===x&&(b=!0,M=y.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,x+1)),N=()=>{let A;return v?A=T:b?A=M:y.route.Component?A=V.createElement(y.route.Component,null):y.route.element?A=y.route.element:A=p,V.createElement(Fk,{match:y,routeContext:{outlet:p,matches:_,isDataRoute:t!=null},children:A})};return t&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?V.createElement(Ok,{location:t.location,revalidation:t.revalidation,component:T,error:v,children:N(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):N()},null)}var LE=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(LE||{}),IE=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(IE||{});function Bk(n){let e=V.useContext(W1);return e||ur(!1),e}function jk(n){let e=V.useContext(Nk);return e||ur(!1),e}function Vk(n){let e=V.useContext(Oo);return e||ur(!1),e}function DE(n){let e=Vk(),t=e.matches[e.matches.length-1];return t.route.id||ur(!1),t.route.id}function Hk(){var n;let e=V.useContext(kE),t=jk(),r=DE();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Wk(){let{router:n}=Bk(LE.UseNavigateStable),e=DE(IE.UseNavigateStable),t=V.useRef(!1);return RE(()=>{t.current=!0}),V.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,ap({fromRouteId:e},s)))},[n,e])}const Qw={};function Gk(n,e,t){Qw[n]||(Qw[n]=!0)}function Xk(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function $k(n){let{to:e,replace:t,state:r,relative:i}=n;Sh()||ur(!1);let{future:s,static:o}=V.useContext(Xl),{matches:l}=V.useContext(Oo),{pathname:d}=$l(),f=Fo(),p=H1(e,V1(l,s.v7_relativeSplatPath),d,i==="path"),y=JSON.stringify(p);return V.useEffect(()=>f(JSON.parse(y),{replace:t,state:r,relative:i}),[f,y,i,t,r]),null}function ia(n){ur(!1)}function qk(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Il.Pop,navigator:s,static:o=!1,future:l}=n;Sh()&&ur(!1);let d=e.replace(/^\/*/,"/"),f=V.useMemo(()=>({basename:d,navigator:s,static:o,future:ap({v7_relativeSplatPath:!1},l)}),[d,l,s,o]);typeof r=="string"&&(r=wh(r));let{pathname:p="/",search:y="",hash:x="",state:v=null,key:b="default"}=r,T=V.useMemo(()=>{let M=j1(p,d);return M==null?null:{location:{pathname:M,search:y,hash:x,state:v,key:b},navigationType:i}},[d,p,y,x,v,b,i]);return T==null?null:V.createElement(Xl.Provider,{value:f},V.createElement(U0.Provider,{children:t,value:T}))}function Yk(n){let{children:e,location:t}=n;return Lk(Ev(e),t)}new Promise(()=>{});function Ev(n,e){e===void 0&&(e=[]);let t=[];return V.Children.forEach(n,(r,i)=>{if(!V.isValidElement(r))return;let s=[...e,i];if(r.type===V.Fragment){t.push.apply(t,Ev(r.props.children,s));return}r.type!==ia&&ur(!1),!r.props.index||!r.props.children||ur(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ev(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tv(){return Tv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Tv.apply(this,arguments)}function Zk(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Kk(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Jk(n,e){return n.button===0&&(!e||e==="_self")&&!Kk(n)}const Qk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],eR="6";try{window.__reactRouterVersion=eR}catch{}const tR="startTransition",eS=KN[tR];function nR(n){let{basename:e,children:t,future:r,window:i}=n,s=V.useRef();s.current==null&&(s.current=rk({window:i,v5Compat:!0}));let o=s.current,[l,d]=V.useState({action:o.action,location:o.location}),{v7_startTransition:f}=r||{},p=V.useCallback(y=>{f&&eS?eS(()=>d(y)):d(y)},[d,f]);return V.useLayoutEffect(()=>o.listen(p),[o,p]),V.useEffect(()=>Xk(r),[r]),V.createElement(qk,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o,future:r})}const rR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sR=V.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:d,to:f,preventScrollReset:p,viewTransition:y}=e,x=Zk(e,Qk),{basename:v}=V.useContext(Xl),b,T=!1;if(typeof f=="string"&&iR.test(f)&&(b=f,rR))try{let A=new URL(window.location.href),R=f.startsWith("//")?new URL(A.protocol+f):new URL(f),D=j1(R.pathname,v);R.origin===A.origin&&D!=null?f=D+R.search+R.hash:T=!0}catch{}let M=kk(f,{relative:i}),_=aR(f,{replace:o,state:l,target:d,preventScrollReset:p,relative:i,viewTransition:y});function N(A){r&&r(A),A.defaultPrevented||_(A)}return V.createElement("a",Tv({},x,{href:b||M,onClick:T||s?r:N,ref:t,target:d}))});var tS;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(tS||(tS={}));var nS;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(nS||(nS={}));function aR(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,d=Fo(),f=$l(),p=PE(n,{relative:o});return V.useCallback(y=>{if(Jk(y,t)){y.preventDefault();let x=r!==void 0?r:h0(f)===h0(p);d(n,{replace:x,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[f,d,p,r,i,t,n,s,o,l])}const UE=V.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),O0=V.createContext({}),F0=V.createContext(null),z0=typeof document<"u",G1=z0?V.useLayoutEffect:V.useEffect,OE=V.createContext({strict:!1}),X1=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),oR="framerAppearId",FE="data-"+X1(oR);function lR(n,e,t,r){const{visualElement:i}=V.useContext(O0),s=V.useContext(OE),o=V.useContext(F0),l=V.useContext(UE).reducedMotion,d=V.useRef();r=r||s.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:i,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const f=d.current;V.useInsertionEffect(()=>{f&&f.update(t,o)});const p=V.useRef(!!(t[FE]&&!window.HandoffComplete));return G1(()=>{f&&(f.render(),p.current&&f.animationState&&f.animationState.animateChanges())}),V.useEffect(()=>{f&&(f.updateFeatures(),!p.current&&f.animationState&&f.animationState.animateChanges(),p.current&&(p.current=!1,window.HandoffComplete=!0))}),f}function Qd(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function cR(n,e,t){return V.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Qd(t)&&(t.current=r))},[e])}function op(n){return typeof n=="string"||Array.isArray(n)}function B0(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const $1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],q1=["initial",...$1];function j0(n){return B0(n.animate)||q1.some(e=>op(n[e]))}function zE(n){return!!(j0(n)||n.variants)}function uR(n,e){if(j0(n)){const{initial:t,animate:r}=n;return{initial:t===!1||op(t)?t:void 0,animate:op(r)?r:void 0}}return n.inherit!==!1?e:{}}function dR(n){const{initial:e,animate:t}=uR(n,V.useContext(O0));return V.useMemo(()=>({initial:e,animate:t}),[rS(e),rS(t)])}function rS(n){return Array.isArray(n)?n.join(" "):n}const iS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},lp={};for(const n in iS)lp[n]={isEnabled:e=>iS[n].some(t=>!!e[t])};function hR(n){for(const e in n)lp[e]={...lp[e],...n[e]}}const Y1=V.createContext({}),BE=V.createContext({}),fR=Symbol.for("motionComponentSymbol");function pR({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&hR(n);function s(l,d){let f;const p={...V.useContext(UE),...l,layoutId:mR(l)},{isStatic:y}=p,x=dR(l),v=r(l,y);if(!y&&z0){x.visualElement=lR(i,v,p,e);const b=V.useContext(BE),T=V.useContext(OE).strict;x.visualElement&&(f=x.visualElement.loadFeatures(p,T,n,b))}return V.createElement(O0.Provider,{value:x},f&&x.visualElement?V.createElement(f,{visualElement:x.visualElement,...p}):null,t(i,l,cR(v,x.visualElement,d),v,y,x.visualElement))}const o=V.forwardRef(s);return o[fR]=i,o}function mR({layoutId:n}){const e=V.useContext(Y1).id;return e&&n!==void 0?e+"-"+n:n}function gR(n){function e(r,i={}){return pR(n(r,i))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,i)=>(t.has(i)||t.set(i,e(i)),t.get(i))})}const yR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Z1(n){return typeof n!="string"||n.includes("-")?!1:!!(yR.indexOf(n)>-1||/[A-Z]/.test(n))}const f0={};function xR(n){Object.assign(f0,n)}const Dp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],bu=new Set(Dp);function jE(n,{layout:e,layoutId:t}){return bu.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!f0[n]||n==="opacity")}const Ji=n=>!!(n&&n.getVelocity),vR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_R=Dp.length;function wR(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,i){let s="";for(let o=0;o<_R;o++){const l=Dp[o];if(n[l]!==void 0){const d=vR[l]||l;s+=`${d}(${n[l]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(n,r?"":s):t&&r&&(s="none"),s}const VE=n=>e=>typeof e=="string"&&e.startsWith(n),HE=VE("--"),Av=VE("var(--"),SR=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,bR=(n,e)=>e&&typeof n=="number"?e.transform(n):n,jl=(n,e,t)=>Math.min(Math.max(t,n),e),Mu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Xf={...Mu,transform:n=>jl(0,1,n)},Km={...Mu,default:1},$f=n=>Math.round(n*1e5)/1e5,V0=/(-)?([\d]*\.?[\d])+/g,WE=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,MR=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Up(n){return typeof n=="string"}const Op=n=>({test:e=>Up(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Nl=Op("deg"),Pa=Op("%"),Rt=Op("px"),ER=Op("vh"),TR=Op("vw"),sS={...Pa,parse:n=>Pa.parse(n)/100,transform:n=>Pa.transform(n*100)},aS={...Mu,transform:Math.round},GE={borderWidth:Rt,borderTopWidth:Rt,borderRightWidth:Rt,borderBottomWidth:Rt,borderLeftWidth:Rt,borderRadius:Rt,radius:Rt,borderTopLeftRadius:Rt,borderTopRightRadius:Rt,borderBottomRightRadius:Rt,borderBottomLeftRadius:Rt,width:Rt,maxWidth:Rt,height:Rt,maxHeight:Rt,size:Rt,top:Rt,right:Rt,bottom:Rt,left:Rt,padding:Rt,paddingTop:Rt,paddingRight:Rt,paddingBottom:Rt,paddingLeft:Rt,margin:Rt,marginTop:Rt,marginRight:Rt,marginBottom:Rt,marginLeft:Rt,rotate:Nl,rotateX:Nl,rotateY:Nl,rotateZ:Nl,scale:Km,scaleX:Km,scaleY:Km,scaleZ:Km,skew:Nl,skewX:Nl,skewY:Nl,distance:Rt,translateX:Rt,translateY:Rt,translateZ:Rt,x:Rt,y:Rt,z:Rt,perspective:Rt,transformPerspective:Rt,opacity:Xf,originX:sS,originY:sS,originZ:Rt,zIndex:aS,fillOpacity:Xf,strokeOpacity:Xf,numOctaves:aS};function K1(n,e,t,r){const{style:i,vars:s,transform:o,transformOrigin:l}=n;let d=!1,f=!1,p=!0;for(const y in e){const x=e[y];if(HE(y)){s[y]=x;continue}const v=GE[y],b=bR(x,v);if(bu.has(y)){if(d=!0,o[y]=b,!p)continue;x!==(v.default||0)&&(p=!1)}else y.startsWith("origin")?(f=!0,l[y]=b):i[y]=b}if(e.transform||(d||r?i.transform=wR(n.transform,t,p,r):i.transform&&(i.transform="none")),f){const{originX:y="50%",originY:x="50%",originZ:v=0}=l;i.transformOrigin=`${y} ${x} ${v}`}}const J1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function XE(n,e,t){for(const r in e)!Ji(e[r])&&!jE(r,t)&&(n[r]=e[r])}function AR({transformTemplate:n},e,t){return V.useMemo(()=>{const r=J1();return K1(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function CR(n,e,t){const r=n.style||{},i={};return XE(i,r,n),Object.assign(i,AR(n,e,t)),n.transformValues?n.transformValues(i):i}function NR(n,e,t){const r={},i=CR(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=i,r}const kR=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function p0(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||kR.has(n)}let $E=n=>!p0(n);function RR(n){n&&($E=e=>e.startsWith("on")?!p0(e):n(e))}try{RR(require("@emotion/is-prop-valid").default)}catch{}function PR(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||($E(i)||t===!0&&p0(i)||!e&&!p0(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function oS(n,e,t){return typeof n=="string"?n:Rt.transform(e+t*n)}function LR(n,e,t){const r=oS(e,n.x,n.width),i=oS(t,n.y,n.height);return`${r} ${i}`}const IR={offset:"stroke-dashoffset",array:"stroke-dasharray"},DR={offset:"strokeDashoffset",array:"strokeDasharray"};function UR(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?IR:DR;n[s.offset]=Rt.transform(-r);const o=Rt.transform(e),l=Rt.transform(t);n[s.array]=`${o} ${l}`}function Q1(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:l=1,pathOffset:d=0,...f},p,y,x){if(K1(n,f,p,x),y){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:b,dimensions:T}=n;v.transform&&(T&&(b.transform=v.transform),delete v.transform),T&&(i!==void 0||s!==void 0||b.transform)&&(b.transformOrigin=LR(T,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),r!==void 0&&(v.scale=r),o!==void 0&&UR(v,o,l,d,!1)}const qE=()=>({...J1(),attrs:{}}),e_=n=>typeof n=="string"&&n.toLowerCase()==="svg";function OR(n,e,t,r){const i=V.useMemo(()=>{const s=qE();return Q1(s,e,{enableHardwareAcceleration:!1},e_(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};XE(s,n.style,n),i.style={...s,...i.style}}return i}function FR(n=!1){return(t,r,i,{latestValues:s},o)=>{const d=(Z1(t)?OR:NR)(r,s,o,t),p={...PR(r,typeof t=="string",n),...d,ref:i},{children:y}=r,x=V.useMemo(()=>Ji(y)?y.get():y,[y]);return V.createElement(t,{...p,children:x})}}function YE(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const ZE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function KE(n,e,t,r){YE(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(ZE.has(i)?i:X1(i),e.attrs[i])}function t_(n,e){const{style:t}=n,r={};for(const i in t)(Ji(t[i])||e.style&&Ji(e.style[i])||jE(i,n))&&(r[i]=t[i]);return r}function JE(n,e){const t=t_(n,e);for(const r in n)if(Ji(n[r])||Ji(e[r])){const i=Dp.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[i]=n[r]}return t}function n_(n,e,t,r={},i={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),e}function QE(n){const e=V.useRef(null);return e.current===null&&(e.current=n()),e.current}const m0=n=>Array.isArray(n),zR=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),BR=n=>m0(n)?n[n.length-1]||0:n;function Kg(n){const e=Ji(n)?n.get():n;return zR(e)?e.toValue():e}function jR({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,i,s){const o={latestValues:VR(r,i,s,n),renderState:e()};return t&&(o.mount=l=>t(r,l,o)),o}const e2=n=>(e,t)=>{const r=V.useContext(O0),i=V.useContext(F0),s=()=>jR(n,e,r,i);return t?s():QE(s)};function VR(n,e,t,r){const i={},s=r(n,{});for(const x in s)i[x]=Kg(s[x]);let{initial:o,animate:l}=n;const d=j0(n),f=zE(n);e&&f&&!d&&n.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let p=t?t.initial===!1:!1;p=p||o===!1;const y=p?l:o;return y&&typeof y!="boolean"&&!B0(y)&&(Array.isArray(y)?y:[y]).forEach(v=>{const b=n_(n,v);if(!b)return;const{transitionEnd:T,transition:M,..._}=b;for(const N in _){let A=_[N];if(Array.isArray(A)){const R=p?A.length-1:0;A=A[R]}A!==null&&(i[N]=A)}for(const N in T)i[N]=T[N]}),i}const cr=n=>n;class lS{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function HR(n){let e=new lS,t=new lS,r=0,i=!1,s=!1;const o=new WeakSet,l={schedule:(d,f=!1,p=!1)=>{const y=p&&i,x=y?e:t;return f&&o.add(d),x.add(d)&&y&&i&&(r=e.order.length),d},cancel:d=>{t.remove(d),o.delete(d)},process:d=>{if(i){s=!0;return}if(i=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let f=0;f<r;f++){const p=e.order[f];p(d),o.has(p)&&(l.schedule(p),n())}i=!1,s&&(s=!1,l.process(d))}};return l}const Jm=["prepare","read","update","preRender","render","postRender"],WR=40;function GR(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Jm.reduce((y,x)=>(y[x]=HR(()=>t=!0),y),{}),o=y=>s[y].process(i),l=()=>{const y=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(y-i.timestamp,WR),1),i.timestamp=y,i.isProcessing=!0,Jm.forEach(o),i.isProcessing=!1,t&&e&&(r=!1,n(l))},d=()=>{t=!0,r=!0,i.isProcessing||n(l)};return{schedule:Jm.reduce((y,x)=>{const v=s[x];return y[x]=(b,T=!1,M=!1)=>(t||d(),v.schedule(b,T,M)),y},{}),cancel:y=>Jm.forEach(x=>s[x].cancel(y)),state:i,steps:s}}const{schedule:Pn,cancel:Io,state:ci,steps:cx}=GR(typeof requestAnimationFrame<"u"?requestAnimationFrame:cr,!0),XR={useVisualState:e2({scrapeMotionValuesFromProps:JE,createRenderState:qE,onMount:(n,e,{renderState:t,latestValues:r})=>{Pn.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Pn.render(()=>{Q1(t,r,{enableHardwareAcceleration:!1},e_(e.tagName),n.transformTemplate),KE(e,t)})}})},$R={useVisualState:e2({scrapeMotionValuesFromProps:t_,createRenderState:J1})};function qR(n,{forwardMotionProps:e=!1},t,r){return{...Z1(n)?XR:$R,preloadedFeatures:t,useRender:FR(e),createVisualElement:r,Component:n}}function Co(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const t2=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function H0(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const YR=n=>e=>t2(e)&&n(e,H0(e));function Ro(n,e,t,r){return Co(n,e,YR(t),r)}const ZR=(n,e)=>t=>e(n(t)),Ul=(...n)=>n.reduce(ZR);function n2(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const cS=n2("dragHorizontal"),uS=n2("dragVertical");function r2(n){let e=!1;if(n==="y")e=uS();else if(n==="x")e=cS();else{const t=cS(),r=uS();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function i2(){const n=r2(!0);return n?(n(),!1):!0}class ql{constructor(e){this.isMounted=!1,this.node=e}update(){}}function dS(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||i2())return;const l=n.getProps();n.animationState&&l.whileHover&&n.animationState.setActive("whileHover",e),l[r]&&Pn.update(()=>l[r](s,o))};return Ro(n.current,t,i,{passive:!n.getProps()[r]})}class KR extends ql{mount(){this.unmount=Ul(dS(this.node,!0),dS(this.node,!1))}unmount(){}}class JR extends ql{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ul(Co(this.node.current,"focus",()=>this.onFocus()),Co(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const s2=(n,e)=>e?n===e?!0:s2(n,e.parentElement):!1;function ux(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,H0(t))}class QR extends ql{constructor(){super(...arguments),this.removeStartListeners=cr,this.removeEndListeners=cr,this.removeAccessibleListeners=cr,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Ro(window,"pointerup",(l,d)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:p,globalTapTarget:y}=this.node.getProps();Pn.update(()=>{!y&&!s2(this.node.current,l.target)?p&&p(l,d):f&&f(l,d)})},{passive:!(r.onTap||r.onPointerUp)}),o=Ro(window,"pointercancel",(l,d)=>this.cancelPress(l,d),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Ul(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||ux("up",(d,f)=>{const{onTap:p}=this.node.getProps();p&&Pn.update(()=>p(d,f))})};this.removeEndListeners(),this.removeEndListeners=Co(this.node.current,"keyup",o),ux("down",(l,d)=>{this.startPress(l,d)})},t=Co(this.node.current,"keydown",e),r=()=>{this.isPressing&&ux("cancel",(s,o)=>this.cancelPress(s,o))},i=Co(this.node.current,"blur",r);this.removeAccessibleListeners=Ul(t,i)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Pn.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!i2()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Pn.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=Ro(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Co(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ul(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Cv=new WeakMap,dx=new WeakMap,eP=n=>{const e=Cv.get(n.target);e&&e(n)},tP=n=>{n.forEach(eP)};function nP({root:n,...e}){const t=n||document;dx.has(t)||dx.set(t,{});const r=dx.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(tP,{root:n,...e})),r[i]}function rP(n,e,t){const r=nP(e);return Cv.set(n,t),r.observe(n),()=>{Cv.delete(n),r.unobserve(n)}}const iP={some:0,all:1};class sP extends ql{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:iP[i]},l=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,s&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:y}=this.node.getProps(),x=f?p:y;x&&x(d)};return rP(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(aP(e,t))&&this.startObserver()}unmount(){}}function aP({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const oP={inView:{Feature:sP},tap:{Feature:QR},focus:{Feature:JR},hover:{Feature:KR}};function a2(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function lP(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function cP(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function W0(n,e,t){const r=n.getProps();return n_(r,e,t!==void 0?t:r.custom,lP(n),cP(n))}let r_=cr;const uu=n=>n*1e3,Po=n=>n/1e3,uP={current:!1},o2=n=>Array.isArray(n)&&typeof n[0]=="number";function l2(n){return!!(!n||typeof n=="string"&&c2[n]||o2(n)||Array.isArray(n)&&n.every(l2))}const Wf=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,c2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wf([0,.65,.55,1]),circOut:Wf([.55,0,1,.45]),backIn:Wf([.31,.01,.66,-.59]),backOut:Wf([.33,1.53,.69,.99])};function u2(n){if(n)return o2(n)?Wf(n):Array.isArray(n)?n.map(u2):c2[n]}function dP(n,e,t,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:l,times:d}={}){const f={[e]:t};d&&(f.offset=d);const p=u2(l);return Array.isArray(p)&&(f.easing=p),n.animate(f,{delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function hP(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const d2=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,fP=1e-7,pP=12;function mP(n,e,t,r,i){let s,o,l=0;do o=e+(t-e)/2,s=d2(o,r,i)-n,s>0?t=o:e=o;while(Math.abs(s)>fP&&++l<pP);return o}function Fp(n,e,t,r){if(n===e&&t===r)return cr;const i=s=>mP(s,0,1,n,t);return s=>s===0||s===1?s:d2(i(s),e,r)}const gP=Fp(.42,0,1,1),yP=Fp(0,0,.58,1),h2=Fp(.42,0,.58,1),xP=n=>Array.isArray(n)&&typeof n[0]!="number",f2=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,p2=n=>e=>1-n(1-e),i_=n=>1-Math.sin(Math.acos(n)),m2=p2(i_),vP=f2(i_),g2=Fp(.33,1.53,.69,.99),s_=p2(g2),_P=f2(s_),wP=n=>(n*=2)<1?.5*s_(n):.5*(2-Math.pow(2,-10*(n-1))),SP={linear:cr,easeIn:gP,easeInOut:h2,easeOut:yP,circIn:i_,circInOut:vP,circOut:m2,backIn:s_,backInOut:_P,backOut:g2,anticipate:wP},hS=n=>{if(Array.isArray(n)){r_(n.length===4);const[e,t,r,i]=n;return Fp(e,t,r,i)}else if(typeof n=="string")return SP[n];return n},a_=(n,e)=>t=>!!(Up(t)&&MR.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),y2=(n,e,t)=>r=>{if(!Up(r))return r;const[i,s,o,l]=r.match(V0);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},bP=n=>jl(0,255,n),hx={...Mu,transform:n=>Math.round(bP(n))},ru={test:a_("rgb","red"),parse:y2("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+hx.transform(n)+", "+hx.transform(e)+", "+hx.transform(t)+", "+$f(Xf.transform(r))+")"};function MP(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Nv={test:a_("#"),parse:MP,transform:ru.transform},eh={test:a_("hsl","hue"),parse:y2("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Pa.transform($f(e))+", "+Pa.transform($f(t))+", "+$f(Xf.transform(r))+")"},Ai={test:n=>ru.test(n)||Nv.test(n)||eh.test(n),parse:n=>ru.test(n)?ru.parse(n):eh.test(n)?eh.parse(n):Nv.parse(n),transform:n=>Up(n)?n:n.hasOwnProperty("red")?ru.transform(n):eh.transform(n)},$n=(n,e,t)=>-t*n+t*e+n;function fx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function EP({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,o=0;if(!e)i=s=o=t;else{const l=t<.5?t*(1+e):t+e-t*e,d=2*t-l;i=fx(d,l,n+1/3),s=fx(d,l,n),o=fx(d,l,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const px=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},TP=[Nv,ru,eh],AP=n=>TP.find(e=>e.test(n));function fS(n){const e=AP(n);let t=e.parse(n);return e===eh&&(t=EP(t)),t}const x2=(n,e)=>{const t=fS(n),r=fS(e),i={...t};return s=>(i.red=px(t.red,r.red,s),i.green=px(t.green,r.green,s),i.blue=px(t.blue,r.blue,s),i.alpha=$n(t.alpha,r.alpha,s),ru.transform(i))};function CP(n){var e,t;return isNaN(n)&&Up(n)&&(((e=n.match(V0))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(WE))===null||t===void 0?void 0:t.length)||0)>0}const v2={regex:SR,countKey:"Vars",token:"${v}",parse:cr},_2={regex:WE,countKey:"Colors",token:"${c}",parse:Ai.parse},w2={regex:V0,countKey:"Numbers",token:"${n}",parse:Mu.parse};function mx(n,{regex:e,countKey:t,token:r,parse:i}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...s.map(i)))}function g0(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&mx(t,v2),mx(t,_2),mx(t,w2),t}function S2(n){return g0(n).values}function b2(n){const{values:e,numColors:t,numVars:r,tokenised:i}=g0(n),s=e.length;return o=>{let l=i;for(let d=0;d<s;d++)d<r?l=l.replace(v2.token,o[d]):d<r+t?l=l.replace(_2.token,Ai.transform(o[d])):l=l.replace(w2.token,$f(o[d]));return l}}const NP=n=>typeof n=="number"?0:n;function kP(n){const e=S2(n);return b2(n)(e.map(NP))}const Vl={test:CP,parse:S2,createTransformer:b2,getAnimatableNone:kP},M2=(n,e)=>t=>`${t>0?e:n}`;function E2(n,e){return typeof n=="number"?t=>$n(n,e,t):Ai.test(n)?x2(n,e):n.startsWith("var(")?M2(n,e):A2(n,e)}const T2=(n,e)=>{const t=[...n],r=t.length,i=n.map((s,o)=>E2(s,e[o]));return s=>{for(let o=0;o<r;o++)t[o]=i[o](s);return t}},RP=(n,e)=>{const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=E2(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}},A2=(n,e)=>{const t=Vl.createTransformer(e),r=g0(n),i=g0(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Ul(T2(r.values,i.values),t):M2(n,e)},cp=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},pS=(n,e)=>t=>$n(n,e,t);function PP(n){return typeof n=="number"?pS:typeof n=="string"?Ai.test(n)?x2:A2:Array.isArray(n)?T2:typeof n=="object"?RP:pS}function LP(n,e,t){const r=[],i=t||PP(n[0]),s=n.length-1;for(let o=0;o<s;o++){let l=i(n[o],n[o+1]);if(e){const d=Array.isArray(e)?e[o]||cr:e;l=Ul(d,l)}r.push(l)}return r}function C2(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(r_(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=LP(e,r,i),l=o.length,d=f=>{let p=0;if(l>1)for(;p<n.length-2&&!(f<n[p+1]);p++);const y=cp(n[p],n[p+1],f);return o[p](y)};return t?f=>d(jl(n[0],n[s-1],f)):d}function IP(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=cp(0,e,r);n.push($n(t,1,i))}}function DP(n){const e=[0];return IP(e,n.length-1),e}function UP(n,e){return n.map(t=>t*e)}function OP(n,e){return n.map(()=>e||h2).splice(0,n.length-1)}function y0({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=xP(r)?r.map(hS):hS(r),s={done:!1,value:e[0]},o=UP(t&&t.length===e.length?t:DP(e),n),l=C2(o,e,{ease:Array.isArray(i)?i:OP(e,i)});return{calculatedDuration:n,next:d=>(s.value=l(d),s.done=d>=n,s)}}function N2(n,e){return e?n*(1e3/e):0}const FP=5;function k2(n,e,t){const r=Math.max(e-FP,0);return N2(t-n(r),e-r)}const gx=.001,zP=.01,BP=10,jP=.05,VP=1;function HP({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let i,s,o=1-e;o=jl(jP,VP,o),n=jl(zP,BP,Po(n)),o<1?(i=f=>{const p=f*o,y=p*n,x=p-t,v=kv(f,o),b=Math.exp(-y);return gx-x/v*b},s=f=>{const y=f*o*n,x=y*t+t,v=Math.pow(o,2)*Math.pow(f,2)*n,b=Math.exp(-y),T=kv(Math.pow(f,2),o);return(-i(f)+gx>0?-1:1)*((x-v)*b)/T}):(i=f=>{const p=Math.exp(-f*n),y=(f-t)*n+1;return-gx+p*y},s=f=>{const p=Math.exp(-f*n),y=(t-f)*(n*n);return p*y});const l=5/n,d=GP(i,s,l);if(n=uu(n),isNaN(d))return{stiffness:100,damping:10,duration:n};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:o*2*Math.sqrt(r*f),duration:n}}}const WP=12;function GP(n,e,t){let r=t;for(let i=1;i<WP;i++)r=r-n(r)/e(r);return r}function kv(n,e){return n*Math.sqrt(1-e*e)}const XP=["duration","bounce"],$P=["stiffness","damping","mass"];function mS(n,e){return e.some(t=>n[t]!==void 0)}function qP(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!mS(n,$P)&&mS(n,XP)){const t=HP(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function R2({keyframes:n,restDelta:e,restSpeed:t,...r}){const i=n[0],s=n[n.length-1],o={done:!1,value:i},{stiffness:l,damping:d,mass:f,duration:p,velocity:y,isResolvedFromDuration:x}=qP({...r,velocity:-Po(r.velocity||0)}),v=y||0,b=d/(2*Math.sqrt(l*f)),T=s-i,M=Po(Math.sqrt(l/f)),_=Math.abs(T)<5;t||(t=_?.01:2),e||(e=_?.005:.5);let N;if(b<1){const A=kv(M,b);N=R=>{const D=Math.exp(-b*M*R);return s-D*((v+b*M*T)/A*Math.sin(A*R)+T*Math.cos(A*R))}}else if(b===1)N=A=>s-Math.exp(-M*A)*(T+(v+M*T)*A);else{const A=M*Math.sqrt(b*b-1);N=R=>{const D=Math.exp(-b*M*R),U=Math.min(A*R,300);return s-D*((v+b*M*T)*Math.sinh(U)+A*T*Math.cosh(U))/A}}return{calculatedDuration:x&&p||null,next:A=>{const R=N(A);if(x)o.done=A>=p;else{let D=v;A!==0&&(b<1?D=k2(N,A,R):D=0);const U=Math.abs(D)<=t,z=Math.abs(s-R)<=e;o.done=U&&z}return o.value=o.done?s:R,o}}}function gS({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:d,restDelta:f=.5,restSpeed:p}){const y=n[0],x={done:!1,value:y},v=W=>l!==void 0&&W<l||d!==void 0&&W>d,b=W=>l===void 0?d:d===void 0||Math.abs(l-W)<Math.abs(d-W)?l:d;let T=t*e;const M=y+T,_=o===void 0?M:o(M);_!==M&&(T=_-y);const N=W=>-T*Math.exp(-W/r),A=W=>_+N(W),R=W=>{const O=N(W),I=A(W);x.done=Math.abs(O)<=f,x.value=x.done?_:I};let D,U;const z=W=>{v(x.value)&&(D=W,U=R2({keyframes:[x.value,b(x.value)],velocity:k2(A,W,x.value),damping:i,stiffness:s,restDelta:f,restSpeed:p}))};return z(0),{calculatedDuration:null,next:W=>{let O=!1;return!U&&D===void 0&&(O=!0,R(W),z(W)),D!==void 0&&W>D?U.next(W-D):(!O&&R(W),x)}}}const YP=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Pn.update(e,!0),stop:()=>Io(e),now:()=>ci.isProcessing?ci.timestamp:performance.now()}},yS=2e4;function xS(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<yS;)e+=t,r=n.next(e);return e>=yS?1/0:e}const ZP={decay:gS,inertia:gS,tween:y0,keyframes:y0,spring:R2};function x0({autoplay:n=!0,delay:e=0,driver:t=YP,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",onPlay:d,onStop:f,onComplete:p,onUpdate:y,...x}){let v=1,b=!1,T,M;const _=()=>{M=new Promise(j=>{T=j})};_();let N;const A=ZP[i]||y0;let R;A!==y0&&typeof r[0]!="number"&&(R=C2([0,100],r,{clamp:!1}),r=[0,100]);const D=A({...x,keyframes:r});let U;l==="mirror"&&(U=A({...x,keyframes:[...r].reverse(),velocity:-(x.velocity||0)}));let z="idle",W=null,O=null,I=null;D.calculatedDuration===null&&s&&(D.calculatedDuration=xS(D));const{calculatedDuration:K}=D;let ie=1/0,oe=1/0;K!==null&&(ie=K+o,oe=ie*(s+1)-o);let Z=0;const le=j=>{if(O===null)return;v>0&&(O=Math.min(O,j)),v<0&&(O=Math.min(j-oe/v,O)),W!==null?Z=W:Z=Math.round(j-O)*v;const X=Z-e*(v>=0?1:-1),ee=v>=0?X<0:X>oe;Z=Math.max(X,0),z==="finished"&&W===null&&(Z=oe);let fe=Z,Ae=D;if(s){const Ke=Math.min(Z,oe)/ie;let qe=Math.floor(Ke),lt=Ke%1;!lt&&Ke>=1&&(lt=1),lt===1&&qe--,qe=Math.min(qe,s+1),!!(qe%2)&&(l==="reverse"?(lt=1-lt,o&&(lt-=o/ie)):l==="mirror"&&(Ae=U)),fe=jl(0,1,lt)*ie}const ke=ee?{done:!1,value:r[0]}:Ae.next(fe);R&&(ke.value=R(ke.value));let{done:Pe}=ke;!ee&&K!==null&&(Pe=v>=0?Z>=oe:Z<=0);const Xe=W===null&&(z==="finished"||z==="running"&&Pe);return y&&y(ke.value),Xe&&$(),ke},Q=()=>{N&&N.stop(),N=void 0},me=()=>{z="idle",Q(),T(),_(),O=I=null},$=()=>{z="finished",p&&p(),Q(),T()},re=()=>{if(b)return;N||(N=t(le));const j=N.now();d&&d(),W!==null?O=j-W:(!O||z==="finished")&&(O=j),z==="finished"&&_(),I=O,W=null,z="running",N.start()};n&&re();const te={then(j,X){return M.then(j,X)},get time(){return Po(Z)},set time(j){j=uu(j),Z=j,W!==null||!N||v===0?W=j:O=N.now()-j/v},get duration(){const j=D.calculatedDuration===null?xS(D):D.calculatedDuration;return Po(j)},get speed(){return v},set speed(j){j===v||!N||(v=j,te.time=Po(Z))},get state(){return z},play:re,pause:()=>{z="paused",W=Z},stop:()=>{b=!0,z!=="idle"&&(z="idle",f&&f(),me())},cancel:()=>{I!==null&&le(I),me()},complete:()=>{z="finished"},sample:j=>(O=0,le(j))};return te}function KP(n){let e;return()=>(e===void 0&&(e=n()),e)}const JP=KP(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),QP=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Qm=10,e3=2e4,t3=(n,e)=>e.type==="spring"||n==="backgroundColor"||!l2(e.ease);function n3(n,e,{onUpdate:t,onComplete:r,...i}){if(!(JP()&&QP.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,l,d,f=!1;const p=()=>{d=new Promise(A=>{l=A})};p();let{keyframes:y,duration:x=300,ease:v,times:b}=i;if(t3(e,i)){const A=x0({...i,repeat:0,delay:0});let R={done:!1,value:y[0]};const D=[];let U=0;for(;!R.done&&U<e3;)R=A.sample(U),D.push(R.value),U+=Qm;b=void 0,y=D,x=U-Qm,v="linear"}const T=dP(n.owner.current,e,y,{...i,duration:x,ease:v,times:b}),M=()=>{f=!1,T.cancel()},_=()=>{f=!0,Pn.update(M),l(),p()};return T.onfinish=()=>{f||(n.set(hP(y,i)),r&&r(),_())},{then(A,R){return d.then(A,R)},attachTimeline(A){return T.timeline=A,T.onfinish=null,cr},get time(){return Po(T.currentTime||0)},set time(A){T.currentTime=uu(A)},get speed(){return T.playbackRate},set speed(A){T.playbackRate=A},get duration(){return Po(x)},play:()=>{o||(T.play(),Io(M))},pause:()=>T.pause(),stop:()=>{if(o=!0,T.playState==="idle")return;const{currentTime:A}=T;if(A){const R=x0({...i,autoplay:!1});n.setWithVelocity(R.sample(A-Qm).value,R.sample(A).value,Qm)}_()},complete:()=>{f||T.finish()},cancel:_}}function r3({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const i=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:cr,pause:cr,stop:cr,then:s=>(s(),Promise.resolve()),cancel:cr,complete:cr});return e?x0({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const i3={type:"spring",stiffness:500,damping:25,restSpeed:10},s3=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),a3={type:"keyframes",duration:.8},o3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},l3=(n,{keyframes:e})=>e.length>2?a3:bu.has(n)?n.startsWith("scale")?s3(e[1]):i3:o3,Rv=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Vl.test(e)||e==="0")&&!e.startsWith("url(")),c3=new Set(["brightness","contrast","saturate","opacity"]);function u3(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(V0)||[];if(!r)return n;const i=t.replace(r,"");let s=c3.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const d3=/([a-z-]*)\(.*?\)/g,Pv={...Vl,getAnimatableNone:n=>{const e=n.match(d3);return e?e.map(u3).join(" "):n}},h3={...GE,color:Ai,backgroundColor:Ai,outlineColor:Ai,fill:Ai,stroke:Ai,borderColor:Ai,borderTopColor:Ai,borderRightColor:Ai,borderBottomColor:Ai,borderLeftColor:Ai,filter:Pv,WebkitFilter:Pv},o_=n=>h3[n];function P2(n,e){let t=o_(n);return t!==Pv&&(t=Vl),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const L2=n=>/^0[^.\s]+$/.test(n);function f3(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||L2(n)}function p3(n,e,t,r){const i=Rv(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const o=r.from!==void 0?r.from:n.get();let l;const d=[];for(let f=0;f<s.length;f++)s[f]===null&&(s[f]=f===0?o:s[f-1]),f3(s[f])&&d.push(f),typeof s[f]=="string"&&s[f]!=="none"&&s[f]!=="0"&&(l=s[f]);if(i&&d.length&&l)for(let f=0;f<d.length;f++){const p=d[f];s[p]=P2(e,l)}return s}function m3({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:d,elapsed:f,...p}){return!!Object.keys(p).length}function l_(n,e){return n[e]||n.default||n}const g3={skipAnimations:!1},c_=(n,e,t,r={})=>i=>{const s=l_(r,n)||{},o=s.delay||r.delay||0;let{elapsed:l=0}=r;l=l-uu(o);const d=p3(e,n,t,s),f=d[0],p=d[d.length-1],y=Rv(n,f),x=Rv(n,p);let v={keyframes:d,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-l,onUpdate:b=>{e.set(b),s.onUpdate&&s.onUpdate(b)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(m3(s)||(v={...v,...l3(n,v)}),v.duration&&(v.duration=uu(v.duration)),v.repeatDelay&&(v.repeatDelay=uu(v.repeatDelay)),!y||!x||uP.current||s.type===!1||g3.skipAnimations)return r3(v);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const b=n3(e,n,v);if(b)return b}return x0(v)};function v0(n){return!!(Ji(n)&&n.add)}const I2=n=>/^\-?\d*\.?\d+$/.test(n);function u_(n,e){n.indexOf(e)===-1&&n.push(e)}function d_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class h_{constructor(){this.subscriptions=[]}add(e){return u_(this.subscriptions,e),()=>d_(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const y3=n=>!isNaN(parseFloat(n));class x3{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=ci;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Pn.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Pn.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=y3(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new h_);const r=this.events[e].add(t);return e==="change"?()=>{r(),Pn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?N2(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function hh(n,e){return new x3(n,e)}const D2=n=>e=>e.test(n),v3={test:n=>n==="auto",parse:n=>n},U2=[Mu,Rt,Pa,Nl,TR,ER,v3],Af=n=>U2.find(D2(n)),_3=[...U2,Ai,Vl],w3=n=>_3.find(D2(n));function S3(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,hh(t))}function b3(n,e){const t=W0(n,e);let{transitionEnd:r={},transition:i={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...r};for(const o in s){const l=BR(s[o]);S3(n,o,l)}}function M3(n,e,t){var r,i;const s=Object.keys(e).filter(l=>!n.hasValue(l)),o=s.length;if(o)for(let l=0;l<o;l++){const d=s[l],f=e[d];let p=null;Array.isArray(f)&&(p=f[0]),p===null&&(p=(i=(r=t[d])!==null&&r!==void 0?r:n.readValue(d))!==null&&i!==void 0?i:e[d]),p!=null&&(typeof p=="string"&&(I2(p)||L2(p))?p=parseFloat(p):!w3(p)&&Vl.test(f)&&(p=P2(d,f)),n.addValue(d,hh(p,{owner:n})),t[d]===void 0&&(t[d]=p),p!==null&&n.setBaseTarget(d,p))}}function E3(n,e){return e?(e[n]||e.default||e).from:void 0}function T3(n,e,t){const r={};for(const i in n){const s=E3(i,e);if(s!==void 0)r[i]=s;else{const o=t.getValue(i);o&&(r[i]=o.get())}}return r}function A3({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function C3(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function O2(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...l}=n.makeTargetAnimatable(e);const d=n.getValue("willChange");r&&(s=r);const f=[],p=i&&n.animationState&&n.animationState.getState()[i];for(const y in l){const x=n.getValue(y),v=l[y];if(!x||v===void 0||p&&A3(p,y))continue;const b={delay:t,elapsed:0,...l_(s||{},y)};if(window.HandoffAppearAnimations){const _=n.getProps()[FE];if(_){const N=window.HandoffAppearAnimations(_,y,x,Pn);N!==null&&(b.elapsed=N,b.isHandoff=!0)}}let T=!b.isHandoff&&!C3(x,v);if(b.type==="spring"&&(x.getVelocity()||b.velocity)&&(T=!1),x.animation&&(T=!1),T)continue;x.start(c_(y,x,v,n.shouldReduceMotion&&bu.has(y)?{type:!1}:b));const M=x.animation;v0(d)&&(d.add(y),M.then(()=>d.remove(y))),f.push(M)}return o&&Promise.all(f).then(()=>{o&&b3(n,o)}),f}function Lv(n,e,t={}){const r=W0(n,e,t.custom);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all(O2(n,r,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:y}=i;return N3(n,e,f+d,p,y,t)}:()=>Promise.resolve(),{when:l}=i;if(l){const[d,f]=l==="beforeChildren"?[s,o]:[o,s];return d().then(()=>f())}else return Promise.all([s(),o(t.delay)])}function N3(n,e,t=0,r=0,i=1,s){const o=[],l=(n.variantChildren.size-1)*r,d=i===1?(f=0)=>f*r:(f=0)=>l-f*r;return Array.from(n.variantChildren).sort(k3).forEach((f,p)=>{f.notify("AnimationStart",e),o.push(Lv(f,e,{...s,delay:t+d(p)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(o)}function k3(n,e){return n.sortNodePosition(e)}function R3(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Lv(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=Lv(n,e,t);else{const i=typeof e=="function"?W0(n,e,t.custom):e;r=Promise.all(O2(n,i,t))}return r.then(()=>n.notify("AnimationComplete",e))}const P3=[...$1].reverse(),L3=$1.length;function I3(n){return e=>Promise.all(e.map(({animation:t,options:r})=>R3(n,t,r)))}function D3(n){let e=I3(n);const t=O3();let r=!0;const i=(d,f)=>{const p=W0(n,f);if(p){const{transition:y,transitionEnd:x,...v}=p;d={...d,...v,...x}}return d};function s(d){e=d(n)}function o(d,f){const p=n.getProps(),y=n.getVariantContext(!0)||{},x=[],v=new Set;let b={},T=1/0;for(let _=0;_<L3;_++){const N=P3[_],A=t[N],R=p[N]!==void 0?p[N]:y[N],D=op(R),U=N===f?A.isActive:null;U===!1&&(T=_);let z=R===y[N]&&R!==p[N]&&D;if(z&&r&&n.manuallyAnimateOnMount&&(z=!1),A.protectedKeys={...b},!A.isActive&&U===null||!R&&!A.prevProp||B0(R)||typeof R=="boolean")continue;let O=U3(A.prevProp,R)||N===f&&A.isActive&&!z&&D||_>T&&D,I=!1;const K=Array.isArray(R)?R:[R];let ie=K.reduce(i,{});U===!1&&(ie={});const{prevResolvedValues:oe={}}=A,Z={...oe,...ie},le=Q=>{O=!0,v.has(Q)&&(I=!0,v.delete(Q)),A.needsAnimating[Q]=!0};for(const Q in Z){const me=ie[Q],$=oe[Q];if(b.hasOwnProperty(Q))continue;let re=!1;m0(me)&&m0($)?re=!a2(me,$):re=me!==$,re?me!==void 0?le(Q):v.add(Q):me!==void 0&&v.has(Q)?le(Q):A.protectedKeys[Q]=!0}A.prevProp=R,A.prevResolvedValues=ie,A.isActive&&(b={...b,...ie}),r&&n.blockInitialAnimation&&(O=!1),O&&(!z||I)&&x.push(...K.map(Q=>({animation:Q,options:{type:N,...d}})))}if(v.size){const _={};v.forEach(N=>{const A=n.getBaseTarget(N);A!==void 0&&(_[N]=A)}),x.push({animation:_})}let M=!!x.length;return r&&(p.initial===!1||p.initial===p.animate)&&!n.manuallyAnimateOnMount&&(M=!1),r=!1,M?e(x):Promise.resolve()}function l(d,f,p){var y;if(t[d].isActive===f)return Promise.resolve();(y=n.variantChildren)===null||y===void 0||y.forEach(v=>{var b;return(b=v.animationState)===null||b===void 0?void 0:b.setActive(d,f)}),t[d].isActive=f;const x=o(p,d);for(const v in t)t[v].protectedKeys={};return x}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>t}}function U3(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!a2(e,n):!1}function Bc(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function O3(){return{animate:Bc(!0),whileInView:Bc(),whileHover:Bc(),whileTap:Bc(),whileDrag:Bc(),whileFocus:Bc(),exit:Bc()}}class F3 extends ql{constructor(e){super(e),e.animationState||(e.animationState=D3(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),B0(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let z3=0;class B3 extends ql{constructor(){super(...arguments),this.id=z3++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const j3={animation:{Feature:F3},exit:{Feature:B3}},vS=(n,e)=>Math.abs(n-e);function V3(n,e){const t=vS(n.x,e.x),r=vS(n.y,e.y);return Math.sqrt(t**2+r**2)}class F2{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=xx(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,v=V3(y.offset,{x:0,y:0})>=3;if(!x&&!v)return;const{point:b}=y,{timestamp:T}=ci;this.history.push({...b,timestamp:T});const{onStart:M,onMove:_}=this.handlers;x||(M&&M(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,y)},this.handlePointerMove=(y,x)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=yx(x,this.transformPagePoint),Pn.update(this.updatePoint,!0)},this.handlePointerUp=(y,x)=>{this.end();const{onEnd:v,onSessionEnd:b,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=xx(y.type==="pointercancel"?this.lastMoveEventInfo:yx(x,this.transformPagePoint),this.history);this.startEvent&&v&&v(y,M),b&&b(y,M)},!t2(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const o=H0(e),l=yx(o,this.transformPagePoint),{point:d}=l,{timestamp:f}=ci;this.history=[{...d,timestamp:f}];const{onSessionStart:p}=t;p&&p(e,xx(l,this.history)),this.removeListeners=Ul(Ro(this.contextWindow,"pointermove",this.handlePointerMove),Ro(this.contextWindow,"pointerup",this.handlePointerUp),Ro(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Io(this.updatePoint)}}function yx(n,e){return e?{point:e(n.point)}:n}function _S(n,e){return{x:n.x-e.x,y:n.y-e.y}}function xx({point:n},e){return{point:n,delta:_S(n,z2(e)),offset:_S(n,H3(e)),velocity:W3(e,.1)}}function H3(n){return n[0]}function z2(n){return n[n.length-1]}function W3(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=z2(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>uu(e)));)t--;if(!r)return{x:0,y:0};const s=Po(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ps(n){return n.max-n.min}function Iv(n,e=0,t=.01){return Math.abs(n-e)<=t}function wS(n,e,t,r=.5){n.origin=r,n.originPoint=$n(e.min,e.max,n.origin),n.scale=ps(t)/ps(e),(Iv(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=$n(t.min,t.max,n.origin)-n.originPoint,(Iv(n.translate)||isNaN(n.translate))&&(n.translate=0)}function qf(n,e,t,r){wS(n.x,e.x,t.x,r?r.originX:void 0),wS(n.y,e.y,t.y,r?r.originY:void 0)}function SS(n,e,t){n.min=t.min+e.min,n.max=n.min+ps(e)}function G3(n,e,t){SS(n.x,e.x,t.x),SS(n.y,e.y,t.y)}function bS(n,e,t){n.min=e.min-t.min,n.max=n.min+ps(e)}function Yf(n,e,t){bS(n.x,e.x,t.x),bS(n.y,e.y,t.y)}function X3(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?$n(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?$n(t,n,r.max):Math.min(n,t)),n}function MS(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function $3(n,{top:e,left:t,bottom:r,right:i}){return{x:MS(n.x,t,i),y:MS(n.y,e,r)}}function ES(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function q3(n,e){return{x:ES(n.x,e.x),y:ES(n.y,e.y)}}function Y3(n,e){let t=.5;const r=ps(n),i=ps(e);return i>r?t=cp(e.min,e.max-r,n.min):r>i&&(t=cp(n.min,n.max-i,e.min)),jl(0,1,t)}function Z3(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Dv=.35;function K3(n=Dv){return n===!1?n=0:n===!0&&(n=Dv),{x:TS(n,"left","right"),y:TS(n,"top","bottom")}}function TS(n,e,t){return{min:AS(n,e),max:AS(n,t)}}function AS(n,e){return typeof n=="number"?n:n[e]||0}const CS=()=>({translate:0,scale:1,origin:0,originPoint:0}),th=()=>({x:CS(),y:CS()}),NS=()=>({min:0,max:0}),vr=()=>({x:NS(),y:NS()});function Cs(n){return[n("x"),n("y")]}function B2({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function J3({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Q3(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function vx(n){return n===void 0||n===1}function Uv({scale:n,scaleX:e,scaleY:t}){return!vx(n)||!vx(e)||!vx(t)}function Kc(n){return Uv(n)||j2(n)||n.z||n.rotate||n.rotateX||n.rotateY}function j2(n){return kS(n.x)||kS(n.y)}function kS(n){return n&&n!=="0%"}function _0(n,e,t){const r=n-t,i=e*r;return t+i}function RS(n,e,t,r,i){return i!==void 0&&(n=_0(n,i,r)),_0(n,t,r)+e}function Ov(n,e=0,t=1,r,i){n.min=RS(n.min,e,t,r,i),n.max=RS(n.max,e,t,r,i)}function V2(n,{x:e,y:t}){Ov(n.x,e.translate,e.scale,e.originPoint),Ov(n.y,t.translate,t.scale,t.originPoint)}function eL(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,o;for(let l=0;l<i;l++){s=t[l],o=s.projectionDelta;const d=s.instance;d&&d.style&&d.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&nh(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,V2(n,o)),r&&Kc(s.latestValues)&&nh(n,s.latestValues))}e.x=PS(e.x),e.y=PS(e.y)}function PS(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function kl(n,e){n.min=n.min+e,n.max=n.max+e}function LS(n,e,[t,r,i]){const s=e[i]!==void 0?e[i]:.5,o=$n(n.min,n.max,s);Ov(n,e[t],e[r],o,e.scale)}const tL=["x","scaleX","originX"],nL=["y","scaleY","originY"];function nh(n,e){LS(n.x,e,tL),LS(n.y,e,nL)}function H2(n,e){return B2(Q3(n.getBoundingClientRect(),e))}function rL(n,e,t){const r=H2(n,t),{scroll:i}=e;return i&&(kl(r.x,i.offset.x),kl(r.y,i.offset.y)),r}const W2=({current:n})=>n?n.ownerDocument.defaultView:null,iL=new WeakMap;class sL{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=vr(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=p=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(H0(p,"page").point)},s=(p,y)=>{const{drag:x,dragPropagation:v,onDragStart:b}=this.getProps();if(x&&!v&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=r2(x),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Cs(M=>{let _=this.getAxisMotionValue(M).get()||0;if(Pa.test(_)){const{projection:N}=this.visualElement;if(N&&N.layout){const A=N.layout.layoutBox[M];A&&(_=ps(A)*(parseFloat(_)/100))}}this.originPoint[M]=_}),b&&Pn.update(()=>b(p,y),!1,!0);const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},o=(p,y)=>{const{dragPropagation:x,dragDirectionLock:v,onDirectionLock:b,onDrag:T}=this.getProps();if(!x&&!this.openGlobalLock)return;const{offset:M}=y;if(v&&this.currentDirection===null){this.currentDirection=aL(M),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",y.point,M),this.updateAxis("y",y.point,M),this.visualElement.render(),T&&T(p,y)},l=(p,y)=>this.stop(p,y),d=()=>Cs(p=>{var y;return this.getAnimationState(p)==="paused"&&((y=this.getAxisMotionValue(p).animation)===null||y===void 0?void 0:y.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new F2(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:W2(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Pn.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!eg(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=X3(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Qd(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=$3(i.layoutBox,t):this.constraints=!1,this.elastic=K3(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Cs(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=Z3(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Qd(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=rL(r,i.root,this.visualElement.getTransformPagePoint());let o=q3(i.layout.layoutBox,s);if(t){const l=t(J3(o));this.hasMutatedConstraints=!!l,l&&(o=B2(l))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},f=Cs(p=>{if(!eg(p,t,this.currentDirection))return;let y=d&&d[p]||{};o&&(y={min:0,max:0});const x=i?200:1e6,v=i?40:1e7,b={type:"inertia",velocity:r?e[p]:0,bounceStiffness:x,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...y};return this.startAxisValueAnimation(p,b)});return Promise.all(f).then(l)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(c_(e,r,0,t))}stopAnimation(){Cs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Cs(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Cs(t=>{const{drag:r}=this.getProps();if(!eg(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[t];s.set(e[t]-$n(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Qd(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Cs(o=>{const l=this.getAxisMotionValue(o);if(l){const d=l.get();i[o]=Y3({min:d,max:d},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Cs(o=>{if(!eg(o,e,null))return;const l=this.getAxisMotionValue(o),{min:d,max:f}=this.constraints[o];l.set($n(d,f,i[o]))})}addListeners(){if(!this.visualElement.current)return;iL.set(this.visualElement,this);const e=this.visualElement.current,t=Ro(e,"pointerdown",d=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Qd(d)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=Co(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(Cs(p=>{const y=this.getAxisMotionValue(p);y&&(this.originPoint[p]+=d[p].translate,y.set(y.get()+d[p].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Dv,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function eg(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function aL(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class oL extends ql{constructor(e){super(e),this.removeGroupControls=cr,this.removeListeners=cr,this.controls=new sL(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||cr}unmount(){this.removeGroupControls(),this.removeListeners()}}const IS=n=>(e,t)=>{n&&Pn.update(()=>n(e,t))};class lL extends ql{constructor(){super(...arguments),this.removePointerDownListener=cr}onPointerDown(e){this.session=new F2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:W2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:IS(e),onStart:IS(t),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Pn.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=Ro(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function cL(){const n=V.useContext(F0);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,i=V.useId();return V.useEffect(()=>r(i),[]),!e&&t?[!1,()=>t&&t(i)]:[!0]}const Jg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function DS(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Cf={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Rt.test(n))n=parseFloat(n);else return n;const t=DS(n,e.target.x),r=DS(n,e.target.y);return`${t}% ${r}%`}},uL={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=Vl.parse(n);if(i.length>5)return r;const s=Vl.createTransformer(n),o=typeof i[0]!="number"?1:0,l=t.x.scale*e.x,d=t.y.scale*e.y;i[0+o]/=l,i[1+o]/=d;const f=$n(l,d,.5);return typeof i[2+o]=="number"&&(i[2+o]/=f),typeof i[3+o]=="number"&&(i[3+o]/=f),s(i)}};class dL extends D0.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;xR(hL),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Jg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Pn.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function G2(n){const[e,t]=cL(),r=V.useContext(Y1);return D0.createElement(dL,{...n,layoutGroup:r,switchLayoutGroup:V.useContext(BE),isPresent:e,safeToRemove:t})}const hL={borderRadius:{...Cf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Cf,borderTopRightRadius:Cf,borderBottomLeftRadius:Cf,borderBottomRightRadius:Cf,boxShadow:uL},X2=["TopLeft","TopRight","BottomLeft","BottomRight"],fL=X2.length,US=n=>typeof n=="string"?parseFloat(n):n,OS=n=>typeof n=="number"||Rt.test(n);function pL(n,e,t,r,i,s){i?(n.opacity=$n(0,t.opacity!==void 0?t.opacity:1,mL(r)),n.opacityExit=$n(e.opacity!==void 0?e.opacity:1,0,gL(r))):s&&(n.opacity=$n(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let o=0;o<fL;o++){const l=`border${X2[o]}Radius`;let d=FS(e,l),f=FS(t,l);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||OS(d)===OS(f)?(n[l]=Math.max($n(US(d),US(f),r),0),(Pa.test(f)||Pa.test(d))&&(n[l]+="%")):n[l]=f}(e.rotate||t.rotate)&&(n.rotate=$n(e.rotate||0,t.rotate||0,r))}function FS(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const mL=$2(0,.5,m2),gL=$2(.5,.95,cr);function $2(n,e,t){return r=>r<n?0:r>e?1:t(cp(n,e,r))}function zS(n,e){n.min=e.min,n.max=e.max}function Ts(n,e){zS(n.x,e.x),zS(n.y,e.y)}function BS(n,e,t,r,i){return n-=e,n=_0(n,1/t,r),i!==void 0&&(n=_0(n,1/i,r)),n}function yL(n,e=0,t=1,r=.5,i,s=n,o=n){if(Pa.test(e)&&(e=parseFloat(e),e=$n(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=$n(s.min,s.max,r);n===s&&(l-=e),n.min=BS(n.min,e,t,l,i),n.max=BS(n.max,e,t,l,i)}function jS(n,e,[t,r,i],s,o){yL(n,e[t],e[r],e[i],e.scale,s,o)}const xL=["x","scaleX","originX"],vL=["y","scaleY","originY"];function VS(n,e,t,r){jS(n.x,e,xL,t?t.x:void 0,r?r.x:void 0),jS(n.y,e,vL,t?t.y:void 0,r?r.y:void 0)}function HS(n){return n.translate===0&&n.scale===1}function q2(n){return HS(n.x)&&HS(n.y)}function _L(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function Y2(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function WS(n){return ps(n.x)/ps(n.y)}class wL{constructor(){this.members=[]}add(e){u_(this.members,e),e.scheduleRender()}remove(e){if(d_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function GS(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:d,rotateX:f,rotateY:p}=t;d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `)}const o=n.x.scale*e.x,l=n.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const SL=(n,e)=>n.depth-e.depth;class bL{constructor(){this.children=[],this.isDirty=!1}add(e){u_(this.children,e),this.isDirty=!0}remove(e){d_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(SL),this.isDirty=!1,this.children.forEach(e)}}function ML(n,e){const t=performance.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(Io(r),n(s-e))};return Pn.read(r,!0),()=>Io(r)}function EL(n){window.MotionDebug&&window.MotionDebug.record(n)}function TL(n){return n instanceof SVGElement&&n.tagName!=="svg"}function AL(n,e,t){const r=Ji(n)?n:hh(n);return r.start(c_("",r,e,t)),r.animation}const XS=["","X","Y","Z"],CL={visibility:"hidden"},$S=1e3;let NL=0;const Jc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Z2({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=NL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Jc.totalNodes=Jc.resolvedTargetDeltas=Jc.recalculatedProjection=0,this.nodes.forEach(PL),this.nodes.forEach(OL),this.nodes.forEach(FL),this.nodes.forEach(LL),EL(Jc)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new bL)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new h_),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const d=this.eventHandlers.get(o);d&&d.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=TL(o),this.instance=o;const{layoutId:d,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(f||d)&&(this.isLayoutDirty=!0),n){let y;const x=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=ML(x,250),Jg.hasAnimatedSinceResize&&(Jg.hasAnimatedSinceResize=!1,this.nodes.forEach(YS))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&p&&(d||f)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:x,hasRelativeTargetChanged:v,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||p.getDefaultTransition()||HL,{onLayoutAnimationStart:M,onLayoutAnimationComplete:_}=p.getProps(),N=!this.targetLayout||!Y2(this.targetLayout,b)||v,A=!x&&v;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||A||x&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,A);const R={...l_(T,"layout"),onPlay:M,onComplete:_};(p.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else x||YS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Io(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zL),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const y=this.path[p];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(qS);return}this.isUpdating||this.nodes.forEach(DL),this.isUpdating=!1,this.nodes.forEach(UL),this.nodes.forEach(kL),this.nodes.forEach(RL),this.clearAllSnapshots();const l=performance.now();ci.delta=jl(0,1e3/60,l-ci.timestamp),ci.timestamp=l,ci.isProcessing=!0,cx.update.process(ci),cx.preRender.process(ci),cx.render.process(ci),ci.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(IL),this.sharedNodes.forEach(BL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=vr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!q2(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;o&&(l||Kc(this.latestValues)||p)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return o&&(d=this.removeTransform(d)),WL(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return vr();const l=o.measureViewportBox(),{scroll:d}=this.root;return d&&(kl(l.x,d.offset.x),kl(l.y,d.offset.y)),l}removeElementScroll(o){const l=vr();Ts(l,o);for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:p,options:y}=f;if(f!==this.root&&p&&y.layoutScroll){if(p.isRoot){Ts(l,o);const{scroll:x}=this.root;x&&(kl(l.x,-x.offset.x),kl(l.y,-x.offset.y))}kl(l.x,p.offset.x),kl(l.y,p.offset.y)}}return l}applyTransform(o,l=!1){const d=vr();Ts(d,o);for(let f=0;f<this.path.length;f++){const p=this.path[f];!l&&p.options.layoutScroll&&p.scroll&&p!==p.root&&nh(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Kc(p.latestValues)&&nh(d,p.latestValues)}return Kc(this.latestValues)&&nh(d,this.latestValues),d}removeTransform(o){const l=vr();Ts(l,o);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Kc(f.latestValues))continue;Uv(f.latestValues)&&f.updateSnapshot();const p=vr(),y=f.measurePageBox();Ts(p,y),VS(l,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return Kc(this.latestValues)&&VS(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ci.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(o||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:y,layoutId:x}=this.options;if(!(!this.layout||!(y||x))){if(this.resolvedRelativeTargetAt=ci.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=vr(),this.relativeTargetOrigin=vr(),Yf(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Ts(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=vr(),this.targetWithTransforms=vr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),G3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ts(this.target,this.layout.layoutBox),V2(this.target,this.targetDelta)):Ts(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=vr(),this.relativeTargetOrigin=vr(),Yf(this.relativeTargetOrigin,this.target,v.target),Ts(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Jc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Uv(this.parent.latestValues)||j2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),d=!!this.resumingFrom||this!==l;let f=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===ci.timestamp&&(f=!1),f)return;const{layout:p,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||y))return;Ts(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,v=this.treeScale.y;eL(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:b}=l;if(!b){this.projectionTransform&&(this.projectionDelta=th(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=th(),this.projectionDeltaWithTransform=th());const T=this.projectionTransform;qf(this.projectionDelta,this.layoutCorrected,b,this.latestValues),this.projectionTransform=GS(this.projectionDelta,this.treeScale),(this.projectionTransform!==T||this.treeScale.x!==x||this.treeScale.y!==v)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),Jc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const d=this.snapshot,f=d?d.latestValues:{},p={...this.latestValues},y=th();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const x=vr(),v=d?d.source:void 0,b=this.layout?this.layout.source:void 0,T=v!==b,M=this.getStack(),_=!M||M.members.length<=1,N=!!(T&&!_&&this.options.crossfade===!0&&!this.path.some(VL));this.animationProgress=0;let A;this.mixTargetDelta=R=>{const D=R/1e3;ZS(y.x,o.x,D),ZS(y.y,o.y,D),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Yf(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),jL(this.relativeTarget,this.relativeTargetOrigin,x,D),A&&_L(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=vr()),Ts(A,this.relativeTarget)),T&&(this.animationValues=p,pL(p,f,this.latestValues,D,N,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Io(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pn.update(()=>{Jg.hasAnimatedSinceResize=!0,this.currentAnimation=AL(0,$S,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($S),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:d,layout:f,latestValues:p}=o;if(!(!l||!d||!f)){if(this!==o&&this.layout&&f&&K2(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||vr();const y=ps(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+y;const x=ps(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+x}Ts(l,d),nh(l,p),qf(this.projectionDeltaWithTransform,this.layoutCorrected,l,p)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new wL),this.sharedNodes.get(o).add(l);const f=l.options.initialPromotionConfig;l.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:d}=o;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(l=!0),!l)return;const f={};for(let p=0;p<XS.length;p++){const y="rotate"+XS[p];d[y]&&(f[y]=d[y],o.setStaticValue(y,0))}o.render();for(const p in f)o.setStaticValue(p,f[p]);o.scheduleRender()}getProjectionStyles(o){var l,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return CL;const f={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Kg(o==null?void 0:o.pointerEvents)||"",f.transform=p?p(this.latestValues,""):"none",f;const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){const T={};return this.options.layoutId&&(T.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,T.pointerEvents=Kg(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Kc(this.latestValues)&&(T.transform=p?p({},""):"none",this.hasProjected=!1),T}const x=y.animationValues||y.latestValues;this.applyTransformsToTarget(),f.transform=GS(this.projectionDeltaWithTransform,this.treeScale,x),p&&(f.transform=p(x,f.transform));const{x:v,y:b}=this.projectionDelta;f.transformOrigin=`${v.origin*100}% ${b.origin*100}% 0`,y.animationValues?f.opacity=y===this?(d=(l=x.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:f.opacity=y===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const T in f0){if(x[T]===void 0)continue;const{correct:M,applyTo:_}=f0[T],N=f.transform==="none"?x[T]:M(x[T],y);if(_){const A=_.length;for(let R=0;R<A;R++)f[_[R]]=N}else f[T]=N}return this.options.layoutId&&(f.pointerEvents=y===this?Kg(o==null?void 0:o.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(qS),this.root.sharedNodes.clear()}}}function kL(n){n.updateLayout()}function RL(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?Cs(y=>{const x=o?t.measuredBox[y]:t.layoutBox[y],v=ps(x);x.min=r[y].min,x.max=x.min+v}):K2(s,t.layoutBox,r)&&Cs(y=>{const x=o?t.measuredBox[y]:t.layoutBox[y],v=ps(r[y]);x.max=x.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[y].max=n.relativeTarget[y].min+v)});const l=th();qf(l,r,t.layoutBox);const d=th();o?qf(d,n.applyTransform(i,!0),t.measuredBox):qf(d,r,t.layoutBox);const f=!q2(l);let p=!1;if(!n.resumeFrom){const y=n.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:x,layout:v}=y;if(x&&v){const b=vr();Yf(b,t.layoutBox,x.layoutBox);const T=vr();Yf(T,r,v.layoutBox),Y2(b,T)||(p=!0),y.options.layoutRoot&&(n.relativeTarget=T,n.relativeTargetOrigin=b,n.relativeParent=y)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:l,hasLayoutChanged:f,hasRelativeTargetChanged:p})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function PL(n){Jc.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function LL(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function IL(n){n.clearSnapshot()}function qS(n){n.clearMeasurements()}function DL(n){n.isLayoutDirty=!1}function UL(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function YS(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function OL(n){n.resolveTargetDelta()}function FL(n){n.calcProjection()}function zL(n){n.resetRotation()}function BL(n){n.removeLeadSnapshot()}function ZS(n,e,t){n.translate=$n(e.translate,0,t),n.scale=$n(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function KS(n,e,t,r){n.min=$n(e.min,t.min,r),n.max=$n(e.max,t.max,r)}function jL(n,e,t,r){KS(n.x,e.x,t.x,r),KS(n.y,e.y,t.y,r)}function VL(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const HL={duration:.45,ease:[.4,0,.1,1]},JS=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),QS=JS("applewebkit/")&&!JS("chrome/")?Math.round:cr;function eb(n){n.min=QS(n.min),n.max=QS(n.max)}function WL(n){eb(n.x),eb(n.y)}function K2(n,e,t){return n==="position"||n==="preserve-aspect"&&!Iv(WS(e),WS(t),.2)}const GL=Z2({attachResizeListener:(n,e)=>Co(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_x={current:void 0},J2=Z2({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!_x.current){const n=new GL({});n.mount(window),n.setOptions({layoutScroll:!0}),_x.current=n}return _x.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),XL={pan:{Feature:lL},drag:{Feature:oL,ProjectionNode:J2,MeasureLayout:G2}},$L=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function qL(n){const e=$L.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function Fv(n,e,t=1){const[r,i]=qL(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return I2(o)?parseFloat(o):o}else return Av(i)?Fv(i,e,t+1):i}function YL(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(i=>{const s=i.get();if(!Av(s))return;const o=Fv(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!Av(s))continue;const o=Fv(s,r);o&&(e[i]=o,t||(t={}),t[i]===void 0&&(t[i]=s))}return{target:e,transitionEnd:t}}const ZL=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Q2=n=>ZL.has(n),KL=n=>Object.keys(n).some(Q2),tb=n=>n===Mu||n===Rt,nb=(n,e)=>parseFloat(n.split(", ")[e]),rb=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return nb(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?nb(s[1],n):0}},JL=new Set(["x","y","z"]),QL=Dp.filter(n=>!JL.has(n));function eI(n){const e=[];return QL.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const fh={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:rb(4,13),y:rb(5,14)};fh.translateX=fh.x;fh.translateY=fh.y;const tI=(n,e,t)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,l={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(f=>{l[f]=fh[f](r,s)}),e.render();const d=e.measureViewportBox();return t.forEach(f=>{const p=e.getValue(f);p&&p.jump(l[f]),n[f]=fh[f](d,s)}),n},nI=(n,e,t={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(Q2);let s=[],o=!1;const l=[];if(i.forEach(d=>{const f=n.getValue(d);if(!n.hasValue(d))return;let p=t[d],y=Af(p);const x=e[d];let v;if(m0(x)){const b=x.length,T=x[0]===null?1:0;p=x[T],y=Af(p);for(let M=T;M<b&&x[M]!==null;M++)v?r_(Af(x[M])===v):v=Af(x[M])}else v=Af(x);if(y!==v)if(tb(y)&&tb(v)){const b=f.get();typeof b=="string"&&f.set(parseFloat(b)),typeof x=="string"?e[d]=parseFloat(x):Array.isArray(x)&&v===Rt&&(e[d]=x.map(parseFloat))}else y!=null&&y.transform&&(v!=null&&v.transform)&&(p===0||x===0)?p===0?f.set(v.transform(p)):e[d]=y.transform(x):(o||(s=eI(n),o=!0),l.push(d),r[d]=r[d]!==void 0?r[d]:e[d],f.jump(x))}),l.length){const d=l.indexOf("height")>=0?window.pageYOffset:null,f=tI(e,n,l);return s.length&&s.forEach(([p,y])=>{n.getValue(p).set(y)}),n.render(),z0&&d!==null&&window.scrollTo({top:d}),{target:f,transitionEnd:r}}else return{target:e,transitionEnd:r}};function rI(n,e,t,r){return KL(e)?nI(n,e,t,r):{target:e,transitionEnd:r}}const iI=(n,e,t,r)=>{const i=YL(n,e,r);return e=i.target,r=i.transitionEnd,rI(n,e,t,r)},zv={current:null},eT={current:!1};function sI(){if(eT.current=!0,!!z0)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>zv.current=n.matches;n.addListener(e),e()}else zv.current=!1}function aI(n,e,t){const{willChange:r}=e;for(const i in e){const s=e[i],o=t[i];if(Ji(s))n.addValue(i,s),v0(r)&&r.add(i);else if(Ji(o))n.addValue(i,hh(s,{owner:n})),v0(r)&&r.remove(i);else if(o!==s)if(n.hasValue(i)){const l=n.getValue(i);!l.hasAnimated&&l.set(s)}else{const l=n.getStaticValue(i);n.addValue(i,hh(l!==void 0?l:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const ib=new WeakMap,tT=Object.keys(lp),oI=tT.length,sb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],lI=q1.length;class cI{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Pn.render(this.render,!1,!0);const{latestValues:l,renderState:d}=s;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=j0(t),this.isVariantNode=zE(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(t,{});for(const y in p){const x=p[y];l[y]!==void 0&&Ji(x)&&(x.set(l[y],!1),v0(f)&&f.add(y))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,ib.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),eT.current||sI(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:zv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ib.delete(this.current),this.projection&&this.projection.unmount(),Io(this.notifyUpdate),Io(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=bu.has(e),i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Pn.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,i,s){let o,l;for(let d=0;d<oI;d++){const f=tT[d],{isEnabled:p,Feature:y,ProjectionNode:x,MeasureLayout:v}=lp[f];x&&(o=x),p(t)&&(!this.features[f]&&y&&(this.features[f]=new y(this)),v&&(l=v))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:f,drag:p,dragConstraints:y,layoutScroll:x,layoutRoot:v}=t;this.projection.setOptions({layoutId:d,layout:f,alwaysMeasureLayout:!!p||y&&Qd(y),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:s,layoutScroll:x,layoutRoot:v})}return l}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):vr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<sb.length;r++){const i=sb[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=aI(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<lI;r++){const i=q1[r],s=this.props[i];(op(s)||s===!1)&&(t[i]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=hh(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(t=n_(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ji(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new h_),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class nT extends cI{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:i},s){let o=T3(r,e||{},this);if(i&&(t&&(t=i(t)),r&&(r=i(r)),o&&(o=i(o))),s){M3(this,r,o);const l=iI(this,r,o,t);t=l.transitionEnd,r=l.target}return{transition:e,transitionEnd:t,...r}}}function uI(n){return window.getComputedStyle(n)}class dI extends nT{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(bu.has(t)){const r=o_(t);return r&&r.default||0}else{const r=uI(e),i=(HE(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return H2(e,t)}build(e,t,r,i){K1(e,t,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,t){return t_(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ji(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,i){YE(e,t,r,i)}}class hI extends nT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(bu.has(t)){const r=o_(t);return r&&r.default||0}return t=ZE.has(t)?t:X1(t),e.getAttribute(t)}measureInstanceViewportBox(){return vr()}scrapeMotionValuesFromProps(e,t){return JE(e,t)}build(e,t,r,i){Q1(e,t,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,r,i){KE(e,t,r,i)}mount(e){this.isSVGTag=e_(e.tagName),super.mount(e)}}const fI=(n,e)=>Z1(n)?new hI(e,{enableHardwareAcceleration:!1}):new dI(e,{enableHardwareAcceleration:!0}),pI={layout:{ProjectionNode:J2,MeasureLayout:G2}},mI={...j3,...oP,...XL,...pI},de=gR((n,e)=>qR(n,e,mI,fI));function rT(){const n=V.useRef(!1);return G1(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function gI(){const n=rT(),[e,t]=V.useState(0),r=V.useCallback(()=>{n.current&&t(e+1)},[e]);return[V.useCallback(()=>Pn.postRender(r),[r]),e]}class yI extends V.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function xI({children:n,isPresent:e}){const t=V.useId(),r=V.useRef(null),i=V.useRef({width:0,height:0,top:0,left:0});return V.useInsertionEffect(()=>{const{width:s,height:o,top:l,left:d}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=t;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),V.createElement(yI,{isPresent:e,childRef:r,sizeRef:i},V.cloneElement(n,{ref:r}))}const wx=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const l=QE(vI),d=V.useId(),f=V.useMemo(()=>({id:d,initial:e,isPresent:t,custom:i,onExitComplete:p=>{l.set(p,!0);for(const y of l.values())if(!y)return;r&&r()},register:p=>(l.set(p,!1),()=>l.delete(p))}),s?void 0:[t]);return V.useMemo(()=>{l.forEach((p,y)=>l.set(y,!1))},[t]),V.useEffect(()=>{!t&&!l.size&&r&&r()},[t]),o==="popLayout"&&(n=V.createElement(xI,{isPresent:t},n)),V.createElement(F0.Provider,{value:f},n)};function vI(){return new Map}function _I(n){return V.useEffect(()=>()=>n(),[])}const Qc=n=>n.key||"";function wI(n,e){n.forEach(t=>{const r=Qc(t);e.set(r,t)})}function SI(n){const e=[];return V.Children.forEach(n,t=>{V.isValidElement(t)&&e.push(t)}),e}const ca=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const l=V.useContext(Y1).forceRender||gI()[0],d=rT(),f=SI(n);let p=f;const y=V.useRef(new Map).current,x=V.useRef(p),v=V.useRef(new Map).current,b=V.useRef(!0);if(G1(()=>{b.current=!1,wI(f,v),x.current=p}),_I(()=>{b.current=!0,v.clear(),y.clear()}),b.current)return V.createElement(V.Fragment,null,p.map(N=>V.createElement(wx,{key:Qc(N),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:s,mode:o},N)));p=[...p];const T=x.current.map(Qc),M=f.map(Qc),_=T.length;for(let N=0;N<_;N++){const A=T[N];M.indexOf(A)===-1&&!y.has(A)&&y.set(A,void 0)}return o==="wait"&&y.size&&(p=[]),y.forEach((N,A)=>{if(M.indexOf(A)!==-1)return;const R=v.get(A);if(!R)return;const D=T.indexOf(A);let U=N;if(!U){const z=()=>{y.delete(A);const W=Array.from(v.keys()).filter(O=>!M.includes(O));if(W.forEach(O=>v.delete(O)),x.current=f.filter(O=>{const I=Qc(O);return I===A||W.includes(I)}),!y.size){if(d.current===!1)return;l(),r&&r()}};U=V.createElement(wx,{key:Qc(R),isPresent:!1,onExitComplete:z,custom:e,presenceAffectsLayout:s,mode:o},R),y.set(A,U)}p.splice(D,0,U)}),p=p.map(N=>{const A=N.key;return y.has(A)?N:V.createElement(wx,{key:Qc(N),isPresent:!0,presenceAffectsLayout:s,mode:o},N)}),V.createElement(V.Fragment,null,y.size?p:p.map(N=>V.cloneElement(N)))};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MI=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),ab=n=>{const e=MI(n);return e.charAt(0).toUpperCase()+e.slice(1)},iT=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),EI=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=V.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...l},d)=>V.createElement("svg",{ref:d,...TI,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:iT("lucide",i),...!s&&!EI(l)&&{"aria-hidden":"true"},...l},[...o.map(([f,p])=>V.createElement(f,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(n,e)=>{const t=V.forwardRef(({className:r,...i},s)=>V.createElement(AI,{ref:s,iconNode:e,className:iT(`lucide-${bI(ab(n))}`,`lucide-${n}`,r),...i}));return t.displayName=ab(n),t};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Zf=ot("activity",CI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],sT=ot("archive",NI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],aT=ot("arrow-right",kI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],PI=ot("bell-ring",RI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],up=ot("bell",LI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],DI=ot("bookmark",II);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],OI=ot("briefcase",UI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Qg=ot("building",FI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],zp=ot("calendar",zI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],oT=ot("chart-column",BI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],VI=ot("check",jI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],G0=ot("chevron-down",HI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Bv=ot("circle-alert",WI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ki=ot("circle-check-big",GI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],rh=ot("circle-help",XI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],qI=ot("circle-x",$I);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ZI=ot("circle",YI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],f_=ot("clock",KI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],jv=ot("cloud",JI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Sx=ot("cpu",QI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Vv=ot("database",eD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],nD=ot("dollar-sign",tD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],lT=ot("download",rD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],cT=ot("ellipsis-vertical",iD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],bx=ot("eye-off",sD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],uh=ot("eye",aD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Mx=ot("factory",oD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],dp=ot("file-text",lD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Kf=ot("folder-open",cD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],dD=ot("funnel",uD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ph=ot("globe",hD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],pD=ot("graduation-cap",fD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],gD=ot("info",mD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],ob=ot("key",yD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],vD=ot("landmark",xD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],uT=ot("lock",_D);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],w0=ot("log-out",wD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],X0=ot("mail",SD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],dT=ot("menu",bD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],ED=ot("message-circle",MD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Bp=ot("moon",TD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],lb=ot("palette",AD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],ND=ot("pause",CD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],RD=ot("pencil",kD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],hT=ot("phone",PD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],ID=ot("play",LD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fT=ot("plus",DD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],OD=ot("refresh-cw",UD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],To=ot("save",FD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],Hv=ot("scan",zD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],yu=ot("search",BD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],VD=ot("send",jD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],e0=ot("server",HD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],iu=ot("settings",WD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Kr=ot("shield",GD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],$D=ot("shopping-bag",XD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],S0=ot("smartphone",qD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ZD=ot("star",YD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],JD=ot("stethoscope",KD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],jp=ot("sun",QD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],t4=ot("target",e4);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],r4=ot("test-tube",n4);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],p_=ot("trash-2",i4);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],pT=ot("triangle-alert",s4);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],o4=ot("truck",a4);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],cb=ot("upload",l4);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ol=ot("user",c4);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],hp=ot("users",u4);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ua=ot("x",d4);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],mT=ot("zap",h4),gT=V.createContext(void 0),da=()=>{const n=V.useContext(gT);if(!n)throw new Error("useTheme must be used within a ThemeProvider");return n},f4=({children:n})=>{const e=window.matchMedia("(prefers-color-scheme: dark)").matches,[t,r]=V.useState(()=>localStorage.getItem("theme")||(e?"dark":"light"));V.useEffect(()=>{localStorage.setItem("theme",t)},[t]);const i=()=>{r(s=>s==="light"?"dark":"light")};return m.jsx(gT.Provider,{value:{theme:t,toggleTheme:i},children:n})},p4=({children:n,title:e,subtitle:t})=>{const{theme:r}=da();return m.jsxs(de.div,{className:`relative w-full max-w-md px-6 py-8 rounded-2xl shadow-xl overflow-hidden backdrop-blur-sm
        ${r==="dark"?"bg-surface-dark/80 border border-secondary-dark/30":"bg-surface-light/80 border border-secondary-light/30"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5},style:{animation:"float 6s ease-in-out infinite"},children:[m.jsx(de.div,{className:`absolute inset-0 opacity-10 z-0 bg-gradient-to-br 
          ${r==="dark"?"from-secondary-dark via-primary-dark to-accent-dark":"from-secondary-light via-primary-light to-accent-light"} 
          animate-shimmer bg-[length:200%_200%]`,animate:{scale:[1,1.02,1],rotate:[0,1,0]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),m.jsx(de.div,{className:"absolute top-0 right-0 w-24 h-24 rounded-full bg-accent-dark/20 dark:bg-accent-light/20 blur-xl",animate:{y:[0,-10,0],x:[0,5,0],scale:[1,1.1,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),m.jsx(de.div,{className:"absolute bottom-0 left-0 w-32 h-32 rounded-full bg-secondary-dark/20 dark:bg-secondary-light/20 blur-xl",animate:{y:[0,10,0],x:[0,-5,0],scale:[1,1.1,1]},transition:{duration:5,repeat:1/0,ease:"easeInOut"}}),m.jsxs("div",{className:"relative z-10",children:[m.jsx(de.h2,{className:"text-2xl md:text-3xl font-display font-bold text-center mb-2",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},children:e}),t&&m.jsx(de.p,{className:"text-center mb-6 opacity-80 text-sm md:text-base",initial:{opacity:0},animate:{opacity:.8},transition:{delay:.3},children:t}),n]})]})},Wv=V.forwardRef(({label:n,error:e,leftIcon:t,rightIcon:r,className:i,...s},o)=>{const{theme:l}=da();return m.jsxs(de.div,{className:"mb-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[n&&m.jsx("label",{className:"block text-sm font-medium mb-1",children:n}),m.jsxs("div",{className:"relative",children:[t&&m.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:t}),m.jsx("input",{ref:o,className:`
              w-full px-4 py-2 rounded-lg outline-none transition-all duration-300
              ${t?"pl-10":""} 
              ${r?"pr-10":""}
              ${l==="dark"?"bg-surface-dark/50 border border-secondary-dark/30 focus:border-secondary-dark text-text-dark placeholder:text-text-dark/50":"bg-surface-light/50 border border-secondary-light/30 focus:border-secondary-light text-text-light placeholder:text-text-light/50"}
              ${e?"border-error":""}
              ${i||""}
            `,...s}),r&&m.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:r})]}),e&&m.jsx(de.p,{className:"mt-1 text-sm text-error",initial:{opacity:0},animate:{opacity:1},children:e})]})});Wv.displayName="Input";const m4=({children:n,variant:e="primary",size:t="md",isLoading:r=!1,leftIcon:i,rightIcon:s,className:o,...l})=>{const d="relative inline-flex items-center justify-center font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2",f={sm:"text-xs py-2 px-3",md:"text-sm py-2.5 px-4",lg:"text-base py-3 px-5"},p={primary:"bg-gradient-to-r from-secondary-dark to-accent-dark text-white hover:shadow-lg dark:from-secondary-light dark:to-accent-light dark:hover:shadow-glow dark:shadow-accent-light/20 focus:ring-accent-dark dark:focus:ring-accent-light",secondary:"bg-gradient-to-r from-primary-dark/90 to-secondary-dark/90 text-white hover:shadow-md dark:from-primary-light/90 dark:to-secondary-light/90 dark:shadow-primary-light/20 focus:ring-secondary-dark dark:focus:ring-secondary-light",outline:"border border-secondary-dark dark:border-secondary-light text-secondary-dark dark:text-secondary-light hover:bg-secondary-dark/10 dark:hover:bg-secondary-light/10 focus:ring-secondary-dark dark:focus:ring-secondary-light",text:"text-secondary-dark dark:text-secondary-light hover:bg-secondary-dark/10 dark:hover:bg-secondary-light/10 focus:ring-secondary-dark dark:focus:ring-secondary-light"};return m.jsxs(de.button,{className:`
        ${d}
        ${f[t]}
        ${p[e]}
        ${l.disabled?"opacity-60 cursor-not-allowed":""}
        ${r?"cursor-wait":""}
        ${o||""}
      `,whileHover:!l.disabled&&!r?{scale:1.02}:{},whileTap:!l.disabled&&!r?{scale:.98}:{},disabled:l.disabled||r,...l,children:[r&&m.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!r&&i&&m.jsx("span",{className:"mr-2",children:i}),m.jsx("span",{children:n}),!r&&s&&m.jsx("span",{className:"ml-2",children:s})]})},g4=()=>{const{theme:n,toggleTheme:e}=da(),t=Fo(),[r,i]=V.useState(!1),[s,o]=V.useState({email:"",password:""}),[l,d]=V.useState({email:"",password:""});V.useEffect(()=>{document.title="Sign In | syra"},[]);const f=()=>{const y={email:"",password:""};return s.email?/\S+@\S+\.\S+/.test(s.email)||(y.email="Invalid email format"):y.email="Email is required",s.password||(y.password="Password is required"),d(y),!y.email&&!y.password},p=async y=>{y.preventDefault(),f()&&(i(!0),setTimeout(()=>{s.email==="client@gmail.com"&&s.password==="Client@123"?(localStorage.clear(),localStorage.setItem("token","mock-jwt-token"),localStorage.setItem("user_email",s.email),localStorage.setItem("user",JSON.stringify({fullName:"Client User",email:s.email})),t("/dashboard")):d({email:"Invalid email or password",password:"Invalid email or password"}),i(!1)},1e3))};return m.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[m.jsxs(de.div,{className:"absolute inset-0 z-0",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:[m.jsx("div",{className:"absolute top-1/4 right-1/3 w-64 h-64 bg-secondary-dark/20 dark:bg-secondary-light/20 rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-64 h-64 bg-accent-dark/20 dark:bg-accent-light/20 rounded-full blur-3xl animate-pulse-slow"})]}),m.jsx(de.button,{className:"fixed top-4 right-4 p-2 rounded-full bg-[#e0e0e0] dark:bg-surface-light/50 backdrop-blur-sm",whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e,children:n==="dark"?m.jsx(jp,{className:"w-6 h-6 text-yellow-400"}):m.jsx(Bp,{className:"w-6 h-6 text-indigo-600"})}),m.jsx(p4,{title:"Welcome Back!",subtitle:"Sign in to continue your journey",children:m.jsxs("form",{onSubmit:p,className:"space-y-6",children:[m.jsx(Wv,{type:"email",label:"Email",placeholder:"Enter your email",leftIcon:m.jsx(X0,{className:"w-5 h-5"}),value:s.email,onChange:y=>o(x=>({...x,email:y.target.value})),error:l.email,required:!0}),m.jsx(Wv,{type:"password",label:"Password",placeholder:"Enter your password",leftIcon:m.jsx(uT,{className:"w-5 h-5"}),value:s.password,onChange:y=>o(x=>({...x,password:y.target.value})),error:l.password,required:!0}),m.jsxs("div",{className:"flex items-center justify-between text-sm",children:[m.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[m.jsx("input",{type:"checkbox",className:"rounded border-gray-300"}),m.jsx("span",{children:"Remember me"})]}),m.jsx("button",{type:"button",onClick:()=>t("/forgot-password"),className:"text-secondary-dark hover:underline font-medium",children:"Forgot Password?"})]}),m.jsx(m4,{type:"submit",isLoading:r,className:"w-full",children:"Sign In"}),m.jsxs("p",{className:"text-center text-sm mt-6",children:["Don't have an account?"," ",m.jsx("button",{type:"button",onClick:()=>t("/get-started"),className:"text-secondary-dark font-semibold hover:underline",children:"Sign Up"})]})]})})]})};function yT(n,e){return function(){return n.apply(e,arguments)}}const{toString:y4}=Object.prototype,{getPrototypeOf:m_}=Object,{iterator:$0,toStringTag:xT}=Symbol,q0=(n=>e=>{const t=y4.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ha=n=>(n=n.toLowerCase(),e=>q0(e)===n),Y0=n=>e=>typeof e===n,{isArray:bh}=Array,fp=Y0("undefined");function x4(n){return n!==null&&!fp(n)&&n.constructor!==null&&!fp(n.constructor)&&Yi(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const vT=ha("ArrayBuffer");function v4(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&vT(n.buffer),e}const _4=Y0("string"),Yi=Y0("function"),_T=Y0("number"),Z0=n=>n!==null&&typeof n=="object",w4=n=>n===!0||n===!1,t0=n=>{if(q0(n)!=="object")return!1;const e=m_(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(xT in n)&&!($0 in n)},S4=ha("Date"),b4=ha("File"),M4=ha("Blob"),E4=ha("FileList"),T4=n=>Z0(n)&&Yi(n.pipe),A4=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Yi(n.append)&&((e=q0(n))==="formdata"||e==="object"&&Yi(n.toString)&&n.toString()==="[object FormData]"))},C4=ha("URLSearchParams"),[N4,k4,R4,P4]=["ReadableStream","Request","Response","Headers"].map(ha),L4=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Vp(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),bh(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let l;for(r=0;r<o;r++)l=s[r],e.call(null,n[l],l,n)}}function wT(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const su=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ST=n=>!fp(n)&&n!==su;function Gv(){const{caseless:n}=ST(this)&&this||{},e={},t=(r,i)=>{const s=n&&wT(e,i)||i;t0(e[s])&&t0(r)?e[s]=Gv(e[s],r):t0(r)?e[s]=Gv({},r):bh(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Vp(arguments[r],t);return e}const I4=(n,e,t,{allOwnKeys:r}={})=>(Vp(e,(i,s)=>{t&&Yi(i)?n[s]=yT(i,t):n[s]=i},{allOwnKeys:r}),n),D4=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),U4=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},O4=(n,e,t,r)=>{let i,s,o;const l={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!l[o]&&(e[o]=n[o],l[o]=!0);n=t!==!1&&m_(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},F4=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},z4=n=>{if(!n)return null;if(bh(n))return n;let e=n.length;if(!_T(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},B4=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&m_(Uint8Array)),j4=(n,e)=>{const r=(n&&n[$0]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},V4=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},H4=ha("HTMLFormElement"),W4=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),ub=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),G4=ha("RegExp"),bT=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Vp(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},X4=n=>{bT(n,(e,t)=>{if(Yi(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Yi(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},$4=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return bh(n)?r(n):r(String(n).split(e)),t},q4=()=>{},Y4=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function Z4(n){return!!(n&&Yi(n.append)&&n[xT]==="FormData"&&n[$0])}const K4=n=>{const e=new Array(10),t=(r,i)=>{if(Z0(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=bh(r)?[]:{};return Vp(r,(o,l)=>{const d=t(o,i+1);!fp(d)&&(s[l]=d)}),e[i]=void 0,s}}return r};return t(n,0)},J4=ha("AsyncFunction"),Q4=n=>n&&(Z0(n)||Yi(n))&&Yi(n.then)&&Yi(n.catch),MT=((n,e)=>n?setImmediate:e?((t,r)=>(su.addEventListener("message",({source:i,data:s})=>{i===su&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),su.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Yi(su.postMessage)),eU=typeof queueMicrotask<"u"?queueMicrotask.bind(su):typeof process<"u"&&process.nextTick||MT,tU=n=>n!=null&&Yi(n[$0]),Ee={isArray:bh,isArrayBuffer:vT,isBuffer:x4,isFormData:A4,isArrayBufferView:v4,isString:_4,isNumber:_T,isBoolean:w4,isObject:Z0,isPlainObject:t0,isReadableStream:N4,isRequest:k4,isResponse:R4,isHeaders:P4,isUndefined:fp,isDate:S4,isFile:b4,isBlob:M4,isRegExp:G4,isFunction:Yi,isStream:T4,isURLSearchParams:C4,isTypedArray:B4,isFileList:E4,forEach:Vp,merge:Gv,extend:I4,trim:L4,stripBOM:D4,inherits:U4,toFlatObject:O4,kindOf:q0,kindOfTest:ha,endsWith:F4,toArray:z4,forEachEntry:j4,matchAll:V4,isHTMLForm:H4,hasOwnProperty:ub,hasOwnProp:ub,reduceDescriptors:bT,freezeMethods:X4,toObjectSet:$4,toCamelCase:W4,noop:q4,toFiniteNumber:Y4,findKey:wT,global:su,isContextDefined:ST,isSpecCompliantForm:Z4,toJSONObject:K4,isAsyncFn:J4,isThenable:Q4,setImmediate:MT,asap:eU,isIterable:tU};function Gt(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Ee.inherits(Gt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ee.toJSONObject(this.config),code:this.code,status:this.status}}});const ET=Gt.prototype,TT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{TT[n]={value:n}});Object.defineProperties(Gt,TT);Object.defineProperty(ET,"isAxiosError",{value:!0});Gt.from=(n,e,t,r,i,s)=>{const o=Object.create(ET);return Ee.toFlatObject(n,o,function(d){return d!==Error.prototype},l=>l!=="isAxiosError"),Gt.call(o,n.message,e,t,r,i),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const nU=null;function Xv(n){return Ee.isPlainObject(n)||Ee.isArray(n)}function AT(n){return Ee.endsWith(n,"[]")?n.slice(0,-2):n}function db(n,e,t){return n?n.concat(e).map(function(i,s){return i=AT(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function rU(n){return Ee.isArray(n)&&!n.some(Xv)}const iU=Ee.toFlatObject(Ee,{},null,function(e){return/^is[A-Z]/.test(e)});function K0(n,e,t){if(!Ee.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Ee.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,M){return!Ee.isUndefined(M[T])});const r=t.metaTokens,i=t.visitor||p,s=t.dots,o=t.indexes,d=(t.Blob||typeof Blob<"u"&&Blob)&&Ee.isSpecCompliantForm(e);if(!Ee.isFunction(i))throw new TypeError("visitor must be a function");function f(b){if(b===null)return"";if(Ee.isDate(b))return b.toISOString();if(!d&&Ee.isBlob(b))throw new Gt("Blob is not supported. Use a Buffer instead.");return Ee.isArrayBuffer(b)||Ee.isTypedArray(b)?d&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function p(b,T,M){let _=b;if(b&&!M&&typeof b=="object"){if(Ee.endsWith(T,"{}"))T=r?T:T.slice(0,-2),b=JSON.stringify(b);else if(Ee.isArray(b)&&rU(b)||(Ee.isFileList(b)||Ee.endsWith(T,"[]"))&&(_=Ee.toArray(b)))return T=AT(T),_.forEach(function(A,R){!(Ee.isUndefined(A)||A===null)&&e.append(o===!0?db([T],R,s):o===null?T:T+"[]",f(A))}),!1}return Xv(b)?!0:(e.append(db(M,T,s),f(b)),!1)}const y=[],x=Object.assign(iU,{defaultVisitor:p,convertValue:f,isVisitable:Xv});function v(b,T){if(!Ee.isUndefined(b)){if(y.indexOf(b)!==-1)throw Error("Circular reference detected in "+T.join("."));y.push(b),Ee.forEach(b,function(_,N){(!(Ee.isUndefined(_)||_===null)&&i.call(e,_,Ee.isString(N)?N.trim():N,T,x))===!0&&v(_,T?T.concat(N):[N])}),y.pop()}}if(!Ee.isObject(n))throw new TypeError("data must be an object");return v(n),e}function hb(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function g_(n,e){this._pairs=[],n&&K0(n,this,e)}const CT=g_.prototype;CT.append=function(e,t){this._pairs.push([e,t])};CT.toString=function(e){const t=e?function(r){return e.call(this,r,hb)}:hb;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function sU(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function NT(n,e,t){if(!e)return n;const r=t&&t.encode||sU;Ee.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(e,t):s=Ee.isURLSearchParams(e)?e.toString():new g_(e,t).toString(r),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class fb{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ee.forEach(this.handlers,function(r){r!==null&&e(r)})}}const kT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},aU=typeof URLSearchParams<"u"?URLSearchParams:g_,oU=typeof FormData<"u"?FormData:null,lU=typeof Blob<"u"?Blob:null,cU={isBrowser:!0,classes:{URLSearchParams:aU,FormData:oU,Blob:lU},protocols:["http","https","file","blob","url","data"]},y_=typeof window<"u"&&typeof document<"u",$v=typeof navigator=="object"&&navigator||void 0,uU=y_&&(!$v||["ReactNative","NativeScript","NS"].indexOf($v.product)<0),dU=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",hU=y_&&window.location.href||"http://localhost",fU=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:y_,hasStandardBrowserEnv:uU,hasStandardBrowserWebWorkerEnv:dU,navigator:$v,origin:hU},Symbol.toStringTag,{value:"Module"})),ui={...fU,...cU};function pU(n,e){return K0(n,new ui.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return ui.isNode&&Ee.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function mU(n){return Ee.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function gU(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function RT(n){function e(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),d=s>=t.length;return o=!o&&Ee.isArray(i)?i.length:o,d?(Ee.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!l):((!i[o]||!Ee.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&Ee.isArray(i[o])&&(i[o]=gU(i[o])),!l)}if(Ee.isFormData(n)&&Ee.isFunction(n.entries)){const t={};return Ee.forEachEntry(n,(r,i)=>{e(mU(r),i,t,0)}),t}return null}function yU(n,e,t){if(Ee.isString(n))try{return(e||JSON.parse)(n),Ee.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Hp={transitional:kT,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=Ee.isObject(e);if(s&&Ee.isHTMLForm(e)&&(e=new FormData(e)),Ee.isFormData(e))return i?JSON.stringify(RT(e)):e;if(Ee.isArrayBuffer(e)||Ee.isBuffer(e)||Ee.isStream(e)||Ee.isFile(e)||Ee.isBlob(e)||Ee.isReadableStream(e))return e;if(Ee.isArrayBufferView(e))return e.buffer;if(Ee.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return pU(e,this.formSerializer).toString();if((l=Ee.isFileList(e))||r.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return K0(l?{"files[]":e}:e,d&&new d,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),yU(e)):e}],transformResponse:[function(e){const t=this.transitional||Hp.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(Ee.isResponse(e)||Ee.isReadableStream(e))return e;if(e&&Ee.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?Gt.from(l,Gt.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ui.classes.FormData,Blob:ui.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ee.forEach(["delete","get","head","post","put","patch"],n=>{Hp.headers[n]={}});const xU=Ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),vU=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&xU[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},pb=Symbol("internals");function Nf(n){return n&&String(n).trim().toLowerCase()}function n0(n){return n===!1||n==null?n:Ee.isArray(n)?n.map(n0):String(n)}function _U(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const wU=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Ex(n,e,t,r,i){if(Ee.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!Ee.isString(e)){if(Ee.isString(r))return e.indexOf(r)!==-1;if(Ee.isRegExp(r))return r.test(e)}}function SU(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function bU(n,e){const t=Ee.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let Zi=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(l,d,f){const p=Nf(d);if(!p)throw new Error("header name must be a non-empty string");const y=Ee.findKey(i,p);(!y||i[y]===void 0||f===!0||f===void 0&&i[y]!==!1)&&(i[y||d]=n0(l))}const o=(l,d)=>Ee.forEach(l,(f,p)=>s(f,p,d));if(Ee.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Ee.isString(e)&&(e=e.trim())&&!wU(e))o(vU(e),t);else if(Ee.isObject(e)&&Ee.isIterable(e)){let l={},d,f;for(const p of e){if(!Ee.isArray(p))throw TypeError("Object iterator must return a key-value pair");l[f=p[0]]=(d=l[f])?Ee.isArray(d)?[...d,p[1]]:[d,p[1]]:p[1]}o(l,t)}else e!=null&&s(t,e,r);return this}get(e,t){if(e=Nf(e),e){const r=Ee.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return _U(i);if(Ee.isFunction(t))return t.call(this,i,r);if(Ee.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Nf(e),e){const r=Ee.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||Ex(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(o){if(o=Nf(o),o){const l=Ee.findKey(r,o);l&&(!t||Ex(r,r[l],l,t))&&(delete r[l],i=!0)}}return Ee.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||Ex(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return Ee.forEach(this,(i,s)=>{const o=Ee.findKey(r,s);if(o){t[o]=n0(i),delete t[s];return}const l=e?SU(s):String(s).trim();l!==s&&delete t[s],t[l]=n0(i),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Ee.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&Ee.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[pb]=this[pb]={accessors:{}}).accessors,i=this.prototype;function s(o){const l=Nf(o);r[l]||(bU(i,o),r[l]=!0)}return Ee.isArray(e)?e.forEach(s):s(e),this}};Zi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ee.reduceDescriptors(Zi.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});Ee.freezeMethods(Zi);function Tx(n,e){const t=this||Hp,r=e||t,i=Zi.from(r.headers);let s=r.data;return Ee.forEach(n,function(l){s=l.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function PT(n){return!!(n&&n.__CANCEL__)}function Mh(n,e,t){Gt.call(this,n??"canceled",Gt.ERR_CANCELED,e,t),this.name="CanceledError"}Ee.inherits(Mh,Gt,{__CANCEL__:!0});function LT(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Gt("Request failed with status code "+t.status,[Gt.ERR_BAD_REQUEST,Gt.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function MU(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function EU(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(d){const f=Date.now(),p=r[s];o||(o=f),t[i]=d,r[i]=f;let y=s,x=0;for(;y!==i;)x+=t[y++],y=y%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),f-o<e)return;const v=p&&f-p;return v?Math.round(x*1e3/v):void 0}}function TU(n,e){let t=0,r=1e3/e,i,s;const o=(f,p=Date.now())=>{t=p,i=null,s&&(clearTimeout(s),s=null),n.apply(null,f)};return[(...f)=>{const p=Date.now(),y=p-t;y>=r?o(f,p):(i=f,s||(s=setTimeout(()=>{s=null,o(i)},r-y)))},()=>i&&o(i)]}const b0=(n,e,t=3)=>{let r=0;const i=EU(50,250);return TU(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,d=o-r,f=i(d),p=o<=l;r=o;const y={loaded:o,total:l,progress:l?o/l:void 0,bytes:d,rate:f||void 0,estimated:f&&l&&p?(l-o)/f:void 0,event:s,lengthComputable:l!=null,[e?"download":"upload"]:!0};n(y)},t)},mb=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},gb=n=>(...e)=>Ee.asap(()=>n(...e)),AU=ui.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,ui.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(ui.origin),ui.navigator&&/(msie|trident)/i.test(ui.navigator.userAgent)):()=>!0,CU=ui.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const o=[n+"="+encodeURIComponent(e)];Ee.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),Ee.isString(r)&&o.push("path="+r),Ee.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function NU(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function kU(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function IT(n,e,t){let r=!NU(e);return n&&(r||t==!1)?kU(n,e):e}const yb=n=>n instanceof Zi?{...n}:n;function xu(n,e){e=e||{};const t={};function r(f,p,y,x){return Ee.isPlainObject(f)&&Ee.isPlainObject(p)?Ee.merge.call({caseless:x},f,p):Ee.isPlainObject(p)?Ee.merge({},p):Ee.isArray(p)?p.slice():p}function i(f,p,y,x){if(Ee.isUndefined(p)){if(!Ee.isUndefined(f))return r(void 0,f,y,x)}else return r(f,p,y,x)}function s(f,p){if(!Ee.isUndefined(p))return r(void 0,p)}function o(f,p){if(Ee.isUndefined(p)){if(!Ee.isUndefined(f))return r(void 0,f)}else return r(void 0,p)}function l(f,p,y){if(y in e)return r(f,p);if(y in n)return r(void 0,f)}const d={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(f,p,y)=>i(yb(f),yb(p),y,!0)};return Ee.forEach(Object.keys(Object.assign({},n,e)),function(p){const y=d[p]||i,x=y(n[p],e[p],p);Ee.isUndefined(x)&&y!==l||(t[p]=x)}),t}const DT=n=>{const e=xu({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:l}=e;e.headers=o=Zi.from(o),e.url=NT(IT(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let d;if(Ee.isFormData(t)){if(ui.hasStandardBrowserEnv||ui.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((d=o.getContentType())!==!1){const[f,...p]=d?d.split(";").map(y=>y.trim()).filter(Boolean):[];o.setContentType([f||"multipart/form-data",...p].join("; "))}}if(ui.hasStandardBrowserEnv&&(r&&Ee.isFunction(r)&&(r=r(e)),r||r!==!1&&AU(e.url))){const f=i&&s&&CU.read(s);f&&o.set(i,f)}return e},RU=typeof XMLHttpRequest<"u",PU=RU&&function(n){return new Promise(function(t,r){const i=DT(n);let s=i.data;const o=Zi.from(i.headers).normalize();let{responseType:l,onUploadProgress:d,onDownloadProgress:f}=i,p,y,x,v,b;function T(){v&&v(),b&&b(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let M=new XMLHttpRequest;M.open(i.method.toUpperCase(),i.url,!0),M.timeout=i.timeout;function _(){if(!M)return;const A=Zi.from("getAllResponseHeaders"in M&&M.getAllResponseHeaders()),D={data:!l||l==="text"||l==="json"?M.responseText:M.response,status:M.status,statusText:M.statusText,headers:A,config:n,request:M};LT(function(z){t(z),T()},function(z){r(z),T()},D),M=null}"onloadend"in M?M.onloadend=_:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(_)},M.onabort=function(){M&&(r(new Gt("Request aborted",Gt.ECONNABORTED,n,M)),M=null)},M.onerror=function(){r(new Gt("Network Error",Gt.ERR_NETWORK,n,M)),M=null},M.ontimeout=function(){let R=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const D=i.transitional||kT;i.timeoutErrorMessage&&(R=i.timeoutErrorMessage),r(new Gt(R,D.clarifyTimeoutError?Gt.ETIMEDOUT:Gt.ECONNABORTED,n,M)),M=null},s===void 0&&o.setContentType(null),"setRequestHeader"in M&&Ee.forEach(o.toJSON(),function(R,D){M.setRequestHeader(D,R)}),Ee.isUndefined(i.withCredentials)||(M.withCredentials=!!i.withCredentials),l&&l!=="json"&&(M.responseType=i.responseType),f&&([x,b]=b0(f,!0),M.addEventListener("progress",x)),d&&M.upload&&([y,v]=b0(d),M.upload.addEventListener("progress",y),M.upload.addEventListener("loadend",v)),(i.cancelToken||i.signal)&&(p=A=>{M&&(r(!A||A.type?new Mh(null,n,M):A),M.abort(),M=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const N=MU(i.url);if(N&&ui.protocols.indexOf(N)===-1){r(new Gt("Unsupported protocol "+N+":",Gt.ERR_BAD_REQUEST,n));return}M.send(s||null)})},LU=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const s=function(f){if(!i){i=!0,l();const p=f instanceof Error?f:this.reason;r.abort(p instanceof Gt?p:new Mh(p instanceof Error?p.message:p))}};let o=e&&setTimeout(()=>{o=null,s(new Gt(`timeout ${e} of ms exceeded`,Gt.ETIMEDOUT))},e);const l=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(f=>{f.unsubscribe?f.unsubscribe(s):f.removeEventListener("abort",s)}),n=null)};n.forEach(f=>f.addEventListener("abort",s));const{signal:d}=r;return d.unsubscribe=()=>Ee.asap(l),d}},IU=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},DU=async function*(n,e){for await(const t of UU(n))yield*IU(t,e)},UU=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},xb=(n,e,t,r)=>{const i=DU(n,e);let s=0,o,l=d=>{o||(o=!0,r&&r(d))};return new ReadableStream({async pull(d){try{const{done:f,value:p}=await i.next();if(f){l(),d.close();return}let y=p.byteLength;if(t){let x=s+=y;t(x)}d.enqueue(new Uint8Array(p))}catch(f){throw l(f),f}},cancel(d){return l(d),i.return()}},{highWaterMark:2})},J0=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",UT=J0&&typeof ReadableStream=="function",OU=J0&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),OT=(n,...e)=>{try{return!!n(...e)}catch{return!1}},FU=UT&&OT(()=>{let n=!1;const e=new Request(ui.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),vb=64*1024,qv=UT&&OT(()=>Ee.isReadableStream(new Response("").body)),M0={stream:qv&&(n=>n.body)};J0&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!M0[e]&&(M0[e]=Ee.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new Gt(`Response type '${e}' is not supported`,Gt.ERR_NOT_SUPPORT,r)})})})(new Response);const zU=async n=>{if(n==null)return 0;if(Ee.isBlob(n))return n.size;if(Ee.isSpecCompliantForm(n))return(await new Request(ui.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Ee.isArrayBufferView(n)||Ee.isArrayBuffer(n))return n.byteLength;if(Ee.isURLSearchParams(n)&&(n=n+""),Ee.isString(n))return(await OU(n)).byteLength},BU=async(n,e)=>{const t=Ee.toFiniteNumber(n.getContentLength());return t??zU(e)},jU=J0&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:l,onUploadProgress:d,responseType:f,headers:p,withCredentials:y="same-origin",fetchOptions:x}=DT(n);f=f?(f+"").toLowerCase():"text";let v=LU([i,s&&s.toAbortSignal()],o),b;const T=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let M;try{if(d&&FU&&t!=="get"&&t!=="head"&&(M=await BU(p,r))!==0){let D=new Request(e,{method:"POST",body:r,duplex:"half"}),U;if(Ee.isFormData(r)&&(U=D.headers.get("content-type"))&&p.setContentType(U),D.body){const[z,W]=mb(M,b0(gb(d)));r=xb(D.body,vb,z,W)}}Ee.isString(y)||(y=y?"include":"omit");const _="credentials"in Request.prototype;b=new Request(e,{...x,signal:v,method:t.toUpperCase(),headers:p.normalize().toJSON(),body:r,duplex:"half",credentials:_?y:void 0});let N=await fetch(b);const A=qv&&(f==="stream"||f==="response");if(qv&&(l||A&&T)){const D={};["status","statusText","headers"].forEach(O=>{D[O]=N[O]});const U=Ee.toFiniteNumber(N.headers.get("content-length")),[z,W]=l&&mb(U,b0(gb(l),!0))||[];N=new Response(xb(N.body,vb,z,()=>{W&&W(),T&&T()}),D)}f=f||"text";let R=await M0[Ee.findKey(M0,f)||"text"](N,n);return!A&&T&&T(),await new Promise((D,U)=>{LT(D,U,{data:R,headers:Zi.from(N.headers),status:N.status,statusText:N.statusText,config:n,request:b})})}catch(_){throw T&&T(),_&&_.name==="TypeError"&&/Load failed|fetch/i.test(_.message)?Object.assign(new Gt("Network Error",Gt.ERR_NETWORK,n,b),{cause:_.cause||_}):Gt.from(_,_&&_.code,n,b)}}),Yv={http:nU,xhr:PU,fetch:jU};Ee.forEach(Yv,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const _b=n=>`- ${n}`,VU=n=>Ee.isFunction(n)||n===null||n===!1,FT={getAdapter:n=>{n=Ee.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let s=0;s<e;s++){t=n[s];let o;if(r=t,!VU(t)&&(r=Yv[(o=String(t)).toLowerCase()],r===void 0))throw new Gt(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([l,d])=>`adapter ${l} `+(d===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(_b).join(`
`):" "+_b(s[0]):"as no adapter specified";throw new Gt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Yv};function Ax(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Mh(null,n)}function wb(n){return Ax(n),n.headers=Zi.from(n.headers),n.data=Tx.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),FT.getAdapter(n.adapter||Hp.adapter)(n).then(function(r){return Ax(n),r.data=Tx.call(n,n.transformResponse,r),r.headers=Zi.from(r.headers),r},function(r){return PT(r)||(Ax(n),r&&r.response&&(r.response.data=Tx.call(n,n.transformResponse,r.response),r.response.headers=Zi.from(r.response.headers))),Promise.reject(r)})}const zT="1.9.0",Q0={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Q0[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const Sb={};Q0.transitional=function(e,t,r){function i(s,o){return"[Axios v"+zT+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,l)=>{if(e===!1)throw new Gt(i(o," has been removed"+(t?" in "+t:"")),Gt.ERR_DEPRECATED);return t&&!Sb[o]&&(Sb[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,l):!0}};Q0.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function HU(n,e,t){if(typeof n!="object")throw new Gt("options must be an object",Gt.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const l=n[s],d=l===void 0||o(l,s,n);if(d!==!0)throw new Gt("option "+s+" must be "+d,Gt.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Gt("Unknown option "+s,Gt.ERR_BAD_OPTION)}}const r0={assertOptions:HU,validators:Q0},ka=r0.validators;let du=class{constructor(e){this.defaults=e||{},this.interceptors={request:new fb,response:new fb}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=xu(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&r0.assertOptions(r,{silentJSONParsing:ka.transitional(ka.boolean),forcedJSONParsing:ka.transitional(ka.boolean),clarifyTimeoutError:ka.transitional(ka.boolean)},!1),i!=null&&(Ee.isFunction(i)?t.paramsSerializer={serialize:i}:r0.assertOptions(i,{encode:ka.function,serialize:ka.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),r0.assertOptions(t,{baseUrl:ka.spelling("baseURL"),withXsrfToken:ka.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&Ee.merge(s.common,s[t.method]);s&&Ee.forEach(["delete","get","head","post","put","patch","common"],b=>{delete s[b]}),t.headers=Zi.concat(o,s);const l=[];let d=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(t)===!1||(d=d&&T.synchronous,l.unshift(T.fulfilled,T.rejected))});const f=[];this.interceptors.response.forEach(function(T){f.push(T.fulfilled,T.rejected)});let p,y=0,x;if(!d){const b=[wb.bind(this),void 0];for(b.unshift.apply(b,l),b.push.apply(b,f),x=b.length,p=Promise.resolve(t);y<x;)p=p.then(b[y++],b[y++]);return p}x=l.length;let v=t;for(y=0;y<x;){const b=l[y++],T=l[y++];try{v=b(v)}catch(M){T.call(this,M);break}}try{p=wb.call(this,v)}catch(b){return Promise.reject(b)}for(y=0,x=f.length;y<x;)p=p.then(f[y++],f[y++]);return p}getUri(e){e=xu(this.defaults,e);const t=IT(e.baseURL,e.url,e.allowAbsoluteUrls);return NT(t,e.params,e.paramsSerializer)}};Ee.forEach(["delete","get","head","options"],function(e){du.prototype[e]=function(t,r){return this.request(xu(r||{},{method:e,url:t,data:(r||{}).data}))}});Ee.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,l){return this.request(xu(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}du.prototype[e]=t(),du.prototype[e+"Form"]=t(!0)});let WU=class BT{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(l=>{r.subscribe(l),s=l}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,l){r.reason||(r.reason=new Mh(s,o,l),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new BT(function(i){e=i}),cancel:e}}};function GU(n){return function(t){return n.apply(null,t)}}function XU(n){return Ee.isObject(n)&&n.isAxiosError===!0}const Zv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Zv).forEach(([n,e])=>{Zv[e]=n});function jT(n){const e=new du(n),t=yT(du.prototype.request,e);return Ee.extend(t,du.prototype,e,{allOwnKeys:!0}),Ee.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return jT(xu(n,i))},t}const er=jT(Hp);er.Axios=du;er.CanceledError=Mh;er.CancelToken=WU;er.isCancel=PT;er.VERSION=zT;er.toFormData=K0;er.AxiosError=Gt;er.Cancel=er.CanceledError;er.all=function(e){return Promise.all(e)};er.spread=GU;er.isAxiosError=XU;er.mergeConfig=xu;er.AxiosHeaders=Zi;er.formToJSON=n=>RT(Ee.isHTMLForm(n)?new FormData(n):n);er.getAdapter=FT.getAdapter;er.HttpStatusCode=Zv;er.default=er;const{Axios:b8,AxiosError:M8,CanceledError:E8,isCancel:T8,CancelToken:A8,VERSION:C8,all:N8,Cancel:k8,isAxiosError:R8,spread:P8,toFormData:L8,AxiosHeaders:I8,HttpStatusCode:D8,formToJSON:U8,getAdapter:O8,mergeConfig:F8}=er,Pl=er.create({baseURL:"http://localhost:5000",withCredentials:!0}),Jf=({options:n,value:e,onChange:t,placeholder:r,label:i,error:s,required:o=!1})=>{const{theme:l}=da(),[d,f]=V.useState(!1),[p,y]=V.useState(""),x=V.useRef(null),v=n.filter(_=>_.label.toLowerCase().includes(p.toLowerCase())),b=n.find(_=>_.value===e);V.useEffect(()=>{const _=N=>{N.key==="Escape"&&(f(!1),y(""))};return d?(document.addEventListener("keydown",_),document.body.style.overflow="hidden"):document.body.style.overflow="unset",()=>{document.removeEventListener("keydown",_),document.body.style.overflow="unset"}},[d]);const T=_=>{t(_),f(!1),y("")},M=()=>{f(!1),y("")};return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"relative",ref:x,children:[m.jsxs("label",{className:"block text-sm font-medium  mb-10 mt-10 text-surface-dark/80 dark:text-surface-light/80",children:[i," ",o&&m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsxs(de.div,{className:"relative w-full cursor-pointer ",whileTap:{scale:.995},children:[m.jsxs("div",{onClick:()=>f(!d),className:`w-full px-4 py-3 bg-surface-light/10 dark:bg-surface-dark/10 border rounded-xl transition-all duration-300 flex items-center justify-between hover:shadow-lg ${d?"border-accent-dark dark:border-accent-light ring-2 ring-accent-dark/20 dark:ring-accent-light/20 shadow-lg":s?"border-red-500":"border-surface-light/20 dark:border-surface-dark/20 hover:border-surface-light/40 dark:hover:border-surface-dark/40"}`,children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[(b==null?void 0:b.icon)&&m.jsx(de.span,{className:"text-accent-dark dark:text-accent-light",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30},children:b.icon}),m.jsx("span",{className:`${b?"text-surface-dark dark:text-surface-light font-medium":"text-surface-dark/50 dark:text-surface-light/50"}`,children:b?b.label:r})]}),m.jsx(de.div,{animate:{rotate:d?180:0},transition:{duration:.3,ease:"easeInOut"},children:m.jsx(G0,{className:"w-5 h-5 text-surface-dark/60 dark:text-surface-light/60"})})]}),s&&m.jsx(de.p,{className:"text-red-500 text-sm mt-1",initial:{opacity:0,y:-5},animate:{opacity:1,y:0},transition:{duration:.2},children:s})]})]}),m.jsx(ca,{children:d&&m.jsxs(de.div,{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[m.jsx(de.div,{className:"absolute inset-0 -mt-6 bg-black/50 ",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:M}),m.jsxs(de.div,{className:`relative w-full max-w-md max-h-[80vh] -mt-5 rounded-2xl  border shadow-2xl overflow-hidden ${l==="dark"?"bg-surface-dark/90 border-surface-dark/30":"bg-surface-light/90 border-surface-secondary-light/30"}`,initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:20},transition:{type:"spring",damping:25,stiffness:300},children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-surface-dark/20 dark:border-surface-light/20",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-surface-dark dark:text-surface-light",children:i}),m.jsx("p",{className:"text-sm text-surface-dark/60 dark:text-surface-light/60 mt-1",children:"Choose an option from the list below"})]}),m.jsx(de.button,{onClick:M,className:`p-2 rounded-xl transition-all duration-300 ${l==="dark"?"hover:bg-surface-dark text-text-secondary-dark hover:text-text-dark":"hover:bg-surface-secondary-light text-text-secondary-light hover:text-text-light"}`,whileHover:{scale:1.1},whileTap:{scale:.9},children:m.jsx(Ua,{className:"w-5 h-5"})})]}),n.length>6&&m.jsx("div",{className:"p-4 border-b border-surface-dark/20 dark:border-surface-light/20",children:m.jsx(de.input,{type:"text",placeholder:"Search options...",value:p,onChange:_=>y(_.target.value),className:`w-full px-4 py-3 rounded-xl border transition-all duration-300 ${l==="dark"?"bg-surface-dark/50 border-surface-dark/30 focus:border-accent-dark text-text-dark placeholder:text-text-dark/50":"bg-surface-light/50 border-surface-secondary-light/30 focus:border-accent-light text-text-light placeholder:text-text-light/50"} focus:outline-none focus:ring-2 focus:ring-accent-dark/20 dark:focus:ring-accent-light/20`,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1},autoFocus:!0})}),m.jsx("div",{className:"max-h-96 overflow-y-auto p-2",children:v.length===0?m.jsxs(de.div,{className:"px-4 py-8 text-center text-surface-dark/50 dark:text-surface-light/50",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[m.jsx("div",{className:"text-4xl mb-2",children:""}),m.jsx("p",{children:"No options found"}),m.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your search"})]}):m.jsx("div",{className:"space-y-1",children:v.map((_,N)=>m.jsxs(de.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:N*.05,duration:.3},onClick:()=>T(_.value),className:`px-4 py-3 rounded-xl cursor-pointer transition-all duration-300 flex items-center justify-between group ${e===_.value?"bg-gradient-to-r from-accent-dark/20 to-secondary-dark/20 dark:from-accent-light/20 dark:to-secondary-light/20 text-accent-dark dark:text-accent-light border border-accent-dark/30 dark:border-accent-light/30":l==="dark"?"hover:bg-surface-dark/50 text-surface-light hover:shadow-md":"hover:bg-surface-secondary-light/50 text-surface-dark hover:shadow-md"}`,whileHover:{scale:1.02,x:4},whileTap:{scale:.98},children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[_.icon&&m.jsx(de.span,{className:`transition-all duration-300 ${e===_.value?"text-accent-dark dark:text-accent-light scale-110":"text-surface-dark/60 dark:text-surface-light/60 group-hover:text-surface-dark dark:group-hover:text-surface-light group-hover:scale-110"}`,whileHover:{rotate:5},children:_.icon}),m.jsx("span",{className:"font-medium",children:_.label})]}),e===_.value&&m.jsx(de.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:500,damping:30},children:m.jsx(VI,{className:"w-5 h-5 text-accent-dark dark:text-accent-light"})})]},_.value))})}),m.jsx("div",{className:"p-4 border-t border-surface-dark/20 dark:border-surface-light/20 bg-surface-light/30 dark:bg-surface-dark/30",children:m.jsxs("div",{className:"flex items-center justify-between text-sm text-surface-dark/60 dark:text-surface-light/60",children:[m.jsxs("span",{children:[v.length," option",v.length!==1?"s":""," available"]}),m.jsx("span",{className:"text-xs",children:"Press ESC to close"})]})})]})]})})]})},VT=er.create({baseURL:"http://localhost:5000/api/company",timeout:1e4}),$U=async n=>{try{return(await VT.post("/submit-details",n)).data}catch(e){throw console.error("Error submitting company details:",e),e}},qU=async()=>{try{return(await VT.get("/details")).data}catch(n){return console.error("Error fetching company details:",n),null}},YU=()=>{const{theme:n,toggleTheme:e}=da(),t=Fo(),[r,i]=V.useState(1),[s,o]=V.useState(!1),[l,d]=V.useState(!1),[f,p]=V.useState(""),[y,x]=V.useState({}),[v,b]=V.useState(!1),[T,M]=V.useState(!0),[_,N]=V.useState(!1),[A,R]=V.useState(10),[D,U]=V.useState({id:"",companyName:"",contactName:"",jobRole:"",contactEmail:"",contactPhone:"",companySize:"",industry:"",auditServices:[],additionalDetails:""}),z=[{value:"1-10",label:"1-10 employees",icon:m.jsx(hp,{className:"w-4 h-4"})},{value:"11-50",label:"11-50 employees",icon:m.jsx(hp,{className:"w-4 h-4"})},{value:"51-200",label:"51-200 employees",icon:m.jsx(Qg,{className:"w-4 h-4"})},{value:"201-500",label:"201-500 employees",icon:m.jsx(Qg,{className:"w-4 h-4"})},{value:"501-1000",label:"501-1000 employees",icon:m.jsx(Mx,{className:"w-4 h-4"})},{value:"1000+",label:"1000+ employees",icon:m.jsx(Mx,{className:"w-4 h-4"})}],W=[{value:"Technology",label:"Technology",icon:m.jsx(Sx,{className:"w-4 h-4"})},{value:"Finance",label:"Finance",icon:m.jsx(OI,{className:"w-4 h-4"})},{value:"Healthcare",label:"Healthcare",icon:m.jsx(JD,{className:"w-4 h-4"})},{value:"Retail",label:"Retail",icon:m.jsx($D,{className:"w-4 h-4"})},{value:"Manufacturing",label:"Manufacturing",icon:m.jsx(Mx,{className:"w-4 h-4"})},{value:"Education",label:"Education",icon:m.jsx(pD,{className:"w-4 h-4"})},{value:"Government",label:"Government",icon:m.jsx(vD,{className:"w-4 h-4"})},{value:"Energy",label:"Energy",icon:m.jsx(mT,{className:"w-4 h-4"})},{value:"Transportation",label:"Transportation",icon:m.jsx(o4,{className:"w-4 h-4"})},{value:"Other",label:"Other",icon:m.jsx(Qg,{className:"w-4 h-4"})}];V.useEffect(()=>{const X=async()=>{try{const ee=await qU();if(ee&&(U({id:localStorage.getItem("id")||"",companyName:ee.companyName||"",contactName:ee.contactName||"",jobRole:ee.jobRole||"",contactEmail:ee.contactEmail||"",contactPhone:ee.contactPhone||"",companySize:ee.companySize||"",industry:ee.industry||"",auditServices:ee.auditServices||[],additionalDetails:ee.additionalDetails||""}),ee.status==="completed")){d(!0);try{t("/verify")}catch(fe){console.error("Error loading company data:",fe)}}}finally{M(!1)}};document.title="Get Started | syra",X()},[t]);const O=X=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(X),I=X=>/^[0-9]{7,15}$/.test(X),K=()=>{const X={};return D.companyName.trim()||(X.companyName="Company name is required"),D.contactName.trim()||(X.contactName="Contact name is required"),D.jobRole.trim()||(X.jobRole="Job role is required"),D.contactEmail.trim()?O(D.contactEmail)||(X.contactEmail="Please enter a valid email address"):X.contactEmail="Email is required",D.contactPhone.trim()?I(D.contactPhone)||(X.contactPhone="Please enter a valid phone number (715 digits)"):X.contactPhone="Phone number is required",X},ie=()=>{const X={};return D.companySize||(X.companySize="Company size is required"),D.industry||(X.industry="Industry is required"),X},oe=()=>{const X={};return D.auditServices.length===0&&(X.auditServices="Please select at least one audit service"),X},Z=()=>{const X={...K(),...ie(),...oe()};return v||(X.consent="Please agree to the privacy policy"),X},le=X=>{let ee={};switch(X){case 1:ee=K();break;case 2:ee=ie();break;case 3:ee=oe();break;case 4:ee=Z();break;default:return!1}return Object.keys(ee).length===0},Q=X=>{const{name:ee,value:fe}=X.target;U(Ae=>({...Ae,[ee]:fe})),y[ee]&&x(Ae=>({...Ae,[ee]:void 0})),p("")},me=()=>{const X=r===1?K():r===2?ie():r===3?oe():{};Object.keys(X).length===0&&r<4?(i(ee=>ee+1),x({})):x(X)},$=()=>{r>1&&(i(X=>X-1),x({}))},re=X=>{U(ee=>{const Ae=ee.auditServices.includes(X)?ee.auditServices.filter(ke=>ke!==X):[...ee.auditServices,X];return{...ee,auditServices:Ae}}),y.auditServices&&x(ee=>({...ee,auditServices:void 0}))},te=async X=>{var fe,Ae;X.preventDefault(),p("");const ee=Z();if(Object.keys(ee).length>0){x(ee),p("Please ensure all required fields are filled correctly and consent is given.");return}o(!0);try{const ke={...D},Pe=await $U({...ke,id:localStorage.getItem("id")});await Pl.post("/api/auth/completeSignup",{id:localStorage.getItem("id")}),Pe!=null&&Pe.id&&localStorage.setItem("id",Pe.id),d(!0),N(!0);const Xe=setInterval(()=>{R(Ke=>Ke<=1?(clearInterval(Xe),t("/verify"),0):Ke-1)},1e3)}catch(ke){const Pe=((Ae=(fe=ke.response)==null?void 0:fe.data)==null?void 0:Ae.message)||ke.message||"Failed to submit request. Please try again.";p(Pe),console.error("Submission error:",ke)}finally{o(!1)}},j=(X,ee)=>{U(fe=>({...fe,[X]:ee}))};return T?m.jsx("div",{className:`min-h-screen flex items-center justify-center ${n==="dark"?"bg-background-dark":"bg-gray-300"}`,children:m.jsxs("div",{className:"text-center",children:[m.jsx(de.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading your information..."})]})}):m.jsxs("div",{className:`min-h-screen flex items-center justify-center p-4 relative overflow-hidden transition-colors duration-300 ${n==="dark"?"bg-background-dark":"bg-gray-300"}`,children:[m.jsxs(de.div,{className:"absolute inset-0 z-0",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:[m.jsx(de.div,{className:"absolute top-1/4 right-1/3 w-64 h-64 bg-secondary-dark/20 dark:bg-secondary-light/20 rounded-full blur-3xl",animate:{y:[0,-20,0],scale:[1,1.1,1]},transition:{duration:6,repeat:1/0,ease:"easeInOut"}}),m.jsx(de.div,{className:"absolute bottom-1/4 left-1/3 w-64 h-64 bg-accent-dark/20 dark:bg-accent-light/20 rounded-full blur-3xl",animate:{y:[0,20,0],scale:[1,1.2,1]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}})]}),m.jsx(de.button,{className:`fixed top-4 right-4 p-2 rounded-full backdrop-blur-sm transition-all duration-300 ${n==="dark"?"bg-surface-dark/50 border border-secondary-dark/30":"bg-surface-light/50 border border-secondary-light/30"}`,whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e,children:n==="dark"?m.jsx(jp,{className:"w-6 h-6 text-yellow-400"}):m.jsx(Bp,{className:"w-6 h-6 text-indigo-600"})}),m.jsx("div",{className:"container mx-auto px-4 relative z-10 max-w-4xl",children:m.jsxs(de.div,{className:`relative p-8 rounded-2xl shadow-xl overflow-hidden backdrop-blur-sm transition-all duration-300 ${n==="dark"?"bg-surface-dark/80 border border-secondary-dark/30":"bg-surface-light/80 border border-secondary-light/30"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},style:{animation:"float 6s ease-in-out infinite"},children:[m.jsx(de.div,{className:`absolute inset-0 opacity-10 z-0 bg-gradient-to-br 
              ${n==="dark"?"from-secondary-dark via-primary-dark to-accent-dark":"from-secondary-light via-primary-light to-accent-light"} 
              animate-shimmer bg-[length:200%_200%]`,animate:{scale:[1,1.02,1],rotate:[0,1,0]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),m.jsx(de.div,{className:"absolute top-0 right-0 w-24 h-24 rounded-full bg-accent-dark/20 dark:bg-accent-light/20 blur-xl",animate:{y:[0,-10,0],x:[0,5,0],scale:[1,1.1,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),m.jsx(de.div,{className:"absolute bottom-0 left-0 w-32 h-32 rounded-full bg-secondary-dark/20 dark:bg-secondary-light/20 blur-xl",animate:{y:[0,10,0],x:[0,-5,0],scale:[1,1.1,1]},transition:{duration:5,repeat:1/0,ease:"easeInOut"}}),m.jsxs("div",{className:"relative z-10",children:[m.jsxs(de.div,{className:"text-center mb-8",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},children:[m.jsx("h1",{className:"text-3xl font-display font-bold mb-4",children:"Get Started with BCBUZZ"}),m.jsx("p",{className:"opacity-80",children:"Complete the form below to begin your security audit journey."})]}),m.jsxs("div",{className:"mb-10 relative",children:[m.jsx("div",{className:`h-1 w-full rounded-full ${n==="dark"?"bg-surface-dark/20":"bg-surface-secondary-light/20"}`,children:m.jsx(de.div,{className:"h-1 bg-gradient-to-r from-secondary-dark to-accent-dark dark:from-secondary-light dark:to-accent-light rounded-full transition-all duration-500",initial:{width:0},animate:{width:`${r/(l?5:4)*100}%`},transition:{duration:.5}})}),m.jsx("div",{className:"flex justify-between -mt-2.5",children:[1,2,3,4].map(X=>m.jsx(de.div,{className:`w-5 h-5 rounded-full flex items-center justify-center z-10 transition-all duration-300 ${r>=X?"bg-gradient-to-r from-secondary-dark to-accent-dark dark:from-secondary-light dark:to-accent-light":n==="dark"?"bg-surface-dark/20":"bg-surface-secondary-light/20"}`,whileHover:{scale:1.1},animate:{scale:r>=X?1.1:1},children:r>X&&m.jsx(ki,{className:"h-4 w-4 text-white"})},X))}),m.jsxs("div",{className:"flex justify-between mt-2 text-xs opacity-60",children:[m.jsx("span",{children:"Company Details"}),m.jsx("span",{children:"Business Info"}),m.jsx("span",{children:"Audit Selection"}),m.jsx("span",{children:"Review"})]})]}),f&&m.jsxs(de.div,{className:"bg-red-500/10 text-red-500 dark:text-red-400 p-4 rounded-lg mb-6 flex items-center",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:[m.jsx(Bv,{className:"h-5 w-5 mr-2 shrink-0"}),m.jsx("span",{children:f})]}),l?m.jsxs(de.div,{className:"text-center py-8",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[m.jsx(de.div,{animate:{rotate:360},transition:{duration:.6,ease:"easeOut"},children:m.jsx(ki,{className:"h-16 w-16 text-green-500 dark:text-green-400 mx-auto mb-4"})}),m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Request Submitted Successfully!"}),m.jsx("p",{className:"opacity-70 mb-4",children:"Your request has been successfully received and our team has been notified."}),_&&m.jsxs("div",{className:"mb-6",children:[m.jsx("p",{className:"text-lg font-medium mb-2",children:"Preparing your verification..."}),m.jsxs("div",{className:"flex items-center justify-center",children:[m.jsx(de.div,{className:"w-12 h-12 bg-secondary-dark/10 dark:bg-secondary-light/10 rounded-full flex items-center justify-center mr-3",animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},children:m.jsx("span",{className:"text-xl font-bold",children:A})}),m.jsx("span",{children:"seconds remaining"})]})]}),m.jsx(de.button,{onClick:()=>{A<=0&&t("/verify")},className:`px-6 py-2 bg-gradient-to-r from-secondary-dark to-accent-dark dark:from-secondary-light dark:to-accent-light text-white rounded-md hover:shadow-lg transition-all duration-300 ${A>0?"opacity-50 cursor-not-allowed":""}`,whileHover:A<=0?{scale:1.05}:{},whileTap:A<=0?{scale:.95}:{},disabled:A>0,children:A>0?"Please wait...":"Proceed to Verification"})]}):m.jsxs("form",{onSubmit:te,children:[r===1&&m.jsxs(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[m.jsx("h2",{className:"text-xl font-medium mb-4",children:"Company Details"}),m.jsxs(de.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[m.jsxs("label",{htmlFor:"companyName",className:"block text-sm font-medium mb-1 opacity-80",children:["Company Name ",m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsx("input",{type:"text",id:"companyName",name:"companyName",value:D.companyName,onChange:Q,className:`w-full px-4 py-2 rounded-lg outline-none transition-all duration-300 ${n==="dark"?"bg-surface-dark/50 border border-secondary-dark/30 focus:border-secondary-dark text-text-dark placeholder:text-text-dark/50":"bg-surface-light/50 border border-secondary-light/30 focus:border-secondary-light text-text-light placeholder:text-text-light/50"} ${y.companyName?"border-red-500 focus:border-red-500":""}`}),y.companyName&&m.jsx(de.p,{className:"text-red-500 text-sm mt-1",initial:{opacity:0},animate:{opacity:1},children:y.companyName})]}),m.jsxs(de.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:[m.jsxs("label",{htmlFor:"contactName",className:"block text-sm font-medium mb-1 opacity-80",children:["Contact Name ",m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsx("input",{type:"text",id:"contactName",name:"contactName",value:D.contactName,onChange:Q,className:`w-full px-4 py-2 rounded-lg outline-none transition-all duration-300 ${n==="dark"?"bg-surface-dark/50 border border-secondary-dark/30 focus:border-secondary-dark text-text-dark placeholder:text-text-dark/50":"bg-surface-light/50 border border-secondary-light/30 focus:border-secondary-light text-text-light placeholder:text-text-light/50"} ${y.contactName?"border-red-500 focus:border-red-500":""}`}),y.contactName&&m.jsx(de.p,{className:"text-red-500 text-sm mt-1",initial:{opacity:0},animate:{opacity:1},children:y.contactName})]}),m.jsxs(de.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[m.jsxs("label",{htmlFor:"jobRole",className:"block text-sm font-medium mb-1 opacity-80",children:["Job Role ",m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsx("input",{type:"text",id:"jobRole",name:"jobRole",value:D.jobRole,onChange:Q,className:`w-full px-4 py-2 rounded-lg outline-none transition-all duration-300 ${n==="dark"?"bg-surface-dark/50 border border-secondary-dark/30 focus:border-secondary-dark text-text-dark placeholder:text-text-dark/50":"bg-surface-light/50 border border-secondary-light/30 focus:border-secondary-light text-text-light placeholder:text-text-light/50"} ${y.jobRole?"border-red-500 focus:border-red-500":""}`}),y.jobRole&&m.jsx(de.p,{className:"text-red-500 text-sm mt-1",initial:{opacity:0},animate:{opacity:1},children:y.jobRole})]}),m.jsxs(de.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:[m.jsxs("label",{htmlFor:"contactEmail",className:"block text-sm font-medium mb-1 opacity-80",children:["Contact Email ",m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsx("input",{type:"email",id:"contactEmail",name:"contactEmail",value:D.contactEmail,onChange:Q,className:`w-full px-4 py-2 rounded-lg outline-none transition-all duration-300 ${n==="dark"?"bg-surface-dark/50 border border-secondary-dark/30 focus:border-secondary-dark text-text-dark placeholder:text-text-dark/50":"bg-surface-light/50 border border-secondary-light/30 focus:border-secondary-light text-text-light placeholder:text-text-light/50"} ${y.contactEmail?"border-red-500 focus:border-red-500":""}`}),y.contactEmail&&m.jsx(de.p,{className:"text-red-500 text-sm mt-1",initial:{opacity:0},animate:{opacity:1},children:y.contactEmail})]}),m.jsxs(de.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},children:[m.jsxs("label",{htmlFor:"contactPhone",className:"block text-sm font-medium mb-1 opacity-80",children:["Contact Phone ",m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsx("input",{type:"tel",id:"contactPhone",name:"contactPhone",value:D.contactPhone,onChange:X=>{const ee=X.target.value.replace(/\D/g,"");Q({...X,target:{...X.target,name:"contactPhone",value:ee}})},inputMode:"numeric",pattern:"[0-9]{7,15}",className:`w-full px-4 py-2 rounded-lg outline-none transition-all duration-300 ${n==="dark"?"bg-surface-dark/50 border border-secondary-dark/30 focus:border-secondary-dark text-text-dark placeholder:text-text-dark/50":"bg-surface-light/50 border border-secondary-light/30 focus:border-secondary-light text-text-light placeholder:text-text-light/50"} ${y.contactPhone?"border-red-500 focus:border-red-500":""}`}),y.contactPhone&&m.jsx(de.p,{className:"text-red-500 text-sm mt-1",initial:{opacity:0},animate:{opacity:1},children:y.contactPhone})]})]}),r===2&&m.jsxs(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[m.jsx("h2",{className:"text-xl font-medium mb-4 text-surface-dark dark:text-surface-light",children:"Business Information"}),m.jsx(Jf,{options:z,value:D.companySize,onChange:X=>j("companySize",X),placeholder:"Select company size",label:"Company Size",error:y.companySize,required:!0}),m.jsx(Jf,{options:W,value:D.industry,onChange:X=>j("industry",X),placeholder:"Select industry",label:"Industry",error:y.industry,required:!0})]}),r===3&&m.jsxs(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[m.jsx("h2",{className:"text-xl font-medium mb-4",children:"Select Audit Services"}),m.jsxs("p",{className:"opacity-70 mb-6",children:["Choose the security audit services you're interested in. You can select multiple options. ",m.jsx("span",{className:"text-red-500",children:"*"})]}),y.auditServices&&m.jsxs(de.div,{className:"bg-red-500/10 text-red-500 dark:text-red-400 p-3 rounded-lg mb-4 flex items-center",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:[m.jsx(Bv,{className:"h-4 w-4 mr-2 shrink-0"}),m.jsx("span",{children:y.auditServices})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{id:"network",icon:Kr,label:"Network Audit",description:"Comprehensive assessment of your network infrastructure and security.",color:"from-secondary-dark to-accent-dark dark:from-secondary-light dark:to-accent-light"},{id:"web",icon:ph,label:"Web App Audit",description:"Security assessment of your web applications and APIs.",color:"from-green-500 to-emerald-500"},{id:"cloud",icon:jv,label:"Cloud Audit",description:"Security assessment of your cloud infrastructure and configurations.",color:"from-blue-500 to-cyan-500"},{id:"mobile",icon:S0,label:"Mobile Audit",description:"Security assessment of your mobile applications.",color:"from-yellow-500 to-orange-500"},{id:"iot",icon:Sx,label:"IoT Audit",description:"Security assessment of your IoT devices and infrastructure.",color:"from-red-500 to-pink-500"},{id:"api",icon:e0,label:"API Audit",description:"Security assessment of your application programming interfaces.",color:"from-violet-500 to-purple-500"}].map((X,ee)=>m.jsxs(de.div,{className:`relative p-4 rounded-xl border cursor-pointer transition-all duration-300 ${D.auditServices.includes(X.id)?n==="dark"?"border-secondary-dark bg-secondary-dark/10":"border-secondary-light bg-secondary-light/10":n==="dark"?"border-surface-dark/20 hover:border-surface-dark/40":"border-surface-secondary-light/20 hover:border-surface-secondary-light/40"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:ee*.1},whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:[m.jsxs("label",{className:"flex items-start cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:D.auditServices.includes(X.id),onChange:()=>re(X.id),className:"h-5 w-5 rounded border-gray-300 text-secondary-dark dark:text-secondary-light focus:ring-secondary-dark dark:focus:ring-secondary-light mt-1"}),m.jsxs("div",{className:"ml-3 flex-1",children:[m.jsxs("div",{className:"flex items-center mb-2",children:[m.jsx("div",{className:`w-8 h-8 rounded-lg bg-gradient-to-r ${X.color} p-1.5 mr-3`,children:m.jsx(X.icon,{className:"w-full h-full text-white"})}),m.jsx("span",{className:"font-medium",children:X.label})]}),m.jsx("p",{className:"text-sm opacity-70",children:X.description})]})]}),D.auditServices.includes(X.id)&&m.jsx(de.div,{className:"absolute top-2 right-2",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30},children:m.jsx(ki,{className:"w-5 h-5 text-secondary-dark dark:text-secondary-light"})})]},X.id))}),m.jsxs(de.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.6},children:[m.jsx("label",{htmlFor:"additionalDetails",className:"block text-sm font-medium mb-1 opacity-80",children:"Additional Details"}),m.jsx("textarea",{id:"additionalDetails",name:"additionalDetails",value:D.additionalDetails,onChange:Q,rows:4,className:`w-full px-4 py-2 rounded-lg outline-none transition-all duration-300 resize-none ${n==="dark"?"bg-surface-dark/50 border border-secondary-dark/30 focus:border-secondary-dark text-text-dark placeholder:text-text-dark/50":"bg-surface-light/50 border border-secondary-light/30 focus:border-secondary-light text-text-light placeholder:text-text-light/50"}`,placeholder:"Please provide any additional information about your security requirements..."})]})]}),r===4&&m.jsxs(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[m.jsx("h2",{className:"text-xl font-medium mb-4",children:"Review Your Information"}),m.jsx("p",{className:"opacity-70 mb-6",children:"Please review your information before submitting."}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs(de.div,{className:`p-4 rounded-lg border ${n==="dark"?"border-surface-dark/20":"border-surface-secondary-light/20"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[m.jsxs("h3",{className:"font-medium mb-3 flex items-center",children:[m.jsx(Kr,{className:"h-5 w-5 text-secondary-dark dark:text-secondary-light mr-2"}),"Company Details"]}),m.jsxs("ul",{className:"space-y-2 text-sm opacity-80",children:[m.jsxs("li",{children:[m.jsx("span",{className:"opacity-60",children:"Company:"})," ",D.companyName]}),m.jsxs("li",{children:[m.jsx("span",{className:"opacity-60",children:"Contact:"})," ",D.contactName]}),m.jsxs("li",{children:[m.jsx("span",{className:"opacity-60",children:"Job Role:"})," ",D.jobRole]}),m.jsxs("li",{children:[m.jsx("span",{className:"opacity-60",children:"Email:"})," ",D.contactEmail]}),m.jsxs("li",{children:[m.jsx("span",{className:"opacity-60",children:"Phone:"})," ",D.contactPhone]})]})]}),m.jsxs(de.div,{className:`p-4 rounded-lg border ${n==="dark"?"border-surface-dark/20":"border-surface-secondary-light/20"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:[m.jsxs("h3",{className:"font-medium mb-3 flex items-center",children:[m.jsx(Kr,{className:"h-5 w-5 text-secondary-dark dark:text-secondary-light mr-2"}),"Business Information"]}),m.jsxs("ul",{className:"space-y-2 text-sm opacity-80",children:[m.jsxs("li",{children:[m.jsx("span",{className:"opacity-60",children:"Company Size:"})," ",D.companySize]}),m.jsxs("li",{children:[m.jsx("span",{className:"opacity-60",children:"Industry:"})," ",D.industry]})]})]})]}),m.jsxs(de.div,{className:`p-4 rounded-lg border ${n==="dark"?"border-surface-dark/20":"border-surface-secondary-light/20"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[m.jsxs("h3",{className:"font-medium mb-3 flex items-center",children:[m.jsx(Kr,{className:"h-5 w-5 text-secondary-dark dark:text-secondary-light mr-2"}),"Selected Audit Services"]}),m.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:D.auditServices.map((X,ee)=>{const fe={network:{icon:e0,label:"Network Audit",color:"bg-secondary-dark/10 text-secondary-dark dark:bg-secondary-light/10 dark:text-secondary-light"},web:{icon:ph,label:"Web App Audit",color:"bg-green-500/10 text-green-500 dark:bg-green-400/10 dark:text-green-400"},cloud:{icon:jv,label:"Cloud Audit",color:"bg-blue-500/10 text-blue-500 dark:bg-blue-400/10 dark:text-blue-400"},mobile:{icon:S0,label:"Mobile Audit",color:"bg-yellow-500/10 text-yellow-500 dark:bg-yellow-400/10 dark:text-yellow-400"},iot:{icon:Sx,label:"IoT Audit",color:"bg-red-500/10 text-red-500 dark:bg-red-400/10 dark:text-red-400"},api:{icon:e0,label:"API Audit",color:"bg-violet-500/10 text-violet-500 dark:bg-violet-400/10 dark:text-violet-400"}}[X]||{icon:Kr,label:X,color:"bg-gray-500/10 text-gray-500"};return m.jsxs(de.span,{className:`px-3 py-1 rounded-full flex items-center ${fe.color}`,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:ee*.1},children:[m.jsx(fe.icon,{className:"w-4 h-4 mr-2"}),m.jsx("span",{children:fe.label})]},X)})}),D.additionalDetails&&m.jsxs("div",{children:[m.jsx("h4",{className:"text-sm font-medium mb-2 opacity-80",children:"Additional Details:"}),m.jsx("p",{className:"opacity-70",children:D.additionalDetails})]})]}),m.jsxs(de.div,{className:`p-4 rounded-lg border ${n==="dark"?"border-surface-dark/20":"border-surface-secondary-light/20"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:[m.jsxs("div",{className:"flex items-start mb-4",children:[m.jsx(uT,{className:"h-5 w-5 text-secondary-dark dark:text-secondary-light mr-3 shrink-0 mt-0.5"}),m.jsx("p",{className:"opacity-80",children:"Your information will be securely stored using our proprietary technology. This ensures data integrity throughout the audit process."})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",id:"consent",checked:v,onChange:X=>b(X.target.checked),className:"h-4 w-4 text-secondary-dark dark:text-secondary-light border-gray-300 rounded focus:ring-secondary-dark dark:focus:ring-secondary-light"}),m.jsxs("label",{htmlFor:"consent",className:"ml-2 text-sm opacity-80",children:["I agree to the processing of my data as described in the"," ",m.jsx("a",{href:"#",className:"text-secondary-dark dark:text-secondary-light hover:opacity-80",children:"Privacy Policy"})," ",m.jsx("span",{className:"text-red-500",children:"*"})]})]}),y.consent&&m.jsx(de.p,{className:"text-red-500 text-sm mt-1",initial:{opacity:0},animate:{opacity:1},children:y.consent})]})]}),m.jsxs("div",{className:"mt-8 flex justify-between",children:[r>1&&m.jsx(de.button,{type:"button",onClick:$,className:`px-6 py-2 text-red-400 rounded-md transition-all duration-300 ${n==="dark"?"bg-surface-dark/20 hover:bg-surface-dark/30":"bg-surface-secondary-light/20 hover:bg-surface-secondary-light/30"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Back"}),r<4?m.jsx(de.button,{type:"button",onClick:me,disabled:!le(r),className:`px-6 py-2 rounded-md transition-all duration-300 ml-auto ${le(r)?"bg-gradient-to-r from-secondary-dark to-accent-dark dark:from-secondary-light dark:to-accent-light text-white hover:shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,whileHover:le(r)?{scale:1.02}:{},whileTap:le(r)?{scale:.98}:{},children:"Next"}):m.jsx(de.button,{type:"submit",disabled:s||!le(r),className:`px-6 py-2 rounded-md transition-all duration-300 ml-auto flex items-center ${le(r)&&!s?"bg-gradient-to-r from-secondary-dark to-accent-dark dark:from-secondary-light dark:to-accent-light text-white hover:shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,whileHover:le(r)&&!s?{scale:1.02}:{},whileTap:le(r)&&!s?{scale:.98}:{},children:s?m.jsxs(m.Fragment,{children:[m.jsxs(de.svg,{className:"animate-spin h-5 w-5 text-white mr-2",viewBox:"0 0 24 24",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Submitting..."]}):"Submit Request"})]})]})]})]})})]})},HT=({sidebarOpen:n,setSidebarOpen:e,activeTab:t,setActiveTab:r,handleNavigation:i,theme:s})=>{const[o,l]=V.useState(null),[d,f]=V.useState(!1);V.useEffect(()=>{const v=localStorage.getItem("user");if(v)try{l(JSON.parse(v))}catch(b){console.error("Failed to parse user from localStorage",b)}},[]);const p=[{id:"dashboard",label:"Dashboard",icon:oT},{id:"projects",label:"Projects",icon:Kf},{id:"scan",label:"Scan",icon:Hv},{id:"settings",label:"Settings",icon:iu},{id:"help",label:"Help",icon:rh}],y=()=>{localStorage.removeItem("introSeen"),localStorage.removeItem("token")},x=d||window.innerWidth<1024&&n;return m.jsx(ca,{children:(n||window.innerWidth>=1024)&&m.jsxs(de.div,{initial:window.innerWidth<1024?{x:-280,width:280}:{width:70},animate:window.innerWidth<1024?{x:0,width:280}:{width:d?280:70},exit:window.innerWidth<1024?{x:-280,width:280}:{width:70},onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),transition:{duration:.3,ease:"easeInOut"},className:`fixed left-0 top-0 h-full z-50 backdrop-blur-xl ${s==="dark"?`bg-surface-dark/40 ${d?"shadow-2xl":"border-r border-surface-secondary-dark/20"}`:`bg-white/90 ${d?"shadow-2xl":"border-r border-gray-200"}`}`,style:{background:s==="dark"?d?"rgba(15, 23, 42, 0.95)":"rgba(30, 41, 59, 0.4)":d?"rgba(255, 255, 255, 0.95)":"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)"},children:[m.jsx("div",{className:`p-3 border-b ${s==="dark"?"border-surface-secondary-dark/20":"border-gray-200/20"}`,children:m.jsxs("div",{className:`flex items-center ${x?"justify-between":"justify-center"}`,children:[m.jsxs("div",{className:"flex items-center overflow-hidden",children:[m.jsx("div",{className:`w-10 h-10 min-w-[40px] bg-gradient-to-br from-secondary-dark to-accent-dark rounded-xl flex items-center justify-center ${s==="dark"?"shadow-glow":"shadow-lg"}`,children:m.jsx("span",{className:"text-white font-bold text-lg",children:"BC"})}),m.jsxs(de.div,{animate:{opacity:x?1:0,width:x?"auto":0,marginLeft:x?12:0},className:"whitespace-nowrap overflow-hidden",transition:{duration:.3},children:[m.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-secondary-dark to-accent-dark bg-clip-text text-transparent",children:"BCBUZZ"}),m.jsx("p",{className:`text-xs ${s==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:"Security Platform"})]})]}),window.innerWidth<1024&&m.jsx(de.button,{onClick:()=>e(!1),className:`p-2 rounded-lg transition-all duration-200 ${s==="dark"?"hover:bg-surface-secondary-dark/30 text-text-secondary-dark hover:text-text-dark":"hover:bg-gray-100/50 text-text-secondary-light hover:text-text-light"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:m.jsx(Ua,{className:"w-5 h-5"})})]})}),m.jsx("nav",{className:"p-2 flex-1 overflow-x-hidden",children:m.jsx("div",{className:"space-y-2",children:p.map(v=>{const b=v.icon,T=t===v.id;return m.jsxs(de.button,{onClick:()=>{r(v.id),i(v.id)},className:`w-full flex items-center rounded-xl transition-all duration-200 group ${T?s==="dark"?"bg-gradient-to-r from-secondary-dark/30 to-accent-dark/30 text-secondary-dark border border-secondary-dark/30 shadow-inner-glow backdrop-blur-sm":"bg-gradient-to-r from-secondary-dark/30 to-accent-dark/30 text-blue-600 border border-blue-200/70 shadow-sm backdrop-blur-sm":s==="dark"?"hover:bg-surface-secondary-dark/20 text-text-secondary-dark hover:text-text-dark backdrop-blur-sm":"hover:bg-gray-50/50 text-text-secondary-light hover:text-text-light backdrop-blur-sm"} ${x?"px-4 py-3":"p-[9px] justify-center"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[m.jsx(b,{className:`w-5 h-5 min-w-[20px] transition-transform duration-200 ${T?"scale-110":"group-hover:scale-105"}`}),m.jsx(de.span,{animate:{opacity:x?1:0,width:x?"auto":0,marginLeft:x?12:0},className:"font-medium whitespace-nowrap overflow-hidden",transition:{duration:.3},children:v.label}),T&&x&&m.jsx(de.div,{layoutId:"activeTab",className:"ml-auto w-2 h-2 bg-secondary-dark rounded-full",initial:{scale:0},animate:{scale:1},transition:{duration:.2}})]},v.id)})})}),m.jsxs("div",{className:`p-2 border-t ${s==="dark"?"border-surface-secondary-dark/20":"border-gray-200/20"}`,children:[m.jsxs("div",{className:`flex items-center rounded-xl backdrop-blur-sm transition-all duration-300 ${s==="dark"?"bg-gradient-to-r from-secondary-dark/20 to-accent-dark/20 border border-secondary-dark/20 shadow-dark-card":"bg-gradient-to-r from-blue-50/50 to-sky-50/50 border border-blue-100/50"} ${x?"p-2":"p-[7px] justify-center"}`,children:[m.jsx("div",{className:`w-10 h-10 min-w-[40px] bg-gradient-to-br from-secondary-dark to-accent-dark rounded-full flex items-center justify-center ${s==="dark"?"shadow-glow":"shadow-lg"}`,children:m.jsx(Ol,{className:"w-5 h-5 text-white"})}),m.jsxs(de.div,{animate:{opacity:x?1:0,width:x?"auto":0,marginLeft:x?12:0},className:"flex-1 overflow-hidden",transition:{duration:.3},children:[m.jsx("p",{className:"font-medium text-sm whitespace-nowrap",children:(o==null?void 0:o.fullName)||"User"}),m.jsx("p",{className:`text-xs whitespace-nowrap ${s==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:(o==null?void 0:o.email)||"user@example.com"})]})]}),m.jsx(sR,{to:"/",onClick:y,className:"block w-full",children:m.jsxs(de.button,{className:`w-full flex items-center mt-3 rounded-xl transition-all duration-200 ${s==="dark"?"hover:bg-error-dark/20 text-error-dark hover:text-red-300 border border-transparent hover:border-error-dark/30":"hover:bg-red-50 text-red-600 hover:text-red-700 border border-transparent hover:border-red-200"} ${x?"px-4 py-3":"p-[9px] justify-center"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[m.jsx(w0,{className:"w-5 h-5 min-w-[20px]"}),m.jsx(de.span,{animate:{opacity:x?1:0,width:x?"auto":0,marginLeft:x?12:0},className:"font-medium whitespace-nowrap overflow-hidden",transition:{duration:.3},children:"Logout"})]})})]})]})})},WT=({notification:n,theme:e,getColorClasses:t,onMarkRead:r,onRemove:i})=>{const s=n.icon;return m.jsxs(de.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:n.id*.1},onClick:()=>n.unread&&r(),className:`relative p-4 rounded-xl transition-all duration-200 cursor-pointer group backdrop-blur-sm ${n.unread?e==="dark"?"bg-gradient-to-r from-secondary-dark/10 to-accent-dark/10 border border-secondary-dark/20 shadow-inner-glow":"bg-gradient-to-r from-blue-50 to-sky-50 border border-blue-200":e==="dark"?"hover:bg-surface-secondary-dark/30":"hover:bg-gray-50"}`,whileHover:{scale:1.01,x:2},children:[m.jsxs("div",{className:"flex items-start space-x-3",children:[m.jsx("div",{className:`p-2 rounded-lg mt-0.5 ${n.type==="success"?t("success","bg")+" "+t("success","text"):n.type==="warning"?t("warning","bg")+" "+t("warning","text"):t("info","bg")+" "+t("info","text")}`,children:m.jsx(s,{className:"w-4 h-4"})}),m.jsx("div",{className:"flex-1 min-w-0",children:m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h4",{className:"font-medium text-sm mb-1",children:n.title}),m.jsx("p",{className:`text-xs leading-relaxed ${e==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:n.description}),m.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[m.jsx(f_,{className:`w-3 h-3 ${e==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`}),m.jsx("span",{className:`text-xs ${e==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:n.time})]})]}),n.unread&&m.jsx(de.div,{className:"w-2 h-2 bg-secondary-dark rounded-full ml-2 mt-1",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0}})]})})]}),m.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:m.jsx("button",{className:`p-1 rounded transition-colors ${e==="dark"?"hover:bg-surface-secondary-dark text-text-secondary-dark hover:text-text-dark":"hover:bg-gray-100 text-text-secondary-light hover:text-text-light"}`,onClick:o=>{o.stopPropagation(),i()},children:m.jsx(Ua,{className:"w-3 h-3"})})})]},n.id)},GT=({sidebarOpen:n,setSidebarOpen:e,theme:t,toggleTheme:r,userDropdownOpen:i,setUserDropdownOpen:s,notifications:o,showNotifications:l,setShowNotifications:d,markAsRead:f,removeNotification:p,getColorClasses:y})=>{var M;const x=Fo(),v=o.filter(_=>_.unread).length,[b,T]=V.useState(null);return V.useEffect(()=>{const _=localStorage.getItem("user");if(_)try{T(JSON.parse(_))}catch(N){console.error("Failed to parse user from localStorage",N)}},[]),m.jsx("header",{className:`${t==="dark"?"bg-surface-dark/80 border-b border-surface-secondary-dark/30 shadow-dark-card":"bg-surface-light/80 border-b border-gray-200"} backdrop-blur-xl sticky top-0 z-40`,children:m.jsxs("div",{className:"flex items-center justify-between px-4 py-4",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[!n&&m.jsx(de.button,{onClick:()=>e(!0),className:`p-2 rounded-lg transition-all duration-200 ${t==="dark"?"hover:bg-surface-secondary-dark/50 text-text-secondary-dark hover:text-text-dark":"hover:bg-gray-100 text-text-secondary-light hover:text-text-light"}`,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Toggle Sidebar",children:m.jsx(dT,{className:"w-5 h-5"})}),!n&&m.jsxs(de.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center space-x-3",children:[m.jsx("div",{className:`w-8 h-8 bg-gradient-to-br from-secondary-dark to-accent-dark rounded-lg flex items-center justify-center ${t==="dark"?"shadow-glow":"shadow-lg"}`,children:m.jsx("span",{className:"text-white font-bold text-sm",children:"BC"})}),m.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-secondary-dark to-accent-dark bg-clip-text text-transparent hidden sm:block",style:{WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"BCBUZZ"})]}),m.jsxs("div",{className:"hidden sm:block",children:[m.jsxs("h1",{className:"text-xl lg:text-2xl font-bold",children:["Welcome back, ",((M=b==null?void 0:b.fullName)==null?void 0:M.split(" ")[0])||"User"]}),m.jsx("p",{className:`text-sm ${t==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:"Here's an overview of your security audits and account"})]})]}),m.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-4",children:[m.jsx(de.button,{onClick:r,className:`p-2 rounded-lg transition-all duration-200 ${t==="dark"?"hover:bg-surface-secondary-dark/50 text-text-secondary-dark hover:text-text-dark":"hover:bg-gray-100 text-text-secondary-light hover:text-text-light"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:t==="dark"?m.jsx(jp,{className:"w-5 h-5 text-yellow-400"}):m.jsx(Bp,{className:"w-5 h-5 text-indigo-600"})}),m.jsxs("div",{className:"relative hidden md:block",children:[m.jsx("input",{type:"text",placeholder:"Search...",className:`pl-10 pr-4 py-2 rounded-lg border transition-all duration-200 ${t==="dark"?"bg-surface-secondary-dark/50 border-surface-secondary-dark text-text-dark placeholder:text-text-secondary-dark":"bg-gray-50 border-gray-200 text-text-light placeholder:text-text-secondary-light"} focus:outline-none focus:ring-2 focus:ring-secondary-dark/20`}),m.jsx(yu,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${t==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`})]}),m.jsxs("div",{className:"relative",children:[m.jsxs(de.button,{onClick:()=>d(!l),className:`relative p-2 rounded-lg transition-all duration-200 ${t==="dark"?"hover:bg-surface-secondary-dark/50 text-text-secondary-dark hover:text-text-dark":"hover:bg-gray-100 text-text-secondary-light hover:text-text-light"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[m.jsx(up,{className:"w-5 h-5"}),v>0&&m.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-error-dark rounded-full animate-pulse"})]}),l&&m.jsxs(de.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`absolute right-0 top-full mt-2 w-80 max-h-96 overflow-y-auto z-50 rounded-xl border backdrop-blur-xl ${t==="dark"?"bg-surface-dark/95 border-surface-secondary-dark/30 shadow-dark-card":"bg-white border-gray-200 shadow-lg"}`,onClick:_=>_.stopPropagation(),children:[m.jsx("div",{className:`p-4 border-b ${t==="dark"?"border-surface-secondary-dark/30":"border-gray-200"}`,children:m.jsx("h3",{className:"text-sm font-medium",children:"Notifications"})}),m.jsx("div",{className:"divide-y divide-surface-secondary-dark/20",children:o.map(_=>m.jsx(WT,{notification:_,theme:t,getColorClasses:y,onMarkRead:()=>f(_.id),onRemove:()=>p(_.id)},_.id))}),m.jsx("button",{onClick:()=>{o.forEach(_=>f(_.id))},className:`w-full text-center py-2 text-xs ${t==="dark"?"text-secondary-dark hover:bg-secondary-dark/10":"text-blue-600 hover:bg-blue-50"}`,children:"Mark all as read"})]})]}),!n&&m.jsxs("div",{className:"relative",children:[m.jsxs(de.button,{onClick:()=>s(!i),className:`flex items-center space-x-3 p-2 rounded-lg transition-all duration-200 ${t==="dark"?"hover:bg-surface-secondary-dark/50":"hover:bg-gray-100"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[m.jsx("div",{className:`w-8 h-8 bg-gradient-to-br from-secondary-dark to-accent-dark rounded-full flex items-center justify-center ${t==="dark"?"shadow-glow":"shadow-lg"}`,children:m.jsx(Ol,{className:"w-4 h-4 text-white"})}),m.jsxs("div",{className:"text-left hidden lg:block",children:[m.jsx("p",{className:"font-medium text-sm",children:(b==null?void 0:b.fullName)||"User"}),m.jsx("p",{className:`text-xs ${t==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:(b==null?void 0:b.email)||"user@example.com"})]}),m.jsx(G0,{className:`w-4 h-4 transition-transform duration-200 hidden lg:block ${i?"rotate-180":""}`})]}),m.jsx(ca,{children:i&&m.jsxs(de.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:`absolute right-0 top-full mt-2 w-64 z-50 rounded-xl backdrop-blur-xl border ${t==="dark"?"bg-surface-dark/95 border-surface-secondary-dark/30 shadow-dark-elevated":"bg-white border-gray-200 shadow-lg"}`,onClick:_=>_.stopPropagation(),children:[m.jsx("div",{className:`p-4 border-b ${t==="dark"?"border-surface-secondary-dark/30":"border-gray-200"}`,children:m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:`w-12 h-12 bg-gradient-to-br from-secondary-dark to-accent-dark rounded-full flex items-center justify-center ${t==="dark"?"shadow-glow":"shadow-lg"}`,children:m.jsx(Ol,{className:"w-6 h-6 text-white"})}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:(b==null?void 0:b.fullName)||"User"}),m.jsx("p",{className:`text-sm ${t==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:(b==null?void 0:b.email)||"user@example.com"})]})]})}),m.jsxs("div",{className:"p-2",children:[m.jsxs("button",{onClick:()=>{x("/settings")},className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-all duration-200 text-left ${t==="dark"?"hover:bg-surface-secondary-dark/50":"hover:bg-gray-50"}`,children:[m.jsx(iu,{className:"w-4 h-4"}),m.jsx("span",{className:"text-sm",children:"Account Settings"})]}),m.jsxs("button",{onClick:()=>{x("/help")},className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-all duration-200 text-left ${t==="dark"?"hover:bg-surface-secondary-dark/50":"hover:bg-gray-50"}`,children:[m.jsx(rh,{className:"w-4 h-4"}),m.jsx("span",{className:"text-sm",children:"Help & Support"})]})]}),m.jsx("div",{className:`p-2 border-t ${t==="dark"?"border-surface-secondary-dark/30":"border-gray-200"}`,children:m.jsxs("button",{onClick:()=>{localStorage.removeItem("token"),x("/")},className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-all duration-200 text-left ${t==="dark"?"hover:bg-error-dark/20 text-error-dark":"hover:bg-red-50 text-red-600"}`,children:[m.jsx(w0,{className:"w-4 h-4"}),m.jsx("span",{className:"text-sm",children:"Logout"})]})})]})})]})]})]})})},ZU=({label:n,value:e,icon:t,color:r,trend:i,description:s,index:o,theme:l,getColorClasses:d,onClick:f})=>m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.1},onClick:f,className:`p-4 lg:p-6 rounded-2xl border transition-all duration-300 hover:shadow-lg group cursor-pointer backdrop-blur-sm ${l==="dark"?"bg-gradient-to-br from-surface-dark/80 to-surface-secondary-dark/50 border-surface-secondary-dark/30 hover:border-secondary-dark/50 shadow-dark-card hover:shadow-dark-elevated":"bg-surface-light/80 border-gray-200 hover:border-blue-200 hover:shadow-blue-100/50"}`,whileHover:{scale:1.02,y:-2},children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:`text-sm mb-1 ${l==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:n}),m.jsx("p",{className:"text-xl lg:text-2xl font-bold mb-1",children:e}),m.jsx("div",{className:"flex items-center space-x-2",children:i&&m.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${d(r,"bg")} ${d(r,"text")}`,children:i})})]}),m.jsx("div",{className:`p-3 rounded-xl transition-all duration-300 group-hover:scale-110 ${d(r,"bg")} ${d(r,"text")}`,children:m.jsx(t,{className:"w-5 h-5 lg:w-6 lg:h-6"})})]}),m.jsx("p",{className:`text-xs mt-3 ${l==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:s})]}),KU=({audit:n,onClick:e,theme:t,getColorClasses:r})=>m.jsxs(de.div,{onClick:e,className:`p-4 rounded-xl border transition-all duration-300 cursor-pointer group backdrop-blur-sm ${t==="dark"?"border-surface-secondary-dark/30 hover:bg-surface-secondary-dark/30 hover:border-secondary-dark/50 shadow-dark-card":"border-gray-200 hover:bg-gray-50 hover:border-blue-200"}`,whileHover:{scale:1.01},children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:`p-2 rounded-lg ${n.auditType==="network"?r("info","bg")+" "+r("info","text"):n.auditType==="web"?r("success","bg")+" "+r("success","text"):r("secondary","bg")+" "+r("secondary","text")}`,children:n.auditType==="network"?m.jsx(Kr,{className:"w-4 h-4"}):n.auditType==="web"?m.jsx(ph,{className:"w-4 h-4"}):m.jsx(Kr,{className:"w-4 h-4"})}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium",children:n.name}),m.jsx("p",{className:`text-sm ${t==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:n.date})]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${n.status==="Completed"?r("success","bg")+" "+r("success","text"):n.status==="In Progress"?r("info","bg")+" "+r("info","text"):r("warning","bg")+" "+r("warning","text")}`,children:n.status}),m.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${n.priority==="high"?r("error","bg")+" "+r("error","text"):n.priority==="medium"?r("warning","bg")+" "+r("warning","text"):r("success","bg")+" "+r("success","text")}`,children:n.priority})]})]}),n.progress>0&&n.progress<100&&m.jsx("div",{className:`w-full rounded-full h-2 ${t==="dark"?"bg-surface-secondary-dark":"bg-gray-200"}`,children:m.jsx("div",{className:"bg-gradient-to-r from-secondary-dark to-accent-dark h-2 rounded-full transition-all duration-500",style:{width:`${n.progress}%`}})})]}),JU=({doc:n,onPreview:e,onDownload:t,theme:r,getColorClasses:i})=>{const[s,o]=V.useState(!1),l=V.useRef(null);V.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return s&&document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[s]);const d=f=>{o(!1),alert(`${f} triggered for ${n.name}`)};return m.jsxs(de.div,{className:`p-3 rounded-lg border transition-all duration-200 group backdrop-blur-sm ${r==="dark"?"border-surface-secondary-dark/30 hover:bg-surface-secondary-dark/30 shadow-dark-card":"border-gray-200 hover:bg-gray-50"}`,whileHover:{scale:1.01},children:[m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[m.jsx("div",{className:`p-2 rounded-lg ${i("info","bg")} ${i("info","text")}`,children:m.jsx(dp,{className:"w-4 h-4"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h4",{className:"font-medium text-sm truncate",children:n.name}),m.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[m.jsx("span",{className:`text-xs ${r==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:n.size}),m.jsx("span",{className:`text-xs ${r==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:""}),m.jsx("span",{className:`text-xs ${r==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:n.type})]}),m.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[m.jsx(zp,{className:`w-3 h-3 ${r==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`}),m.jsxs("span",{className:`text-xs ${r==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:[n.uploadDate," at ",n.uploadTime]})]})]})]}),m.jsxs("div",{className:"flex items-center space-x-1 relative",children:[m.jsx(de.button,{onClick:f=>{f.stopPropagation(),e()},className:`p-1.5 rounded transition-colors ${r==="dark"?"hover:bg-surface-secondary-dark text-text-secondary-dark hover:text-text-dark":"hover:bg-gray-100 text-text-secondary-light hover:text-text-light"}`,whileHover:{scale:1.1},whileTap:{scale:.9},title:"Preview",children:m.jsx(uh,{className:"w-3 h-3"})}),m.jsx(de.button,{onClick:f=>{f.stopPropagation(),t()},className:`p-1.5 rounded transition-colors ${r==="dark"?"hover:bg-surface-secondary-dark text-text-secondary-dark hover:text-text-dark":"hover:bg-gray-100 text-text-secondary-light hover:text-text-light"}`,whileHover:{scale:1.1},whileTap:{scale:.9},title:"Download",children:m.jsx(lT,{className:"w-3 h-3"})}),m.jsxs("div",{className:"relative",ref:l,children:[m.jsx(de.button,{onClick:f=>{f.stopPropagation(),o(!s)},className:`p-1.5 rounded transition-colors ${r==="dark"?"hover:bg-surface-secondary-dark text-text-secondary-dark hover:text-text-dark":"hover:bg-gray-100 text-text-secondary-light hover:text-text-light"} ${s?r==="dark"?"bg-surface-secondary-dark text-text-dark":"bg-gray-100 text-text-light":""}`,whileHover:{scale:1.1},whileTap:{scale:.9},title:"More options",children:m.jsx(cT,{className:"w-3 h-3"})}),m.jsx(ca,{children:s&&m.jsx(de.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:`absolute right-0 top-full mt-2 w-36 z-50 rounded-lg border shadow-xl backdrop-blur-xl ${r==="dark"?"bg-surface-dark/95 border-surface-secondary-dark/30":"bg-white border-gray-100"}`,children:m.jsxs("div",{className:"p-1",children:[m.jsxs("button",{onClick:()=>d("Rename"),className:`w-full flex items-center space-x-2 px-3 py-2 rounded text-xs transition-colors ${r==="dark"?"hover:bg-surface-secondary-dark/50":"hover:bg-gray-50"}`,children:[m.jsx(RD,{className:"w-3 h-3"}),m.jsx("span",{children:"Rename"})]}),m.jsxs("button",{onClick:()=>d("Archive"),className:`w-full flex items-center space-x-2 px-3 py-2 rounded text-xs transition-colors ${r==="dark"?"hover:bg-surface-secondary-dark/50":"hover:bg-gray-50"}`,children:[m.jsx(sT,{className:"w-3 h-3"}),m.jsx("span",{children:"Archive"})]}),m.jsx("div",{className:`my-1 border-t ${r==="dark"?"border-surface-secondary-dark/20":"border-gray-100"}`}),m.jsxs("button",{onClick:()=>d("Delete"),className:`w-full flex items-center space-x-2 px-3 py-2 rounded text-xs transition-colors text-red-500 ${r==="dark"?"hover:bg-red-500/10":"hover:bg-red-50"}`,children:[m.jsx(p_,{className:"w-3 h-3"}),m.jsx("span",{children:"Delete"})]})]})})})]})]})]}),n.status==="processing"&&m.jsxs("div",{className:"mt-2",children:[m.jsx("div",{className:`w-full rounded-full h-1 ${r==="dark"?"bg-surface-secondary-dark":"bg-gray-200"}`,children:m.jsx("div",{className:"bg-gradient-to-r from-secondary-dark to-accent-dark h-1 rounded-full w-3/4 animate-pulse"})}),m.jsx("span",{className:`text-xs mt-1 ${i("warning","text")}`,children:"Processing..."})]})]})},QU=({show:n,onClose:e,theme:t})=>{const[r,i]=D0.useState({auditType:"",targetUrl:"",description:"",methodology:"",contactEmail:"",companyName:"",estimatedDuration:""}),s=(p,y)=>{i(x=>({...x,[p]:y}))},o=p=>{p.preventDefault(),console.log("New audit request:",r),e(),i({auditType:"",targetUrl:"",description:"",methodology:"",contactEmail:"",companyName:"",estimatedDuration:""})},l=[{value:"web",label:"Web Application",icon:m.jsx(ph,{className:"w-5 h-5"})},{value:"network",label:"Network Security",icon:m.jsx(Kr,{className:"w-5 h-5"})},{value:"cloud",label:"Cloud Infrastructure",icon:m.jsx(e5,{className:"w-5 h-5"})},{value:"mobile",label:"Mobile Application",icon:m.jsx(t5,{className:"w-5 h-5"})}],d=[{value:"owasp",label:"OWASP Testing Guide"},{value:"nist",label:"NIST Framework"},{value:"pci",label:"PCI DSS"},{value:"iso27001",label:"ISO 27001"}],f=[{value:"1-2 weeks",label:"1-2 Weeks"},{value:"3-4 weeks",label:"3-4 Weeks"},{value:"1-2 months",label:"1-2 Months"},{value:"3+ months",label:"3+ Months"}];return m.jsx(ca,{children:n&&m.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gradient-to-br from-slate-900/80 via-indigo-900/60 to-purple-900/80 z-50 flex items-center justify-center p-4 backdrop-blur-md",onClick:e,children:m.jsxs(de.form,{onSubmit:o,initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",damping:25,stiffness:200},className:`w-full max-w-3xl max-h-[90vh] overflow-y-auto rounded-3xl shadow-2xl backdrop-blur-xl border-2 ${t==="dark"?"bg-gradient-to-br from-slate-800/95 via-slate-900/95 to-indigo-900/95 border-indigo-500/30":"bg-gradient-to-br from-white/95 via-blue-50/95 to-indigo-50/95 border-indigo-200/50"}`,onClick:p=>p.stopPropagation(),children:[m.jsx("div",{className:`p-6 border-b backdrop-blur-sm ${t==="dark"?"border-indigo-500/20 bg-gradient-to-r from-slate-800/50 to-indigo-800/50":"border-indigo-200/30 bg-gradient-to-r from-blue-50/50 to-indigo-50/50"}`,children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx(de.div,{className:"p-3 rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 text-white shadow-xl",whileHover:{scale:1.05,rotate:360},transition:{scale:{type:"spring",stiffness:600,damping:15},rotate:{duration:.5}},children:m.jsx(fT,{className:"w-6 h-6"})}),m.jsxs("div",{children:[m.jsx("h2",{className:`text-2xl font-bold bg-gradient-to-r ${t==="dark"?"from-white via-blue-100 to-indigo-200":"from-slate-800 via-indigo-700 to-purple-700"} bg-clip-text text-transparent`,children:"Request New Audit"}),m.jsx("p",{className:`mt-1 ${t==="dark"?"text-slate-300":"text-slate-600"}`,children:"Fill out the form to request a new security audit"})]})]}),m.jsx(de.button,{type:"button",onClick:e,className:`p-2 rounded-xl transition-all duration-300 ${t==="dark"?"hover:bg-red-500/20 text-slate-300 hover:text-red-300 border border-transparent hover:border-red-500/30":"hover:bg-red-50 text-slate-600 hover:text-red-600 border border-transparent hover:border-red-200"}`,whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},children:m.jsx(Ua,{className:"w-6 h-6"})})]})}),m.jsxs("div",{className:"p-6 space-y-8",children:[m.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:m.jsx(Jf,{options:l,value:r.auditType,onChange:p=>s("auditType",p),placeholder:"Select an audit type",label:"Audit Type",required:!0})}),m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[m.jsx("label",{className:`block text-sm font-semibold mb-3 ${t==="dark"?"text-slate-200":"text-slate-700"}`,children:"Target URL/IP"}),m.jsx("input",{type:"text",value:r.targetUrl,onChange:p=>s("targetUrl",p.target.value),placeholder:"https://example.com  or 192.168.1.1",className:`w-full px-5 py-4 rounded-2xl border-2 transition-all duration-300 ${t==="dark"?"bg-slate-700/50 border-slate-600/50 text-white placeholder:text-slate-400 focus:border-indigo-400 focus:bg-slate-700/70":"bg-white/70 border-indigo-200/50 text-slate-800 placeholder:text-slate-500 focus:border-indigo-400 focus:bg-white"} focus:outline-none focus:ring-4 focus:ring-indigo-500/20 focus:shadow-lg backdrop-blur-sm`,required:!0})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs(de.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:[m.jsx("label",{className:`block text-sm font-semibold mb-3 ${t==="dark"?"text-slate-200":"text-slate-700"}`,children:"Company Name"}),m.jsx("input",{type:"text",value:r.companyName,onChange:p=>s("companyName",p.target.value),placeholder:"Your company name",className:`w-full px-5 py-4 rounded-2xl border-2 transition-all duration-300 ${t==="dark"?"bg-slate-700/50 border-slate-600/50 text-white placeholder:text-slate-400 focus:border-indigo-400 focus:bg-slate-700/70":"bg-white/70 border-indigo-200/50 text-slate-800 placeholder:text-slate-500 focus:border-indigo-400 focus:bg-white"} focus:outline-none focus:ring-4 focus:ring-indigo-500/20 focus:shadow-lg backdrop-blur-sm`,required:!0})]}),m.jsxs(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:[m.jsx("label",{className:`block text-sm font-semibold mb-3 ${t==="dark"?"text-slate-200":"text-slate-700"}`,children:"Contact Email"}),m.jsx("input",{type:"email",value:r.contactEmail,onChange:p=>s("contactEmail",p.target.value),placeholder:"contact@company.com",className:`w-full px-5 py-4 rounded-2xl border-2 transition-all duration-300 ${t==="dark"?"bg-slate-700/50 border-slate-600/50 text-white placeholder:text-slate-400 focus:border-indigo-400 focus:bg-slate-700/70":"bg-white/70 border-indigo-200/50 text-slate-800 placeholder:text-slate-500 focus:border-indigo-400 focus:bg-white"} focus:outline-none focus:ring-4 focus:ring-indigo-500/20 focus:shadow-lg backdrop-blur-sm`,required:!0})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:m.jsx(Jf,{options:d,value:r.methodology,onChange:p=>s("methodology",p),placeholder:"Select methodology",label:"Preferred Methodology"})}),m.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:m.jsx(Jf,{options:f,value:r.estimatedDuration,onChange:p=>s("estimatedDuration",p),placeholder:"Select duration",label:"Estimated Duration"})})]}),m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[m.jsx("label",{className:`block text-sm font-semibold mb-3 ${t==="dark"?"text-slate-200":"text-slate-700"}`,children:"Description & Requirements"}),m.jsx("textarea",{value:r.description,onChange:p=>s("description",p.target.value),placeholder:"Describe your audit requirements, scope, and any specific concerns...",rows:4,className:`w-full px-5 py-4 rounded-2xl border-2 transition-all duration-300 resize-none ${t==="dark"?"bg-slate-700/50 border-slate-600/50 text-white placeholder:text-slate-400 focus:border-indigo-400 focus:bg-slate-700/70":"bg-white/70 border-indigo-200/50 text-slate-800 placeholder:text-slate-500 focus:border-indigo-400 focus:bg-white"} focus:outline-none focus:ring-4 focus:ring-indigo-500/20 focus:shadow-lg backdrop-blur-sm`,required:!0})]}),m.jsxs(de.div,{className:"flex items-center justify-end space-x-4 pt-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[m.jsx(de.button,{type:"button",onClick:e,className:`px-8 py-3 rounded-2xl transition-all duration-300 font-medium ${t==="dark"?"bg-slate-700/50 hover:bg-slate-600/60 text-slate-300 hover:text-white border border-slate-600/50 hover:border-slate-500":"bg-white/70 hover:bg-gray-50 text-slate-700 hover:text-slate-800 border border-slate-200 hover:border-slate-300"} backdrop-blur-sm hover:shadow-lg`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Cancel"}),m.jsxs(de.button,{type:"submit",className:"px-8 py-3 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white rounded-2xl font-medium shadow-xl hover:shadow-2xl transition-all duration-300 flex items-center space-x-2 group backdrop-blur-sm border border-white/20",whileHover:{scale:1.05,boxShadow:"0 20px 40px rgba(99, 102, 241, 0.4)"},whileTap:{scale:.95},transition:{type:"spring",stiffness:200},children:[m.jsx(de.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},children:m.jsx(VD,{className:"w-5 h-5"})}),m.jsx("span",{children:"Submit Request"}),m.jsx(de.div,{className:"w-0 h-0.5 bg-white/50 group-hover:w-4 transition-all duration-300"})]})]})]})]})})})},e5=({className:n})=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:n,children:m.jsx("path",{d:"M11.75 21a6.751 6.751 0 0 0-6.742-6.75H3v-1.5A2.25 2.25 0 0 1 5.25 10.5h13.5A2.25 2.25 0 0 1 21 12.75v1.5h-1.995A6.75 6.75 0 0 0 11.75 21z"})}),t5=({className:n})=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:n,children:[m.jsx("path",{d:"M14 13a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H10a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2zm5 0a2 2 0 0 0-2-2h-1v1.5a1.5 1.5 0 1 0 3 0V11h-1z"}),m.jsx("path",{d:"M10 3h4a2 2 0 0 1 2 2v1a1 1 0 0 0 1 1h2a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7a1 1 0 0 0-1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h1V5a2 2 0 0 1 2-2z"})]});/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ey="160",n5={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},r5={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},XT=0,Kv=1,$T=2,i5=3,qT=0,ty=1,Qf=2,sa=3,Do=0,Ri=1,Ra=2,s5=2,Lo=0,hu=1,E0=2,Jv=3,Qv=4,YT=5,Ll=100,ZT=101,KT=102,e1=103,t1=104,JT=200,QT=201,eA=202,tA=203,T0=204,A0=205,nA=206,rA=207,iA=208,sA=209,aA=210,oA=211,lA=212,cA=213,uA=214,dA=0,hA=1,fA=2,pp=3,pA=4,mA=5,gA=6,yA=7,Wp=0,xA=1,vA=2,La=0,_A=1,wA=2,SA=3,x_=4,bA=5,MA=6,n1="attached",EA="detached",ny=300,Uo=301,Hl=302,mp=303,gp=304,Eh=306,yp=1e3,di=1001,xp=1002,or=1003,C0=1004,a5=1004,ep=1005,o5=1005,lr=1006,v_=1007,l5=1007,Wl=1008,c5=1008,Ia=1009,TA=1010,AA=1011,ry=1012,__=1013,No=1014,oa=1015,mh=1016,w_=1017,S_=1018,Fl=1020,CA=1021,Ni=1023,NA=1024,kA=1025,zl=1026,vu=1027,RA=1028,b_=1029,PA=1030,M_=1031,E_=1033,i0=33776,s0=33777,a0=33778,o0=33779,r1=35840,i1=35841,s1=35842,a1=35843,T_=36196,o1=37492,l1=37496,c1=37808,u1=37809,d1=37810,h1=37811,f1=37812,p1=37813,m1=37814,g1=37815,y1=37816,x1=37817,v1=37818,_1=37819,w1=37820,S1=37821,l0=36492,b1=36494,M1=36495,LA=36283,E1=36284,T1=36285,A1=36286,IA=2200,DA=2201,UA=2202,vp=2300,_p=2301,c0=2302,au=2400,ou=2401,wp=2402,iy=2500,A_=2501,u5=0,d5=1,h5=2,C_=3e3,Bl=3001,OA=3200,FA=3201,Yl=0,zA=1,hs="",kr="srgb",Oa="srgb-linear",sy="display-p3",Gp="display-p3-linear",Sp="linear",Rn="srgb",bp="rec709",Mp="p3",f5=0,eu=7680,p5=7681,m5=7682,g5=7683,y5=34055,x5=34056,v5=5386,_5=512,w5=513,S5=514,b5=515,M5=516,E5=517,T5=518,C1=519,BA=512,jA=513,VA=514,N_=515,HA=516,WA=517,GA=518,XA=519,Ep=35044,A5=35048,C5=35040,N5=35045,k5=35049,R5=35041,P5=35046,L5=35050,I5=35042,D5="100",N1="300 es",N0=1035,la=2e3,gh=2001;class zo{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const ai=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let bb=1234567;const fu=Math.PI/180,yh=180/Math.PI;function fs(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ai[n&255]+ai[n>>8&255]+ai[n>>16&255]+ai[n>>24&255]+"-"+ai[e&255]+ai[e>>8&255]+"-"+ai[e>>16&15|64]+ai[e>>24&255]+"-"+ai[t&63|128]+ai[t>>8&255]+"-"+ai[t>>16&255]+ai[t>>24&255]+ai[r&255]+ai[r>>8&255]+ai[r>>16&255]+ai[r>>24&255]).toLowerCase()}function Qn(n,e,t){return Math.max(e,Math.min(t,n))}function k_(n,e){return(n%e+e)%e}function U5(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function O5(n,e,t){return n!==e?(t-n)/(e-n):0}function tp(n,e,t){return(1-t)*n+t*e}function F5(n,e,t,r){return tp(n,e,1-Math.exp(-t*r))}function z5(n,e=1){return e-Math.abs(k_(n,e*2)-e)}function B5(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function j5(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function V5(n,e){return n+Math.floor(Math.random()*(e-n+1))}function H5(n,e){return n+Math.random()*(e-n)}function W5(n){return n*(.5-Math.random())}function G5(n){n!==void 0&&(bb=n);let e=bb+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function X5(n){return n*fu}function $5(n){return n*yh}function k1(n){return(n&n-1)===0&&n!==0}function q5(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function k0(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Y5(n,e,t,r,i){const s=Math.cos,o=Math.sin,l=s(t/2),d=o(t/2),f=s((e+r)/2),p=o((e+r)/2),y=s((e-r)/2),x=o((e-r)/2),v=s((r-e)/2),b=o((r-e)/2);switch(i){case"XYX":n.set(l*p,d*y,d*x,l*f);break;case"YZY":n.set(d*x,l*p,d*y,l*f);break;case"ZXZ":n.set(d*y,d*x,l*p,l*f);break;case"XZX":n.set(l*p,d*b,d*v,l*f);break;case"YXY":n.set(d*v,l*p,d*b,l*f);break;case"ZYZ":n.set(d*b,d*v,l*p,l*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function qi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Zt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Z5={DEG2RAD:fu,RAD2DEG:yh,generateUUID:fs,clamp:Qn,euclideanModulo:k_,mapLinear:U5,inverseLerp:O5,lerp:tp,damp:F5,pingpong:z5,smoothstep:B5,smootherstep:j5,randInt:V5,randFloat:H5,randFloatSpread:W5,seededRandom:G5,degToRad:X5,radToDeg:$5,isPowerOfTwo:k1,ceilPowerOfTwo:q5,floorPowerOfTwo:k0,setQuaternionFromProperEuler:Y5,normalize:Zt,denormalize:qi};class Re{constructor(e=0,t=0){Re.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Qn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Kt{constructor(e,t,r,i,s,o,l,d,f){Kt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,l,d,f)}set(e,t,r,i,s,o,l,d,f){const p=this.elements;return p[0]=e,p[1]=i,p[2]=l,p[3]=t,p[4]=s,p[5]=d,p[6]=r,p[7]=o,p[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],l=r[3],d=r[6],f=r[1],p=r[4],y=r[7],x=r[2],v=r[5],b=r[8],T=i[0],M=i[3],_=i[6],N=i[1],A=i[4],R=i[7],D=i[2],U=i[5],z=i[8];return s[0]=o*T+l*N+d*D,s[3]=o*M+l*A+d*U,s[6]=o*_+l*R+d*z,s[1]=f*T+p*N+y*D,s[4]=f*M+p*A+y*U,s[7]=f*_+p*R+y*z,s[2]=x*T+v*N+b*D,s[5]=x*M+v*A+b*U,s[8]=x*_+v*R+b*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],l=e[5],d=e[6],f=e[7],p=e[8];return t*o*p-t*l*f-r*s*p+r*l*d+i*s*f-i*o*d}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],l=e[5],d=e[6],f=e[7],p=e[8],y=p*o-l*f,x=l*d-p*s,v=f*s-o*d,b=t*y+r*x+i*v;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const T=1/b;return e[0]=y*T,e[1]=(i*f-p*r)*T,e[2]=(l*r-i*o)*T,e[3]=x*T,e[4]=(p*t-i*d)*T,e[5]=(i*s-l*t)*T,e[6]=v*T,e[7]=(r*d-f*t)*T,e[8]=(o*t-r*s)*T,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,l){const d=Math.cos(s),f=Math.sin(s);return this.set(r*d,r*f,-r*(d*o+f*l)+o+e,-i*f,i*d,-i*(-f*o+d*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(Cx.makeScale(e,t)),this}rotate(e){return this.premultiply(Cx.makeRotation(-e)),this}translate(e,t){return this.premultiply(Cx.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Cx=new Kt;function $A(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const K5={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ih(n,e){return new K5[n](e)}function Tp(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function qA(){const n=Tp("canvas");return n.style.display="block",n}const Mb={};function np(n){n in Mb||(Mb[n]=!0,console.warn(n))}const Eb=new Kt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Tb=new Kt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),tg={[Oa]:{transfer:Sp,primaries:bp,toReference:n=>n,fromReference:n=>n},[kr]:{transfer:Rn,primaries:bp,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Gp]:{transfer:Sp,primaries:Mp,toReference:n=>n.applyMatrix3(Tb),fromReference:n=>n.applyMatrix3(Eb)},[sy]:{transfer:Rn,primaries:Mp,toReference:n=>n.convertSRGBToLinear().applyMatrix3(Tb),fromReference:n=>n.applyMatrix3(Eb).convertLinearToSRGB()}},J5=new Set([Oa,Gp]),xn={enabled:!0,_workingColorSpace:Oa,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!J5.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=tg[e].toReference,i=tg[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return tg[n].primaries},getTransfer:function(n){return n===hs?Sp:tg[n].transfer}};function dh(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Nx(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Cd;class R_{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Cd===void 0&&(Cd=Tp("canvas")),Cd.width=e.width,Cd.height=e.height;const r=Cd.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Cd}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Tp("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=dh(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(dh(t[r]/255)*255):t[r]=dh(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Q5=0;class lu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Q5++}),this.uuid=fs(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,l=i.length;o<l;o++)i[o].isDataTexture?s.push(kx(i[o].image)):s.push(kx(i[o]))}else s=kx(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function kx(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?R_.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let eO=0;class dr extends zo{constructor(e=dr.DEFAULT_IMAGE,t=dr.DEFAULT_MAPPING,r=di,i=di,s=lr,o=Wl,l=Ni,d=Ia,f=dr.DEFAULT_ANISOTROPY,p=hs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:eO++}),this.uuid=fs(),this.name="",this.source=new lu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=d,this.offset=new Re(0,0),this.repeat=new Re(1,1),this.center=new Re(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Kt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof p=="string"?this.colorSpace=p:(np("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=p===Bl?kr:hs),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ny)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case yp:e.x=e.x-Math.floor(e.x);break;case di:e.x=e.x<0?0:1;break;case xp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case yp:e.y=e.y-Math.floor(e.y);break;case di:e.y=e.y<0?0:1;break;case xp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return np("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===kr?Bl:C_}set encoding(e){np("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Bl?kr:hs}}dr.DEFAULT_IMAGE=null;dr.DEFAULT_MAPPING=ny;dr.DEFAULT_ANISOTROPY=1;class vn{constructor(e=0,t=0,r=0,i=1){vn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const d=e.elements,f=d[0],p=d[4],y=d[8],x=d[1],v=d[5],b=d[9],T=d[2],M=d[6],_=d[10];if(Math.abs(p-x)<.01&&Math.abs(y-T)<.01&&Math.abs(b-M)<.01){if(Math.abs(p+x)<.1&&Math.abs(y+T)<.1&&Math.abs(b+M)<.1&&Math.abs(f+v+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const A=(f+1)/2,R=(v+1)/2,D=(_+1)/2,U=(p+x)/4,z=(y+T)/4,W=(b+M)/4;return A>R&&A>D?A<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(A),i=U/r,s=z/r):R>D?R<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(R),r=U/i,s=W/i):D<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(D),r=z/s,i=W/s),this.set(r,i,s,t),this}let N=Math.sqrt((M-b)*(M-b)+(y-T)*(y-T)+(x-p)*(x-p));return Math.abs(N)<.001&&(N=1),this.x=(M-b)/N,this.y=(y-T)/N,this.z=(x-p)/N,this.w=Math.acos((f+v+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class YA extends zo{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new vn(0,0,e,t),this.scissorTest=!1,this.viewport=new vn(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(np("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Bl?kr:hs),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:lr,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new dr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new lu(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ua extends YA{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class ay extends dr{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=or,this.minFilter=or,this.wrapR=di,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class tO extends ua{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new ay(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class P_ extends dr{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=or,this.minFilter=or,this.wrapR=di,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class nO extends ua{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new P_(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class rO extends ua{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Ki{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,l){let d=r[i+0],f=r[i+1],p=r[i+2],y=r[i+3];const x=s[o+0],v=s[o+1],b=s[o+2],T=s[o+3];if(l===0){e[t+0]=d,e[t+1]=f,e[t+2]=p,e[t+3]=y;return}if(l===1){e[t+0]=x,e[t+1]=v,e[t+2]=b,e[t+3]=T;return}if(y!==T||d!==x||f!==v||p!==b){let M=1-l;const _=d*x+f*v+p*b+y*T,N=_>=0?1:-1,A=1-_*_;if(A>Number.EPSILON){const D=Math.sqrt(A),U=Math.atan2(D,_*N);M=Math.sin(M*U)/D,l=Math.sin(l*U)/D}const R=l*N;if(d=d*M+x*R,f=f*M+v*R,p=p*M+b*R,y=y*M+T*R,M===1-l){const D=1/Math.sqrt(d*d+f*f+p*p+y*y);d*=D,f*=D,p*=D,y*=D}}e[t]=d,e[t+1]=f,e[t+2]=p,e[t+3]=y}static multiplyQuaternionsFlat(e,t,r,i,s,o){const l=r[i],d=r[i+1],f=r[i+2],p=r[i+3],y=s[o],x=s[o+1],v=s[o+2],b=s[o+3];return e[t]=l*b+p*y+d*v-f*x,e[t+1]=d*b+p*x+f*y-l*v,e[t+2]=f*b+p*v+l*x-d*y,e[t+3]=p*b-l*y-d*x-f*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,l=Math.cos,d=Math.sin,f=l(r/2),p=l(i/2),y=l(s/2),x=d(r/2),v=d(i/2),b=d(s/2);switch(o){case"XYZ":this._x=x*p*y+f*v*b,this._y=f*v*y-x*p*b,this._z=f*p*b+x*v*y,this._w=f*p*y-x*v*b;break;case"YXZ":this._x=x*p*y+f*v*b,this._y=f*v*y-x*p*b,this._z=f*p*b-x*v*y,this._w=f*p*y+x*v*b;break;case"ZXY":this._x=x*p*y-f*v*b,this._y=f*v*y+x*p*b,this._z=f*p*b+x*v*y,this._w=f*p*y-x*v*b;break;case"ZYX":this._x=x*p*y-f*v*b,this._y=f*v*y+x*p*b,this._z=f*p*b-x*v*y,this._w=f*p*y+x*v*b;break;case"YZX":this._x=x*p*y+f*v*b,this._y=f*v*y+x*p*b,this._z=f*p*b-x*v*y,this._w=f*p*y-x*v*b;break;case"XZY":this._x=x*p*y-f*v*b,this._y=f*v*y-x*p*b,this._z=f*p*b+x*v*y,this._w=f*p*y+x*v*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],l=t[5],d=t[9],f=t[2],p=t[6],y=t[10],x=r+l+y;if(x>0){const v=.5/Math.sqrt(x+1);this._w=.25/v,this._x=(p-d)*v,this._y=(s-f)*v,this._z=(o-i)*v}else if(r>l&&r>y){const v=2*Math.sqrt(1+r-l-y);this._w=(p-d)/v,this._x=.25*v,this._y=(i+o)/v,this._z=(s+f)/v}else if(l>y){const v=2*Math.sqrt(1+l-r-y);this._w=(s-f)/v,this._x=(i+o)/v,this._y=.25*v,this._z=(d+p)/v}else{const v=2*Math.sqrt(1+y-r-l);this._w=(o-i)/v,this._x=(s+f)/v,this._y=(d+p)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Qn(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,l=t._x,d=t._y,f=t._z,p=t._w;return this._x=r*p+o*l+i*f-s*d,this._y=i*p+o*d+s*l-r*f,this._z=s*p+o*f+r*d-i*l,this._w=o*p-r*l-i*d-s*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let l=o*e._w+r*e._x+i*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const d=1-l*l;if(d<=Number.EPSILON){const v=1-t;return this._w=v*o+t*this._w,this._x=v*r+t*this._x,this._y=v*i+t*this._y,this._z=v*s+t*this._z,this.normalize(),this}const f=Math.sqrt(d),p=Math.atan2(f,l),y=Math.sin((1-t)*p)/f,x=Math.sin(t*p)/f;return this._w=o*y+this._w*x,this._x=r*y+this._x*x,this._y=i*y+this._y*x,this._z=s*y+this._z*x,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class q{constructor(e=0,t=0,r=0){q.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Ab.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Ab.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,l=e.z,d=e.w,f=2*(o*i-l*r),p=2*(l*t-s*i),y=2*(s*r-o*t);return this.x=t+d*f+o*y-l*p,this.y=r+d*p+l*f-s*y,this.z=i+d*y+s*p-o*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,l=t.y,d=t.z;return this.x=i*d-s*l,this.y=s*o-r*d,this.z=r*l-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Rx.copy(this).projectOnVector(e),this.sub(Rx)}reflect(e){return this.sub(Rx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Qn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Rx=new q,Ab=new Ki;class Pi{constructor(e=new q(1/0,1/0,1/0),t=new q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(ta.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(ta.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=ta.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,l=s.count;o<l;o++)e.isMesh===!0?e.getVertexPosition(o,ta):ta.fromBufferAttribute(s,o),ta.applyMatrix4(e.matrixWorld),this.expandByPoint(ta);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),ng.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),ng.copy(r.boundingBox)),ng.applyMatrix4(e.matrixWorld),this.union(ng)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ta),ta.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(kf),rg.subVectors(this.max,kf),Nd.subVectors(e.a,kf),kd.subVectors(e.b,kf),Rd.subVectors(e.c,kf),_l.subVectors(kd,Nd),wl.subVectors(Rd,kd),jc.subVectors(Nd,Rd);let t=[0,-_l.z,_l.y,0,-wl.z,wl.y,0,-jc.z,jc.y,_l.z,0,-_l.x,wl.z,0,-wl.x,jc.z,0,-jc.x,-_l.y,_l.x,0,-wl.y,wl.x,0,-jc.y,jc.x,0];return!Px(t,Nd,kd,Rd,rg)||(t=[1,0,0,0,1,0,0,0,1],!Px(t,Nd,kd,Rd,rg))?!1:(ig.crossVectors(_l,wl),t=[ig.x,ig.y,ig.z],Px(t,Nd,kd,Rd,rg))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ta).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ta).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(_o[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_o[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_o[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_o[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_o[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_o[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_o[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_o[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_o),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _o=[new q,new q,new q,new q,new q,new q,new q,new q],ta=new q,ng=new Pi,Nd=new q,kd=new q,Rd=new q,_l=new q,wl=new q,jc=new q,kf=new q,rg=new q,ig=new q,Vc=new q;function Px(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Vc.fromArray(n,s);const l=i.x*Math.abs(Vc.x)+i.y*Math.abs(Vc.y)+i.z*Math.abs(Vc.z),d=e.dot(Vc),f=t.dot(Vc),p=r.dot(Vc);if(Math.max(-Math.max(d,f,p),Math.min(d,f,p))>l)return!1}return!0}const iO=new Pi,Rf=new q,Lx=new q;class hi{constructor(e=new q,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):iO.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Rf.subVectors(e,this.center);const t=Rf.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Rf,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Lx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Rf.copy(e.center).add(Lx)),this.expandByPoint(Rf.copy(e.center).sub(Lx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const wo=new q,Ix=new q,sg=new q,Sl=new q,Dx=new q,ag=new q,Ux=new q;class Th{constructor(e=new q,t=new q(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,wo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=wo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(wo.copy(this.origin).addScaledVector(this.direction,t),wo.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Ix.copy(e).add(t).multiplyScalar(.5),sg.copy(t).sub(e).normalize(),Sl.copy(this.origin).sub(Ix);const s=e.distanceTo(t)*.5,o=-this.direction.dot(sg),l=Sl.dot(this.direction),d=-Sl.dot(sg),f=Sl.lengthSq(),p=Math.abs(1-o*o);let y,x,v,b;if(p>0)if(y=o*d-l,x=o*l-d,b=s*p,y>=0)if(x>=-b)if(x<=b){const T=1/p;y*=T,x*=T,v=y*(y+o*x+2*l)+x*(o*y+x+2*d)+f}else x=s,y=Math.max(0,-(o*x+l)),v=-y*y+x*(x+2*d)+f;else x=-s,y=Math.max(0,-(o*x+l)),v=-y*y+x*(x+2*d)+f;else x<=-b?(y=Math.max(0,-(-o*s+l)),x=y>0?-s:Math.min(Math.max(-s,-d),s),v=-y*y+x*(x+2*d)+f):x<=b?(y=0,x=Math.min(Math.max(-s,-d),s),v=x*(x+2*d)+f):(y=Math.max(0,-(o*s+l)),x=y>0?s:Math.min(Math.max(-s,-d),s),v=-y*y+x*(x+2*d)+f);else x=o>0?-s:s,y=Math.max(0,-(o*x+l)),v=-y*y+x*(x+2*d)+f;return r&&r.copy(this.origin).addScaledVector(this.direction,y),i&&i.copy(Ix).addScaledVector(sg,x),v}intersectSphere(e,t){wo.subVectors(e.center,this.origin);const r=wo.dot(this.direction),i=wo.dot(wo)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),l=r-o,d=r+o;return d<0?null:l<0?this.at(d,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,l,d;const f=1/this.direction.x,p=1/this.direction.y,y=1/this.direction.z,x=this.origin;return f>=0?(r=(e.min.x-x.x)*f,i=(e.max.x-x.x)*f):(r=(e.max.x-x.x)*f,i=(e.min.x-x.x)*f),p>=0?(s=(e.min.y-x.y)*p,o=(e.max.y-x.y)*p):(s=(e.max.y-x.y)*p,o=(e.min.y-x.y)*p),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),y>=0?(l=(e.min.z-x.z)*y,d=(e.max.z-x.z)*y):(l=(e.max.z-x.z)*y,d=(e.min.z-x.z)*y),r>d||l>i)||((l>r||r!==r)&&(r=l),(d<i||i!==i)&&(i=d),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,wo)!==null}intersectTriangle(e,t,r,i,s){Dx.subVectors(t,e),ag.subVectors(r,e),Ux.crossVectors(Dx,ag);let o=this.direction.dot(Ux),l;if(o>0){if(i)return null;l=1}else if(o<0)l=-1,o=-o;else return null;Sl.subVectors(this.origin,e);const d=l*this.direction.dot(ag.crossVectors(Sl,ag));if(d<0)return null;const f=l*this.direction.dot(Dx.cross(Sl));if(f<0||d+f>o)return null;const p=-l*Sl.dot(Ux);return p<0?null:this.at(p/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ut{constructor(e,t,r,i,s,o,l,d,f,p,y,x,v,b,T,M){Ut.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,l,d,f,p,y,x,v,b,T,M)}set(e,t,r,i,s,o,l,d,f,p,y,x,v,b,T,M){const _=this.elements;return _[0]=e,_[4]=t,_[8]=r,_[12]=i,_[1]=s,_[5]=o,_[9]=l,_[13]=d,_[2]=f,_[6]=p,_[10]=y,_[14]=x,_[3]=v,_[7]=b,_[11]=T,_[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ut().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Pd.setFromMatrixColumn(e,0).length(),s=1/Pd.setFromMatrixColumn(e,1).length(),o=1/Pd.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),l=Math.sin(r),d=Math.cos(i),f=Math.sin(i),p=Math.cos(s),y=Math.sin(s);if(e.order==="XYZ"){const x=o*p,v=o*y,b=l*p,T=l*y;t[0]=d*p,t[4]=-d*y,t[8]=f,t[1]=v+b*f,t[5]=x-T*f,t[9]=-l*d,t[2]=T-x*f,t[6]=b+v*f,t[10]=o*d}else if(e.order==="YXZ"){const x=d*p,v=d*y,b=f*p,T=f*y;t[0]=x+T*l,t[4]=b*l-v,t[8]=o*f,t[1]=o*y,t[5]=o*p,t[9]=-l,t[2]=v*l-b,t[6]=T+x*l,t[10]=o*d}else if(e.order==="ZXY"){const x=d*p,v=d*y,b=f*p,T=f*y;t[0]=x-T*l,t[4]=-o*y,t[8]=b+v*l,t[1]=v+b*l,t[5]=o*p,t[9]=T-x*l,t[2]=-o*f,t[6]=l,t[10]=o*d}else if(e.order==="ZYX"){const x=o*p,v=o*y,b=l*p,T=l*y;t[0]=d*p,t[4]=b*f-v,t[8]=x*f+T,t[1]=d*y,t[5]=T*f+x,t[9]=v*f-b,t[2]=-f,t[6]=l*d,t[10]=o*d}else if(e.order==="YZX"){const x=o*d,v=o*f,b=l*d,T=l*f;t[0]=d*p,t[4]=T-x*y,t[8]=b*y+v,t[1]=y,t[5]=o*p,t[9]=-l*p,t[2]=-f*p,t[6]=v*y+b,t[10]=x-T*y}else if(e.order==="XZY"){const x=o*d,v=o*f,b=l*d,T=l*f;t[0]=d*p,t[4]=-y,t[8]=f*p,t[1]=x*y+T,t[5]=o*p,t[9]=v*y-b,t[2]=b*y-v,t[6]=l*p,t[10]=T*y+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(sO,e,aO)}lookAt(e,t,r){const i=this.elements;return us.subVectors(e,t),us.lengthSq()===0&&(us.z=1),us.normalize(),bl.crossVectors(r,us),bl.lengthSq()===0&&(Math.abs(r.z)===1?us.x+=1e-4:us.z+=1e-4,us.normalize(),bl.crossVectors(r,us)),bl.normalize(),og.crossVectors(us,bl),i[0]=bl.x,i[4]=og.x,i[8]=us.x,i[1]=bl.y,i[5]=og.y,i[9]=us.y,i[2]=bl.z,i[6]=og.z,i[10]=us.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],l=r[4],d=r[8],f=r[12],p=r[1],y=r[5],x=r[9],v=r[13],b=r[2],T=r[6],M=r[10],_=r[14],N=r[3],A=r[7],R=r[11],D=r[15],U=i[0],z=i[4],W=i[8],O=i[12],I=i[1],K=i[5],ie=i[9],oe=i[13],Z=i[2],le=i[6],Q=i[10],me=i[14],$=i[3],re=i[7],te=i[11],j=i[15];return s[0]=o*U+l*I+d*Z+f*$,s[4]=o*z+l*K+d*le+f*re,s[8]=o*W+l*ie+d*Q+f*te,s[12]=o*O+l*oe+d*me+f*j,s[1]=p*U+y*I+x*Z+v*$,s[5]=p*z+y*K+x*le+v*re,s[9]=p*W+y*ie+x*Q+v*te,s[13]=p*O+y*oe+x*me+v*j,s[2]=b*U+T*I+M*Z+_*$,s[6]=b*z+T*K+M*le+_*re,s[10]=b*W+T*ie+M*Q+_*te,s[14]=b*O+T*oe+M*me+_*j,s[3]=N*U+A*I+R*Z+D*$,s[7]=N*z+A*K+R*le+D*re,s[11]=N*W+A*ie+R*Q+D*te,s[15]=N*O+A*oe+R*me+D*j,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],l=e[5],d=e[9],f=e[13],p=e[2],y=e[6],x=e[10],v=e[14],b=e[3],T=e[7],M=e[11],_=e[15];return b*(+s*d*y-i*f*y-s*l*x+r*f*x+i*l*v-r*d*v)+T*(+t*d*v-t*f*x+s*o*x-i*o*v+i*f*p-s*d*p)+M*(+t*f*y-t*l*v-s*o*y+r*o*v+s*l*p-r*f*p)+_*(-i*l*p-t*d*y+t*l*x+i*o*y-r*o*x+r*d*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],l=e[5],d=e[6],f=e[7],p=e[8],y=e[9],x=e[10],v=e[11],b=e[12],T=e[13],M=e[14],_=e[15],N=y*M*f-T*x*f+T*d*v-l*M*v-y*d*_+l*x*_,A=b*x*f-p*M*f-b*d*v+o*M*v+p*d*_-o*x*_,R=p*T*f-b*y*f+b*l*v-o*T*v-p*l*_+o*y*_,D=b*y*d-p*T*d-b*l*x+o*T*x+p*l*M-o*y*M,U=t*N+r*A+i*R+s*D;if(U===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const z=1/U;return e[0]=N*z,e[1]=(T*x*s-y*M*s-T*i*v+r*M*v+y*i*_-r*x*_)*z,e[2]=(l*M*s-T*d*s+T*i*f-r*M*f-l*i*_+r*d*_)*z,e[3]=(y*d*s-l*x*s-y*i*f+r*x*f+l*i*v-r*d*v)*z,e[4]=A*z,e[5]=(p*M*s-b*x*s+b*i*v-t*M*v-p*i*_+t*x*_)*z,e[6]=(b*d*s-o*M*s-b*i*f+t*M*f+o*i*_-t*d*_)*z,e[7]=(o*x*s-p*d*s+p*i*f-t*x*f-o*i*v+t*d*v)*z,e[8]=R*z,e[9]=(b*y*s-p*T*s-b*r*v+t*T*v+p*r*_-t*y*_)*z,e[10]=(o*T*s-b*l*s+b*r*f-t*T*f-o*r*_+t*l*_)*z,e[11]=(p*l*s-o*y*s-p*r*f+t*y*f+o*r*v-t*l*v)*z,e[12]=D*z,e[13]=(p*T*i-b*y*i+b*r*x-t*T*x-p*r*M+t*y*M)*z,e[14]=(b*l*i-o*T*i-b*r*d+t*T*d+o*r*M-t*l*M)*z,e[15]=(o*y*i-p*l*i+p*r*d-t*y*d-o*r*x+t*l*x)*z,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,l=e.y,d=e.z,f=s*o,p=s*l;return this.set(f*o+r,f*l-i*d,f*d+i*l,0,f*l+i*d,p*l+r,p*d-i*o,0,f*d-i*l,p*d+i*o,s*d*d+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,l=t._z,d=t._w,f=s+s,p=o+o,y=l+l,x=s*f,v=s*p,b=s*y,T=o*p,M=o*y,_=l*y,N=d*f,A=d*p,R=d*y,D=r.x,U=r.y,z=r.z;return i[0]=(1-(T+_))*D,i[1]=(v+R)*D,i[2]=(b-A)*D,i[3]=0,i[4]=(v-R)*U,i[5]=(1-(x+_))*U,i[6]=(M+N)*U,i[7]=0,i[8]=(b+A)*z,i[9]=(M-N)*z,i[10]=(1-(x+T))*z,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Pd.set(i[0],i[1],i[2]).length();const o=Pd.set(i[4],i[5],i[6]).length(),l=Pd.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],na.copy(this);const f=1/s,p=1/o,y=1/l;return na.elements[0]*=f,na.elements[1]*=f,na.elements[2]*=f,na.elements[4]*=p,na.elements[5]*=p,na.elements[6]*=p,na.elements[8]*=y,na.elements[9]*=y,na.elements[10]*=y,t.setFromRotationMatrix(na),r.x=s,r.y=o,r.z=l,this}makePerspective(e,t,r,i,s,o,l=la){const d=this.elements,f=2*s/(t-e),p=2*s/(r-i),y=(t+e)/(t-e),x=(r+i)/(r-i);let v,b;if(l===la)v=-(o+s)/(o-s),b=-2*o*s/(o-s);else if(l===gh)v=-o/(o-s),b=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return d[0]=f,d[4]=0,d[8]=y,d[12]=0,d[1]=0,d[5]=p,d[9]=x,d[13]=0,d[2]=0,d[6]=0,d[10]=v,d[14]=b,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(e,t,r,i,s,o,l=la){const d=this.elements,f=1/(t-e),p=1/(r-i),y=1/(o-s),x=(t+e)*f,v=(r+i)*p;let b,T;if(l===la)b=(o+s)*y,T=-2*y;else if(l===gh)b=s*y,T=-1*y;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return d[0]=2*f,d[4]=0,d[8]=0,d[12]=-x,d[1]=0,d[5]=2*p,d[9]=0,d[13]=-v,d[2]=0,d[6]=0,d[10]=T,d[14]=-b,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Pd=new q,na=new Ut,sO=new q(0,0,0),aO=new q(1,1,1),bl=new q,og=new q,us=new q,Cb=new Ut,Nb=new Ki;class Xp{constructor(e=0,t=0,r=0,i=Xp.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],l=i[8],d=i[1],f=i[5],p=i[9],y=i[2],x=i[6],v=i[10];switch(t){case"XYZ":this._y=Math.asin(Qn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-p,v),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(x,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Qn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(l,v),this._z=Math.atan2(d,f)):(this._y=Math.atan2(-y,s),this._z=0);break;case"ZXY":this._x=Math.asin(Qn(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-y,v),this._z=Math.atan2(-o,f)):(this._y=0,this._z=Math.atan2(d,s));break;case"ZYX":this._y=Math.asin(-Qn(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(x,v),this._z=Math.atan2(d,s)):(this._x=0,this._z=Math.atan2(-o,f));break;case"YZX":this._z=Math.asin(Qn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-p,f),this._y=Math.atan2(-y,s)):(this._x=0,this._y=Math.atan2(l,v));break;case"XZY":this._z=Math.asin(-Qn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(x,f),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-p,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return Cb.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Cb,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Nb.setFromEuler(this),this.setFromQuaternion(Nb,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Xp.DEFAULT_ORDER="XYZ";class pu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let oO=0;const kb=new q,Ld=new Ki,So=new Ut,lg=new q,Pf=new q,lO=new q,cO=new Ki,Rb=new q(1,0,0),Pb=new q(0,1,0),Lb=new q(0,0,1),uO={type:"added"},dO={type:"removed"};class hn extends zo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:oO++}),this.uuid=fs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=hn.DEFAULT_UP.clone();const e=new q,t=new Xp,r=new Ki,i=new q(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ut},normalMatrix:{value:new Kt}}),this.matrix=new Ut,this.matrixWorld=new Ut,this.matrixAutoUpdate=hn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new pu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ld.setFromAxisAngle(e,t),this.quaternion.multiply(Ld),this}rotateOnWorldAxis(e,t){return Ld.setFromAxisAngle(e,t),this.quaternion.premultiply(Ld),this}rotateX(e){return this.rotateOnAxis(Rb,e)}rotateY(e){return this.rotateOnAxis(Pb,e)}rotateZ(e){return this.rotateOnAxis(Lb,e)}translateOnAxis(e,t){return kb.copy(e).applyQuaternion(this.quaternion),this.position.add(kb.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Rb,e)}translateY(e){return this.translateOnAxis(Pb,e)}translateZ(e){return this.translateOnAxis(Lb,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(So.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?lg.copy(e):lg.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Pf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?So.lookAt(Pf,lg,this.up):So.lookAt(lg,Pf,this.up),this.quaternion.setFromRotationMatrix(So),i&&(So.extractRotation(i.matrixWorld),Ld.setFromRotationMatrix(So),this.quaternion.premultiply(Ld.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(uO)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(dO)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),So.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),So.multiply(e.parent.matrixWorld)),e.applyMatrix4(So),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pf,e,lO),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pf,cO,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const l=i[s];l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(l,d){return l[d.uuid]===void 0&&(l[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const d=l.shapes;if(Array.isArray(d))for(let f=0,p=d.length;f<p;f++){const y=d[f];s(e.shapes,y)}else s(e.shapes,d)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let d=0,f=this.material.length;d<f;d++)l.push(s(e.materials,this.material[d]));i.material=l}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let l=0;l<this.children.length;l++)i.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let l=0;l<this.animations.length;l++){const d=this.animations[l];i.animations.push(s(e.animations,d))}}if(t){const l=o(e.geometries),d=o(e.materials),f=o(e.textures),p=o(e.images),y=o(e.shapes),x=o(e.skeletons),v=o(e.animations),b=o(e.nodes);l.length>0&&(r.geometries=l),d.length>0&&(r.materials=d),f.length>0&&(r.textures=f),p.length>0&&(r.images=p),y.length>0&&(r.shapes=y),x.length>0&&(r.skeletons=x),v.length>0&&(r.animations=v),b.length>0&&(r.nodes=b)}return r.object=i,r;function o(l){const d=[];for(const f in l){const p=l[f];delete p.metadata,d.push(p)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}hn.DEFAULT_UP=new q(0,1,0);hn.DEFAULT_MATRIX_AUTO_UPDATE=!0;hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ra=new q,bo=new q,Ox=new q,Mo=new q,Id=new q,Dd=new q,Ib=new q,Fx=new q,zx=new q,Bx=new q;let cg=!1;class Ci{constructor(e=new q,t=new q,r=new q){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),ra.subVectors(e,t),i.cross(ra);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){ra.subVectors(i,t),bo.subVectors(r,t),Ox.subVectors(e,t);const o=ra.dot(ra),l=ra.dot(bo),d=ra.dot(Ox),f=bo.dot(bo),p=bo.dot(Ox),y=o*f-l*l;if(y===0)return s.set(0,0,0),null;const x=1/y,v=(f*d-l*p)*x,b=(o*p-l*d)*x;return s.set(1-v-b,b,v)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Mo)===null?!1:Mo.x>=0&&Mo.y>=0&&Mo.x+Mo.y<=1}static getUV(e,t,r,i,s,o,l,d){return cg===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),cg=!0),this.getInterpolation(e,t,r,i,s,o,l,d)}static getInterpolation(e,t,r,i,s,o,l,d){return this.getBarycoord(e,t,r,i,Mo)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(s,Mo.x),d.addScaledVector(o,Mo.y),d.addScaledVector(l,Mo.z),d)}static isFrontFacing(e,t,r,i){return ra.subVectors(r,t),bo.subVectors(e,t),ra.cross(bo).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ra.subVectors(this.c,this.b),bo.subVectors(this.a,this.b),ra.cross(bo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ci.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ci.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return cg===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),cg=!0),Ci.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}getInterpolation(e,t,r,i,s){return Ci.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Ci.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ci.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,l;Id.subVectors(i,r),Dd.subVectors(s,r),Fx.subVectors(e,r);const d=Id.dot(Fx),f=Dd.dot(Fx);if(d<=0&&f<=0)return t.copy(r);zx.subVectors(e,i);const p=Id.dot(zx),y=Dd.dot(zx);if(p>=0&&y<=p)return t.copy(i);const x=d*y-p*f;if(x<=0&&d>=0&&p<=0)return o=d/(d-p),t.copy(r).addScaledVector(Id,o);Bx.subVectors(e,s);const v=Id.dot(Bx),b=Dd.dot(Bx);if(b>=0&&v<=b)return t.copy(s);const T=v*f-d*b;if(T<=0&&f>=0&&b<=0)return l=f/(f-b),t.copy(r).addScaledVector(Dd,l);const M=p*b-v*y;if(M<=0&&y-p>=0&&v-b>=0)return Ib.subVectors(s,i),l=(y-p)/(y-p+(v-b)),t.copy(i).addScaledVector(Ib,l);const _=1/(M+T+x);return o=T*_,l=x*_,t.copy(r).addScaledVector(Id,o).addScaledVector(Dd,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const ZA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ml={h:0,s:0,l:0},ug={h:0,s:0,l:0};function jx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class at{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=kr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,xn.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=xn.workingColorSpace){return this.r=e,this.g=t,this.b=r,xn.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=xn.workingColorSpace){if(e=k_(e,1),t=Qn(t,0,1),r=Qn(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=jx(o,s,e+1/3),this.g=jx(o,s,e),this.b=jx(o,s,e-1/3)}return xn.toWorkingColorSpace(this,i),this}setStyle(e,t=kr){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],l=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=kr){const r=ZA[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=dh(e.r),this.g=dh(e.g),this.b=dh(e.b),this}copyLinearToSRGB(e){return this.r=Nx(e.r),this.g=Nx(e.g),this.b=Nx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=kr){return xn.fromWorkingColorSpace(oi.copy(this),e),Math.round(Qn(oi.r*255,0,255))*65536+Math.round(Qn(oi.g*255,0,255))*256+Math.round(Qn(oi.b*255,0,255))}getHexString(e=kr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=xn.workingColorSpace){xn.fromWorkingColorSpace(oi.copy(this),t);const r=oi.r,i=oi.g,s=oi.b,o=Math.max(r,i,s),l=Math.min(r,i,s);let d,f;const p=(l+o)/2;if(l===o)d=0,f=0;else{const y=o-l;switch(f=p<=.5?y/(o+l):y/(2-o-l),o){case r:d=(i-s)/y+(i<s?6:0);break;case i:d=(s-r)/y+2;break;case s:d=(r-i)/y+4;break}d/=6}return e.h=d,e.s=f,e.l=p,e}getRGB(e,t=xn.workingColorSpace){return xn.fromWorkingColorSpace(oi.copy(this),t),e.r=oi.r,e.g=oi.g,e.b=oi.b,e}getStyle(e=kr){xn.fromWorkingColorSpace(oi.copy(this),e);const t=oi.r,r=oi.g,i=oi.b;return e!==kr?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Ml),this.setHSL(Ml.h+e,Ml.s+t,Ml.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Ml),e.getHSL(ug);const r=tp(Ml.h,ug.h,t),i=tp(Ml.s,ug.s,t),s=tp(Ml.l,ug.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const oi=new at;at.NAMES=ZA;let hO=0;class fi extends zo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:hO++}),this.uuid=fs(),this.name="",this.type="Material",this.blending=hu,this.side=Do,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=T0,this.blendDst=A0,this.blendEquation=Ll,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new at(0,0,0),this.blendAlpha=0,this.depthFunc=pp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=C1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=eu,this.stencilZFail=eu,this.stencilZPass=eu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==hu&&(r.blending=this.blending),this.side!==Do&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==T0&&(r.blendSrc=this.blendSrc),this.blendDst!==A0&&(r.blendDst=this.blendDst),this.blendEquation!==Ll&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==pp&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==C1&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==eu&&(r.stencilFail=this.stencilFail),this.stencilZFail!==eu&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==eu&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const l in s){const d=s[l];delete d.metadata,o.push(d)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Zl extends fi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new at(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Wp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ao=fO();function fO(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let d=0;d<256;++d){const f=d-127;f<-27?(r[d]=0,r[d|256]=32768,i[d]=24,i[d|256]=24):f<-14?(r[d]=1024>>-f-14,r[d|256]=1024>>-f-14|32768,i[d]=-f-1,i[d|256]=-f-1):f<=15?(r[d]=f+15<<10,r[d|256]=f+15<<10|32768,i[d]=13,i[d|256]=13):f<128?(r[d]=31744,r[d|256]=64512,i[d]=24,i[d|256]=24):(r[d]=31744,r[d|256]=64512,i[d]=13,i[d|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),l=new Uint32Array(64);for(let d=1;d<1024;++d){let f=d<<13,p=0;for(;(f&8388608)===0;)f<<=1,p-=8388608;f&=-8388609,p+=947912704,s[d]=f|p}for(let d=1024;d<2048;++d)s[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)o[d]=d<<23;o[31]=1199570944,o[32]=2147483648;for(let d=33;d<63;++d)o[d]=2147483648+(d-32<<23);o[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(l[d]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:l}}function $i(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Qn(n,-65504,65504),Ao.floatView[0]=n;const e=Ao.uint32View[0],t=e>>23&511;return Ao.baseTable[t]+((e&8388607)>>Ao.shiftTable[t])}function Gf(n){const e=n>>10;return Ao.uint32View[0]=Ao.mantissaTable[Ao.offsetTable[e]+(n&1023)]+Ao.exponentTable[e],Ao.floatView[0]}const pO={toHalfFloat:$i,fromHalfFloat:Gf},xr=new q,dg=new Re;class pn{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Ep,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=oa,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)dg.fromBufferAttribute(this,t),dg.applyMatrix3(e),this.setXY(t,dg.x,dg.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)xr.fromBufferAttribute(this,t),xr.applyMatrix3(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)xr.fromBufferAttribute(this,t),xr.applyMatrix4(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)xr.fromBufferAttribute(this,t),xr.applyNormalMatrix(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)xr.fromBufferAttribute(this,t),xr.transformDirection(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=qi(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=qi(t,this.array)),t}setX(e,t){return this.normalized&&(t=Zt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=qi(t,this.array)),t}setY(e,t){return this.normalized&&(t=Zt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=qi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Zt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=qi(t,this.array)),t}setW(e,t){return this.normalized&&(t=Zt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Zt(t,this.array),r=Zt(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Zt(t,this.array),r=Zt(r,this.array),i=Zt(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Zt(t,this.array),r=Zt(r,this.array),i=Zt(i,this.array),s=Zt(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Ep&&(e.usage=this.usage),e}}class mO extends pn{constructor(e,t,r){super(new Int8Array(e),t,r)}}class gO extends pn{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class yO extends pn{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class xO extends pn{constructor(e,t,r){super(new Int16Array(e),t,r)}}class L_ extends pn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class vO extends pn{constructor(e,t,r){super(new Int32Array(e),t,r)}}class I_ extends pn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class _O extends pn{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=Gf(this.array[e*this.itemSize]);return this.normalized&&(t=qi(t,this.array)),t}setX(e,t){return this.normalized&&(t=Zt(t,this.array)),this.array[e*this.itemSize]=$i(t),this}getY(e){let t=Gf(this.array[e*this.itemSize+1]);return this.normalized&&(t=qi(t,this.array)),t}setY(e,t){return this.normalized&&(t=Zt(t,this.array)),this.array[e*this.itemSize+1]=$i(t),this}getZ(e){let t=Gf(this.array[e*this.itemSize+2]);return this.normalized&&(t=qi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Zt(t,this.array)),this.array[e*this.itemSize+2]=$i(t),this}getW(e){let t=Gf(this.array[e*this.itemSize+3]);return this.normalized&&(t=qi(t,this.array)),t}setW(e,t){return this.normalized&&(t=Zt(t,this.array)),this.array[e*this.itemSize+3]=$i(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Zt(t,this.array),r=Zt(r,this.array)),this.array[e+0]=$i(t),this.array[e+1]=$i(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Zt(t,this.array),r=Zt(r,this.array),i=Zt(i,this.array)),this.array[e+0]=$i(t),this.array[e+1]=$i(r),this.array[e+2]=$i(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Zt(t,this.array),r=Zt(r,this.array),i=Zt(i,this.array),s=Zt(s,this.array)),this.array[e+0]=$i(t),this.array[e+1]=$i(r),this.array[e+2]=$i(i),this.array[e+3]=$i(s),this}}class yt extends pn{constructor(e,t,r){super(new Float32Array(e),t,r)}}class wO extends pn{constructor(e,t,r){super(new Float64Array(e),t,r)}}let SO=0;const As=new Ut,Vx=new hn,Ud=new q,ds=new Pi,Lf=new Pi,zr=new q;class Jt extends zo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:SO++}),this.uuid=fs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new($A(e)?I_:L_)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Kt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return As.makeRotationFromQuaternion(e),this.applyMatrix4(As),this}rotateX(e){return As.makeRotationX(e),this.applyMatrix4(As),this}rotateY(e){return As.makeRotationY(e),this.applyMatrix4(As),this}rotateZ(e){return As.makeRotationZ(e),this.applyMatrix4(As),this}translate(e,t,r){return As.makeTranslation(e,t,r),this.applyMatrix4(As),this}scale(e,t,r){return As.makeScale(e,t,r),this.applyMatrix4(As),this}lookAt(e){return Vx.lookAt(e),Vx.updateMatrix(),this.applyMatrix4(Vx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ud).negate(),this.translate(Ud.x,Ud.y,Ud.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new yt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Pi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new q(-1/0,-1/0,-1/0),new q(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];ds.setFromBufferAttribute(s),this.morphTargetsRelative?(zr.addVectors(this.boundingBox.min,ds.min),this.boundingBox.expandByPoint(zr),zr.addVectors(this.boundingBox.max,ds.max),this.boundingBox.expandByPoint(zr)):(this.boundingBox.expandByPoint(ds.min),this.boundingBox.expandByPoint(ds.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new hi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new q,1/0);return}if(e){const r=this.boundingSphere.center;if(ds.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const l=t[s];Lf.setFromBufferAttribute(l),this.morphTargetsRelative?(zr.addVectors(ds.min,Lf.min),ds.expandByPoint(zr),zr.addVectors(ds.max,Lf.max),ds.expandByPoint(zr)):(ds.expandByPoint(Lf.min),ds.expandByPoint(Lf.max))}ds.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)zr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(zr));if(t)for(let s=0,o=t.length;s<o;s++){const l=t[s],d=this.morphTargetsRelative;for(let f=0,p=l.count;f<p;f++)zr.fromBufferAttribute(l,f),d&&(Ud.fromBufferAttribute(e,f),zr.add(Ud)),i=Math.max(i,r.distanceToSquared(zr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,l=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new pn(new Float32Array(4*l),4));const d=this.getAttribute("tangent").array,f=[],p=[];for(let I=0;I<l;I++)f[I]=new q,p[I]=new q;const y=new q,x=new q,v=new q,b=new Re,T=new Re,M=new Re,_=new q,N=new q;function A(I,K,ie){y.fromArray(i,I*3),x.fromArray(i,K*3),v.fromArray(i,ie*3),b.fromArray(o,I*2),T.fromArray(o,K*2),M.fromArray(o,ie*2),x.sub(y),v.sub(y),T.sub(b),M.sub(b);const oe=1/(T.x*M.y-M.x*T.y);isFinite(oe)&&(_.copy(x).multiplyScalar(M.y).addScaledVector(v,-T.y).multiplyScalar(oe),N.copy(v).multiplyScalar(T.x).addScaledVector(x,-M.x).multiplyScalar(oe),f[I].add(_),f[K].add(_),f[ie].add(_),p[I].add(N),p[K].add(N),p[ie].add(N))}let R=this.groups;R.length===0&&(R=[{start:0,count:r.length}]);for(let I=0,K=R.length;I<K;++I){const ie=R[I],oe=ie.start,Z=ie.count;for(let le=oe,Q=oe+Z;le<Q;le+=3)A(r[le+0],r[le+1],r[le+2])}const D=new q,U=new q,z=new q,W=new q;function O(I){z.fromArray(s,I*3),W.copy(z);const K=f[I];D.copy(K),D.sub(z.multiplyScalar(z.dot(K))).normalize(),U.crossVectors(W,K);const oe=U.dot(p[I])<0?-1:1;d[I*4]=D.x,d[I*4+1]=D.y,d[I*4+2]=D.z,d[I*4+3]=oe}for(let I=0,K=R.length;I<K;++I){const ie=R[I],oe=ie.start,Z=ie.count;for(let le=oe,Q=oe+Z;le<Q;le+=3)O(r[le+0]),O(r[le+1]),O(r[le+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new pn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let x=0,v=r.count;x<v;x++)r.setXYZ(x,0,0,0);const i=new q,s=new q,o=new q,l=new q,d=new q,f=new q,p=new q,y=new q;if(e)for(let x=0,v=e.count;x<v;x+=3){const b=e.getX(x+0),T=e.getX(x+1),M=e.getX(x+2);i.fromBufferAttribute(t,b),s.fromBufferAttribute(t,T),o.fromBufferAttribute(t,M),p.subVectors(o,s),y.subVectors(i,s),p.cross(y),l.fromBufferAttribute(r,b),d.fromBufferAttribute(r,T),f.fromBufferAttribute(r,M),l.add(p),d.add(p),f.add(p),r.setXYZ(b,l.x,l.y,l.z),r.setXYZ(T,d.x,d.y,d.z),r.setXYZ(M,f.x,f.y,f.z)}else for(let x=0,v=t.count;x<v;x+=3)i.fromBufferAttribute(t,x+0),s.fromBufferAttribute(t,x+1),o.fromBufferAttribute(t,x+2),p.subVectors(o,s),y.subVectors(i,s),p.cross(y),r.setXYZ(x+0,p.x,p.y,p.z),r.setXYZ(x+1,p.x,p.y,p.z),r.setXYZ(x+2,p.x,p.y,p.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)zr.fromBufferAttribute(e,t),zr.normalize(),e.setXYZ(t,zr.x,zr.y,zr.z)}toNonIndexed(){function e(l,d){const f=l.array,p=l.itemSize,y=l.normalized,x=new f.constructor(d.length*p);let v=0,b=0;for(let T=0,M=d.length;T<M;T++){l.isInterleavedBufferAttribute?v=d[T]*l.data.stride+l.offset:v=d[T]*p;for(let _=0;_<p;_++)x[b++]=f[v++]}return new pn(x,p,y)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Jt,r=this.index.array,i=this.attributes;for(const l in i){const d=i[l],f=e(d,r);t.setAttribute(l,f)}const s=this.morphAttributes;for(const l in s){const d=[],f=s[l];for(let p=0,y=f.length;p<y;p++){const x=f[p],v=e(x,r);d.push(v)}t.morphAttributes[l]=d}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,d=o.length;l<d;l++){const f=o[l];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const f in d)d[f]!==void 0&&(e[f]=d[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const d in r){const f=r[d];e.data.attributes[d]=f.toJSON(e.data)}const i={};let s=!1;for(const d in this.morphAttributes){const f=this.morphAttributes[d],p=[];for(let y=0,x=f.length;y<x;y++){const v=f[y];p.push(v.toJSON(e.data))}p.length>0&&(i[d]=p,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const f in i){const p=i[f];this.setAttribute(f,p.clone(t))}const s=e.morphAttributes;for(const f in s){const p=[],y=s[f];for(let x=0,v=y.length;x<v;x++)p.push(y[x].clone(t));this.morphAttributes[f]=p}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let f=0,p=o.length;f<p;f++){const y=o[f];this.addGroup(y.start,y.count,y.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Db=new Ut,Hc=new Th,hg=new hi,Ub=new q,Od=new q,Fd=new q,zd=new q,Hx=new q,fg=new q,pg=new Re,mg=new Re,gg=new Re,Ob=new q,Fb=new q,zb=new q,yg=new q,xg=new q;class _r extends hn{constructor(e=new Jt,t=new Zl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const l=this.morphTargetInfluences;if(s&&l){fg.set(0,0,0);for(let d=0,f=s.length;d<f;d++){const p=l[d],y=s[d];p!==0&&(Hx.fromBufferAttribute(y,e),o?fg.addScaledVector(Hx,p):fg.addScaledVector(Hx.sub(t),p))}t.add(fg)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),hg.copy(r.boundingSphere),hg.applyMatrix4(s),Hc.copy(e.ray).recast(e.near),!(hg.containsPoint(Hc.origin)===!1&&(Hc.intersectSphere(hg,Ub)===null||Hc.origin.distanceToSquared(Ub)>(e.far-e.near)**2))&&(Db.copy(s).invert(),Hc.copy(e.ray).applyMatrix4(Db),!(r.boundingBox!==null&&Hc.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Hc)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,l=s.index,d=s.attributes.position,f=s.attributes.uv,p=s.attributes.uv1,y=s.attributes.normal,x=s.groups,v=s.drawRange;if(l!==null)if(Array.isArray(o))for(let b=0,T=x.length;b<T;b++){const M=x[b],_=o[M.materialIndex],N=Math.max(M.start,v.start),A=Math.min(l.count,Math.min(M.start+M.count,v.start+v.count));for(let R=N,D=A;R<D;R+=3){const U=l.getX(R),z=l.getX(R+1),W=l.getX(R+2);i=vg(this,_,e,r,f,p,y,U,z,W),i&&(i.faceIndex=Math.floor(R/3),i.face.materialIndex=M.materialIndex,t.push(i))}}else{const b=Math.max(0,v.start),T=Math.min(l.count,v.start+v.count);for(let M=b,_=T;M<_;M+=3){const N=l.getX(M),A=l.getX(M+1),R=l.getX(M+2);i=vg(this,o,e,r,f,p,y,N,A,R),i&&(i.faceIndex=Math.floor(M/3),t.push(i))}}else if(d!==void 0)if(Array.isArray(o))for(let b=0,T=x.length;b<T;b++){const M=x[b],_=o[M.materialIndex],N=Math.max(M.start,v.start),A=Math.min(d.count,Math.min(M.start+M.count,v.start+v.count));for(let R=N,D=A;R<D;R+=3){const U=R,z=R+1,W=R+2;i=vg(this,_,e,r,f,p,y,U,z,W),i&&(i.faceIndex=Math.floor(R/3),i.face.materialIndex=M.materialIndex,t.push(i))}}else{const b=Math.max(0,v.start),T=Math.min(d.count,v.start+v.count);for(let M=b,_=T;M<_;M+=3){const N=M,A=M+1,R=M+2;i=vg(this,o,e,r,f,p,y,N,A,R),i&&(i.faceIndex=Math.floor(M/3),t.push(i))}}}}function bO(n,e,t,r,i,s,o,l){let d;if(e.side===Ri?d=r.intersectTriangle(o,s,i,!0,l):d=r.intersectTriangle(i,s,o,e.side===Do,l),d===null)return null;xg.copy(l),xg.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(xg);return f<t.near||f>t.far?null:{distance:f,point:xg.clone(),object:n}}function vg(n,e,t,r,i,s,o,l,d,f){n.getVertexPosition(l,Od),n.getVertexPosition(d,Fd),n.getVertexPosition(f,zd);const p=bO(n,e,t,r,Od,Fd,zd,yg);if(p){i&&(pg.fromBufferAttribute(i,l),mg.fromBufferAttribute(i,d),gg.fromBufferAttribute(i,f),p.uv=Ci.getInterpolation(yg,Od,Fd,zd,pg,mg,gg,new Re)),s&&(pg.fromBufferAttribute(s,l),mg.fromBufferAttribute(s,d),gg.fromBufferAttribute(s,f),p.uv1=Ci.getInterpolation(yg,Od,Fd,zd,pg,mg,gg,new Re),p.uv2=p.uv1),o&&(Ob.fromBufferAttribute(o,l),Fb.fromBufferAttribute(o,d),zb.fromBufferAttribute(o,f),p.normal=Ci.getInterpolation(yg,Od,Fd,zd,Ob,Fb,zb,new q),p.normal.dot(r.direction)>0&&p.normal.multiplyScalar(-1));const y={a:l,b:d,c:f,normal:new q,materialIndex:0};Ci.getNormal(Od,Fd,zd,y.normal),p.face=y}return p}class Eu extends Jt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const l=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const d=[],f=[],p=[],y=[];let x=0,v=0;b("z","y","x",-1,-1,r,t,e,o,s,0),b("z","y","x",1,-1,r,t,-e,o,s,1),b("x","z","y",1,1,e,r,t,i,o,2),b("x","z","y",1,-1,e,r,-t,i,o,3),b("x","y","z",1,-1,e,t,r,i,s,4),b("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(d),this.setAttribute("position",new yt(f,3)),this.setAttribute("normal",new yt(p,3)),this.setAttribute("uv",new yt(y,2));function b(T,M,_,N,A,R,D,U,z,W,O){const I=R/z,K=D/W,ie=R/2,oe=D/2,Z=U/2,le=z+1,Q=W+1;let me=0,$=0;const re=new q;for(let te=0;te<Q;te++){const j=te*K-oe;for(let X=0;X<le;X++){const ee=X*I-ie;re[T]=ee*N,re[M]=j*A,re[_]=Z,f.push(re.x,re.y,re.z),re[T]=0,re[M]=0,re[_]=U>0?1:-1,p.push(re.x,re.y,re.z),y.push(X/z),y.push(1-te/W),me+=1}}for(let te=0;te<W;te++)for(let j=0;j<z;j++){const X=x+j+le*te,ee=x+j+le*(te+1),fe=x+(j+1)+le*(te+1),Ae=x+(j+1)+le*te;d.push(X,ee,Ae),d.push(ee,fe,Ae),$+=6}l.addGroup(v,$,O),v+=$,x+=me}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Eu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function xh(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Ti(n){const e={};for(let t=0;t<n.length;t++){const r=xh(n[t]);for(const i in r)e[i]=r[i]}return e}function MO(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function KA(n){return n.getRenderTarget()===null?n.outputColorSpace:xn.workingColorSpace}const JA={clone:xh,merge:Ti};var EO=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,TO=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Fa extends fi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=EO,this.fragmentShader=TO,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=xh(e.uniforms),this.uniformsGroups=MO(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class $p extends hn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ut,this.projectionMatrix=new Ut,this.projectionMatrixInverse=new Ut,this.coordinateSystem=la}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Br extends $p{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=yh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(fu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return yh*2*Math.atan(Math.tan(fu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(fu*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const d=o.fullWidth,f=o.fullHeight;s+=o.offsetX*i/d,t-=o.offsetY*r/f,i*=o.width/d,r*=o.height/f}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Bd=-90,jd=1;class QA extends hn{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Br(Bd,jd,e,t);i.layers=this.layers,this.add(i);const s=new Br(Bd,jd,e,t);s.layers=this.layers,this.add(s);const o=new Br(Bd,jd,e,t);o.layers=this.layers,this.add(o);const l=new Br(Bd,jd,e,t);l.layers=this.layers,this.add(l);const d=new Br(Bd,jd,e,t);d.layers=this.layers,this.add(d);const f=new Br(Bd,jd,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,l,d]=t;for(const f of t)this.remove(f);if(e===la)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(e===gh)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,l,d,f,p]=this.children,y=e.getRenderTarget(),x=e.getActiveCubeFace(),v=e.getActiveMipmapLevel(),b=e.xr.enabled;e.xr.enabled=!1;const T=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,l),e.setRenderTarget(r,3,i),e.render(t,d),e.setRenderTarget(r,4,i),e.render(t,f),r.texture.generateMipmaps=T,e.setRenderTarget(r,5,i),e.render(t,p),e.setRenderTarget(y,x,v),e.xr.enabled=b,r.texture.needsPMREMUpdate=!0}}class qp extends dr{constructor(e,t,r,i,s,o,l,d,f,p){e=e!==void 0?e:[],t=t!==void 0?t:Uo,super(e,t,r,i,s,o,l,d,f,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class eC extends ua{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(np("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Bl?kr:hs),this.texture=new qp(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:lr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Eu(5,5,5),s=new Fa({name:"CubemapFromEquirect",uniforms:xh(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Ri,blending:Lo});s.uniforms.tEquirect.value=t;const o=new _r(i,s),l=t.minFilter;return t.minFilter===Wl&&(t.minFilter=lr),new QA(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const Wx=new q,AO=new q,CO=new Kt;class Rl{constructor(e=new q(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=Wx.subVectors(r,t).cross(AO.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(Wx),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||CO.getNormalMatrix(e),i=this.coplanarPoint(Wx).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Wc=new hi,_g=new q;class Yp{constructor(e=new Rl,t=new Rl,r=new Rl,i=new Rl,s=new Rl,o=new Rl){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(r),l[3].copy(i),l[4].copy(s),l[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=la){const r=this.planes,i=e.elements,s=i[0],o=i[1],l=i[2],d=i[3],f=i[4],p=i[5],y=i[6],x=i[7],v=i[8],b=i[9],T=i[10],M=i[11],_=i[12],N=i[13],A=i[14],R=i[15];if(r[0].setComponents(d-s,x-f,M-v,R-_).normalize(),r[1].setComponents(d+s,x+f,M+v,R+_).normalize(),r[2].setComponents(d+o,x+p,M+b,R+N).normalize(),r[3].setComponents(d-o,x-p,M-b,R-N).normalize(),r[4].setComponents(d-l,x-y,M-T,R-A).normalize(),t===la)r[5].setComponents(d+l,x+y,M+T,R+A).normalize();else if(t===gh)r[5].setComponents(l,y,T,A).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Wc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Wc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Wc)}intersectsSprite(e){return Wc.center.set(0,0,0),Wc.radius=.7071067811865476,Wc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Wc)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(_g.x=i.normal.x>0?e.max.x:e.min.x,_g.y=i.normal.y>0?e.max.y:e.min.y,_g.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(_g)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function tC(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function NO(n,e){const t=e.isWebGL2,r=new WeakMap;function i(f,p){const y=f.array,x=f.usage,v=y.byteLength,b=n.createBuffer();n.bindBuffer(p,b),n.bufferData(p,y,x),f.onUploadCallback();let T;if(y instanceof Float32Array)T=n.FLOAT;else if(y instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(t)T=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else T=n.UNSIGNED_SHORT;else if(y instanceof Int16Array)T=n.SHORT;else if(y instanceof Uint32Array)T=n.UNSIGNED_INT;else if(y instanceof Int32Array)T=n.INT;else if(y instanceof Int8Array)T=n.BYTE;else if(y instanceof Uint8Array)T=n.UNSIGNED_BYTE;else if(y instanceof Uint8ClampedArray)T=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+y);return{buffer:b,type:T,bytesPerElement:y.BYTES_PER_ELEMENT,version:f.version,size:v}}function s(f,p,y){const x=p.array,v=p._updateRange,b=p.updateRanges;if(n.bindBuffer(y,f),v.count===-1&&b.length===0&&n.bufferSubData(y,0,x),b.length!==0){for(let T=0,M=b.length;T<M;T++){const _=b[T];t?n.bufferSubData(y,_.start*x.BYTES_PER_ELEMENT,x,_.start,_.count):n.bufferSubData(y,_.start*x.BYTES_PER_ELEMENT,x.subarray(_.start,_.start+_.count))}p.clearUpdateRanges()}v.count!==-1&&(t?n.bufferSubData(y,v.offset*x.BYTES_PER_ELEMENT,x,v.offset,v.count):n.bufferSubData(y,v.offset*x.BYTES_PER_ELEMENT,x.subarray(v.offset,v.offset+v.count)),v.count=-1),p.onUploadCallback()}function o(f){return f.isInterleavedBufferAttribute&&(f=f.data),r.get(f)}function l(f){f.isInterleavedBufferAttribute&&(f=f.data);const p=r.get(f);p&&(n.deleteBuffer(p.buffer),r.delete(f))}function d(f,p){if(f.isGLBufferAttribute){const x=r.get(f);(!x||x.version<f.version)&&r.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const y=r.get(f);if(y===void 0)r.set(f,i(f,p));else if(y.version<f.version){if(y.size!==f.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(y.buffer,f,p),y.version=f.version}}return{get:o,remove:l,update:d}}class Zp extends Jt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,l=Math.floor(r),d=Math.floor(i),f=l+1,p=d+1,y=e/l,x=t/d,v=[],b=[],T=[],M=[];for(let _=0;_<p;_++){const N=_*x-o;for(let A=0;A<f;A++){const R=A*y-s;b.push(R,-N,0),T.push(0,0,1),M.push(A/l),M.push(1-_/d)}}for(let _=0;_<d;_++)for(let N=0;N<l;N++){const A=N+f*_,R=N+f*(_+1),D=N+1+f*(_+1),U=N+1+f*_;v.push(A,R,U),v.push(R,D,U)}this.setIndex(v),this.setAttribute("position",new yt(b,3)),this.setAttribute("normal",new yt(T,3)),this.setAttribute("uv",new yt(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zp(e.width,e.height,e.widthSegments,e.heightSegments)}}var kO=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,RO=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,PO=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,LO=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,IO=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,DO=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,UO=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,OO=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,FO=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,zO=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,BO=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,jO=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,VO=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,HO=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,WO=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,GO=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,XO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,$O=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,qO=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,YO=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ZO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,KO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,JO=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,QO=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,eF=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,tF=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,nF=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,rF=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,iF=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,sF=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,aF="gl_FragColor = linearToOutputTexel( gl_FragColor );",oF=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,lF=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,cF=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,uF=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,dF=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,hF=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fF=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,pF=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,mF=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,gF=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,yF=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,xF=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,vF=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,_F=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,wF=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,SF=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,bF=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,MF=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,EF=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,TF=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,AF=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,CF=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,NF=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,kF=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,RF=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,PF=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,LF=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,IF=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,DF=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,UF=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,OF=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,FF=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,zF=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,BF=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,jF=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,VF=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,HF=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,WF=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,GF=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,XF=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,$F=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,qF=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,YF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ZF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,KF=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,JF=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,QF=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,ez=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,tz=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,nz=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,rz=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,iz=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,sz=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,az=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,oz=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,lz=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,cz=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,uz=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,dz=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,hz=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,fz=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,pz=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,mz=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,gz=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,yz=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,xz=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,vz=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,_z=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,wz=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Sz=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,bz=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Mz=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Ez=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Tz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Az=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Cz=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Nz=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,kz=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Rz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Pz=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Lz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Iz=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Dz=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Uz=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Oz=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Fz=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,zz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Bz=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,jz=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Vz=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Hz=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Wz=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Gz=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Xz=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$z=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,qz=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Yz=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Zz=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Kz=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Jz=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Qz=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,eB=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tB=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nB=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rB=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,iB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,sB=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,aB=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,oB=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,lB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Yt={alphahash_fragment:kO,alphahash_pars_fragment:RO,alphamap_fragment:PO,alphamap_pars_fragment:LO,alphatest_fragment:IO,alphatest_pars_fragment:DO,aomap_fragment:UO,aomap_pars_fragment:OO,batching_pars_vertex:FO,batching_vertex:zO,begin_vertex:BO,beginnormal_vertex:jO,bsdfs:VO,iridescence_fragment:HO,bumpmap_pars_fragment:WO,clipping_planes_fragment:GO,clipping_planes_pars_fragment:XO,clipping_planes_pars_vertex:$O,clipping_planes_vertex:qO,color_fragment:YO,color_pars_fragment:ZO,color_pars_vertex:KO,color_vertex:JO,common:QO,cube_uv_reflection_fragment:eF,defaultnormal_vertex:tF,displacementmap_pars_vertex:nF,displacementmap_vertex:rF,emissivemap_fragment:iF,emissivemap_pars_fragment:sF,colorspace_fragment:aF,colorspace_pars_fragment:oF,envmap_fragment:lF,envmap_common_pars_fragment:cF,envmap_pars_fragment:uF,envmap_pars_vertex:dF,envmap_physical_pars_fragment:bF,envmap_vertex:hF,fog_vertex:fF,fog_pars_vertex:pF,fog_fragment:mF,fog_pars_fragment:gF,gradientmap_pars_fragment:yF,lightmap_fragment:xF,lightmap_pars_fragment:vF,lights_lambert_fragment:_F,lights_lambert_pars_fragment:wF,lights_pars_begin:SF,lights_toon_fragment:MF,lights_toon_pars_fragment:EF,lights_phong_fragment:TF,lights_phong_pars_fragment:AF,lights_physical_fragment:CF,lights_physical_pars_fragment:NF,lights_fragment_begin:kF,lights_fragment_maps:RF,lights_fragment_end:PF,logdepthbuf_fragment:LF,logdepthbuf_pars_fragment:IF,logdepthbuf_pars_vertex:DF,logdepthbuf_vertex:UF,map_fragment:OF,map_pars_fragment:FF,map_particle_fragment:zF,map_particle_pars_fragment:BF,metalnessmap_fragment:jF,metalnessmap_pars_fragment:VF,morphcolor_vertex:HF,morphnormal_vertex:WF,morphtarget_pars_vertex:GF,morphtarget_vertex:XF,normal_fragment_begin:$F,normal_fragment_maps:qF,normal_pars_fragment:YF,normal_pars_vertex:ZF,normal_vertex:KF,normalmap_pars_fragment:JF,clearcoat_normal_fragment_begin:QF,clearcoat_normal_fragment_maps:ez,clearcoat_pars_fragment:tz,iridescence_pars_fragment:nz,opaque_fragment:rz,packing:iz,premultiplied_alpha_fragment:sz,project_vertex:az,dithering_fragment:oz,dithering_pars_fragment:lz,roughnessmap_fragment:cz,roughnessmap_pars_fragment:uz,shadowmap_pars_fragment:dz,shadowmap_pars_vertex:hz,shadowmap_vertex:fz,shadowmask_pars_fragment:pz,skinbase_vertex:mz,skinning_pars_vertex:gz,skinning_vertex:yz,skinnormal_vertex:xz,specularmap_fragment:vz,specularmap_pars_fragment:_z,tonemapping_fragment:wz,tonemapping_pars_fragment:Sz,transmission_fragment:bz,transmission_pars_fragment:Mz,uv_pars_fragment:Ez,uv_pars_vertex:Tz,uv_vertex:Az,worldpos_vertex:Cz,background_vert:Nz,background_frag:kz,backgroundCube_vert:Rz,backgroundCube_frag:Pz,cube_vert:Lz,cube_frag:Iz,depth_vert:Dz,depth_frag:Uz,distanceRGBA_vert:Oz,distanceRGBA_frag:Fz,equirect_vert:zz,equirect_frag:Bz,linedashed_vert:jz,linedashed_frag:Vz,meshbasic_vert:Hz,meshbasic_frag:Wz,meshlambert_vert:Gz,meshlambert_frag:Xz,meshmatcap_vert:$z,meshmatcap_frag:qz,meshnormal_vert:Yz,meshnormal_frag:Zz,meshphong_vert:Kz,meshphong_frag:Jz,meshphysical_vert:Qz,meshphysical_frag:eB,meshtoon_vert:tB,meshtoon_frag:nB,points_vert:rB,points_frag:iB,shadow_vert:sB,shadow_frag:aB,sprite_vert:oB,sprite_frag:lB},Ye={common:{diffuse:{value:new at(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Kt},alphaMap:{value:null},alphaMapTransform:{value:new Kt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Kt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Kt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Kt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Kt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Kt},normalScale:{value:new Re(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Kt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Kt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Kt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Kt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new at(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new at(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Kt},alphaTest:{value:0},uvTransform:{value:new Kt}},sprite:{diffuse:{value:new at(16777215)},opacity:{value:1},center:{value:new Re(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Kt},alphaMap:{value:null},alphaMapTransform:{value:new Kt},alphaTest:{value:0}}},aa={basic:{uniforms:Ti([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.fog]),vertexShader:Yt.meshbasic_vert,fragmentShader:Yt.meshbasic_frag},lambert:{uniforms:Ti([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,Ye.lights,{emissive:{value:new at(0)}}]),vertexShader:Yt.meshlambert_vert,fragmentShader:Yt.meshlambert_frag},phong:{uniforms:Ti([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,Ye.lights,{emissive:{value:new at(0)},specular:{value:new at(1118481)},shininess:{value:30}}]),vertexShader:Yt.meshphong_vert,fragmentShader:Yt.meshphong_frag},standard:{uniforms:Ti([Ye.common,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.roughnessmap,Ye.metalnessmap,Ye.fog,Ye.lights,{emissive:{value:new at(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Yt.meshphysical_vert,fragmentShader:Yt.meshphysical_frag},toon:{uniforms:Ti([Ye.common,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.gradientmap,Ye.fog,Ye.lights,{emissive:{value:new at(0)}}]),vertexShader:Yt.meshtoon_vert,fragmentShader:Yt.meshtoon_frag},matcap:{uniforms:Ti([Ye.common,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,{matcap:{value:null}}]),vertexShader:Yt.meshmatcap_vert,fragmentShader:Yt.meshmatcap_frag},points:{uniforms:Ti([Ye.points,Ye.fog]),vertexShader:Yt.points_vert,fragmentShader:Yt.points_frag},dashed:{uniforms:Ti([Ye.common,Ye.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Yt.linedashed_vert,fragmentShader:Yt.linedashed_frag},depth:{uniforms:Ti([Ye.common,Ye.displacementmap]),vertexShader:Yt.depth_vert,fragmentShader:Yt.depth_frag},normal:{uniforms:Ti([Ye.common,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,{opacity:{value:1}}]),vertexShader:Yt.meshnormal_vert,fragmentShader:Yt.meshnormal_frag},sprite:{uniforms:Ti([Ye.sprite,Ye.fog]),vertexShader:Yt.sprite_vert,fragmentShader:Yt.sprite_frag},background:{uniforms:{uvTransform:{value:new Kt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Yt.background_vert,fragmentShader:Yt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Yt.backgroundCube_vert,fragmentShader:Yt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Yt.cube_vert,fragmentShader:Yt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Yt.equirect_vert,fragmentShader:Yt.equirect_frag},distanceRGBA:{uniforms:Ti([Ye.common,Ye.displacementmap,{referencePosition:{value:new q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Yt.distanceRGBA_vert,fragmentShader:Yt.distanceRGBA_frag},shadow:{uniforms:Ti([Ye.lights,Ye.fog,{color:{value:new at(0)},opacity:{value:1}}]),vertexShader:Yt.shadow_vert,fragmentShader:Yt.shadow_frag}};aa.physical={uniforms:Ti([aa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Kt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Kt},clearcoatNormalScale:{value:new Re(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Kt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Kt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Kt},sheen:{value:0},sheenColor:{value:new at(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Kt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Kt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Kt},transmissionSamplerSize:{value:new Re},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Kt},attenuationDistance:{value:0},attenuationColor:{value:new at(0)},specularColor:{value:new at(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Kt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Kt},anisotropyVector:{value:new Re},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Kt}}]),vertexShader:Yt.meshphysical_vert,fragmentShader:Yt.meshphysical_frag};const wg={r:0,b:0,g:0};function cB(n,e,t,r,i,s,o){const l=new at(0);let d=s===!0?0:1,f,p,y=null,x=0,v=null;function b(M,_){let N=!1,A=_.isScene===!0?_.background:null;A&&A.isTexture&&(A=(_.backgroundBlurriness>0?t:e).get(A)),A===null?T(l,d):A&&A.isColor&&(T(A,1),N=!0);const R=n.xr.getEnvironmentBlendMode();R==="additive"?r.buffers.color.setClear(0,0,0,1,o):R==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||N)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),A&&(A.isCubeTexture||A.mapping===Eh)?(p===void 0&&(p=new _r(new Eu(1,1,1),new Fa({name:"BackgroundCubeMaterial",uniforms:xh(aa.backgroundCube.uniforms),vertexShader:aa.backgroundCube.vertexShader,fragmentShader:aa.backgroundCube.fragmentShader,side:Ri,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(D,U,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(p)),p.material.uniforms.envMap.value=A,p.material.uniforms.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,p.material.toneMapped=xn.getTransfer(A.colorSpace)!==Rn,(y!==A||x!==A.version||v!==n.toneMapping)&&(p.material.needsUpdate=!0,y=A,x=A.version,v=n.toneMapping),p.layers.enableAll(),M.unshift(p,p.geometry,p.material,0,0,null)):A&&A.isTexture&&(f===void 0&&(f=new _r(new Zp(2,2),new Fa({name:"BackgroundMaterial",uniforms:xh(aa.background.uniforms),vertexShader:aa.background.vertexShader,fragmentShader:aa.background.fragmentShader,side:Do,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(f)),f.material.uniforms.t2D.value=A,f.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,f.material.toneMapped=xn.getTransfer(A.colorSpace)!==Rn,A.matrixAutoUpdate===!0&&A.updateMatrix(),f.material.uniforms.uvTransform.value.copy(A.matrix),(y!==A||x!==A.version||v!==n.toneMapping)&&(f.material.needsUpdate=!0,y=A,x=A.version,v=n.toneMapping),f.layers.enableAll(),M.unshift(f,f.geometry,f.material,0,0,null))}function T(M,_){M.getRGB(wg,KA(n)),r.buffers.color.setClear(wg.r,wg.g,wg.b,_,o)}return{getClearColor:function(){return l},setClearColor:function(M,_=1){l.set(M),d=_,T(l,d)},getClearAlpha:function(){return d},setClearAlpha:function(M){d=M,T(l,d)},render:b}}function uB(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,l={},d=M(null);let f=d,p=!1;function y(Z,le,Q,me,$){let re=!1;if(o){const te=T(me,Q,le);f!==te&&(f=te,v(f.object)),re=_(Z,me,Q,$),re&&N(Z,me,Q,$)}else{const te=le.wireframe===!0;(f.geometry!==me.id||f.program!==Q.id||f.wireframe!==te)&&(f.geometry=me.id,f.program=Q.id,f.wireframe=te,re=!0)}$!==null&&t.update($,n.ELEMENT_ARRAY_BUFFER),(re||p)&&(p=!1,W(Z,le,Q,me),$!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get($).buffer))}function x(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function v(Z){return r.isWebGL2?n.bindVertexArray(Z):s.bindVertexArrayOES(Z)}function b(Z){return r.isWebGL2?n.deleteVertexArray(Z):s.deleteVertexArrayOES(Z)}function T(Z,le,Q){const me=Q.wireframe===!0;let $=l[Z.id];$===void 0&&($={},l[Z.id]=$);let re=$[le.id];re===void 0&&(re={},$[le.id]=re);let te=re[me];return te===void 0&&(te=M(x()),re[me]=te),te}function M(Z){const le=[],Q=[],me=[];for(let $=0;$<i;$++)le[$]=0,Q[$]=0,me[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:le,enabledAttributes:Q,attributeDivisors:me,object:Z,attributes:{},index:null}}function _(Z,le,Q,me){const $=f.attributes,re=le.attributes;let te=0;const j=Q.getAttributes();for(const X in j)if(j[X].location>=0){const fe=$[X];let Ae=re[X];if(Ae===void 0&&(X==="instanceMatrix"&&Z.instanceMatrix&&(Ae=Z.instanceMatrix),X==="instanceColor"&&Z.instanceColor&&(Ae=Z.instanceColor)),fe===void 0||fe.attribute!==Ae||Ae&&fe.data!==Ae.data)return!0;te++}return f.attributesNum!==te||f.index!==me}function N(Z,le,Q,me){const $={},re=le.attributes;let te=0;const j=Q.getAttributes();for(const X in j)if(j[X].location>=0){let fe=re[X];fe===void 0&&(X==="instanceMatrix"&&Z.instanceMatrix&&(fe=Z.instanceMatrix),X==="instanceColor"&&Z.instanceColor&&(fe=Z.instanceColor));const Ae={};Ae.attribute=fe,fe&&fe.data&&(Ae.data=fe.data),$[X]=Ae,te++}f.attributes=$,f.attributesNum=te,f.index=me}function A(){const Z=f.newAttributes;for(let le=0,Q=Z.length;le<Q;le++)Z[le]=0}function R(Z){D(Z,0)}function D(Z,le){const Q=f.newAttributes,me=f.enabledAttributes,$=f.attributeDivisors;Q[Z]=1,me[Z]===0&&(n.enableVertexAttribArray(Z),me[Z]=1),$[Z]!==le&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Z,le),$[Z]=le)}function U(){const Z=f.newAttributes,le=f.enabledAttributes;for(let Q=0,me=le.length;Q<me;Q++)le[Q]!==Z[Q]&&(n.disableVertexAttribArray(Q),le[Q]=0)}function z(Z,le,Q,me,$,re,te){te===!0?n.vertexAttribIPointer(Z,le,Q,$,re):n.vertexAttribPointer(Z,le,Q,me,$,re)}function W(Z,le,Q,me){if(r.isWebGL2===!1&&(Z.isInstancedMesh||me.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;A();const $=me.attributes,re=Q.getAttributes(),te=le.defaultAttributeValues;for(const j in re){const X=re[j];if(X.location>=0){let ee=$[j];if(ee===void 0&&(j==="instanceMatrix"&&Z.instanceMatrix&&(ee=Z.instanceMatrix),j==="instanceColor"&&Z.instanceColor&&(ee=Z.instanceColor)),ee!==void 0){const fe=ee.normalized,Ae=ee.itemSize,ke=t.get(ee);if(ke===void 0)continue;const Pe=ke.buffer,Xe=ke.type,Ke=ke.bytesPerElement,qe=r.isWebGL2===!0&&(Xe===n.INT||Xe===n.UNSIGNED_INT||ee.gpuType===__);if(ee.isInterleavedBufferAttribute){const lt=ee.data,ne=lt.stride,ze=ee.offset;if(lt.isInstancedInterleavedBuffer){for(let Ce=0;Ce<X.locationSize;Ce++)D(X.location+Ce,lt.meshPerAttribute);Z.isInstancedMesh!==!0&&me._maxInstanceCount===void 0&&(me._maxInstanceCount=lt.meshPerAttribute*lt.count)}else for(let Ce=0;Ce<X.locationSize;Ce++)R(X.location+Ce);n.bindBuffer(n.ARRAY_BUFFER,Pe);for(let Ce=0;Ce<X.locationSize;Ce++)z(X.location+Ce,Ae/X.locationSize,Xe,fe,ne*Ke,(ze+Ae/X.locationSize*Ce)*Ke,qe)}else{if(ee.isInstancedBufferAttribute){for(let lt=0;lt<X.locationSize;lt++)D(X.location+lt,ee.meshPerAttribute);Z.isInstancedMesh!==!0&&me._maxInstanceCount===void 0&&(me._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let lt=0;lt<X.locationSize;lt++)R(X.location+lt);n.bindBuffer(n.ARRAY_BUFFER,Pe);for(let lt=0;lt<X.locationSize;lt++)z(X.location+lt,Ae/X.locationSize,Xe,fe,Ae*Ke,Ae/X.locationSize*lt*Ke,qe)}}else if(te!==void 0){const fe=te[j];if(fe!==void 0)switch(fe.length){case 2:n.vertexAttrib2fv(X.location,fe);break;case 3:n.vertexAttrib3fv(X.location,fe);break;case 4:n.vertexAttrib4fv(X.location,fe);break;default:n.vertexAttrib1fv(X.location,fe)}}}}U()}function O(){ie();for(const Z in l){const le=l[Z];for(const Q in le){const me=le[Q];for(const $ in me)b(me[$].object),delete me[$];delete le[Q]}delete l[Z]}}function I(Z){if(l[Z.id]===void 0)return;const le=l[Z.id];for(const Q in le){const me=le[Q];for(const $ in me)b(me[$].object),delete me[$];delete le[Q]}delete l[Z.id]}function K(Z){for(const le in l){const Q=l[le];if(Q[Z.id]===void 0)continue;const me=Q[Z.id];for(const $ in me)b(me[$].object),delete me[$];delete Q[Z.id]}}function ie(){oe(),p=!0,f!==d&&(f=d,v(f.object))}function oe(){d.geometry=null,d.program=null,d.wireframe=!1}return{setup:y,reset:ie,resetDefaultState:oe,dispose:O,releaseStatesOfGeometry:I,releaseStatesOfProgram:K,initAttributes:A,enableAttribute:R,disableUnusedAttributes:U}}function dB(n,e,t,r){const i=r.isWebGL2;let s;function o(p){s=p}function l(p,y){n.drawArrays(s,p,y),t.update(y,s,1)}function d(p,y,x){if(x===0)return;let v,b;if(i)v=n,b="drawArraysInstanced";else if(v=e.get("ANGLE_instanced_arrays"),b="drawArraysInstancedANGLE",v===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[b](s,p,y,x),t.update(y,s,x)}function f(p,y,x){if(x===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let b=0;b<x;b++)this.render(p[b],y[b]);else{v.multiDrawArraysWEBGL(s,p,0,y,0,x);let b=0;for(let T=0;T<x;T++)b+=y[T];t.update(b,s,1)}}this.setMode=o,this.render=l,this.renderInstances=d,this.renderMultiDraw=f}function hB(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const z=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(z){if(z==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";z="mediump"}return z==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let l=t.precision!==void 0?t.precision:"highp";const d=s(l);d!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",d,"instead."),l=d);const f=o||e.has("WEBGL_draw_buffers"),p=t.logarithmicDepthBuffer===!0,y=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),b=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),T=n.getParameter(n.MAX_VERTEX_ATTRIBS),M=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),_=n.getParameter(n.MAX_VARYING_VECTORS),N=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),A=x>0,R=o||e.has("OES_texture_float"),D=A&&R,U=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:f,getMaxAnisotropy:i,getMaxPrecision:s,precision:l,logarithmicDepthBuffer:p,maxTextures:y,maxVertexTextures:x,maxTextureSize:v,maxCubemapSize:b,maxAttributes:T,maxVertexUniforms:M,maxVaryings:_,maxFragmentUniforms:N,vertexTextures:A,floatFragmentTextures:R,floatVertexTextures:D,maxSamples:U}}function fB(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Rl,l=new Kt,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(y,x){const v=y.length!==0||x||r!==0||i;return i=x,r=y.length,v},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(y,x){t=p(y,x,0)},this.setState=function(y,x,v){const b=y.clippingPlanes,T=y.clipIntersection,M=y.clipShadows,_=n.get(y);if(!i||b===null||b.length===0||s&&!M)s?p(null):f();else{const N=s?0:r,A=N*4;let R=_.clippingState||null;d.value=R,R=p(b,x,A,v);for(let D=0;D!==A;++D)R[D]=t[D];_.clippingState=R,this.numIntersection=T?this.numPlanes:0,this.numPlanes+=N}};function f(){d.value!==t&&(d.value=t,d.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function p(y,x,v,b){const T=y!==null?y.length:0;let M=null;if(T!==0){if(M=d.value,b!==!0||M===null){const _=v+T*4,N=x.matrixWorldInverse;l.getNormalMatrix(N),(M===null||M.length<_)&&(M=new Float32Array(_));for(let A=0,R=v;A!==T;++A,R+=4)o.copy(y[A]).applyMatrix4(N,l),o.normal.toArray(M,R),M[R+3]=o.constant}d.value=M,d.needsUpdate=!0}return e.numPlanes=T,e.numIntersection=0,M}}function pB(n){let e=new WeakMap;function t(o,l){return l===mp?o.mapping=Uo:l===gp&&(o.mapping=Hl),o}function r(o){if(o&&o.isTexture){const l=o.mapping;if(l===mp||l===gp)if(e.has(o)){const d=e.get(o).texture;return t(d,o.mapping)}else{const d=o.image;if(d&&d.height>0){const f=new eC(d.height/2);return f.fromEquirectangularTexture(n,o),e.set(o,f),o.addEventListener("dispose",i),t(f.texture,o.mapping)}else return null}}return o}function i(o){const l=o.target;l.removeEventListener("dispose",i);const d=e.get(l);d!==void 0&&(e.delete(l),d.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Kp extends $p{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,l=i+t,d=i-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,o=s+f*this.view.width,l-=p*this.view.offsetY,d=l-p*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,d,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const sh=4,Bb=[.125,.215,.35,.446,.526,.582],nu=20,Gx=new Kp,jb=new at;let Xx=null,$x=0,qx=0;const tu=(1+Math.sqrt(5))/2,Vd=1/tu,Vb=[new q(1,1,1),new q(-1,1,1),new q(1,1,-1),new q(-1,1,-1),new q(0,tu,Vd),new q(0,tu,-Vd),new q(Vd,0,tu),new q(-Vd,0,tu),new q(tu,Vd,0),new q(-tu,Vd,0)];class R1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){Xx=this._renderer.getRenderTarget(),$x=this._renderer.getActiveCubeFace(),qx=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Gb(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Wb(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Xx,$x,qx),e.scissorTest=!1,Sg(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Uo||e.mapping===Hl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Xx=this._renderer.getRenderTarget(),$x=this._renderer.getActiveCubeFace(),qx=this._renderer.getActiveMipmapLevel();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:lr,minFilter:lr,generateMipmaps:!1,type:mh,format:Ni,colorSpace:Oa,depthBuffer:!1},i=Hb(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Hb(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=mB(s)),this._blurMaterial=gB(s,e,t)}return i}_compileMaterial(e){const t=new _r(this._lodPlanes[0],e);this._renderer.compile(t,Gx)}_sceneToCubeUV(e,t,r,i){const l=new Br(90,1,t,r),d=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],p=this._renderer,y=p.autoClear,x=p.toneMapping;p.getClearColor(jb),p.toneMapping=La,p.autoClear=!1;const v=new Zl({name:"PMREM.Background",side:Ri,depthWrite:!1,depthTest:!1}),b=new _r(new Eu,v);let T=!1;const M=e.background;M?M.isColor&&(v.color.copy(M),e.background=null,T=!0):(v.color.copy(jb),T=!0);for(let _=0;_<6;_++){const N=_%3;N===0?(l.up.set(0,d[_],0),l.lookAt(f[_],0,0)):N===1?(l.up.set(0,0,d[_]),l.lookAt(0,f[_],0)):(l.up.set(0,d[_],0),l.lookAt(0,0,f[_]));const A=this._cubeSize;Sg(i,N*A,_>2?A:0,A,A),p.setRenderTarget(i),T&&p.render(b,l),p.render(e,l)}b.geometry.dispose(),b.material.dispose(),p.toneMapping=x,p.autoClear=y,e.background=M}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Uo||e.mapping===Hl;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=Gb()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Wb());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new _r(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const d=this._cubeSize;Sg(t,0,0,3*d,2*d),r.setRenderTarget(t),r.render(o,Gx)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=Vb[(i-1)%Vb.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,l){const d=this._renderer,f=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,y=new _r(this._lodPlanes[i],f),x=f.uniforms,v=this._sizeLods[r]-1,b=isFinite(s)?Math.PI/(2*v):2*Math.PI/(2*nu-1),T=s/b,M=isFinite(s)?1+Math.floor(p*T):nu;M>nu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${nu}`);const _=[];let N=0;for(let z=0;z<nu;++z){const W=z/T,O=Math.exp(-W*W/2);_.push(O),z===0?N+=O:z<M&&(N+=2*O)}for(let z=0;z<_.length;z++)_[z]=_[z]/N;x.envMap.value=e.texture,x.samples.value=M,x.weights.value=_,x.latitudinal.value=o==="latitudinal",l&&(x.poleAxis.value=l);const{_lodMax:A}=this;x.dTheta.value=b,x.mipInt.value=A-r;const R=this._sizeLods[i],D=3*R*(i>A-sh?i-A+sh:0),U=4*(this._cubeSize-R);Sg(t,D,U,3*R,2*R),d.setRenderTarget(t),d.render(y,Gx)}}function mB(n){const e=[],t=[],r=[];let i=n;const s=n-sh+1+Bb.length;for(let o=0;o<s;o++){const l=Math.pow(2,i);t.push(l);let d=1/l;o>n-sh?d=Bb[o-n+sh-1]:o===0&&(d=0),r.push(d);const f=1/(l-2),p=-f,y=1+f,x=[p,p,y,p,y,y,p,p,y,y,p,y],v=6,b=6,T=3,M=2,_=1,N=new Float32Array(T*b*v),A=new Float32Array(M*b*v),R=new Float32Array(_*b*v);for(let U=0;U<v;U++){const z=U%3*2/3-1,W=U>2?0:-1,O=[z,W,0,z+2/3,W,0,z+2/3,W+1,0,z,W,0,z+2/3,W+1,0,z,W+1,0];N.set(O,T*b*U),A.set(x,M*b*U);const I=[U,U,U,U,U,U];R.set(I,_*b*U)}const D=new Jt;D.setAttribute("position",new pn(N,T)),D.setAttribute("uv",new pn(A,M)),D.setAttribute("faceIndex",new pn(R,_)),e.push(D),i>sh&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function Hb(n,e,t){const r=new ua(n,e,t);return r.texture.mapping=Eh,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Sg(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function gB(n,e,t){const r=new Float32Array(nu),i=new q(0,1,0);return new Fa({name:"SphericalGaussianBlur",defines:{n:nu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:D_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Lo,depthTest:!1,depthWrite:!1})}function Wb(){return new Fa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:D_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Lo,depthTest:!1,depthWrite:!1})}function Gb(){return new Fa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:D_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Lo,depthTest:!1,depthWrite:!1})}function D_(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function yB(n){let e=new WeakMap,t=null;function r(l){if(l&&l.isTexture){const d=l.mapping,f=d===mp||d===gp,p=d===Uo||d===Hl;if(f||p)if(l.isRenderTargetTexture&&l.needsPMREMUpdate===!0){l.needsPMREMUpdate=!1;let y=e.get(l);return t===null&&(t=new R1(n)),y=f?t.fromEquirectangular(l,y):t.fromCubemap(l,y),e.set(l,y),y.texture}else{if(e.has(l))return e.get(l).texture;{const y=l.image;if(f&&y&&y.height>0||p&&y&&i(y)){t===null&&(t=new R1(n));const x=f?t.fromEquirectangular(l):t.fromCubemap(l);return e.set(l,x),l.addEventListener("dispose",s),x.texture}else return null}}}return l}function i(l){let d=0;const f=6;for(let p=0;p<f;p++)l[p]!==void 0&&d++;return d===f}function s(l){const d=l.target;d.removeEventListener("dispose",s);const f=e.get(d);f!==void 0&&(e.delete(d),f.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function xB(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function vB(n,e,t,r){const i={},s=new WeakMap;function o(y){const x=y.target;x.index!==null&&e.remove(x.index);for(const b in x.attributes)e.remove(x.attributes[b]);for(const b in x.morphAttributes){const T=x.morphAttributes[b];for(let M=0,_=T.length;M<_;M++)e.remove(T[M])}x.removeEventListener("dispose",o),delete i[x.id];const v=s.get(x);v&&(e.remove(v),s.delete(x)),r.releaseStatesOfGeometry(x),x.isInstancedBufferGeometry===!0&&delete x._maxInstanceCount,t.memory.geometries--}function l(y,x){return i[x.id]===!0||(x.addEventListener("dispose",o),i[x.id]=!0,t.memory.geometries++),x}function d(y){const x=y.attributes;for(const b in x)e.update(x[b],n.ARRAY_BUFFER);const v=y.morphAttributes;for(const b in v){const T=v[b];for(let M=0,_=T.length;M<_;M++)e.update(T[M],n.ARRAY_BUFFER)}}function f(y){const x=[],v=y.index,b=y.attributes.position;let T=0;if(v!==null){const N=v.array;T=v.version;for(let A=0,R=N.length;A<R;A+=3){const D=N[A+0],U=N[A+1],z=N[A+2];x.push(D,U,U,z,z,D)}}else if(b!==void 0){const N=b.array;T=b.version;for(let A=0,R=N.length/3-1;A<R;A+=3){const D=A+0,U=A+1,z=A+2;x.push(D,U,U,z,z,D)}}else return;const M=new($A(x)?I_:L_)(x,1);M.version=T;const _=s.get(y);_&&e.remove(_),s.set(y,M)}function p(y){const x=s.get(y);if(x){const v=y.index;v!==null&&x.version<v.version&&f(y)}else f(y);return s.get(y)}return{get:l,update:d,getWireframeAttribute:p}}function _B(n,e,t,r){const i=r.isWebGL2;let s;function o(v){s=v}let l,d;function f(v){l=v.type,d=v.bytesPerElement}function p(v,b){n.drawElements(s,b,l,v*d),t.update(b,s,1)}function y(v,b,T){if(T===0)return;let M,_;if(i)M=n,_="drawElementsInstanced";else if(M=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",M===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}M[_](s,b,l,v*d,T),t.update(b,s,T)}function x(v,b,T){if(T===0)return;const M=e.get("WEBGL_multi_draw");if(M===null)for(let _=0;_<T;_++)this.render(v[_]/d,b[_]);else{M.multiDrawElementsWEBGL(s,b,0,l,v,0,T);let _=0;for(let N=0;N<T;N++)_+=b[N];t.update(_,s,1)}}this.setMode=o,this.setIndex=f,this.render=p,this.renderInstances=y,this.renderMultiDraw=x}function wB(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,l){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=l*(s/3);break;case n.LINES:t.lines+=l*(s/2);break;case n.LINE_STRIP:t.lines+=l*(s-1);break;case n.LINE_LOOP:t.lines+=l*s;break;case n.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function SB(n,e){return n[0]-e[0]}function bB(n,e){return Math.abs(e[1])-Math.abs(n[1])}function MB(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new vn,l=[];for(let f=0;f<8;f++)l[f]=[f,0];function d(f,p,y){const x=f.morphTargetInfluences;if(e.isWebGL2===!0){const b=p.morphAttributes.position||p.morphAttributes.normal||p.morphAttributes.color,T=b!==void 0?b.length:0;let M=s.get(p);if(M===void 0||M.count!==T){let le=function(){oe.dispose(),s.delete(p),p.removeEventListener("dispose",le)};var v=le;M!==void 0&&M.texture.dispose();const A=p.morphAttributes.position!==void 0,R=p.morphAttributes.normal!==void 0,D=p.morphAttributes.color!==void 0,U=p.morphAttributes.position||[],z=p.morphAttributes.normal||[],W=p.morphAttributes.color||[];let O=0;A===!0&&(O=1),R===!0&&(O=2),D===!0&&(O=3);let I=p.attributes.position.count*O,K=1;I>e.maxTextureSize&&(K=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const ie=new Float32Array(I*K*4*T),oe=new ay(ie,I,K,T);oe.type=oa,oe.needsUpdate=!0;const Z=O*4;for(let Q=0;Q<T;Q++){const me=U[Q],$=z[Q],re=W[Q],te=I*K*4*Q;for(let j=0;j<me.count;j++){const X=j*Z;A===!0&&(o.fromBufferAttribute(me,j),ie[te+X+0]=o.x,ie[te+X+1]=o.y,ie[te+X+2]=o.z,ie[te+X+3]=0),R===!0&&(o.fromBufferAttribute($,j),ie[te+X+4]=o.x,ie[te+X+5]=o.y,ie[te+X+6]=o.z,ie[te+X+7]=0),D===!0&&(o.fromBufferAttribute(re,j),ie[te+X+8]=o.x,ie[te+X+9]=o.y,ie[te+X+10]=o.z,ie[te+X+11]=re.itemSize===4?o.w:1)}}M={count:T,texture:oe,size:new Re(I,K)},s.set(p,M),p.addEventListener("dispose",le)}let _=0;for(let A=0;A<x.length;A++)_+=x[A];const N=p.morphTargetsRelative?1:1-_;y.getUniforms().setValue(n,"morphTargetBaseInfluence",N),y.getUniforms().setValue(n,"morphTargetInfluences",x),y.getUniforms().setValue(n,"morphTargetsTexture",M.texture,t),y.getUniforms().setValue(n,"morphTargetsTextureSize",M.size)}else{const b=x===void 0?0:x.length;let T=r[p.id];if(T===void 0||T.length!==b){T=[];for(let R=0;R<b;R++)T[R]=[R,0];r[p.id]=T}for(let R=0;R<b;R++){const D=T[R];D[0]=R,D[1]=x[R]}T.sort(bB);for(let R=0;R<8;R++)R<b&&T[R][1]?(l[R][0]=T[R][0],l[R][1]=T[R][1]):(l[R][0]=Number.MAX_SAFE_INTEGER,l[R][1]=0);l.sort(SB);const M=p.morphAttributes.position,_=p.morphAttributes.normal;let N=0;for(let R=0;R<8;R++){const D=l[R],U=D[0],z=D[1];U!==Number.MAX_SAFE_INTEGER&&z?(M&&p.getAttribute("morphTarget"+R)!==M[U]&&p.setAttribute("morphTarget"+R,M[U]),_&&p.getAttribute("morphNormal"+R)!==_[U]&&p.setAttribute("morphNormal"+R,_[U]),i[R]=z,N+=z):(M&&p.hasAttribute("morphTarget"+R)===!0&&p.deleteAttribute("morphTarget"+R),_&&p.hasAttribute("morphNormal"+R)===!0&&p.deleteAttribute("morphNormal"+R),i[R]=0)}const A=p.morphTargetsRelative?1:1-N;y.getUniforms().setValue(n,"morphTargetBaseInfluence",A),y.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:d}}function EB(n,e,t,r){let i=new WeakMap;function s(d){const f=r.render.frame,p=d.geometry,y=e.get(d,p);if(i.get(y)!==f&&(e.update(y),i.set(y,f)),d.isInstancedMesh&&(d.hasEventListener("dispose",l)===!1&&d.addEventListener("dispose",l),i.get(d)!==f&&(t.update(d.instanceMatrix,n.ARRAY_BUFFER),d.instanceColor!==null&&t.update(d.instanceColor,n.ARRAY_BUFFER),i.set(d,f))),d.isSkinnedMesh){const x=d.skeleton;i.get(x)!==f&&(x.update(),i.set(x,f))}return y}function o(){i=new WeakMap}function l(d){const f=d.target;f.removeEventListener("dispose",l),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:s,dispose:o}}class U_ extends dr{constructor(e,t,r,i,s,o,l,d,f,p){if(p=p!==void 0?p:zl,p!==zl&&p!==vu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&p===zl&&(r=No),r===void 0&&p===vu&&(r=Fl),super(null,i,s,o,l,d,p,r,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=l!==void 0?l:or,this.minFilter=d!==void 0?d:or,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const nC=new dr,rC=new U_(1,1);rC.compareFunction=N_;const iC=new ay,sC=new P_,aC=new qp,Xb=[],$b=[],qb=new Float32Array(16),Yb=new Float32Array(9),Zb=new Float32Array(4);function Ah(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=Xb[i];if(s===void 0&&(s=new Float32Array(i),Xb[i]=s),e!==0){r.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=t,n[o].toArray(s,l)}return s}function Rr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Pr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function oy(n,e){let t=$b[e];t===void 0&&(t=new Int32Array(e),$b[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function TB(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function AB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Rr(t,e))return;n.uniform2fv(this.addr,e),Pr(t,e)}}function CB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Rr(t,e))return;n.uniform3fv(this.addr,e),Pr(t,e)}}function NB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Rr(t,e))return;n.uniform4fv(this.addr,e),Pr(t,e)}}function kB(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Rr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Pr(t,e)}else{if(Rr(t,r))return;Zb.set(r),n.uniformMatrix2fv(this.addr,!1,Zb),Pr(t,r)}}function RB(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Rr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Pr(t,e)}else{if(Rr(t,r))return;Yb.set(r),n.uniformMatrix3fv(this.addr,!1,Yb),Pr(t,r)}}function PB(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Rr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Pr(t,e)}else{if(Rr(t,r))return;qb.set(r),n.uniformMatrix4fv(this.addr,!1,qb),Pr(t,r)}}function LB(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function IB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Rr(t,e))return;n.uniform2iv(this.addr,e),Pr(t,e)}}function DB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Rr(t,e))return;n.uniform3iv(this.addr,e),Pr(t,e)}}function UB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Rr(t,e))return;n.uniform4iv(this.addr,e),Pr(t,e)}}function OB(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function FB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Rr(t,e))return;n.uniform2uiv(this.addr,e),Pr(t,e)}}function zB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Rr(t,e))return;n.uniform3uiv(this.addr,e),Pr(t,e)}}function BB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Rr(t,e))return;n.uniform4uiv(this.addr,e),Pr(t,e)}}function jB(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);const s=this.type===n.SAMPLER_2D_SHADOW?rC:nC;t.setTexture2D(e||s,i)}function VB(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||sC,i)}function HB(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||aC,i)}function WB(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||iC,i)}function GB(n){switch(n){case 5126:return TB;case 35664:return AB;case 35665:return CB;case 35666:return NB;case 35674:return kB;case 35675:return RB;case 35676:return PB;case 5124:case 35670:return LB;case 35667:case 35671:return IB;case 35668:case 35672:return DB;case 35669:case 35673:return UB;case 5125:return OB;case 36294:return FB;case 36295:return zB;case 36296:return BB;case 35678:case 36198:case 36298:case 36306:case 35682:return jB;case 35679:case 36299:case 36307:return VB;case 35680:case 36300:case 36308:case 36293:return HB;case 36289:case 36303:case 36311:case 36292:return WB}}function XB(n,e){n.uniform1fv(this.addr,e)}function $B(n,e){const t=Ah(e,this.size,2);n.uniform2fv(this.addr,t)}function qB(n,e){const t=Ah(e,this.size,3);n.uniform3fv(this.addr,t)}function YB(n,e){const t=Ah(e,this.size,4);n.uniform4fv(this.addr,t)}function ZB(n,e){const t=Ah(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function KB(n,e){const t=Ah(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function JB(n,e){const t=Ah(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function QB(n,e){n.uniform1iv(this.addr,e)}function ej(n,e){n.uniform2iv(this.addr,e)}function tj(n,e){n.uniform3iv(this.addr,e)}function nj(n,e){n.uniform4iv(this.addr,e)}function rj(n,e){n.uniform1uiv(this.addr,e)}function ij(n,e){n.uniform2uiv(this.addr,e)}function sj(n,e){n.uniform3uiv(this.addr,e)}function aj(n,e){n.uniform4uiv(this.addr,e)}function oj(n,e,t){const r=this.cache,i=e.length,s=oy(t,i);Rr(r,s)||(n.uniform1iv(this.addr,s),Pr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||nC,s[o])}function lj(n,e,t){const r=this.cache,i=e.length,s=oy(t,i);Rr(r,s)||(n.uniform1iv(this.addr,s),Pr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||sC,s[o])}function cj(n,e,t){const r=this.cache,i=e.length,s=oy(t,i);Rr(r,s)||(n.uniform1iv(this.addr,s),Pr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||aC,s[o])}function uj(n,e,t){const r=this.cache,i=e.length,s=oy(t,i);Rr(r,s)||(n.uniform1iv(this.addr,s),Pr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||iC,s[o])}function dj(n){switch(n){case 5126:return XB;case 35664:return $B;case 35665:return qB;case 35666:return YB;case 35674:return ZB;case 35675:return KB;case 35676:return JB;case 5124:case 35670:return QB;case 35667:case 35671:return ej;case 35668:case 35672:return tj;case 35669:case 35673:return nj;case 5125:return rj;case 36294:return ij;case 36295:return sj;case 36296:return aj;case 35678:case 36198:case 36298:case 36306:case 35682:return oj;case 35679:case 36299:case 36307:return lj;case 35680:case 36300:case 36308:case 36293:return cj;case 36289:case 36303:case 36311:case 36292:return uj}}class hj{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=GB(t.type)}}class fj{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=dj(t.type)}}class pj{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const l=i[s];l.setValue(e,t[l.id],r)}}}const Yx=/(\w+)(\])?(\[|\.)?/g;function Kb(n,e){n.seq.push(e),n.map[e.id]=e}function mj(n,e,t){const r=n.name,i=r.length;for(Yx.lastIndex=0;;){const s=Yx.exec(r),o=Yx.lastIndex;let l=s[1];const d=s[2]==="]",f=s[3];if(d&&(l=l|0),f===void 0||f==="["&&o+2===i){Kb(t,f===void 0?new hj(l,n,e):new fj(l,n,e));break}else{let y=t.map[l];y===void 0&&(y=new pj(l),Kb(t,y)),t=y}}}class u0{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);mj(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const l=t[s],d=r[l.id];d.needsUpdate!==!1&&l.setValue(e,d.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function Jb(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const gj=37297;let yj=0;function xj(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const l=o+1;r.push(`${l===e?">":" "} ${l}: ${t[o]}`)}return r.join(`
`)}function vj(n){const e=xn.getPrimaries(xn.workingColorSpace),t=xn.getPrimaries(n);let r;switch(e===t?r="":e===Mp&&t===bp?r="LinearDisplayP3ToLinearSRGB":e===bp&&t===Mp&&(r="LinearSRGBToLinearDisplayP3"),n){case Oa:case Gp:return[r,"LinearTransferOETF"];case kr:case sy:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function Qb(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+xj(n.getShaderSource(e),o)}else return i}function _j(n,e){const t=vj(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function wj(n,e){let t;switch(e){case _A:t="Linear";break;case wA:t="Reinhard";break;case SA:t="OptimizedCineon";break;case x_:t="ACESFilmic";break;case MA:t="AgX";break;case bA:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Sj(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ah).join(`
`)}function bj(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(ah).join(`
`)}function Mj(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function Ej(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let l=1;s.type===n.FLOAT_MAT2&&(l=2),s.type===n.FLOAT_MAT3&&(l=3),s.type===n.FLOAT_MAT4&&(l=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:l}}return t}function ah(n){return n!==""}function eM(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function tM(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Tj=/^[ \t]*#include +<([\w\d./]+)>/gm;function P1(n){return n.replace(Tj,Cj)}const Aj=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Cj(n,e){let t=Yt[e];if(t===void 0){const r=Aj.get(e);if(r!==void 0)t=Yt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return P1(t)}const Nj=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function nM(n){return n.replace(Nj,kj)}function kj(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function rM(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Rj(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===ty?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Qf?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===sa&&(e="SHADOWMAP_TYPE_VSM"),e}function Pj(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Uo:case Hl:e="ENVMAP_TYPE_CUBE";break;case Eh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Lj(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Hl:e="ENVMAP_MODE_REFRACTION";break}return e}function Ij(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Wp:e="ENVMAP_BLENDING_MULTIPLY";break;case xA:e="ENVMAP_BLENDING_MIX";break;case vA:e="ENVMAP_BLENDING_ADD";break}return e}function Dj(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function Uj(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,l=t.fragmentShader;const d=Rj(t),f=Pj(t),p=Lj(t),y=Ij(t),x=Dj(t),v=t.isWebGL2?"":Sj(t),b=bj(t),T=Mj(s),M=i.createProgram();let _,N,A=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,T].filter(ah).join(`
`),_.length>0&&(_+=`
`),N=[v,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,T].filter(ah).join(`
`),N.length>0&&(N+=`
`)):(_=[rM(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,T,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ah).join(`
`),N=[v,rM(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,T,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+p:"",t.envMap?"#define "+y:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==La?"#define TONE_MAPPING":"",t.toneMapping!==La?Yt.tonemapping_pars_fragment:"",t.toneMapping!==La?wj("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Yt.colorspace_pars_fragment,_j("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(ah).join(`
`)),o=P1(o),o=eM(o,t),o=tM(o,t),l=P1(l),l=eM(l,t),l=tM(l,t),o=nM(o),l=nM(l),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,_=[b,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,N=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===N1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===N1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+N);const R=A+_+o,D=A+N+l,U=Jb(i,i.VERTEX_SHADER,R),z=Jb(i,i.FRAGMENT_SHADER,D);i.attachShader(M,U),i.attachShader(M,z),t.index0AttributeName!==void 0?i.bindAttribLocation(M,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(M,0,"position"),i.linkProgram(M);function W(ie){if(n.debug.checkShaderErrors){const oe=i.getProgramInfoLog(M).trim(),Z=i.getShaderInfoLog(U).trim(),le=i.getShaderInfoLog(z).trim();let Q=!0,me=!0;if(i.getProgramParameter(M,i.LINK_STATUS)===!1)if(Q=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,M,U,z);else{const $=Qb(i,U,"vertex"),re=Qb(i,z,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(M,i.VALIDATE_STATUS)+`

Program Info Log: `+oe+`
`+$+`
`+re)}else oe!==""?console.warn("THREE.WebGLProgram: Program Info Log:",oe):(Z===""||le==="")&&(me=!1);me&&(ie.diagnostics={runnable:Q,programLog:oe,vertexShader:{log:Z,prefix:_},fragmentShader:{log:le,prefix:N}})}i.deleteShader(U),i.deleteShader(z),O=new u0(i,M),I=Ej(i,M)}let O;this.getUniforms=function(){return O===void 0&&W(this),O};let I;this.getAttributes=function(){return I===void 0&&W(this),I};let K=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return K===!1&&(K=i.getProgramParameter(M,gj)),K},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(M),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=yj++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=U,this.fragmentShader=z,this}let Oj=0;class Fj{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new zj(e),t.set(e,r)),r}}class zj{constructor(e){this.id=Oj++,this.code=e,this.usedTimes=0}}function Bj(n,e,t,r,i,s,o){const l=new pu,d=new Fj,f=[],p=i.isWebGL2,y=i.logarithmicDepthBuffer,x=i.vertexTextures;let v=i.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function T(O){return O===0?"uv":`uv${O}`}function M(O,I,K,ie,oe){const Z=ie.fog,le=oe.geometry,Q=O.isMeshStandardMaterial?ie.environment:null,me=(O.isMeshStandardMaterial?t:e).get(O.envMap||Q),$=me&&me.mapping===Eh?me.image.height:null,re=b[O.type];O.precision!==null&&(v=i.getMaxPrecision(O.precision),v!==O.precision&&console.warn("THREE.WebGLProgram.getParameters:",O.precision,"not supported, using",v,"instead."));const te=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,j=te!==void 0?te.length:0;let X=0;le.morphAttributes.position!==void 0&&(X=1),le.morphAttributes.normal!==void 0&&(X=2),le.morphAttributes.color!==void 0&&(X=3);let ee,fe,Ae,ke;if(re){const tr=aa[re];ee=tr.vertexShader,fe=tr.fragmentShader}else ee=O.vertexShader,fe=O.fragmentShader,d.update(O),Ae=d.getVertexShaderID(O),ke=d.getFragmentShaderID(O);const Pe=n.getRenderTarget(),Xe=oe.isInstancedMesh===!0,Ke=oe.isBatchedMesh===!0,qe=!!O.map,lt=!!O.matcap,ne=!!me,ze=!!O.aoMap,Ce=!!O.lightMap,je=!!O.bumpMap,Ne=!!O.normalMap,xt=!!O.displacementMap,et=!!O.emissiveMap,H=!!O.metalnessMap,B=!!O.roughnessMap,pe=O.anisotropy>0,Ue=O.clearcoat>0,Oe=O.iridescence>0,Le=O.sheen>0,pt=O.transmission>0,Ze=pe&&!!O.anisotropyMap,it=Ue&&!!O.clearcoatMap,St=Ue&&!!O.clearcoatNormalMap,Ot=Ue&&!!O.clearcoatRoughnessMap,Ie=Oe&&!!O.iridescenceMap,Qt=Oe&&!!O.iridescenceThicknessMap,Xt=Le&&!!O.sheenColorMap,Pt=Le&&!!O.sheenRoughnessMap,bt=!!O.specularMap,ht=!!O.specularColorMap,Ft=!!O.specularIntensityMap,tn=pt&&!!O.transmissionMap,_n=pt&&!!O.thicknessMap,jt=!!O.gradientMap,We=!!O.alphaMap,ae=O.alphaTest>0,$e=!!O.alphaHash,Je=!!O.extensions,Tt=!!le.attributes.uv1,Mt=!!le.attributes.uv2,fn=!!le.attributes.uv3;let un=La;return O.toneMapped&&(Pe===null||Pe.isXRRenderTarget===!0)&&(un=n.toneMapping),{isWebGL2:p,shaderID:re,shaderType:O.type,shaderName:O.name,vertexShader:ee,fragmentShader:fe,defines:O.defines,customVertexShaderID:Ae,customFragmentShaderID:ke,isRawShaderMaterial:O.isRawShaderMaterial===!0,glslVersion:O.glslVersion,precision:v,batching:Ke,instancing:Xe,instancingColor:Xe&&oe.instanceColor!==null,supportsVertexTextures:x,outputColorSpace:Pe===null?n.outputColorSpace:Pe.isXRRenderTarget===!0?Pe.texture.colorSpace:Oa,map:qe,matcap:lt,envMap:ne,envMapMode:ne&&me.mapping,envMapCubeUVHeight:$,aoMap:ze,lightMap:Ce,bumpMap:je,normalMap:Ne,displacementMap:x&&xt,emissiveMap:et,normalMapObjectSpace:Ne&&O.normalMapType===zA,normalMapTangentSpace:Ne&&O.normalMapType===Yl,metalnessMap:H,roughnessMap:B,anisotropy:pe,anisotropyMap:Ze,clearcoat:Ue,clearcoatMap:it,clearcoatNormalMap:St,clearcoatRoughnessMap:Ot,iridescence:Oe,iridescenceMap:Ie,iridescenceThicknessMap:Qt,sheen:Le,sheenColorMap:Xt,sheenRoughnessMap:Pt,specularMap:bt,specularColorMap:ht,specularIntensityMap:Ft,transmission:pt,transmissionMap:tn,thicknessMap:_n,gradientMap:jt,opaque:O.transparent===!1&&O.blending===hu,alphaMap:We,alphaTest:ae,alphaHash:$e,combine:O.combine,mapUv:qe&&T(O.map.channel),aoMapUv:ze&&T(O.aoMap.channel),lightMapUv:Ce&&T(O.lightMap.channel),bumpMapUv:je&&T(O.bumpMap.channel),normalMapUv:Ne&&T(O.normalMap.channel),displacementMapUv:xt&&T(O.displacementMap.channel),emissiveMapUv:et&&T(O.emissiveMap.channel),metalnessMapUv:H&&T(O.metalnessMap.channel),roughnessMapUv:B&&T(O.roughnessMap.channel),anisotropyMapUv:Ze&&T(O.anisotropyMap.channel),clearcoatMapUv:it&&T(O.clearcoatMap.channel),clearcoatNormalMapUv:St&&T(O.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ot&&T(O.clearcoatRoughnessMap.channel),iridescenceMapUv:Ie&&T(O.iridescenceMap.channel),iridescenceThicknessMapUv:Qt&&T(O.iridescenceThicknessMap.channel),sheenColorMapUv:Xt&&T(O.sheenColorMap.channel),sheenRoughnessMapUv:Pt&&T(O.sheenRoughnessMap.channel),specularMapUv:bt&&T(O.specularMap.channel),specularColorMapUv:ht&&T(O.specularColorMap.channel),specularIntensityMapUv:Ft&&T(O.specularIntensityMap.channel),transmissionMapUv:tn&&T(O.transmissionMap.channel),thicknessMapUv:_n&&T(O.thicknessMap.channel),alphaMapUv:We&&T(O.alphaMap.channel),vertexTangents:!!le.attributes.tangent&&(Ne||pe),vertexColors:O.vertexColors,vertexAlphas:O.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,vertexUv1s:Tt,vertexUv2s:Mt,vertexUv3s:fn,pointsUvs:oe.isPoints===!0&&!!le.attributes.uv&&(qe||We),fog:!!Z,useFog:O.fog===!0,fogExp2:Z&&Z.isFogExp2,flatShading:O.flatShading===!0,sizeAttenuation:O.sizeAttenuation===!0,logarithmicDepthBuffer:y,skinning:oe.isSkinnedMesh===!0,morphTargets:le.morphAttributes.position!==void 0,morphNormals:le.morphAttributes.normal!==void 0,morphColors:le.morphAttributes.color!==void 0,morphTargetsCount:j,morphTextureStride:X,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:O.dithering,shadowMapEnabled:n.shadowMap.enabled&&K.length>0,shadowMapType:n.shadowMap.type,toneMapping:un,useLegacyLights:n._useLegacyLights,decodeVideoTexture:qe&&O.map.isVideoTexture===!0&&xn.getTransfer(O.map.colorSpace)===Rn,premultipliedAlpha:O.premultipliedAlpha,doubleSided:O.side===Ra,flipSided:O.side===Ri,useDepthPacking:O.depthPacking>=0,depthPacking:O.depthPacking||0,index0AttributeName:O.index0AttributeName,extensionDerivatives:Je&&O.extensions.derivatives===!0,extensionFragDepth:Je&&O.extensions.fragDepth===!0,extensionDrawBuffers:Je&&O.extensions.drawBuffers===!0,extensionShaderTextureLOD:Je&&O.extensions.shaderTextureLOD===!0,extensionClipCullDistance:Je&&O.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:p||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:p||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:p||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:O.customProgramCacheKey()}}function _(O){const I=[];if(O.shaderID?I.push(O.shaderID):(I.push(O.customVertexShaderID),I.push(O.customFragmentShaderID)),O.defines!==void 0)for(const K in O.defines)I.push(K),I.push(O.defines[K]);return O.isRawShaderMaterial===!1&&(N(I,O),A(I,O),I.push(n.outputColorSpace)),I.push(O.customProgramCacheKey),I.join()}function N(O,I){O.push(I.precision),O.push(I.outputColorSpace),O.push(I.envMapMode),O.push(I.envMapCubeUVHeight),O.push(I.mapUv),O.push(I.alphaMapUv),O.push(I.lightMapUv),O.push(I.aoMapUv),O.push(I.bumpMapUv),O.push(I.normalMapUv),O.push(I.displacementMapUv),O.push(I.emissiveMapUv),O.push(I.metalnessMapUv),O.push(I.roughnessMapUv),O.push(I.anisotropyMapUv),O.push(I.clearcoatMapUv),O.push(I.clearcoatNormalMapUv),O.push(I.clearcoatRoughnessMapUv),O.push(I.iridescenceMapUv),O.push(I.iridescenceThicknessMapUv),O.push(I.sheenColorMapUv),O.push(I.sheenRoughnessMapUv),O.push(I.specularMapUv),O.push(I.specularColorMapUv),O.push(I.specularIntensityMapUv),O.push(I.transmissionMapUv),O.push(I.thicknessMapUv),O.push(I.combine),O.push(I.fogExp2),O.push(I.sizeAttenuation),O.push(I.morphTargetsCount),O.push(I.morphAttributeCount),O.push(I.numDirLights),O.push(I.numPointLights),O.push(I.numSpotLights),O.push(I.numSpotLightMaps),O.push(I.numHemiLights),O.push(I.numRectAreaLights),O.push(I.numDirLightShadows),O.push(I.numPointLightShadows),O.push(I.numSpotLightShadows),O.push(I.numSpotLightShadowsWithMaps),O.push(I.numLightProbes),O.push(I.shadowMapType),O.push(I.toneMapping),O.push(I.numClippingPlanes),O.push(I.numClipIntersection),O.push(I.depthPacking)}function A(O,I){l.disableAll(),I.isWebGL2&&l.enable(0),I.supportsVertexTextures&&l.enable(1),I.instancing&&l.enable(2),I.instancingColor&&l.enable(3),I.matcap&&l.enable(4),I.envMap&&l.enable(5),I.normalMapObjectSpace&&l.enable(6),I.normalMapTangentSpace&&l.enable(7),I.clearcoat&&l.enable(8),I.iridescence&&l.enable(9),I.alphaTest&&l.enable(10),I.vertexColors&&l.enable(11),I.vertexAlphas&&l.enable(12),I.vertexUv1s&&l.enable(13),I.vertexUv2s&&l.enable(14),I.vertexUv3s&&l.enable(15),I.vertexTangents&&l.enable(16),I.anisotropy&&l.enable(17),I.alphaHash&&l.enable(18),I.batching&&l.enable(19),O.push(l.mask),l.disableAll(),I.fog&&l.enable(0),I.useFog&&l.enable(1),I.flatShading&&l.enable(2),I.logarithmicDepthBuffer&&l.enable(3),I.skinning&&l.enable(4),I.morphTargets&&l.enable(5),I.morphNormals&&l.enable(6),I.morphColors&&l.enable(7),I.premultipliedAlpha&&l.enable(8),I.shadowMapEnabled&&l.enable(9),I.useLegacyLights&&l.enable(10),I.doubleSided&&l.enable(11),I.flipSided&&l.enable(12),I.useDepthPacking&&l.enable(13),I.dithering&&l.enable(14),I.transmission&&l.enable(15),I.sheen&&l.enable(16),I.opaque&&l.enable(17),I.pointsUvs&&l.enable(18),I.decodeVideoTexture&&l.enable(19),O.push(l.mask)}function R(O){const I=b[O.type];let K;if(I){const ie=aa[I];K=JA.clone(ie.uniforms)}else K=O.uniforms;return K}function D(O,I){let K;for(let ie=0,oe=f.length;ie<oe;ie++){const Z=f[ie];if(Z.cacheKey===I){K=Z,++K.usedTimes;break}}return K===void 0&&(K=new Uj(n,I,O,s),f.push(K)),K}function U(O){if(--O.usedTimes===0){const I=f.indexOf(O);f[I]=f[f.length-1],f.pop(),O.destroy()}}function z(O){d.remove(O)}function W(){d.dispose()}return{getParameters:M,getProgramCacheKey:_,getUniforms:R,acquireProgram:D,releaseProgram:U,releaseShaderCache:z,programs:f,dispose:W}}function jj(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,l){n.get(s)[o]=l}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function Vj(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function iM(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function sM(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(y,x,v,b,T,M){let _=n[e];return _===void 0?(_={id:y.id,object:y,geometry:x,material:v,groupOrder:b,renderOrder:y.renderOrder,z:T,group:M},n[e]=_):(_.id=y.id,_.object=y,_.geometry=x,_.material=v,_.groupOrder=b,_.renderOrder=y.renderOrder,_.z=T,_.group=M),e++,_}function l(y,x,v,b,T,M){const _=o(y,x,v,b,T,M);v.transmission>0?r.push(_):v.transparent===!0?i.push(_):t.push(_)}function d(y,x,v,b,T,M){const _=o(y,x,v,b,T,M);v.transmission>0?r.unshift(_):v.transparent===!0?i.unshift(_):t.unshift(_)}function f(y,x){t.length>1&&t.sort(y||Vj),r.length>1&&r.sort(x||iM),i.length>1&&i.sort(x||iM)}function p(){for(let y=e,x=n.length;y<x;y++){const v=n[y];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:l,unshift:d,finish:p,sort:f}}function Hj(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new sM,n.set(r,[o])):i>=s.length?(o=new sM,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Wj(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new q,color:new at};break;case"SpotLight":t={position:new q,direction:new q,color:new at,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new q,color:new at,distance:0,decay:0};break;case"HemisphereLight":t={direction:new q,skyColor:new at,groundColor:new at};break;case"RectAreaLight":t={color:new at,position:new q,halfWidth:new q,halfHeight:new q};break}return n[e.id]=t,t}}}function Gj(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Re};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Re};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Re,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Xj=0;function $j(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function qj(n,e){const t=new Wj,r=Gj(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)i.probe.push(new q);const s=new q,o=new Ut,l=new Ut;function d(p,y){let x=0,v=0,b=0;for(let ie=0;ie<9;ie++)i.probe[ie].set(0,0,0);let T=0,M=0,_=0,N=0,A=0,R=0,D=0,U=0,z=0,W=0,O=0;p.sort($j);const I=y===!0?Math.PI:1;for(let ie=0,oe=p.length;ie<oe;ie++){const Z=p[ie],le=Z.color,Q=Z.intensity,me=Z.distance,$=Z.shadow&&Z.shadow.map?Z.shadow.map.texture:null;if(Z.isAmbientLight)x+=le.r*Q*I,v+=le.g*Q*I,b+=le.b*Q*I;else if(Z.isLightProbe){for(let re=0;re<9;re++)i.probe[re].addScaledVector(Z.sh.coefficients[re],Q);O++}else if(Z.isDirectionalLight){const re=t.get(Z);if(re.color.copy(Z.color).multiplyScalar(Z.intensity*I),Z.castShadow){const te=Z.shadow,j=r.get(Z);j.shadowBias=te.bias,j.shadowNormalBias=te.normalBias,j.shadowRadius=te.radius,j.shadowMapSize=te.mapSize,i.directionalShadow[T]=j,i.directionalShadowMap[T]=$,i.directionalShadowMatrix[T]=Z.shadow.matrix,R++}i.directional[T]=re,T++}else if(Z.isSpotLight){const re=t.get(Z);re.position.setFromMatrixPosition(Z.matrixWorld),re.color.copy(le).multiplyScalar(Q*I),re.distance=me,re.coneCos=Math.cos(Z.angle),re.penumbraCos=Math.cos(Z.angle*(1-Z.penumbra)),re.decay=Z.decay,i.spot[_]=re;const te=Z.shadow;if(Z.map&&(i.spotLightMap[z]=Z.map,z++,te.updateMatrices(Z),Z.castShadow&&W++),i.spotLightMatrix[_]=te.matrix,Z.castShadow){const j=r.get(Z);j.shadowBias=te.bias,j.shadowNormalBias=te.normalBias,j.shadowRadius=te.radius,j.shadowMapSize=te.mapSize,i.spotShadow[_]=j,i.spotShadowMap[_]=$,U++}_++}else if(Z.isRectAreaLight){const re=t.get(Z);re.color.copy(le).multiplyScalar(Q),re.halfWidth.set(Z.width*.5,0,0),re.halfHeight.set(0,Z.height*.5,0),i.rectArea[N]=re,N++}else if(Z.isPointLight){const re=t.get(Z);if(re.color.copy(Z.color).multiplyScalar(Z.intensity*I),re.distance=Z.distance,re.decay=Z.decay,Z.castShadow){const te=Z.shadow,j=r.get(Z);j.shadowBias=te.bias,j.shadowNormalBias=te.normalBias,j.shadowRadius=te.radius,j.shadowMapSize=te.mapSize,j.shadowCameraNear=te.camera.near,j.shadowCameraFar=te.camera.far,i.pointShadow[M]=j,i.pointShadowMap[M]=$,i.pointShadowMatrix[M]=Z.shadow.matrix,D++}i.point[M]=re,M++}else if(Z.isHemisphereLight){const re=t.get(Z);re.skyColor.copy(Z.color).multiplyScalar(Q*I),re.groundColor.copy(Z.groundColor).multiplyScalar(Q*I),i.hemi[A]=re,A++}}N>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ye.LTC_FLOAT_1,i.rectAreaLTC2=Ye.LTC_FLOAT_2):(i.rectAreaLTC1=Ye.LTC_HALF_1,i.rectAreaLTC2=Ye.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ye.LTC_FLOAT_1,i.rectAreaLTC2=Ye.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Ye.LTC_HALF_1,i.rectAreaLTC2=Ye.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=x,i.ambient[1]=v,i.ambient[2]=b;const K=i.hash;(K.directionalLength!==T||K.pointLength!==M||K.spotLength!==_||K.rectAreaLength!==N||K.hemiLength!==A||K.numDirectionalShadows!==R||K.numPointShadows!==D||K.numSpotShadows!==U||K.numSpotMaps!==z||K.numLightProbes!==O)&&(i.directional.length=T,i.spot.length=_,i.rectArea.length=N,i.point.length=M,i.hemi.length=A,i.directionalShadow.length=R,i.directionalShadowMap.length=R,i.pointShadow.length=D,i.pointShadowMap.length=D,i.spotShadow.length=U,i.spotShadowMap.length=U,i.directionalShadowMatrix.length=R,i.pointShadowMatrix.length=D,i.spotLightMatrix.length=U+z-W,i.spotLightMap.length=z,i.numSpotLightShadowsWithMaps=W,i.numLightProbes=O,K.directionalLength=T,K.pointLength=M,K.spotLength=_,K.rectAreaLength=N,K.hemiLength=A,K.numDirectionalShadows=R,K.numPointShadows=D,K.numSpotShadows=U,K.numSpotMaps=z,K.numLightProbes=O,i.version=Xj++)}function f(p,y){let x=0,v=0,b=0,T=0,M=0;const _=y.matrixWorldInverse;for(let N=0,A=p.length;N<A;N++){const R=p[N];if(R.isDirectionalLight){const D=i.directional[x];D.direction.setFromMatrixPosition(R.matrixWorld),s.setFromMatrixPosition(R.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(_),x++}else if(R.isSpotLight){const D=i.spot[b];D.position.setFromMatrixPosition(R.matrixWorld),D.position.applyMatrix4(_),D.direction.setFromMatrixPosition(R.matrixWorld),s.setFromMatrixPosition(R.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(_),b++}else if(R.isRectAreaLight){const D=i.rectArea[T];D.position.setFromMatrixPosition(R.matrixWorld),D.position.applyMatrix4(_),l.identity(),o.copy(R.matrixWorld),o.premultiply(_),l.extractRotation(o),D.halfWidth.set(R.width*.5,0,0),D.halfHeight.set(0,R.height*.5,0),D.halfWidth.applyMatrix4(l),D.halfHeight.applyMatrix4(l),T++}else if(R.isPointLight){const D=i.point[v];D.position.setFromMatrixPosition(R.matrixWorld),D.position.applyMatrix4(_),v++}else if(R.isHemisphereLight){const D=i.hemi[M];D.direction.setFromMatrixPosition(R.matrixWorld),D.direction.transformDirection(_),M++}}}return{setup:d,setupView:f,state:i}}function aM(n,e){const t=new qj(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(y){r.push(y)}function l(y){i.push(y)}function d(y){t.setup(r,y)}function f(y){t.setupView(r,y)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:d,setupLightsView:f,pushLight:o,pushShadow:l}}function Yj(n,e){let t=new WeakMap;function r(s,o=0){const l=t.get(s);let d;return l===void 0?(d=new aM(n,e),t.set(s,[d])):o>=l.length?(d=new aM(n,e),l.push(d)):d=l[o],d}function i(){t=new WeakMap}return{get:r,dispose:i}}class O_ extends fi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=OA,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class F_ extends fi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Zj=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Kj=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Jj(n,e,t){let r=new Yp;const i=new Re,s=new Re,o=new vn,l=new O_({depthPacking:FA}),d=new F_,f={},p=t.maxTextureSize,y={[Do]:Ri,[Ri]:Do,[Ra]:Ra},x=new Fa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Re},radius:{value:4}},vertexShader:Zj,fragmentShader:Kj}),v=x.clone();v.defines.HORIZONTAL_PASS=1;const b=new Jt;b.setAttribute("position",new pn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const T=new _r(b,x),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ty;let _=this.type;this.render=function(U,z,W){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||U.length===0)return;const O=n.getRenderTarget(),I=n.getActiveCubeFace(),K=n.getActiveMipmapLevel(),ie=n.state;ie.setBlending(Lo),ie.buffers.color.setClear(1,1,1,1),ie.buffers.depth.setTest(!0),ie.setScissorTest(!1);const oe=_!==sa&&this.type===sa,Z=_===sa&&this.type!==sa;for(let le=0,Q=U.length;le<Q;le++){const me=U[le],$=me.shadow;if($===void 0){console.warn("THREE.WebGLShadowMap:",me,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;i.copy($.mapSize);const re=$.getFrameExtents();if(i.multiply(re),s.copy($.mapSize),(i.x>p||i.y>p)&&(i.x>p&&(s.x=Math.floor(p/re.x),i.x=s.x*re.x,$.mapSize.x=s.x),i.y>p&&(s.y=Math.floor(p/re.y),i.y=s.y*re.y,$.mapSize.y=s.y)),$.map===null||oe===!0||Z===!0){const j=this.type!==sa?{minFilter:or,magFilter:or}:{};$.map!==null&&$.map.dispose(),$.map=new ua(i.x,i.y,j),$.map.texture.name=me.name+".shadowMap",$.camera.updateProjectionMatrix()}n.setRenderTarget($.map),n.clear();const te=$.getViewportCount();for(let j=0;j<te;j++){const X=$.getViewport(j);o.set(s.x*X.x,s.y*X.y,s.x*X.z,s.y*X.w),ie.viewport(o),$.updateMatrices(me,j),r=$.getFrustum(),R(z,W,$.camera,me,this.type)}$.isPointLightShadow!==!0&&this.type===sa&&N($,W),$.needsUpdate=!1}_=this.type,M.needsUpdate=!1,n.setRenderTarget(O,I,K)};function N(U,z){const W=e.update(T);x.defines.VSM_SAMPLES!==U.blurSamples&&(x.defines.VSM_SAMPLES=U.blurSamples,v.defines.VSM_SAMPLES=U.blurSamples,x.needsUpdate=!0,v.needsUpdate=!0),U.mapPass===null&&(U.mapPass=new ua(i.x,i.y)),x.uniforms.shadow_pass.value=U.map.texture,x.uniforms.resolution.value=U.mapSize,x.uniforms.radius.value=U.radius,n.setRenderTarget(U.mapPass),n.clear(),n.renderBufferDirect(z,null,W,x,T,null),v.uniforms.shadow_pass.value=U.mapPass.texture,v.uniforms.resolution.value=U.mapSize,v.uniforms.radius.value=U.radius,n.setRenderTarget(U.map),n.clear(),n.renderBufferDirect(z,null,W,v,T,null)}function A(U,z,W,O){let I=null;const K=W.isPointLight===!0?U.customDistanceMaterial:U.customDepthMaterial;if(K!==void 0)I=K;else if(I=W.isPointLight===!0?d:l,n.localClippingEnabled&&z.clipShadows===!0&&Array.isArray(z.clippingPlanes)&&z.clippingPlanes.length!==0||z.displacementMap&&z.displacementScale!==0||z.alphaMap&&z.alphaTest>0||z.map&&z.alphaTest>0){const ie=I.uuid,oe=z.uuid;let Z=f[ie];Z===void 0&&(Z={},f[ie]=Z);let le=Z[oe];le===void 0&&(le=I.clone(),Z[oe]=le,z.addEventListener("dispose",D)),I=le}if(I.visible=z.visible,I.wireframe=z.wireframe,O===sa?I.side=z.shadowSide!==null?z.shadowSide:z.side:I.side=z.shadowSide!==null?z.shadowSide:y[z.side],I.alphaMap=z.alphaMap,I.alphaTest=z.alphaTest,I.map=z.map,I.clipShadows=z.clipShadows,I.clippingPlanes=z.clippingPlanes,I.clipIntersection=z.clipIntersection,I.displacementMap=z.displacementMap,I.displacementScale=z.displacementScale,I.displacementBias=z.displacementBias,I.wireframeLinewidth=z.wireframeLinewidth,I.linewidth=z.linewidth,W.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const ie=n.properties.get(I);ie.light=W}return I}function R(U,z,W,O,I){if(U.visible===!1)return;if(U.layers.test(z.layers)&&(U.isMesh||U.isLine||U.isPoints)&&(U.castShadow||U.receiveShadow&&I===sa)&&(!U.frustumCulled||r.intersectsObject(U))){U.modelViewMatrix.multiplyMatrices(W.matrixWorldInverse,U.matrixWorld);const oe=e.update(U),Z=U.material;if(Array.isArray(Z)){const le=oe.groups;for(let Q=0,me=le.length;Q<me;Q++){const $=le[Q],re=Z[$.materialIndex];if(re&&re.visible){const te=A(U,re,O,I);U.onBeforeShadow(n,U,z,W,oe,te,$),n.renderBufferDirect(W,null,oe,te,U,$),U.onAfterShadow(n,U,z,W,oe,te,$)}}}else if(Z.visible){const le=A(U,Z,O,I);U.onBeforeShadow(n,U,z,W,oe,le,null),n.renderBufferDirect(W,null,oe,le,U,null),U.onAfterShadow(n,U,z,W,oe,le,null)}}const ie=U.children;for(let oe=0,Z=ie.length;oe<Z;oe++)R(ie[oe],z,W,O,I)}function D(U){U.target.removeEventListener("dispose",D);for(const W in f){const O=f[W],I=U.target.uuid;I in O&&(O[I].dispose(),delete O[I])}}}function Qj(n,e,t){const r=t.isWebGL2;function i(){let ae=!1;const $e=new vn;let Je=null;const Tt=new vn(0,0,0,0);return{setMask:function(Mt){Je!==Mt&&!ae&&(n.colorMask(Mt,Mt,Mt,Mt),Je=Mt)},setLocked:function(Mt){ae=Mt},setClear:function(Mt,fn,un,Ln,tr){tr===!0&&(Mt*=Ln,fn*=Ln,un*=Ln),$e.set(Mt,fn,un,Ln),Tt.equals($e)===!1&&(n.clearColor(Mt,fn,un,Ln),Tt.copy($e))},reset:function(){ae=!1,Je=null,Tt.set(-1,0,0,0)}}}function s(){let ae=!1,$e=null,Je=null,Tt=null;return{setTest:function(Mt){Mt?Ke(n.DEPTH_TEST):qe(n.DEPTH_TEST)},setMask:function(Mt){$e!==Mt&&!ae&&(n.depthMask(Mt),$e=Mt)},setFunc:function(Mt){if(Je!==Mt){switch(Mt){case dA:n.depthFunc(n.NEVER);break;case hA:n.depthFunc(n.ALWAYS);break;case fA:n.depthFunc(n.LESS);break;case pp:n.depthFunc(n.LEQUAL);break;case pA:n.depthFunc(n.EQUAL);break;case mA:n.depthFunc(n.GEQUAL);break;case gA:n.depthFunc(n.GREATER);break;case yA:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Je=Mt}},setLocked:function(Mt){ae=Mt},setClear:function(Mt){Tt!==Mt&&(n.clearDepth(Mt),Tt=Mt)},reset:function(){ae=!1,$e=null,Je=null,Tt=null}}}function o(){let ae=!1,$e=null,Je=null,Tt=null,Mt=null,fn=null,un=null,Ln=null,tr=null;return{setTest:function(sn){ae||(sn?Ke(n.STENCIL_TEST):qe(n.STENCIL_TEST))},setMask:function(sn){$e!==sn&&!ae&&(n.stencilMask(sn),$e=sn)},setFunc:function(sn,nr,Lr){(Je!==sn||Tt!==nr||Mt!==Lr)&&(n.stencilFunc(sn,nr,Lr),Je=sn,Tt=nr,Mt=Lr)},setOp:function(sn,nr,Lr){(fn!==sn||un!==nr||Ln!==Lr)&&(n.stencilOp(sn,nr,Lr),fn=sn,un=nr,Ln=Lr)},setLocked:function(sn){ae=sn},setClear:function(sn){tr!==sn&&(n.clearStencil(sn),tr=sn)},reset:function(){ae=!1,$e=null,Je=null,Tt=null,Mt=null,fn=null,un=null,Ln=null,tr=null}}}const l=new i,d=new s,f=new o,p=new WeakMap,y=new WeakMap;let x={},v={},b=new WeakMap,T=[],M=null,_=!1,N=null,A=null,R=null,D=null,U=null,z=null,W=null,O=new at(0,0,0),I=0,K=!1,ie=null,oe=null,Z=null,le=null,Q=null;const me=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let $=!1,re=0;const te=n.getParameter(n.VERSION);te.indexOf("WebGL")!==-1?(re=parseFloat(/^WebGL (\d)/.exec(te)[1]),$=re>=1):te.indexOf("OpenGL ES")!==-1&&(re=parseFloat(/^OpenGL ES (\d)/.exec(te)[1]),$=re>=2);let j=null,X={};const ee=n.getParameter(n.SCISSOR_BOX),fe=n.getParameter(n.VIEWPORT),Ae=new vn().fromArray(ee),ke=new vn().fromArray(fe);function Pe(ae,$e,Je,Tt){const Mt=new Uint8Array(4),fn=n.createTexture();n.bindTexture(ae,fn),n.texParameteri(ae,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ae,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let un=0;un<Je;un++)r&&(ae===n.TEXTURE_3D||ae===n.TEXTURE_2D_ARRAY)?n.texImage3D($e,0,n.RGBA,1,1,Tt,0,n.RGBA,n.UNSIGNED_BYTE,Mt):n.texImage2D($e+un,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Mt);return fn}const Xe={};Xe[n.TEXTURE_2D]=Pe(n.TEXTURE_2D,n.TEXTURE_2D,1),Xe[n.TEXTURE_CUBE_MAP]=Pe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(Xe[n.TEXTURE_2D_ARRAY]=Pe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Xe[n.TEXTURE_3D]=Pe(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),l.setClear(0,0,0,1),d.setClear(1),f.setClear(0),Ke(n.DEPTH_TEST),d.setFunc(pp),et(!1),H(Kv),Ke(n.CULL_FACE),Ne(Lo);function Ke(ae){x[ae]!==!0&&(n.enable(ae),x[ae]=!0)}function qe(ae){x[ae]!==!1&&(n.disable(ae),x[ae]=!1)}function lt(ae,$e){return v[ae]!==$e?(n.bindFramebuffer(ae,$e),v[ae]=$e,r&&(ae===n.DRAW_FRAMEBUFFER&&(v[n.FRAMEBUFFER]=$e),ae===n.FRAMEBUFFER&&(v[n.DRAW_FRAMEBUFFER]=$e)),!0):!1}function ne(ae,$e){let Je=T,Tt=!1;if(ae)if(Je=b.get($e),Je===void 0&&(Je=[],b.set($e,Je)),ae.isWebGLMultipleRenderTargets){const Mt=ae.texture;if(Je.length!==Mt.length||Je[0]!==n.COLOR_ATTACHMENT0){for(let fn=0,un=Mt.length;fn<un;fn++)Je[fn]=n.COLOR_ATTACHMENT0+fn;Je.length=Mt.length,Tt=!0}}else Je[0]!==n.COLOR_ATTACHMENT0&&(Je[0]=n.COLOR_ATTACHMENT0,Tt=!0);else Je[0]!==n.BACK&&(Je[0]=n.BACK,Tt=!0);Tt&&(t.isWebGL2?n.drawBuffers(Je):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Je))}function ze(ae){return M!==ae?(n.useProgram(ae),M=ae,!0):!1}const Ce={[Ll]:n.FUNC_ADD,[ZT]:n.FUNC_SUBTRACT,[KT]:n.FUNC_REVERSE_SUBTRACT};if(r)Ce[e1]=n.MIN,Ce[t1]=n.MAX;else{const ae=e.get("EXT_blend_minmax");ae!==null&&(Ce[e1]=ae.MIN_EXT,Ce[t1]=ae.MAX_EXT)}const je={[JT]:n.ZERO,[QT]:n.ONE,[eA]:n.SRC_COLOR,[T0]:n.SRC_ALPHA,[aA]:n.SRC_ALPHA_SATURATE,[iA]:n.DST_COLOR,[nA]:n.DST_ALPHA,[tA]:n.ONE_MINUS_SRC_COLOR,[A0]:n.ONE_MINUS_SRC_ALPHA,[sA]:n.ONE_MINUS_DST_COLOR,[rA]:n.ONE_MINUS_DST_ALPHA,[oA]:n.CONSTANT_COLOR,[lA]:n.ONE_MINUS_CONSTANT_COLOR,[cA]:n.CONSTANT_ALPHA,[uA]:n.ONE_MINUS_CONSTANT_ALPHA};function Ne(ae,$e,Je,Tt,Mt,fn,un,Ln,tr,sn){if(ae===Lo){_===!0&&(qe(n.BLEND),_=!1);return}if(_===!1&&(Ke(n.BLEND),_=!0),ae!==YT){if(ae!==N||sn!==K){if((A!==Ll||U!==Ll)&&(n.blendEquation(n.FUNC_ADD),A=Ll,U=Ll),sn)switch(ae){case hu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case E0:n.blendFunc(n.ONE,n.ONE);break;case Jv:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Qv:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ae);break}else switch(ae){case hu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case E0:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Jv:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Qv:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ae);break}R=null,D=null,z=null,W=null,O.set(0,0,0),I=0,N=ae,K=sn}return}Mt=Mt||$e,fn=fn||Je,un=un||Tt,($e!==A||Mt!==U)&&(n.blendEquationSeparate(Ce[$e],Ce[Mt]),A=$e,U=Mt),(Je!==R||Tt!==D||fn!==z||un!==W)&&(n.blendFuncSeparate(je[Je],je[Tt],je[fn],je[un]),R=Je,D=Tt,z=fn,W=un),(Ln.equals(O)===!1||tr!==I)&&(n.blendColor(Ln.r,Ln.g,Ln.b,tr),O.copy(Ln),I=tr),N=ae,K=!1}function xt(ae,$e){ae.side===Ra?qe(n.CULL_FACE):Ke(n.CULL_FACE);let Je=ae.side===Ri;$e&&(Je=!Je),et(Je),ae.blending===hu&&ae.transparent===!1?Ne(Lo):Ne(ae.blending,ae.blendEquation,ae.blendSrc,ae.blendDst,ae.blendEquationAlpha,ae.blendSrcAlpha,ae.blendDstAlpha,ae.blendColor,ae.blendAlpha,ae.premultipliedAlpha),d.setFunc(ae.depthFunc),d.setTest(ae.depthTest),d.setMask(ae.depthWrite),l.setMask(ae.colorWrite);const Tt=ae.stencilWrite;f.setTest(Tt),Tt&&(f.setMask(ae.stencilWriteMask),f.setFunc(ae.stencilFunc,ae.stencilRef,ae.stencilFuncMask),f.setOp(ae.stencilFail,ae.stencilZFail,ae.stencilZPass)),pe(ae.polygonOffset,ae.polygonOffsetFactor,ae.polygonOffsetUnits),ae.alphaToCoverage===!0?Ke(n.SAMPLE_ALPHA_TO_COVERAGE):qe(n.SAMPLE_ALPHA_TO_COVERAGE)}function et(ae){ie!==ae&&(ae?n.frontFace(n.CW):n.frontFace(n.CCW),ie=ae)}function H(ae){ae!==XT?(Ke(n.CULL_FACE),ae!==oe&&(ae===Kv?n.cullFace(n.BACK):ae===$T?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):qe(n.CULL_FACE),oe=ae}function B(ae){ae!==Z&&($&&n.lineWidth(ae),Z=ae)}function pe(ae,$e,Je){ae?(Ke(n.POLYGON_OFFSET_FILL),(le!==$e||Q!==Je)&&(n.polygonOffset($e,Je),le=$e,Q=Je)):qe(n.POLYGON_OFFSET_FILL)}function Ue(ae){ae?Ke(n.SCISSOR_TEST):qe(n.SCISSOR_TEST)}function Oe(ae){ae===void 0&&(ae=n.TEXTURE0+me-1),j!==ae&&(n.activeTexture(ae),j=ae)}function Le(ae,$e,Je){Je===void 0&&(j===null?Je=n.TEXTURE0+me-1:Je=j);let Tt=X[Je];Tt===void 0&&(Tt={type:void 0,texture:void 0},X[Je]=Tt),(Tt.type!==ae||Tt.texture!==$e)&&(j!==Je&&(n.activeTexture(Je),j=Je),n.bindTexture(ae,$e||Xe[ae]),Tt.type=ae,Tt.texture=$e)}function pt(){const ae=X[j];ae!==void 0&&ae.type!==void 0&&(n.bindTexture(ae.type,null),ae.type=void 0,ae.texture=void 0)}function Ze(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function it(){try{n.compressedTexImage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function St(){try{n.texSubImage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Ot(){try{n.texSubImage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Ie(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Qt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Xt(){try{n.texStorage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Pt(){try{n.texStorage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function bt(){try{n.texImage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function ht(){try{n.texImage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Ft(ae){Ae.equals(ae)===!1&&(n.scissor(ae.x,ae.y,ae.z,ae.w),Ae.copy(ae))}function tn(ae){ke.equals(ae)===!1&&(n.viewport(ae.x,ae.y,ae.z,ae.w),ke.copy(ae))}function _n(ae,$e){let Je=y.get($e);Je===void 0&&(Je=new WeakMap,y.set($e,Je));let Tt=Je.get(ae);Tt===void 0&&(Tt=n.getUniformBlockIndex($e,ae.name),Je.set(ae,Tt))}function jt(ae,$e){const Tt=y.get($e).get(ae);p.get($e)!==Tt&&(n.uniformBlockBinding($e,Tt,ae.__bindingPointIndex),p.set($e,Tt))}function We(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),x={},j=null,X={},v={},b=new WeakMap,T=[],M=null,_=!1,N=null,A=null,R=null,D=null,U=null,z=null,W=null,O=new at(0,0,0),I=0,K=!1,ie=null,oe=null,Z=null,le=null,Q=null,Ae.set(0,0,n.canvas.width,n.canvas.height),ke.set(0,0,n.canvas.width,n.canvas.height),l.reset(),d.reset(),f.reset()}return{buffers:{color:l,depth:d,stencil:f},enable:Ke,disable:qe,bindFramebuffer:lt,drawBuffers:ne,useProgram:ze,setBlending:Ne,setMaterial:xt,setFlipSided:et,setCullFace:H,setLineWidth:B,setPolygonOffset:pe,setScissorTest:Ue,activeTexture:Oe,bindTexture:Le,unbindTexture:pt,compressedTexImage2D:Ze,compressedTexImage3D:it,texImage2D:bt,texImage3D:ht,updateUBOMapping:_n,uniformBlockBinding:jt,texStorage2D:Xt,texStorage3D:Pt,texSubImage2D:St,texSubImage3D:Ot,compressedTexSubImage2D:Ie,compressedTexSubImage3D:Qt,scissor:Ft,viewport:tn,reset:We}}function e6(n,e,t,r,i,s,o){const l=i.isWebGL2,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let y;const x=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(H,B){return v?new OffscreenCanvas(H,B):Tp("canvas")}function T(H,B,pe,Ue){let Oe=1;if((H.width>Ue||H.height>Ue)&&(Oe=Ue/Math.max(H.width,H.height)),Oe<1||B===!0)if(typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&H instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&H instanceof ImageBitmap){const Le=B?k0:Math.floor,pt=Le(Oe*H.width),Ze=Le(Oe*H.height);y===void 0&&(y=b(pt,Ze));const it=pe?b(pt,Ze):y;return it.width=pt,it.height=Ze,it.getContext("2d").drawImage(H,0,0,pt,Ze),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+H.width+"x"+H.height+") to ("+pt+"x"+Ze+")."),it}else return"data"in H&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+H.width+"x"+H.height+")."),H;return H}function M(H){return k1(H.width)&&k1(H.height)}function _(H){return l?!1:H.wrapS!==di||H.wrapT!==di||H.minFilter!==or&&H.minFilter!==lr}function N(H,B){return H.generateMipmaps&&B&&H.minFilter!==or&&H.minFilter!==lr}function A(H){n.generateMipmap(H)}function R(H,B,pe,Ue,Oe=!1){if(l===!1)return B;if(H!==null){if(n[H]!==void 0)return n[H];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+H+"'")}let Le=B;if(B===n.RED&&(pe===n.FLOAT&&(Le=n.R32F),pe===n.HALF_FLOAT&&(Le=n.R16F),pe===n.UNSIGNED_BYTE&&(Le=n.R8)),B===n.RED_INTEGER&&(pe===n.UNSIGNED_BYTE&&(Le=n.R8UI),pe===n.UNSIGNED_SHORT&&(Le=n.R16UI),pe===n.UNSIGNED_INT&&(Le=n.R32UI),pe===n.BYTE&&(Le=n.R8I),pe===n.SHORT&&(Le=n.R16I),pe===n.INT&&(Le=n.R32I)),B===n.RG&&(pe===n.FLOAT&&(Le=n.RG32F),pe===n.HALF_FLOAT&&(Le=n.RG16F),pe===n.UNSIGNED_BYTE&&(Le=n.RG8)),B===n.RGBA){const pt=Oe?Sp:xn.getTransfer(Ue);pe===n.FLOAT&&(Le=n.RGBA32F),pe===n.HALF_FLOAT&&(Le=n.RGBA16F),pe===n.UNSIGNED_BYTE&&(Le=pt===Rn?n.SRGB8_ALPHA8:n.RGBA8),pe===n.UNSIGNED_SHORT_4_4_4_4&&(Le=n.RGBA4),pe===n.UNSIGNED_SHORT_5_5_5_1&&(Le=n.RGB5_A1)}return(Le===n.R16F||Le===n.R32F||Le===n.RG16F||Le===n.RG32F||Le===n.RGBA16F||Le===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Le}function D(H,B,pe){return N(H,pe)===!0||H.isFramebufferTexture&&H.minFilter!==or&&H.minFilter!==lr?Math.log2(Math.max(B.width,B.height))+1:H.mipmaps!==void 0&&H.mipmaps.length>0?H.mipmaps.length:H.isCompressedTexture&&Array.isArray(H.image)?B.mipmaps.length:1}function U(H){return H===or||H===C0||H===ep?n.NEAREST:n.LINEAR}function z(H){const B=H.target;B.removeEventListener("dispose",z),O(B),B.isVideoTexture&&p.delete(B)}function W(H){const B=H.target;B.removeEventListener("dispose",W),K(B)}function O(H){const B=r.get(H);if(B.__webglInit===void 0)return;const pe=H.source,Ue=x.get(pe);if(Ue){const Oe=Ue[B.__cacheKey];Oe.usedTimes--,Oe.usedTimes===0&&I(H),Object.keys(Ue).length===0&&x.delete(pe)}r.remove(H)}function I(H){const B=r.get(H);n.deleteTexture(B.__webglTexture);const pe=H.source,Ue=x.get(pe);delete Ue[B.__cacheKey],o.memory.textures--}function K(H){const B=H.texture,pe=r.get(H),Ue=r.get(B);if(Ue.__webglTexture!==void 0&&(n.deleteTexture(Ue.__webglTexture),o.memory.textures--),H.depthTexture&&H.depthTexture.dispose(),H.isWebGLCubeRenderTarget)for(let Oe=0;Oe<6;Oe++){if(Array.isArray(pe.__webglFramebuffer[Oe]))for(let Le=0;Le<pe.__webglFramebuffer[Oe].length;Le++)n.deleteFramebuffer(pe.__webglFramebuffer[Oe][Le]);else n.deleteFramebuffer(pe.__webglFramebuffer[Oe]);pe.__webglDepthbuffer&&n.deleteRenderbuffer(pe.__webglDepthbuffer[Oe])}else{if(Array.isArray(pe.__webglFramebuffer))for(let Oe=0;Oe<pe.__webglFramebuffer.length;Oe++)n.deleteFramebuffer(pe.__webglFramebuffer[Oe]);else n.deleteFramebuffer(pe.__webglFramebuffer);if(pe.__webglDepthbuffer&&n.deleteRenderbuffer(pe.__webglDepthbuffer),pe.__webglMultisampledFramebuffer&&n.deleteFramebuffer(pe.__webglMultisampledFramebuffer),pe.__webglColorRenderbuffer)for(let Oe=0;Oe<pe.__webglColorRenderbuffer.length;Oe++)pe.__webglColorRenderbuffer[Oe]&&n.deleteRenderbuffer(pe.__webglColorRenderbuffer[Oe]);pe.__webglDepthRenderbuffer&&n.deleteRenderbuffer(pe.__webglDepthRenderbuffer)}if(H.isWebGLMultipleRenderTargets)for(let Oe=0,Le=B.length;Oe<Le;Oe++){const pt=r.get(B[Oe]);pt.__webglTexture&&(n.deleteTexture(pt.__webglTexture),o.memory.textures--),r.remove(B[Oe])}r.remove(B),r.remove(H)}let ie=0;function oe(){ie=0}function Z(){const H=ie;return H>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+H+" texture units while this GPU supports only "+i.maxTextures),ie+=1,H}function le(H){const B=[];return B.push(H.wrapS),B.push(H.wrapT),B.push(H.wrapR||0),B.push(H.magFilter),B.push(H.minFilter),B.push(H.anisotropy),B.push(H.internalFormat),B.push(H.format),B.push(H.type),B.push(H.generateMipmaps),B.push(H.premultiplyAlpha),B.push(H.flipY),B.push(H.unpackAlignment),B.push(H.colorSpace),B.join()}function Q(H,B){const pe=r.get(H);if(H.isVideoTexture&&xt(H),H.isRenderTargetTexture===!1&&H.version>0&&pe.__version!==H.version){const Ue=H.image;if(Ue===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ue.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ae(pe,H,B);return}}t.bindTexture(n.TEXTURE_2D,pe.__webglTexture,n.TEXTURE0+B)}function me(H,B){const pe=r.get(H);if(H.version>0&&pe.__version!==H.version){Ae(pe,H,B);return}t.bindTexture(n.TEXTURE_2D_ARRAY,pe.__webglTexture,n.TEXTURE0+B)}function $(H,B){const pe=r.get(H);if(H.version>0&&pe.__version!==H.version){Ae(pe,H,B);return}t.bindTexture(n.TEXTURE_3D,pe.__webglTexture,n.TEXTURE0+B)}function re(H,B){const pe=r.get(H);if(H.version>0&&pe.__version!==H.version){ke(pe,H,B);return}t.bindTexture(n.TEXTURE_CUBE_MAP,pe.__webglTexture,n.TEXTURE0+B)}const te={[yp]:n.REPEAT,[di]:n.CLAMP_TO_EDGE,[xp]:n.MIRRORED_REPEAT},j={[or]:n.NEAREST,[C0]:n.NEAREST_MIPMAP_NEAREST,[ep]:n.NEAREST_MIPMAP_LINEAR,[lr]:n.LINEAR,[v_]:n.LINEAR_MIPMAP_NEAREST,[Wl]:n.LINEAR_MIPMAP_LINEAR},X={[BA]:n.NEVER,[XA]:n.ALWAYS,[jA]:n.LESS,[N_]:n.LEQUAL,[VA]:n.EQUAL,[GA]:n.GEQUAL,[HA]:n.GREATER,[WA]:n.NOTEQUAL};function ee(H,B,pe){if(pe?(n.texParameteri(H,n.TEXTURE_WRAP_S,te[B.wrapS]),n.texParameteri(H,n.TEXTURE_WRAP_T,te[B.wrapT]),(H===n.TEXTURE_3D||H===n.TEXTURE_2D_ARRAY)&&n.texParameteri(H,n.TEXTURE_WRAP_R,te[B.wrapR]),n.texParameteri(H,n.TEXTURE_MAG_FILTER,j[B.magFilter]),n.texParameteri(H,n.TEXTURE_MIN_FILTER,j[B.minFilter])):(n.texParameteri(H,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(H,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(H===n.TEXTURE_3D||H===n.TEXTURE_2D_ARRAY)&&n.texParameteri(H,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(B.wrapS!==di||B.wrapT!==di)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(H,n.TEXTURE_MAG_FILTER,U(B.magFilter)),n.texParameteri(H,n.TEXTURE_MIN_FILTER,U(B.minFilter)),B.minFilter!==or&&B.minFilter!==lr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),B.compareFunction&&(n.texParameteri(H,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(H,n.TEXTURE_COMPARE_FUNC,X[B.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Ue=e.get("EXT_texture_filter_anisotropic");if(B.magFilter===or||B.minFilter!==ep&&B.minFilter!==Wl||B.type===oa&&e.has("OES_texture_float_linear")===!1||l===!1&&B.type===mh&&e.has("OES_texture_half_float_linear")===!1)return;(B.anisotropy>1||r.get(B).__currentAnisotropy)&&(n.texParameterf(H,Ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,i.getMaxAnisotropy())),r.get(B).__currentAnisotropy=B.anisotropy)}}function fe(H,B){let pe=!1;H.__webglInit===void 0&&(H.__webglInit=!0,B.addEventListener("dispose",z));const Ue=B.source;let Oe=x.get(Ue);Oe===void 0&&(Oe={},x.set(Ue,Oe));const Le=le(B);if(Le!==H.__cacheKey){Oe[Le]===void 0&&(Oe[Le]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,pe=!0),Oe[Le].usedTimes++;const pt=Oe[H.__cacheKey];pt!==void 0&&(Oe[H.__cacheKey].usedTimes--,pt.usedTimes===0&&I(B)),H.__cacheKey=Le,H.__webglTexture=Oe[Le].texture}return pe}function Ae(H,B,pe){let Ue=n.TEXTURE_2D;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(Ue=n.TEXTURE_2D_ARRAY),B.isData3DTexture&&(Ue=n.TEXTURE_3D);const Oe=fe(H,B),Le=B.source;t.bindTexture(Ue,H.__webglTexture,n.TEXTURE0+pe);const pt=r.get(Le);if(Le.version!==pt.__version||Oe===!0){t.activeTexture(n.TEXTURE0+pe);const Ze=xn.getPrimaries(xn.workingColorSpace),it=B.colorSpace===hs?null:xn.getPrimaries(B.colorSpace),St=B.colorSpace===hs||Ze===it?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,B.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,B.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,St);const Ot=_(B)&&M(B.image)===!1;let Ie=T(B.image,Ot,!1,i.maxTextureSize);Ie=et(B,Ie);const Qt=M(Ie)||l,Xt=s.convert(B.format,B.colorSpace);let Pt=s.convert(B.type),bt=R(B.internalFormat,Xt,Pt,B.colorSpace,B.isVideoTexture);ee(Ue,B,Qt);let ht;const Ft=B.mipmaps,tn=l&&B.isVideoTexture!==!0&&bt!==T_,_n=pt.__version===void 0||Oe===!0,jt=D(B,Ie,Qt);if(B.isDepthTexture)bt=n.DEPTH_COMPONENT,l?B.type===oa?bt=n.DEPTH_COMPONENT32F:B.type===No?bt=n.DEPTH_COMPONENT24:B.type===Fl?bt=n.DEPTH24_STENCIL8:bt=n.DEPTH_COMPONENT16:B.type===oa&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),B.format===zl&&bt===n.DEPTH_COMPONENT&&B.type!==ry&&B.type!==No&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),B.type=No,Pt=s.convert(B.type)),B.format===vu&&bt===n.DEPTH_COMPONENT&&(bt=n.DEPTH_STENCIL,B.type!==Fl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),B.type=Fl,Pt=s.convert(B.type))),_n&&(tn?t.texStorage2D(n.TEXTURE_2D,1,bt,Ie.width,Ie.height):t.texImage2D(n.TEXTURE_2D,0,bt,Ie.width,Ie.height,0,Xt,Pt,null));else if(B.isDataTexture)if(Ft.length>0&&Qt){tn&&_n&&t.texStorage2D(n.TEXTURE_2D,jt,bt,Ft[0].width,Ft[0].height);for(let We=0,ae=Ft.length;We<ae;We++)ht=Ft[We],tn?t.texSubImage2D(n.TEXTURE_2D,We,0,0,ht.width,ht.height,Xt,Pt,ht.data):t.texImage2D(n.TEXTURE_2D,We,bt,ht.width,ht.height,0,Xt,Pt,ht.data);B.generateMipmaps=!1}else tn?(_n&&t.texStorage2D(n.TEXTURE_2D,jt,bt,Ie.width,Ie.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ie.width,Ie.height,Xt,Pt,Ie.data)):t.texImage2D(n.TEXTURE_2D,0,bt,Ie.width,Ie.height,0,Xt,Pt,Ie.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){tn&&_n&&t.texStorage3D(n.TEXTURE_2D_ARRAY,jt,bt,Ft[0].width,Ft[0].height,Ie.depth);for(let We=0,ae=Ft.length;We<ae;We++)ht=Ft[We],B.format!==Ni?Xt!==null?tn?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,We,0,0,0,ht.width,ht.height,Ie.depth,Xt,ht.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,We,bt,ht.width,ht.height,Ie.depth,0,ht.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):tn?t.texSubImage3D(n.TEXTURE_2D_ARRAY,We,0,0,0,ht.width,ht.height,Ie.depth,Xt,Pt,ht.data):t.texImage3D(n.TEXTURE_2D_ARRAY,We,bt,ht.width,ht.height,Ie.depth,0,Xt,Pt,ht.data)}else{tn&&_n&&t.texStorage2D(n.TEXTURE_2D,jt,bt,Ft[0].width,Ft[0].height);for(let We=0,ae=Ft.length;We<ae;We++)ht=Ft[We],B.format!==Ni?Xt!==null?tn?t.compressedTexSubImage2D(n.TEXTURE_2D,We,0,0,ht.width,ht.height,Xt,ht.data):t.compressedTexImage2D(n.TEXTURE_2D,We,bt,ht.width,ht.height,0,ht.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):tn?t.texSubImage2D(n.TEXTURE_2D,We,0,0,ht.width,ht.height,Xt,Pt,ht.data):t.texImage2D(n.TEXTURE_2D,We,bt,ht.width,ht.height,0,Xt,Pt,ht.data)}else if(B.isDataArrayTexture)tn?(_n&&t.texStorage3D(n.TEXTURE_2D_ARRAY,jt,bt,Ie.width,Ie.height,Ie.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ie.width,Ie.height,Ie.depth,Xt,Pt,Ie.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,bt,Ie.width,Ie.height,Ie.depth,0,Xt,Pt,Ie.data);else if(B.isData3DTexture)tn?(_n&&t.texStorage3D(n.TEXTURE_3D,jt,bt,Ie.width,Ie.height,Ie.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ie.width,Ie.height,Ie.depth,Xt,Pt,Ie.data)):t.texImage3D(n.TEXTURE_3D,0,bt,Ie.width,Ie.height,Ie.depth,0,Xt,Pt,Ie.data);else if(B.isFramebufferTexture){if(_n)if(tn)t.texStorage2D(n.TEXTURE_2D,jt,bt,Ie.width,Ie.height);else{let We=Ie.width,ae=Ie.height;for(let $e=0;$e<jt;$e++)t.texImage2D(n.TEXTURE_2D,$e,bt,We,ae,0,Xt,Pt,null),We>>=1,ae>>=1}}else if(Ft.length>0&&Qt){tn&&_n&&t.texStorage2D(n.TEXTURE_2D,jt,bt,Ft[0].width,Ft[0].height);for(let We=0,ae=Ft.length;We<ae;We++)ht=Ft[We],tn?t.texSubImage2D(n.TEXTURE_2D,We,0,0,Xt,Pt,ht):t.texImage2D(n.TEXTURE_2D,We,bt,Xt,Pt,ht);B.generateMipmaps=!1}else tn?(_n&&t.texStorage2D(n.TEXTURE_2D,jt,bt,Ie.width,Ie.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Xt,Pt,Ie)):t.texImage2D(n.TEXTURE_2D,0,bt,Xt,Pt,Ie);N(B,Qt)&&A(Ue),pt.__version=Le.version,B.onUpdate&&B.onUpdate(B)}H.__version=B.version}function ke(H,B,pe){if(B.image.length!==6)return;const Ue=fe(H,B),Oe=B.source;t.bindTexture(n.TEXTURE_CUBE_MAP,H.__webglTexture,n.TEXTURE0+pe);const Le=r.get(Oe);if(Oe.version!==Le.__version||Ue===!0){t.activeTexture(n.TEXTURE0+pe);const pt=xn.getPrimaries(xn.workingColorSpace),Ze=B.colorSpace===hs?null:xn.getPrimaries(B.colorSpace),it=B.colorSpace===hs||pt===Ze?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,B.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,B.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,it);const St=B.isCompressedTexture||B.image[0].isCompressedTexture,Ot=B.image[0]&&B.image[0].isDataTexture,Ie=[];for(let We=0;We<6;We++)!St&&!Ot?Ie[We]=T(B.image[We],!1,!0,i.maxCubemapSize):Ie[We]=Ot?B.image[We].image:B.image[We],Ie[We]=et(B,Ie[We]);const Qt=Ie[0],Xt=M(Qt)||l,Pt=s.convert(B.format,B.colorSpace),bt=s.convert(B.type),ht=R(B.internalFormat,Pt,bt,B.colorSpace),Ft=l&&B.isVideoTexture!==!0,tn=Le.__version===void 0||Ue===!0;let _n=D(B,Qt,Xt);ee(n.TEXTURE_CUBE_MAP,B,Xt);let jt;if(St){Ft&&tn&&t.texStorage2D(n.TEXTURE_CUBE_MAP,_n,ht,Qt.width,Qt.height);for(let We=0;We<6;We++){jt=Ie[We].mipmaps;for(let ae=0;ae<jt.length;ae++){const $e=jt[ae];B.format!==Ni?Pt!==null?Ft?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,ae,0,0,$e.width,$e.height,Pt,$e.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,ae,ht,$e.width,$e.height,0,$e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ft?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,ae,0,0,$e.width,$e.height,Pt,bt,$e.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,ae,ht,$e.width,$e.height,0,Pt,bt,$e.data)}}}else{jt=B.mipmaps,Ft&&tn&&(jt.length>0&&_n++,t.texStorage2D(n.TEXTURE_CUBE_MAP,_n,ht,Ie[0].width,Ie[0].height));for(let We=0;We<6;We++)if(Ot){Ft?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,0,0,Ie[We].width,Ie[We].height,Pt,bt,Ie[We].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,ht,Ie[We].width,Ie[We].height,0,Pt,bt,Ie[We].data);for(let ae=0;ae<jt.length;ae++){const Je=jt[ae].image[We].image;Ft?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,ae+1,0,0,Je.width,Je.height,Pt,bt,Je.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,ae+1,ht,Je.width,Je.height,0,Pt,bt,Je.data)}}else{Ft?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,0,0,Pt,bt,Ie[We]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0,ht,Pt,bt,Ie[We]);for(let ae=0;ae<jt.length;ae++){const $e=jt[ae];Ft?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,ae+1,0,0,Pt,bt,$e.image[We]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+We,ae+1,ht,Pt,bt,$e.image[We])}}}N(B,Xt)&&A(n.TEXTURE_CUBE_MAP),Le.__version=Oe.version,B.onUpdate&&B.onUpdate(B)}H.__version=B.version}function Pe(H,B,pe,Ue,Oe,Le){const pt=s.convert(pe.format,pe.colorSpace),Ze=s.convert(pe.type),it=R(pe.internalFormat,pt,Ze,pe.colorSpace);if(!r.get(B).__hasExternalTextures){const Ot=Math.max(1,B.width>>Le),Ie=Math.max(1,B.height>>Le);Oe===n.TEXTURE_3D||Oe===n.TEXTURE_2D_ARRAY?t.texImage3D(Oe,Le,it,Ot,Ie,B.depth,0,pt,Ze,null):t.texImage2D(Oe,Le,it,Ot,Ie,0,pt,Ze,null)}t.bindFramebuffer(n.FRAMEBUFFER,H),Ne(B)?d.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ue,Oe,r.get(pe).__webglTexture,0,je(B)):(Oe===n.TEXTURE_2D||Oe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Oe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ue,Oe,r.get(pe).__webglTexture,Le),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Xe(H,B,pe){if(n.bindRenderbuffer(n.RENDERBUFFER,H),B.depthBuffer&&!B.stencilBuffer){let Ue=l===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(pe||Ne(B)){const Oe=B.depthTexture;Oe&&Oe.isDepthTexture&&(Oe.type===oa?Ue=n.DEPTH_COMPONENT32F:Oe.type===No&&(Ue=n.DEPTH_COMPONENT24));const Le=je(B);Ne(B)?d.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Le,Ue,B.width,B.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Le,Ue,B.width,B.height)}else n.renderbufferStorage(n.RENDERBUFFER,Ue,B.width,B.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,H)}else if(B.depthBuffer&&B.stencilBuffer){const Ue=je(B);pe&&Ne(B)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ue,n.DEPTH24_STENCIL8,B.width,B.height):Ne(B)?d.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ue,n.DEPTH24_STENCIL8,B.width,B.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,B.width,B.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,H)}else{const Ue=B.isWebGLMultipleRenderTargets===!0?B.texture:[B.texture];for(let Oe=0;Oe<Ue.length;Oe++){const Le=Ue[Oe],pt=s.convert(Le.format,Le.colorSpace),Ze=s.convert(Le.type),it=R(Le.internalFormat,pt,Ze,Le.colorSpace),St=je(B);pe&&Ne(B)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,St,it,B.width,B.height):Ne(B)?d.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,St,it,B.width,B.height):n.renderbufferStorage(n.RENDERBUFFER,it,B.width,B.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ke(H,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,H),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(B.depthTexture).__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),Q(B.depthTexture,0);const Ue=r.get(B.depthTexture).__webglTexture,Oe=je(B);if(B.depthTexture.format===zl)Ne(B)?d.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ue,0,Oe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ue,0);else if(B.depthTexture.format===vu)Ne(B)?d.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ue,0,Oe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ue,0);else throw new Error("Unknown depthTexture format")}function qe(H){const B=r.get(H),pe=H.isWebGLCubeRenderTarget===!0;if(H.depthTexture&&!B.__autoAllocateDepthBuffer){if(pe)throw new Error("target.depthTexture not supported in Cube render targets");Ke(B.__webglFramebuffer,H)}else if(pe){B.__webglDepthbuffer=[];for(let Ue=0;Ue<6;Ue++)t.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer[Ue]),B.__webglDepthbuffer[Ue]=n.createRenderbuffer(),Xe(B.__webglDepthbuffer[Ue],H,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer),B.__webglDepthbuffer=n.createRenderbuffer(),Xe(B.__webglDepthbuffer,H,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function lt(H,B,pe){const Ue=r.get(H);B!==void 0&&Pe(Ue.__webglFramebuffer,H,H.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),pe!==void 0&&qe(H)}function ne(H){const B=H.texture,pe=r.get(H),Ue=r.get(B);H.addEventListener("dispose",W),H.isWebGLMultipleRenderTargets!==!0&&(Ue.__webglTexture===void 0&&(Ue.__webglTexture=n.createTexture()),Ue.__version=B.version,o.memory.textures++);const Oe=H.isWebGLCubeRenderTarget===!0,Le=H.isWebGLMultipleRenderTargets===!0,pt=M(H)||l;if(Oe){pe.__webglFramebuffer=[];for(let Ze=0;Ze<6;Ze++)if(l&&B.mipmaps&&B.mipmaps.length>0){pe.__webglFramebuffer[Ze]=[];for(let it=0;it<B.mipmaps.length;it++)pe.__webglFramebuffer[Ze][it]=n.createFramebuffer()}else pe.__webglFramebuffer[Ze]=n.createFramebuffer()}else{if(l&&B.mipmaps&&B.mipmaps.length>0){pe.__webglFramebuffer=[];for(let Ze=0;Ze<B.mipmaps.length;Ze++)pe.__webglFramebuffer[Ze]=n.createFramebuffer()}else pe.__webglFramebuffer=n.createFramebuffer();if(Le)if(i.drawBuffers){const Ze=H.texture;for(let it=0,St=Ze.length;it<St;it++){const Ot=r.get(Ze[it]);Ot.__webglTexture===void 0&&(Ot.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&H.samples>0&&Ne(H)===!1){const Ze=Le?B:[B];pe.__webglMultisampledFramebuffer=n.createFramebuffer(),pe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,pe.__webglMultisampledFramebuffer);for(let it=0;it<Ze.length;it++){const St=Ze[it];pe.__webglColorRenderbuffer[it]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,pe.__webglColorRenderbuffer[it]);const Ot=s.convert(St.format,St.colorSpace),Ie=s.convert(St.type),Qt=R(St.internalFormat,Ot,Ie,St.colorSpace,H.isXRRenderTarget===!0),Xt=je(H);n.renderbufferStorageMultisample(n.RENDERBUFFER,Xt,Qt,H.width,H.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+it,n.RENDERBUFFER,pe.__webglColorRenderbuffer[it])}n.bindRenderbuffer(n.RENDERBUFFER,null),H.depthBuffer&&(pe.__webglDepthRenderbuffer=n.createRenderbuffer(),Xe(pe.__webglDepthRenderbuffer,H,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Oe){t.bindTexture(n.TEXTURE_CUBE_MAP,Ue.__webglTexture),ee(n.TEXTURE_CUBE_MAP,B,pt);for(let Ze=0;Ze<6;Ze++)if(l&&B.mipmaps&&B.mipmaps.length>0)for(let it=0;it<B.mipmaps.length;it++)Pe(pe.__webglFramebuffer[Ze][it],H,B,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,it);else Pe(pe.__webglFramebuffer[Ze],H,B,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,0);N(B,pt)&&A(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Le){const Ze=H.texture;for(let it=0,St=Ze.length;it<St;it++){const Ot=Ze[it],Ie=r.get(Ot);t.bindTexture(n.TEXTURE_2D,Ie.__webglTexture),ee(n.TEXTURE_2D,Ot,pt),Pe(pe.__webglFramebuffer,H,Ot,n.COLOR_ATTACHMENT0+it,n.TEXTURE_2D,0),N(Ot,pt)&&A(n.TEXTURE_2D)}t.unbindTexture()}else{let Ze=n.TEXTURE_2D;if((H.isWebGL3DRenderTarget||H.isWebGLArrayRenderTarget)&&(l?Ze=H.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ze,Ue.__webglTexture),ee(Ze,B,pt),l&&B.mipmaps&&B.mipmaps.length>0)for(let it=0;it<B.mipmaps.length;it++)Pe(pe.__webglFramebuffer[it],H,B,n.COLOR_ATTACHMENT0,Ze,it);else Pe(pe.__webglFramebuffer,H,B,n.COLOR_ATTACHMENT0,Ze,0);N(B,pt)&&A(Ze),t.unbindTexture()}H.depthBuffer&&qe(H)}function ze(H){const B=M(H)||l,pe=H.isWebGLMultipleRenderTargets===!0?H.texture:[H.texture];for(let Ue=0,Oe=pe.length;Ue<Oe;Ue++){const Le=pe[Ue];if(N(Le,B)){const pt=H.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Ze=r.get(Le).__webglTexture;t.bindTexture(pt,Ze),A(pt),t.unbindTexture()}}}function Ce(H){if(l&&H.samples>0&&Ne(H)===!1){const B=H.isWebGLMultipleRenderTargets?H.texture:[H.texture],pe=H.width,Ue=H.height;let Oe=n.COLOR_BUFFER_BIT;const Le=[],pt=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ze=r.get(H),it=H.isWebGLMultipleRenderTargets===!0;if(it)for(let St=0;St<B.length;St++)t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+St,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+St,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglFramebuffer);for(let St=0;St<B.length;St++){Le.push(n.COLOR_ATTACHMENT0+St),H.depthBuffer&&Le.push(pt);const Ot=Ze.__ignoreDepthValues!==void 0?Ze.__ignoreDepthValues:!1;if(Ot===!1&&(H.depthBuffer&&(Oe|=n.DEPTH_BUFFER_BIT),H.stencilBuffer&&(Oe|=n.STENCIL_BUFFER_BIT)),it&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ze.__webglColorRenderbuffer[St]),Ot===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[pt]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[pt])),it){const Ie=r.get(B[St]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ie,0)}n.blitFramebuffer(0,0,pe,Ue,0,0,pe,Ue,Oe,n.NEAREST),f&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Le)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),it)for(let St=0;St<B.length;St++){t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+St,n.RENDERBUFFER,Ze.__webglColorRenderbuffer[St]);const Ot=r.get(B[St]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+St,n.TEXTURE_2D,Ot,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer)}}function je(H){return Math.min(i.maxSamples,H.samples)}function Ne(H){const B=r.get(H);return l&&H.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function xt(H){const B=o.render.frame;p.get(H)!==B&&(p.set(H,B),H.update())}function et(H,B){const pe=H.colorSpace,Ue=H.format,Oe=H.type;return H.isCompressedTexture===!0||H.isVideoTexture===!0||H.format===N0||pe!==Oa&&pe!==hs&&(xn.getTransfer(pe)===Rn?l===!1?e.has("EXT_sRGB")===!0&&Ue===Ni?(H.format=N0,H.minFilter=lr,H.generateMipmaps=!1):B=R_.sRGBToLinear(B):(Ue!==Ni||Oe!==Ia)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",pe)),B}this.allocateTextureUnit=Z,this.resetTextureUnits=oe,this.setTexture2D=Q,this.setTexture2DArray=me,this.setTexture3D=$,this.setTextureCube=re,this.rebindTextures=lt,this.setupRenderTarget=ne,this.updateRenderTargetMipmap=ze,this.updateMultisampleRenderTarget=Ce,this.setupDepthRenderbuffer=qe,this.setupFrameBufferTexture=Pe,this.useMultisampledRTT=Ne}function oC(n,e,t){const r=t.isWebGL2;function i(s,o=hs){let l;const d=xn.getTransfer(o);if(s===Ia)return n.UNSIGNED_BYTE;if(s===w_)return n.UNSIGNED_SHORT_4_4_4_4;if(s===S_)return n.UNSIGNED_SHORT_5_5_5_1;if(s===TA)return n.BYTE;if(s===AA)return n.SHORT;if(s===ry)return n.UNSIGNED_SHORT;if(s===__)return n.INT;if(s===No)return n.UNSIGNED_INT;if(s===oa)return n.FLOAT;if(s===mh)return r?n.HALF_FLOAT:(l=e.get("OES_texture_half_float"),l!==null?l.HALF_FLOAT_OES:null);if(s===CA)return n.ALPHA;if(s===Ni)return n.RGBA;if(s===NA)return n.LUMINANCE;if(s===kA)return n.LUMINANCE_ALPHA;if(s===zl)return n.DEPTH_COMPONENT;if(s===vu)return n.DEPTH_STENCIL;if(s===N0)return l=e.get("EXT_sRGB"),l!==null?l.SRGB_ALPHA_EXT:null;if(s===RA)return n.RED;if(s===b_)return n.RED_INTEGER;if(s===PA)return n.RG;if(s===M_)return n.RG_INTEGER;if(s===E_)return n.RGBA_INTEGER;if(s===i0||s===s0||s===a0||s===o0)if(d===Rn)if(l=e.get("WEBGL_compressed_texture_s3tc_srgb"),l!==null){if(s===i0)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===s0)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===a0)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===o0)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(l=e.get("WEBGL_compressed_texture_s3tc"),l!==null){if(s===i0)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===s0)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===a0)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===o0)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===r1||s===i1||s===s1||s===a1)if(l=e.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(s===r1)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===i1)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===s1)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===a1)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===T_)return l=e.get("WEBGL_compressed_texture_etc1"),l!==null?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===o1||s===l1)if(l=e.get("WEBGL_compressed_texture_etc"),l!==null){if(s===o1)return d===Rn?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(s===l1)return d===Rn?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===c1||s===u1||s===d1||s===h1||s===f1||s===p1||s===m1||s===g1||s===y1||s===x1||s===v1||s===_1||s===w1||s===S1)if(l=e.get("WEBGL_compressed_texture_astc"),l!==null){if(s===c1)return d===Rn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===u1)return d===Rn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===d1)return d===Rn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===h1)return d===Rn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===f1)return d===Rn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===p1)return d===Rn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===m1)return d===Rn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===g1)return d===Rn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===y1)return d===Rn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===x1)return d===Rn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===v1)return d===Rn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===_1)return d===Rn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===w1)return d===Rn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===S1)return d===Rn?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===l0||s===b1||s===M1)if(l=e.get("EXT_texture_compression_bptc"),l!==null){if(s===l0)return d===Rn?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===b1)return l.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===M1)return l.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===LA||s===E1||s===T1||s===A1)if(l=e.get("EXT_texture_compression_rgtc"),l!==null){if(s===l0)return l.COMPRESSED_RED_RGTC1_EXT;if(s===E1)return l.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===T1)return l.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===A1)return l.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Fl?r?n.UNSIGNED_INT_24_8:(l=e.get("WEBGL_depth_texture"),l!==null?l.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class lC extends Br{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class oh extends hn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const t6={type:"move"};class Zx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new oh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new oh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new oh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new q),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const l=this._targetRay,d=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){o=!0;for(const T of e.hand.values()){const M=t.getJointPose(T,r),_=this._getHandJoint(f,T);M!==null&&(_.matrix.fromArray(M.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=M.radius),_.visible=M!==null}const p=f.joints["index-finger-tip"],y=f.joints["thumb-tip"],x=p.position.distanceTo(y.position),v=.02,b=.005;f.inputState.pinching&&x>v+b?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&x<=v-b&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else d!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(d.matrix.fromArray(s.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,s.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(s.linearVelocity)):d.hasLinearVelocity=!1,s.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(s.angularVelocity)):d.hasAngularVelocity=!1));l!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,i.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(i.linearVelocity)):l.hasLinearVelocity=!1,i.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(i.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(t6)))}return l!==null&&(l.visible=i!==null),d!==null&&(d.visible=s!==null),f!==null&&(f.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new oh;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class n6 extends zo{constructor(e,t){super();const r=this;let i=null,s=1,o=null,l="local-floor",d=1,f=null,p=null,y=null,x=null,v=null,b=null;const T=t.getContextAttributes();let M=null,_=null;const N=[],A=[],R=new Re;let D=null;const U=new Br;U.layers.enable(1),U.viewport=new vn;const z=new Br;z.layers.enable(2),z.viewport=new vn;const W=[U,z],O=new lC;O.layers.enable(1),O.layers.enable(2);let I=null,K=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ee){let fe=N[ee];return fe===void 0&&(fe=new Zx,N[ee]=fe),fe.getTargetRaySpace()},this.getControllerGrip=function(ee){let fe=N[ee];return fe===void 0&&(fe=new Zx,N[ee]=fe),fe.getGripSpace()},this.getHand=function(ee){let fe=N[ee];return fe===void 0&&(fe=new Zx,N[ee]=fe),fe.getHandSpace()};function ie(ee){const fe=A.indexOf(ee.inputSource);if(fe===-1)return;const Ae=N[fe];Ae!==void 0&&(Ae.update(ee.inputSource,ee.frame,f||o),Ae.dispatchEvent({type:ee.type,data:ee.inputSource}))}function oe(){i.removeEventListener("select",ie),i.removeEventListener("selectstart",ie),i.removeEventListener("selectend",ie),i.removeEventListener("squeeze",ie),i.removeEventListener("squeezestart",ie),i.removeEventListener("squeezeend",ie),i.removeEventListener("end",oe),i.removeEventListener("inputsourceschange",Z);for(let ee=0;ee<N.length;ee++){const fe=A[ee];fe!==null&&(A[ee]=null,N[ee].disconnect(fe))}I=null,K=null,e.setRenderTarget(M),v=null,x=null,y=null,i=null,_=null,X.stop(),r.isPresenting=!1,e.setPixelRatio(D),e.setSize(R.width,R.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ee){s=ee,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ee){l=ee,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||o},this.setReferenceSpace=function(ee){f=ee},this.getBaseLayer=function(){return x!==null?x:v},this.getBinding=function(){return y},this.getFrame=function(){return b},this.getSession=function(){return i},this.setSession=async function(ee){if(i=ee,i!==null){if(M=e.getRenderTarget(),i.addEventListener("select",ie),i.addEventListener("selectstart",ie),i.addEventListener("selectend",ie),i.addEventListener("squeeze",ie),i.addEventListener("squeezestart",ie),i.addEventListener("squeezeend",ie),i.addEventListener("end",oe),i.addEventListener("inputsourceschange",Z),T.xrCompatible!==!0&&await t.makeXRCompatible(),D=e.getPixelRatio(),e.getSize(R),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const fe={antialias:i.renderState.layers===void 0?T.antialias:!0,alpha:!0,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:s};v=new XRWebGLLayer(i,t,fe),i.updateRenderState({baseLayer:v}),e.setPixelRatio(1),e.setSize(v.framebufferWidth,v.framebufferHeight,!1),_=new ua(v.framebufferWidth,v.framebufferHeight,{format:Ni,type:Ia,colorSpace:e.outputColorSpace,stencilBuffer:T.stencil})}else{let fe=null,Ae=null,ke=null;T.depth&&(ke=T.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,fe=T.stencil?vu:zl,Ae=T.stencil?Fl:No);const Pe={colorFormat:t.RGBA8,depthFormat:ke,scaleFactor:s};y=new XRWebGLBinding(i,t),x=y.createProjectionLayer(Pe),i.updateRenderState({layers:[x]}),e.setPixelRatio(1),e.setSize(x.textureWidth,x.textureHeight,!1),_=new ua(x.textureWidth,x.textureHeight,{format:Ni,type:Ia,depthTexture:new U_(x.textureWidth,x.textureHeight,Ae,void 0,void 0,void 0,void 0,void 0,void 0,fe),stencilBuffer:T.stencil,colorSpace:e.outputColorSpace,samples:T.antialias?4:0});const Xe=e.properties.get(_);Xe.__ignoreDepthValues=x.ignoreDepthValues}_.isXRRenderTarget=!0,this.setFoveation(d),f=null,o=await i.requestReferenceSpace(l),X.setContext(i),X.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function Z(ee){for(let fe=0;fe<ee.removed.length;fe++){const Ae=ee.removed[fe],ke=A.indexOf(Ae);ke>=0&&(A[ke]=null,N[ke].disconnect(Ae))}for(let fe=0;fe<ee.added.length;fe++){const Ae=ee.added[fe];let ke=A.indexOf(Ae);if(ke===-1){for(let Xe=0;Xe<N.length;Xe++)if(Xe>=A.length){A.push(Ae),ke=Xe;break}else if(A[Xe]===null){A[Xe]=Ae,ke=Xe;break}if(ke===-1)break}const Pe=N[ke];Pe&&Pe.connect(Ae)}}const le=new q,Q=new q;function me(ee,fe,Ae){le.setFromMatrixPosition(fe.matrixWorld),Q.setFromMatrixPosition(Ae.matrixWorld);const ke=le.distanceTo(Q),Pe=fe.projectionMatrix.elements,Xe=Ae.projectionMatrix.elements,Ke=Pe[14]/(Pe[10]-1),qe=Pe[14]/(Pe[10]+1),lt=(Pe[9]+1)/Pe[5],ne=(Pe[9]-1)/Pe[5],ze=(Pe[8]-1)/Pe[0],Ce=(Xe[8]+1)/Xe[0],je=Ke*ze,Ne=Ke*Ce,xt=ke/(-ze+Ce),et=xt*-ze;fe.matrixWorld.decompose(ee.position,ee.quaternion,ee.scale),ee.translateX(et),ee.translateZ(xt),ee.matrixWorld.compose(ee.position,ee.quaternion,ee.scale),ee.matrixWorldInverse.copy(ee.matrixWorld).invert();const H=Ke+xt,B=qe+xt,pe=je-et,Ue=Ne+(ke-et),Oe=lt*qe/B*H,Le=ne*qe/B*H;ee.projectionMatrix.makePerspective(pe,Ue,Oe,Le,H,B),ee.projectionMatrixInverse.copy(ee.projectionMatrix).invert()}function $(ee,fe){fe===null?ee.matrixWorld.copy(ee.matrix):ee.matrixWorld.multiplyMatrices(fe.matrixWorld,ee.matrix),ee.matrixWorldInverse.copy(ee.matrixWorld).invert()}this.updateCamera=function(ee){if(i===null)return;O.near=z.near=U.near=ee.near,O.far=z.far=U.far=ee.far,(I!==O.near||K!==O.far)&&(i.updateRenderState({depthNear:O.near,depthFar:O.far}),I=O.near,K=O.far);const fe=ee.parent,Ae=O.cameras;$(O,fe);for(let ke=0;ke<Ae.length;ke++)$(Ae[ke],fe);Ae.length===2?me(O,U,z):O.projectionMatrix.copy(U.projectionMatrix),re(ee,O,fe)};function re(ee,fe,Ae){Ae===null?ee.matrix.copy(fe.matrixWorld):(ee.matrix.copy(Ae.matrixWorld),ee.matrix.invert(),ee.matrix.multiply(fe.matrixWorld)),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale),ee.updateMatrixWorld(!0),ee.projectionMatrix.copy(fe.projectionMatrix),ee.projectionMatrixInverse.copy(fe.projectionMatrixInverse),ee.isPerspectiveCamera&&(ee.fov=yh*2*Math.atan(1/ee.projectionMatrix.elements[5]),ee.zoom=1)}this.getCamera=function(){return O},this.getFoveation=function(){if(!(x===null&&v===null))return d},this.setFoveation=function(ee){d=ee,x!==null&&(x.fixedFoveation=ee),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=ee)};let te=null;function j(ee,fe){if(p=fe.getViewerPose(f||o),b=fe,p!==null){const Ae=p.views;v!==null&&(e.setRenderTargetFramebuffer(_,v.framebuffer),e.setRenderTarget(_));let ke=!1;Ae.length!==O.cameras.length&&(O.cameras.length=0,ke=!0);for(let Pe=0;Pe<Ae.length;Pe++){const Xe=Ae[Pe];let Ke=null;if(v!==null)Ke=v.getViewport(Xe);else{const lt=y.getViewSubImage(x,Xe);Ke=lt.viewport,Pe===0&&(e.setRenderTargetTextures(_,lt.colorTexture,x.ignoreDepthValues?void 0:lt.depthStencilTexture),e.setRenderTarget(_))}let qe=W[Pe];qe===void 0&&(qe=new Br,qe.layers.enable(Pe),qe.viewport=new vn,W[Pe]=qe),qe.matrix.fromArray(Xe.transform.matrix),qe.matrix.decompose(qe.position,qe.quaternion,qe.scale),qe.projectionMatrix.fromArray(Xe.projectionMatrix),qe.projectionMatrixInverse.copy(qe.projectionMatrix).invert(),qe.viewport.set(Ke.x,Ke.y,Ke.width,Ke.height),Pe===0&&(O.matrix.copy(qe.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale)),ke===!0&&O.cameras.push(qe)}}for(let Ae=0;Ae<N.length;Ae++){const ke=A[Ae],Pe=N[Ae];ke!==null&&Pe!==void 0&&Pe.update(ke,fe,f||o)}te&&te(ee,fe),fe.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:fe}),b=null}const X=new tC;X.setAnimationLoop(j),this.setAnimationLoop=function(ee){te=ee},this.dispose=function(){}}}function r6(n,e){function t(M,_){M.matrixAutoUpdate===!0&&M.updateMatrix(),_.value.copy(M.matrix)}function r(M,_){_.color.getRGB(M.fogColor.value,KA(n)),_.isFog?(M.fogNear.value=_.near,M.fogFar.value=_.far):_.isFogExp2&&(M.fogDensity.value=_.density)}function i(M,_,N,A,R){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(M,_):_.isMeshToonMaterial?(s(M,_),y(M,_)):_.isMeshPhongMaterial?(s(M,_),p(M,_)):_.isMeshStandardMaterial?(s(M,_),x(M,_),_.isMeshPhysicalMaterial&&v(M,_,R)):_.isMeshMatcapMaterial?(s(M,_),b(M,_)):_.isMeshDepthMaterial?s(M,_):_.isMeshDistanceMaterial?(s(M,_),T(M,_)):_.isMeshNormalMaterial?s(M,_):_.isLineBasicMaterial?(o(M,_),_.isLineDashedMaterial&&l(M,_)):_.isPointsMaterial?d(M,_,N,A):_.isSpriteMaterial?f(M,_):_.isShadowMaterial?(M.color.value.copy(_.color),M.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function s(M,_){M.opacity.value=_.opacity,_.color&&M.diffuse.value.copy(_.color),_.emissive&&M.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(M.map.value=_.map,t(_.map,M.mapTransform)),_.alphaMap&&(M.alphaMap.value=_.alphaMap,t(_.alphaMap,M.alphaMapTransform)),_.bumpMap&&(M.bumpMap.value=_.bumpMap,t(_.bumpMap,M.bumpMapTransform),M.bumpScale.value=_.bumpScale,_.side===Ri&&(M.bumpScale.value*=-1)),_.normalMap&&(M.normalMap.value=_.normalMap,t(_.normalMap,M.normalMapTransform),M.normalScale.value.copy(_.normalScale),_.side===Ri&&M.normalScale.value.negate()),_.displacementMap&&(M.displacementMap.value=_.displacementMap,t(_.displacementMap,M.displacementMapTransform),M.displacementScale.value=_.displacementScale,M.displacementBias.value=_.displacementBias),_.emissiveMap&&(M.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,M.emissiveMapTransform)),_.specularMap&&(M.specularMap.value=_.specularMap,t(_.specularMap,M.specularMapTransform)),_.alphaTest>0&&(M.alphaTest.value=_.alphaTest);const N=e.get(_).envMap;if(N&&(M.envMap.value=N,M.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=_.reflectivity,M.ior.value=_.ior,M.refractionRatio.value=_.refractionRatio),_.lightMap){M.lightMap.value=_.lightMap;const A=n._useLegacyLights===!0?Math.PI:1;M.lightMapIntensity.value=_.lightMapIntensity*A,t(_.lightMap,M.lightMapTransform)}_.aoMap&&(M.aoMap.value=_.aoMap,M.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,M.aoMapTransform))}function o(M,_){M.diffuse.value.copy(_.color),M.opacity.value=_.opacity,_.map&&(M.map.value=_.map,t(_.map,M.mapTransform))}function l(M,_){M.dashSize.value=_.dashSize,M.totalSize.value=_.dashSize+_.gapSize,M.scale.value=_.scale}function d(M,_,N,A){M.diffuse.value.copy(_.color),M.opacity.value=_.opacity,M.size.value=_.size*N,M.scale.value=A*.5,_.map&&(M.map.value=_.map,t(_.map,M.uvTransform)),_.alphaMap&&(M.alphaMap.value=_.alphaMap,t(_.alphaMap,M.alphaMapTransform)),_.alphaTest>0&&(M.alphaTest.value=_.alphaTest)}function f(M,_){M.diffuse.value.copy(_.color),M.opacity.value=_.opacity,M.rotation.value=_.rotation,_.map&&(M.map.value=_.map,t(_.map,M.mapTransform)),_.alphaMap&&(M.alphaMap.value=_.alphaMap,t(_.alphaMap,M.alphaMapTransform)),_.alphaTest>0&&(M.alphaTest.value=_.alphaTest)}function p(M,_){M.specular.value.copy(_.specular),M.shininess.value=Math.max(_.shininess,1e-4)}function y(M,_){_.gradientMap&&(M.gradientMap.value=_.gradientMap)}function x(M,_){M.metalness.value=_.metalness,_.metalnessMap&&(M.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,M.metalnessMapTransform)),M.roughness.value=_.roughness,_.roughnessMap&&(M.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,M.roughnessMapTransform)),e.get(_).envMap&&(M.envMapIntensity.value=_.envMapIntensity)}function v(M,_,N){M.ior.value=_.ior,_.sheen>0&&(M.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),M.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(M.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,M.sheenColorMapTransform)),_.sheenRoughnessMap&&(M.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,M.sheenRoughnessMapTransform))),_.clearcoat>0&&(M.clearcoat.value=_.clearcoat,M.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(M.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,M.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(M.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===Ri&&M.clearcoatNormalScale.value.negate())),_.iridescence>0&&(M.iridescence.value=_.iridescence,M.iridescenceIOR.value=_.iridescenceIOR,M.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(M.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,M.iridescenceMapTransform)),_.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),_.transmission>0&&(M.transmission.value=_.transmission,M.transmissionSamplerMap.value=N.texture,M.transmissionSamplerSize.value.set(N.width,N.height),_.transmissionMap&&(M.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,M.transmissionMapTransform)),M.thickness.value=_.thickness,_.thicknessMap&&(M.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=_.attenuationDistance,M.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(M.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(M.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,M.anisotropyMapTransform))),M.specularIntensity.value=_.specularIntensity,M.specularColor.value.copy(_.specularColor),_.specularColorMap&&(M.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,M.specularColorMapTransform)),_.specularIntensityMap&&(M.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,M.specularIntensityMapTransform))}function b(M,_){_.matcap&&(M.matcap.value=_.matcap)}function T(M,_){const N=e.get(_).light;M.referencePosition.value.setFromMatrixPosition(N.matrixWorld),M.nearDistance.value=N.shadow.camera.near,M.farDistance.value=N.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function i6(n,e,t,r){let i={},s={},o=[];const l=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function d(N,A){const R=A.program;r.uniformBlockBinding(N,R)}function f(N,A){let R=i[N.id];R===void 0&&(b(N),R=p(N),i[N.id]=R,N.addEventListener("dispose",M));const D=A.program;r.updateUBOMapping(N,D);const U=e.render.frame;s[N.id]!==U&&(x(N),s[N.id]=U)}function p(N){const A=y();N.__bindingPointIndex=A;const R=n.createBuffer(),D=N.__size,U=N.usage;return n.bindBuffer(n.UNIFORM_BUFFER,R),n.bufferData(n.UNIFORM_BUFFER,D,U),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,A,R),R}function y(){for(let N=0;N<l;N++)if(o.indexOf(N)===-1)return o.push(N),N;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function x(N){const A=i[N.id],R=N.uniforms,D=N.__cache;n.bindBuffer(n.UNIFORM_BUFFER,A);for(let U=0,z=R.length;U<z;U++){const W=Array.isArray(R[U])?R[U]:[R[U]];for(let O=0,I=W.length;O<I;O++){const K=W[O];if(v(K,U,O,D)===!0){const ie=K.__offset,oe=Array.isArray(K.value)?K.value:[K.value];let Z=0;for(let le=0;le<oe.length;le++){const Q=oe[le],me=T(Q);typeof Q=="number"||typeof Q=="boolean"?(K.__data[0]=Q,n.bufferSubData(n.UNIFORM_BUFFER,ie+Z,K.__data)):Q.isMatrix3?(K.__data[0]=Q.elements[0],K.__data[1]=Q.elements[1],K.__data[2]=Q.elements[2],K.__data[3]=0,K.__data[4]=Q.elements[3],K.__data[5]=Q.elements[4],K.__data[6]=Q.elements[5],K.__data[7]=0,K.__data[8]=Q.elements[6],K.__data[9]=Q.elements[7],K.__data[10]=Q.elements[8],K.__data[11]=0):(Q.toArray(K.__data,Z),Z+=me.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,ie,K.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function v(N,A,R,D){const U=N.value,z=A+"_"+R;if(D[z]===void 0)return typeof U=="number"||typeof U=="boolean"?D[z]=U:D[z]=U.clone(),!0;{const W=D[z];if(typeof U=="number"||typeof U=="boolean"){if(W!==U)return D[z]=U,!0}else if(W.equals(U)===!1)return W.copy(U),!0}return!1}function b(N){const A=N.uniforms;let R=0;const D=16;for(let z=0,W=A.length;z<W;z++){const O=Array.isArray(A[z])?A[z]:[A[z]];for(let I=0,K=O.length;I<K;I++){const ie=O[I],oe=Array.isArray(ie.value)?ie.value:[ie.value];for(let Z=0,le=oe.length;Z<le;Z++){const Q=oe[Z],me=T(Q),$=R%D;$!==0&&D-$<me.boundary&&(R+=D-$),ie.__data=new Float32Array(me.storage/Float32Array.BYTES_PER_ELEMENT),ie.__offset=R,R+=me.storage}}}const U=R%D;return U>0&&(R+=D-U),N.__size=R,N.__cache={},this}function T(N){const A={boundary:0,storage:0};return typeof N=="number"||typeof N=="boolean"?(A.boundary=4,A.storage=4):N.isVector2?(A.boundary=8,A.storage=8):N.isVector3||N.isColor?(A.boundary=16,A.storage=12):N.isVector4?(A.boundary=16,A.storage=16):N.isMatrix3?(A.boundary=48,A.storage=48):N.isMatrix4?(A.boundary=64,A.storage=64):N.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",N),A}function M(N){const A=N.target;A.removeEventListener("dispose",M);const R=o.indexOf(A.__bindingPointIndex);o.splice(R,1),n.deleteBuffer(i[A.id]),delete i[A.id],delete s[A.id]}function _(){for(const N in i)n.deleteBuffer(i[N]);o=[],i={},s={}}return{bind:d,update:f,dispose:_}}class z_{constructor(e={}){const{canvas:t=qA(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:l=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:f=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:y=!1}=e;this.isWebGLRenderer=!0;let x;r!==null?x=r.getContextAttributes().alpha:x=o;const v=new Uint32Array(4),b=new Int32Array(4);let T=null,M=null;const _=[],N=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=kr,this._useLegacyLights=!1,this.toneMapping=La,this.toneMappingExposure=1;const A=this;let R=!1,D=0,U=0,z=null,W=-1,O=null;const I=new vn,K=new vn;let ie=null;const oe=new at(0);let Z=0,le=t.width,Q=t.height,me=1,$=null,re=null;const te=new vn(0,0,le,Q),j=new vn(0,0,le,Q);let X=!1;const ee=new Yp;let fe=!1,Ae=!1,ke=null;const Pe=new Ut,Xe=new Re,Ke=new q,qe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function lt(){return z===null?me:1}let ne=r;function ze(G,ge){for(let Se=0;Se<G.length;Se++){const be=G[Se],_e=t.getContext(be,ge);if(_e!==null)return _e}return null}try{const G={alpha:!0,depth:i,stencil:s,antialias:l,premultipliedAlpha:d,preserveDrawingBuffer:f,powerPreference:p,failIfMajorPerformanceCaveat:y};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${ey}`),t.addEventListener("webglcontextlost",We,!1),t.addEventListener("webglcontextrestored",ae,!1),t.addEventListener("webglcontextcreationerror",$e,!1),ne===null){const ge=["webgl2","webgl","experimental-webgl"];if(A.isWebGL1Renderer===!0&&ge.shift(),ne=ze(ge,G),ne===null)throw ze(ge)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&ne instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),ne.getShaderPrecisionFormat===void 0&&(ne.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(G){throw console.error("THREE.WebGLRenderer: "+G.message),G}let Ce,je,Ne,xt,et,H,B,pe,Ue,Oe,Le,pt,Ze,it,St,Ot,Ie,Qt,Xt,Pt,bt,ht,Ft,tn;function _n(){Ce=new xB(ne),je=new hB(ne,Ce,e),Ce.init(je),ht=new oC(ne,Ce,je),Ne=new Qj(ne,Ce,je),xt=new wB(ne),et=new jj,H=new e6(ne,Ce,Ne,et,je,ht,xt),B=new pB(A),pe=new yB(A),Ue=new NO(ne,je),Ft=new uB(ne,Ce,Ue,je),Oe=new vB(ne,Ue,xt,Ft),Le=new EB(ne,Oe,Ue,xt),Xt=new MB(ne,je,H),Ot=new fB(et),pt=new Bj(A,B,pe,Ce,je,Ft,Ot),Ze=new r6(A,et),it=new Hj,St=new Yj(Ce,je),Qt=new cB(A,B,pe,Ne,Le,x,d),Ie=new Jj(A,Le,je),tn=new i6(ne,xt,je,Ne),Pt=new dB(ne,Ce,xt,je),bt=new _B(ne,Ce,xt,je),xt.programs=pt.programs,A.capabilities=je,A.extensions=Ce,A.properties=et,A.renderLists=it,A.shadowMap=Ie,A.state=Ne,A.info=xt}_n();const jt=new n6(A,ne);this.xr=jt,this.getContext=function(){return ne},this.getContextAttributes=function(){return ne.getContextAttributes()},this.forceContextLoss=function(){const G=Ce.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=Ce.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return me},this.setPixelRatio=function(G){G!==void 0&&(me=G,this.setSize(le,Q,!1))},this.getSize=function(G){return G.set(le,Q)},this.setSize=function(G,ge,Se=!0){if(jt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}le=G,Q=ge,t.width=Math.floor(G*me),t.height=Math.floor(ge*me),Se===!0&&(t.style.width=G+"px",t.style.height=ge+"px"),this.setViewport(0,0,G,ge)},this.getDrawingBufferSize=function(G){return G.set(le*me,Q*me).floor()},this.setDrawingBufferSize=function(G,ge,Se){le=G,Q=ge,me=Se,t.width=Math.floor(G*Se),t.height=Math.floor(ge*Se),this.setViewport(0,0,G,ge)},this.getCurrentViewport=function(G){return G.copy(I)},this.getViewport=function(G){return G.copy(te)},this.setViewport=function(G,ge,Se,be){G.isVector4?te.set(G.x,G.y,G.z,G.w):te.set(G,ge,Se,be),Ne.viewport(I.copy(te).multiplyScalar(me).floor())},this.getScissor=function(G){return G.copy(j)},this.setScissor=function(G,ge,Se,be){G.isVector4?j.set(G.x,G.y,G.z,G.w):j.set(G,ge,Se,be),Ne.scissor(K.copy(j).multiplyScalar(me).floor())},this.getScissorTest=function(){return X},this.setScissorTest=function(G){Ne.setScissorTest(X=G)},this.setOpaqueSort=function(G){$=G},this.setTransparentSort=function(G){re=G},this.getClearColor=function(G){return G.copy(Qt.getClearColor())},this.setClearColor=function(){Qt.setClearColor.apply(Qt,arguments)},this.getClearAlpha=function(){return Qt.getClearAlpha()},this.setClearAlpha=function(){Qt.setClearAlpha.apply(Qt,arguments)},this.clear=function(G=!0,ge=!0,Se=!0){let be=0;if(G){let _e=!1;if(z!==null){const nt=z.texture.format;_e=nt===E_||nt===M_||nt===b_}if(_e){const nt=z.texture.type,wt=nt===Ia||nt===No||nt===ry||nt===Fl||nt===w_||nt===S_,At=Qt.getClearColor(),rt=Qt.getClearAlpha(),It=At.r,kt=At.g,Lt=At.b;wt?(v[0]=It,v[1]=kt,v[2]=Lt,v[3]=rt,ne.clearBufferuiv(ne.COLOR,0,v)):(b[0]=It,b[1]=kt,b[2]=Lt,b[3]=rt,ne.clearBufferiv(ne.COLOR,0,b))}else be|=ne.COLOR_BUFFER_BIT}ge&&(be|=ne.DEPTH_BUFFER_BIT),Se&&(be|=ne.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ne.clear(be)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",We,!1),t.removeEventListener("webglcontextrestored",ae,!1),t.removeEventListener("webglcontextcreationerror",$e,!1),it.dispose(),St.dispose(),et.dispose(),B.dispose(),pe.dispose(),Le.dispose(),Ft.dispose(),tn.dispose(),pt.dispose(),jt.dispose(),jt.removeEventListener("sessionstart",tr),jt.removeEventListener("sessionend",sn),ke&&(ke.dispose(),ke=null),nr.stop()};function We(G){G.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function ae(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1;const G=xt.autoReset,ge=Ie.enabled,Se=Ie.autoUpdate,be=Ie.needsUpdate,_e=Ie.type;_n(),xt.autoReset=G,Ie.enabled=ge,Ie.autoUpdate=Se,Ie.needsUpdate=be,Ie.type=_e}function $e(G){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",G.statusMessage)}function Je(G){const ge=G.target;ge.removeEventListener("dispose",Je),Tt(ge)}function Tt(G){Mt(G),et.remove(G)}function Mt(G){const ge=et.get(G).programs;ge!==void 0&&(ge.forEach(function(Se){pt.releaseProgram(Se)}),G.isShaderMaterial&&pt.releaseShaderCache(G))}this.renderBufferDirect=function(G,ge,Se,be,_e,nt){ge===null&&(ge=qe);const wt=_e.isMesh&&_e.matrixWorld.determinant()<0,At=kh(G,ge,Se,be,_e);Ne.setMaterial(be,wt);let rt=Se.index,It=1;if(be.wireframe===!0){if(rt=Oe.getWireframeAttribute(Se),rt===void 0)return;It=2}const kt=Se.drawRange,Lt=Se.attributes.position;let wn=kt.start*It,wr=(kt.start+kt.count)*It;nt!==null&&(wn=Math.max(wn,nt.start*It),wr=Math.min(wr,(nt.start+nt.count)*It)),rt!==null?(wn=Math.max(wn,0),wr=Math.min(wr,rt.count)):Lt!=null&&(wn=Math.max(wn,0),wr=Math.min(wr,Lt.count));const Sn=wr-wn;if(Sn<0||Sn===1/0)return;Ft.setup(_e,be,At,Se,rt);let Vn,vt=Pt;if(rt!==null&&(Vn=Ue.get(rt),vt=bt,vt.setIndex(Vn)),_e.isMesh)be.wireframe===!0?(Ne.setLineWidth(be.wireframeLinewidth*lt()),vt.setMode(ne.LINES)):vt.setMode(ne.TRIANGLES);else if(_e.isLine){let ut=be.linewidth;ut===void 0&&(ut=1),Ne.setLineWidth(ut*lt()),_e.isLineSegments?vt.setMode(ne.LINES):_e.isLineLoop?vt.setMode(ne.LINE_LOOP):vt.setMode(ne.LINE_STRIP)}else _e.isPoints?vt.setMode(ne.POINTS):_e.isSprite&&vt.setMode(ne.TRIANGLES);if(_e.isBatchedMesh)vt.renderMultiDraw(_e._multiDrawStarts,_e._multiDrawCounts,_e._multiDrawCount);else if(_e.isInstancedMesh)vt.renderInstances(wn,Sn,_e.count);else if(Se.isInstancedBufferGeometry){const ut=Se._maxInstanceCount!==void 0?Se._maxInstanceCount:1/0,On=Math.min(Se.instanceCount,ut);vt.renderInstances(wn,Sn,On)}else vt.render(wn,Sn)};function fn(G,ge,Se){G.transparent===!0&&G.side===Ra&&G.forceSinglePass===!1?(G.side=Ri,G.needsUpdate=!0,ma(G,ge,Se),G.side=Do,G.needsUpdate=!0,ma(G,ge,Se),G.side=Ra):ma(G,ge,Se)}this.compile=function(G,ge,Se=null){Se===null&&(Se=G),M=St.get(Se),M.init(),N.push(M),Se.traverseVisible(function(_e){_e.isLight&&_e.layers.test(ge.layers)&&(M.pushLight(_e),_e.castShadow&&M.pushShadow(_e))}),G!==Se&&G.traverseVisible(function(_e){_e.isLight&&_e.layers.test(ge.layers)&&(M.pushLight(_e),_e.castShadow&&M.pushShadow(_e))}),M.setupLights(A._useLegacyLights);const be=new Set;return G.traverse(function(_e){const nt=_e.material;if(nt)if(Array.isArray(nt))for(let wt=0;wt<nt.length;wt++){const At=nt[wt];fn(At,Se,_e),be.add(At)}else fn(nt,Se,_e),be.add(nt)}),N.pop(),M=null,be},this.compileAsync=function(G,ge,Se=null){const be=this.compile(G,ge,Se);return new Promise(_e=>{function nt(){if(be.forEach(function(wt){et.get(wt).currentProgram.isReady()&&be.delete(wt)}),be.size===0){_e(G);return}setTimeout(nt,10)}Ce.get("KHR_parallel_shader_compile")!==null?nt():setTimeout(nt,10)})};let un=null;function Ln(G){un&&un(G)}function tr(){nr.stop()}function sn(){nr.start()}const nr=new tC;nr.setAnimationLoop(Ln),typeof self<"u"&&nr.setContext(self),this.setAnimationLoop=function(G){un=G,jt.setAnimationLoop(G),G===null?nr.stop():nr.start()},jt.addEventListener("sessionstart",tr),jt.addEventListener("sessionend",sn),this.render=function(G,ge){if(ge!==void 0&&ge.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(R===!0)return;G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),ge.parent===null&&ge.matrixWorldAutoUpdate===!0&&ge.updateMatrixWorld(),jt.enabled===!0&&jt.isPresenting===!0&&(jt.cameraAutoUpdate===!0&&jt.updateCamera(ge),ge=jt.getCamera()),G.isScene===!0&&G.onBeforeRender(A,G,ge,z),M=St.get(G,N.length),M.init(),N.push(M),Pe.multiplyMatrices(ge.projectionMatrix,ge.matrixWorldInverse),ee.setFromProjectionMatrix(Pe),Ae=this.localClippingEnabled,fe=Ot.init(this.clippingPlanes,Ae),T=it.get(G,_.length),T.init(),_.push(T),Lr(G,ge,0,A.sortObjects),T.finish(),A.sortObjects===!0&&T.sort($,re),this.info.render.frame++,fe===!0&&Ot.beginShadows();const Se=M.state.shadowsArray;if(Ie.render(Se,G,ge),fe===!0&&Ot.endShadows(),this.info.autoReset===!0&&this.info.reset(),Qt.render(T,G),M.setupLights(A._useLegacyLights),ge.isArrayCamera){const be=ge.cameras;for(let _e=0,nt=be.length;_e<nt;_e++){const wt=be[_e];Ql(T,G,wt,wt.viewport)}}else Ql(T,G,ge);z!==null&&(H.updateMultisampleRenderTarget(z),H.updateRenderTargetMipmap(z)),G.isScene===!0&&G.onAfterRender(A,G,ge),Ft.resetDefaultState(),W=-1,O=null,N.pop(),N.length>0?M=N[N.length-1]:M=null,_.pop(),_.length>0?T=_[_.length-1]:T=null};function Lr(G,ge,Se,be){if(G.visible===!1)return;if(G.layers.test(ge.layers)){if(G.isGroup)Se=G.renderOrder;else if(G.isLOD)G.autoUpdate===!0&&G.update(ge);else if(G.isLight)M.pushLight(G),G.castShadow&&M.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||ee.intersectsSprite(G)){be&&Ke.setFromMatrixPosition(G.matrixWorld).applyMatrix4(Pe);const wt=Le.update(G),At=G.material;At.visible&&T.push(G,wt,At,Se,Ke.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(!G.frustumCulled||ee.intersectsObject(G))){const wt=Le.update(G),At=G.material;if(be&&(G.boundingSphere!==void 0?(G.boundingSphere===null&&G.computeBoundingSphere(),Ke.copy(G.boundingSphere.center)):(wt.boundingSphere===null&&wt.computeBoundingSphere(),Ke.copy(wt.boundingSphere.center)),Ke.applyMatrix4(G.matrixWorld).applyMatrix4(Pe)),Array.isArray(At)){const rt=wt.groups;for(let It=0,kt=rt.length;It<kt;It++){const Lt=rt[It],wn=At[Lt.materialIndex];wn&&wn.visible&&T.push(G,wt,wn,Se,Ke.z,Lt)}}else At.visible&&T.push(G,wt,At,Se,Ke.z,null)}}const nt=G.children;for(let wt=0,At=nt.length;wt<At;wt++)Lr(nt[wt],ge,Se,be)}function Ql(G,ge,Se,be){const _e=G.opaque,nt=G.transmissive,wt=G.transparent;M.setupLightsView(Se),fe===!0&&Ot.setGlobalState(A.clippingPlanes,Se),nt.length>0&&Ns(_e,nt,ge,Se),be&&Ne.viewport(I.copy(be)),_e.length>0&&ks(_e,ge,Se),nt.length>0&&ks(nt,ge,Se),wt.length>0&&ks(wt,ge,Se),Ne.buffers.depth.setTest(!0),Ne.buffers.depth.setMask(!0),Ne.buffers.color.setMask(!0),Ne.setPolygonOffset(!1)}function Ns(G,ge,Se,be){if((Se.isScene===!0?Se.overrideMaterial:null)!==null)return;const nt=je.isWebGL2;ke===null&&(ke=new ua(1,1,{generateMipmaps:!0,type:Ce.has("EXT_color_buffer_half_float")?mh:Ia,minFilter:Wl,samples:nt?4:0})),A.getDrawingBufferSize(Xe),nt?ke.setSize(Xe.x,Xe.y):ke.setSize(k0(Xe.x),k0(Xe.y));const wt=A.getRenderTarget();A.setRenderTarget(ke),A.getClearColor(oe),Z=A.getClearAlpha(),Z<1&&A.setClearColor(16777215,.5),A.clear();const At=A.toneMapping;A.toneMapping=La,ks(G,Se,be),H.updateMultisampleRenderTarget(ke),H.updateRenderTargetMipmap(ke);let rt=!1;for(let It=0,kt=ge.length;It<kt;It++){const Lt=ge[It],wn=Lt.object,wr=Lt.geometry,Sn=Lt.material,Vn=Lt.group;if(Sn.side===Ra&&wn.layers.test(be.layers)){const vt=Sn.side;Sn.side=Ri,Sn.needsUpdate=!0,Qi(wn,Se,be,wr,Sn,Vn),Sn.side=vt,Sn.needsUpdate=!0,rt=!0}}rt===!0&&(H.updateMultisampleRenderTarget(ke),H.updateRenderTargetMipmap(ke)),A.setRenderTarget(wt),A.setClearColor(oe,Z),A.toneMapping=At}function ks(G,ge,Se){const be=ge.isScene===!0?ge.overrideMaterial:null;for(let _e=0,nt=G.length;_e<nt;_e++){const wt=G[_e],At=wt.object,rt=wt.geometry,It=be===null?wt.material:be,kt=wt.group;At.layers.test(Se.layers)&&Qi(At,ge,Se,rt,It,kt)}}function Qi(G,ge,Se,be,_e,nt){G.onBeforeRender(A,ge,Se,be,_e,nt),G.modelViewMatrix.multiplyMatrices(Se.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),_e.onBeforeRender(A,ge,Se,be,G,nt),_e.transparent===!0&&_e.side===Ra&&_e.forceSinglePass===!1?(_e.side=Ri,_e.needsUpdate=!0,A.renderBufferDirect(Se,ge,be,_e,G,nt),_e.side=Do,_e.needsUpdate=!0,A.renderBufferDirect(Se,ge,be,_e,G,nt),_e.side=Ra):A.renderBufferDirect(Se,ge,be,_e,G,nt),G.onAfterRender(A,ge,Se,be,_e,nt)}function ma(G,ge,Se){ge.isScene!==!0&&(ge=qe);const be=et.get(G),_e=M.state.lights,nt=M.state.shadowsArray,wt=_e.state.version,At=pt.getParameters(G,_e.state,nt,ge,Se),rt=pt.getProgramCacheKey(At);let It=be.programs;be.environment=G.isMeshStandardMaterial?ge.environment:null,be.fog=ge.fog,be.envMap=(G.isMeshStandardMaterial?pe:B).get(G.envMap||be.environment),It===void 0&&(G.addEventListener("dispose",Je),It=new Map,be.programs=It);let kt=It.get(rt);if(kt!==void 0){if(be.currentProgram===kt&&be.lightsStateVersion===wt)return Nu(G,At),kt}else At.uniforms=pt.getUniforms(G),G.onBuild(Se,At,A),G.onBeforeCompile(At,A),kt=pt.acquireProgram(At,rt),It.set(rt,kt),be.uniforms=At.uniforms;const Lt=be.uniforms;return(!G.isShaderMaterial&&!G.isRawShaderMaterial||G.clipping===!0)&&(Lt.clippingPlanes=Ot.uniform),Nu(G,At),be.needsLights=ku(G),be.lightsStateVersion=wt,be.needsLights&&(Lt.ambientLightColor.value=_e.state.ambient,Lt.lightProbe.value=_e.state.probe,Lt.directionalLights.value=_e.state.directional,Lt.directionalLightShadows.value=_e.state.directionalShadow,Lt.spotLights.value=_e.state.spot,Lt.spotLightShadows.value=_e.state.spotShadow,Lt.rectAreaLights.value=_e.state.rectArea,Lt.ltc_1.value=_e.state.rectAreaLTC1,Lt.ltc_2.value=_e.state.rectAreaLTC2,Lt.pointLights.value=_e.state.point,Lt.pointLightShadows.value=_e.state.pointShadow,Lt.hemisphereLights.value=_e.state.hemi,Lt.directionalShadowMap.value=_e.state.directionalShadowMap,Lt.directionalShadowMatrix.value=_e.state.directionalShadowMatrix,Lt.spotShadowMap.value=_e.state.spotShadowMap,Lt.spotLightMatrix.value=_e.state.spotLightMatrix,Lt.spotLightMap.value=_e.state.spotLightMap,Lt.pointShadowMap.value=_e.state.pointShadowMap,Lt.pointShadowMatrix.value=_e.state.pointShadowMatrix),be.currentProgram=kt,be.uniformsList=null,kt}function Cu(G){if(G.uniformsList===null){const ge=G.currentProgram.getUniforms();G.uniformsList=u0.seqWithValue(ge.seq,G.uniforms)}return G.uniformsList}function Nu(G,ge){const Se=et.get(G);Se.outputColorSpace=ge.outputColorSpace,Se.batching=ge.batching,Se.instancing=ge.instancing,Se.instancingColor=ge.instancingColor,Se.skinning=ge.skinning,Se.morphTargets=ge.morphTargets,Se.morphNormals=ge.morphNormals,Se.morphColors=ge.morphColors,Se.morphTargetsCount=ge.morphTargetsCount,Se.numClippingPlanes=ge.numClippingPlanes,Se.numIntersection=ge.numClipIntersection,Se.vertexAlphas=ge.vertexAlphas,Se.vertexTangents=ge.vertexTangents,Se.toneMapping=ge.toneMapping}function kh(G,ge,Se,be,_e){ge.isScene!==!0&&(ge=qe),H.resetTextureUnits();const nt=ge.fog,wt=be.isMeshStandardMaterial?ge.environment:null,At=z===null?A.outputColorSpace:z.isXRRenderTarget===!0?z.texture.colorSpace:Oa,rt=(be.isMeshStandardMaterial?pe:B).get(be.envMap||wt),It=be.vertexColors===!0&&!!Se.attributes.color&&Se.attributes.color.itemSize===4,kt=!!Se.attributes.tangent&&(!!be.normalMap||be.anisotropy>0),Lt=!!Se.morphAttributes.position,wn=!!Se.morphAttributes.normal,wr=!!Se.morphAttributes.color;let Sn=La;be.toneMapped&&(z===null||z.isXRRenderTarget===!0)&&(Sn=A.toneMapping);const Vn=Se.morphAttributes.position||Se.morphAttributes.normal||Se.morphAttributes.color,vt=Vn!==void 0?Vn.length:0,ut=et.get(be),On=M.state.lights;if(fe===!0&&(Ae===!0||G!==O)){const Sr=G===O&&be.id===W;Ot.setState(be,G,Sr)}let $t=!1;be.version===ut.__version?(ut.needsLights&&ut.lightsStateVersion!==On.state.version||ut.outputColorSpace!==At||_e.isBatchedMesh&&ut.batching===!1||!_e.isBatchedMesh&&ut.batching===!0||_e.isInstancedMesh&&ut.instancing===!1||!_e.isInstancedMesh&&ut.instancing===!0||_e.isSkinnedMesh&&ut.skinning===!1||!_e.isSkinnedMesh&&ut.skinning===!0||_e.isInstancedMesh&&ut.instancingColor===!0&&_e.instanceColor===null||_e.isInstancedMesh&&ut.instancingColor===!1&&_e.instanceColor!==null||ut.envMap!==rt||be.fog===!0&&ut.fog!==nt||ut.numClippingPlanes!==void 0&&(ut.numClippingPlanes!==Ot.numPlanes||ut.numIntersection!==Ot.numIntersection)||ut.vertexAlphas!==It||ut.vertexTangents!==kt||ut.morphTargets!==Lt||ut.morphNormals!==wn||ut.morphColors!==wr||ut.toneMapping!==Sn||je.isWebGL2===!0&&ut.morphTargetsCount!==vt)&&($t=!0):($t=!0,ut.__version=be.version);let Fn=ut.currentProgram;$t===!0&&(Fn=ma(be,ge,_e));let ms=!1,jr=!1,Hn=!1;const Tn=Fn.getUniforms(),pi=ut.uniforms;if(Ne.useProgram(Fn.program)&&(ms=!0,jr=!0,Hn=!0),be.id!==W&&(W=be.id,jr=!0),ms||O!==G){Tn.setValue(ne,"projectionMatrix",G.projectionMatrix),Tn.setValue(ne,"viewMatrix",G.matrixWorldInverse);const Sr=Tn.map.cameraPosition;Sr!==void 0&&Sr.setValue(ne,Ke.setFromMatrixPosition(G.matrixWorld)),je.logarithmicDepthBuffer&&Tn.setValue(ne,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),(be.isMeshPhongMaterial||be.isMeshToonMaterial||be.isMeshLambertMaterial||be.isMeshBasicMaterial||be.isMeshStandardMaterial||be.isShaderMaterial)&&Tn.setValue(ne,"isOrthographic",G.isOrthographicCamera===!0),O!==G&&(O=G,jr=!0,Hn=!0)}if(_e.isSkinnedMesh){Tn.setOptional(ne,_e,"bindMatrix"),Tn.setOptional(ne,_e,"bindMatrixInverse");const Sr=_e.skeleton;Sr&&(je.floatVertexTextures?(Sr.boneTexture===null&&Sr.computeBoneTexture(),Tn.setValue(ne,"boneTexture",Sr.boneTexture,H)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}_e.isBatchedMesh&&(Tn.setOptional(ne,_e,"batchingTexture"),Tn.setValue(ne,"batchingTexture",_e._matricesTexture,H));const Bo=Se.morphAttributes;if((Bo.position!==void 0||Bo.normal!==void 0||Bo.color!==void 0&&je.isWebGL2===!0)&&Xt.update(_e,Se,Fn),(jr||ut.receiveShadow!==_e.receiveShadow)&&(ut.receiveShadow=_e.receiveShadow,Tn.setValue(ne,"receiveShadow",_e.receiveShadow)),be.isMeshGouraudMaterial&&be.envMap!==null&&(pi.envMap.value=rt,pi.flipEnvMap.value=rt.isCubeTexture&&rt.isRenderTargetTexture===!1?-1:1),jr&&(Tn.setValue(ne,"toneMappingExposure",A.toneMappingExposure),ut.needsLights&&Rs(pi,Hn),nt&&be.fog===!0&&Ze.refreshFogUniforms(pi,nt),Ze.refreshMaterialUniforms(pi,be,me,Q,ke),u0.upload(ne,Cu(ut),pi,H)),be.isShaderMaterial&&be.uniformsNeedUpdate===!0&&(u0.upload(ne,Cu(ut),pi,H),be.uniformsNeedUpdate=!1),be.isSpriteMaterial&&Tn.setValue(ne,"center",_e.center),Tn.setValue(ne,"modelViewMatrix",_e.modelViewMatrix),Tn.setValue(ne,"normalMatrix",_e.normalMatrix),Tn.setValue(ne,"modelMatrix",_e.matrixWorld),be.isShaderMaterial||be.isRawShaderMaterial){const Sr=be.uniformsGroups;for(let ga=0,Jr=Sr.length;ga<Jr;ga++)if(je.isWebGL2){const jo=Sr[ga];tn.update(jo,Fn),tn.bind(jo,Fn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Fn}function Rs(G,ge){G.ambientLightColor.needsUpdate=ge,G.lightProbe.needsUpdate=ge,G.directionalLights.needsUpdate=ge,G.directionalLightShadows.needsUpdate=ge,G.pointLights.needsUpdate=ge,G.pointLightShadows.needsUpdate=ge,G.spotLights.needsUpdate=ge,G.spotLightShadows.needsUpdate=ge,G.rectAreaLights.needsUpdate=ge,G.hemisphereLights.needsUpdate=ge}function ku(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&G.lights===!0}this.getActiveCubeFace=function(){return D},this.getActiveMipmapLevel=function(){return U},this.getRenderTarget=function(){return z},this.setRenderTargetTextures=function(G,ge,Se){et.get(G.texture).__webglTexture=ge,et.get(G.depthTexture).__webglTexture=Se;const be=et.get(G);be.__hasExternalTextures=!0,be.__hasExternalTextures&&(be.__autoAllocateDepthBuffer=Se===void 0,be.__autoAllocateDepthBuffer||Ce.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),be.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(G,ge){const Se=et.get(G);Se.__webglFramebuffer=ge,Se.__useDefaultFramebuffer=ge===void 0},this.setRenderTarget=function(G,ge=0,Se=0){z=G,D=ge,U=Se;let be=!0,_e=null,nt=!1,wt=!1;if(G){const rt=et.get(G);rt.__useDefaultFramebuffer!==void 0?(Ne.bindFramebuffer(ne.FRAMEBUFFER,null),be=!1):rt.__webglFramebuffer===void 0?H.setupRenderTarget(G):rt.__hasExternalTextures&&H.rebindTextures(G,et.get(G.texture).__webglTexture,et.get(G.depthTexture).__webglTexture);const It=G.texture;(It.isData3DTexture||It.isDataArrayTexture||It.isCompressedArrayTexture)&&(wt=!0);const kt=et.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(Array.isArray(kt[ge])?_e=kt[ge][Se]:_e=kt[ge],nt=!0):je.isWebGL2&&G.samples>0&&H.useMultisampledRTT(G)===!1?_e=et.get(G).__webglMultisampledFramebuffer:Array.isArray(kt)?_e=kt[Se]:_e=kt,I.copy(G.viewport),K.copy(G.scissor),ie=G.scissorTest}else I.copy(te).multiplyScalar(me).floor(),K.copy(j).multiplyScalar(me).floor(),ie=X;if(Ne.bindFramebuffer(ne.FRAMEBUFFER,_e)&&je.drawBuffers&&be&&Ne.drawBuffers(G,_e),Ne.viewport(I),Ne.scissor(K),Ne.setScissorTest(ie),nt){const rt=et.get(G.texture);ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_CUBE_MAP_POSITIVE_X+ge,rt.__webglTexture,Se)}else if(wt){const rt=et.get(G.texture),It=ge||0;ne.framebufferTextureLayer(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,rt.__webglTexture,Se||0,It)}W=-1},this.readRenderTargetPixels=function(G,ge,Se,be,_e,nt,wt){if(!(G&&G.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let At=et.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&wt!==void 0&&(At=At[wt]),At){Ne.bindFramebuffer(ne.FRAMEBUFFER,At);try{const rt=G.texture,It=rt.format,kt=rt.type;if(It!==Ni&&ht.convert(It)!==ne.getParameter(ne.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Lt=kt===mh&&(Ce.has("EXT_color_buffer_half_float")||je.isWebGL2&&Ce.has("EXT_color_buffer_float"));if(kt!==Ia&&ht.convert(kt)!==ne.getParameter(ne.IMPLEMENTATION_COLOR_READ_TYPE)&&!(kt===oa&&(je.isWebGL2||Ce.has("OES_texture_float")||Ce.has("WEBGL_color_buffer_float")))&&!Lt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ge>=0&&ge<=G.width-be&&Se>=0&&Se<=G.height-_e&&ne.readPixels(ge,Se,be,_e,ht.convert(It),ht.convert(kt),nt)}finally{const rt=z!==null?et.get(z).__webglFramebuffer:null;Ne.bindFramebuffer(ne.FRAMEBUFFER,rt)}}},this.copyFramebufferToTexture=function(G,ge,Se=0){const be=Math.pow(2,-Se),_e=Math.floor(ge.image.width*be),nt=Math.floor(ge.image.height*be);H.setTexture2D(ge,0),ne.copyTexSubImage2D(ne.TEXTURE_2D,Se,0,0,G.x,G.y,_e,nt),Ne.unbindTexture()},this.copyTextureToTexture=function(G,ge,Se,be=0){const _e=ge.image.width,nt=ge.image.height,wt=ht.convert(Se.format),At=ht.convert(Se.type);H.setTexture2D(Se,0),ne.pixelStorei(ne.UNPACK_FLIP_Y_WEBGL,Se.flipY),ne.pixelStorei(ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Se.premultiplyAlpha),ne.pixelStorei(ne.UNPACK_ALIGNMENT,Se.unpackAlignment),ge.isDataTexture?ne.texSubImage2D(ne.TEXTURE_2D,be,G.x,G.y,_e,nt,wt,At,ge.image.data):ge.isCompressedTexture?ne.compressedTexSubImage2D(ne.TEXTURE_2D,be,G.x,G.y,ge.mipmaps[0].width,ge.mipmaps[0].height,wt,ge.mipmaps[0].data):ne.texSubImage2D(ne.TEXTURE_2D,be,G.x,G.y,wt,At,ge.image),be===0&&Se.generateMipmaps&&ne.generateMipmap(ne.TEXTURE_2D),Ne.unbindTexture()},this.copyTextureToTexture3D=function(G,ge,Se,be,_e=0){if(A.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const nt=G.max.x-G.min.x+1,wt=G.max.y-G.min.y+1,At=G.max.z-G.min.z+1,rt=ht.convert(be.format),It=ht.convert(be.type);let kt;if(be.isData3DTexture)H.setTexture3D(be,0),kt=ne.TEXTURE_3D;else if(be.isDataArrayTexture||be.isCompressedArrayTexture)H.setTexture2DArray(be,0),kt=ne.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ne.pixelStorei(ne.UNPACK_FLIP_Y_WEBGL,be.flipY),ne.pixelStorei(ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,be.premultiplyAlpha),ne.pixelStorei(ne.UNPACK_ALIGNMENT,be.unpackAlignment);const Lt=ne.getParameter(ne.UNPACK_ROW_LENGTH),wn=ne.getParameter(ne.UNPACK_IMAGE_HEIGHT),wr=ne.getParameter(ne.UNPACK_SKIP_PIXELS),Sn=ne.getParameter(ne.UNPACK_SKIP_ROWS),Vn=ne.getParameter(ne.UNPACK_SKIP_IMAGES),vt=Se.isCompressedTexture?Se.mipmaps[_e]:Se.image;ne.pixelStorei(ne.UNPACK_ROW_LENGTH,vt.width),ne.pixelStorei(ne.UNPACK_IMAGE_HEIGHT,vt.height),ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,G.min.x),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,G.min.y),ne.pixelStorei(ne.UNPACK_SKIP_IMAGES,G.min.z),Se.isDataTexture||Se.isData3DTexture?ne.texSubImage3D(kt,_e,ge.x,ge.y,ge.z,nt,wt,At,rt,It,vt.data):Se.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ne.compressedTexSubImage3D(kt,_e,ge.x,ge.y,ge.z,nt,wt,At,rt,vt.data)):ne.texSubImage3D(kt,_e,ge.x,ge.y,ge.z,nt,wt,At,rt,It,vt),ne.pixelStorei(ne.UNPACK_ROW_LENGTH,Lt),ne.pixelStorei(ne.UNPACK_IMAGE_HEIGHT,wn),ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,wr),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,Sn),ne.pixelStorei(ne.UNPACK_SKIP_IMAGES,Vn),_e===0&&be.generateMipmaps&&ne.generateMipmap(kt),Ne.unbindTexture()},this.initTexture=function(G){G.isCubeTexture?H.setTextureCube(G,0):G.isData3DTexture?H.setTexture3D(G,0):G.isDataArrayTexture||G.isCompressedArrayTexture?H.setTexture2DArray(G,0):H.setTexture2D(G,0),Ne.unbindTexture()},this.resetState=function(){D=0,U=0,z=null,Ne.reset(),Ft.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return la}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===sy?"display-p3":"srgb",t.unpackColorSpace=xn.workingColorSpace===Gp?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===kr?Bl:C_}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Bl?kr:Oa}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class cC extends z_{}cC.prototype.isWebGL1Renderer=!0;class ly{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new at(e),this.density=t}clone(){return new ly(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class cy{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new at(e),this.near=t,this.far=r}clone(){return new cy(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class B_ extends hn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class uy{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Ep,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=fs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=fs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=fs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ei=new q;class _u{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Ei.fromBufferAttribute(this,t),Ei.applyMatrix4(e),this.setXYZ(t,Ei.x,Ei.y,Ei.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Ei.fromBufferAttribute(this,t),Ei.applyNormalMatrix(e),this.setXYZ(t,Ei.x,Ei.y,Ei.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Ei.fromBufferAttribute(this,t),Ei.transformDirection(e),this.setXYZ(t,Ei.x,Ei.y,Ei.z);return this}setX(e,t){return this.normalized&&(t=Zt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Zt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Zt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Zt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=qi(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=qi(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=qi(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=qi(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Zt(t,this.array),r=Zt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Zt(t,this.array),r=Zt(r,this.array),i=Zt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Zt(t,this.array),r=Zt(r,this.array),i=Zt(i,this.array),s=Zt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new pn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new _u(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class j_ extends fi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new at(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Hd;const If=new q,Wd=new q,Gd=new q,Xd=new Re,Df=new Re,uC=new Ut,bg=new q,Uf=new q,Mg=new q,oM=new Re,Kx=new Re,lM=new Re;class dC extends hn{constructor(e=new j_){if(super(),this.isSprite=!0,this.type="Sprite",Hd===void 0){Hd=new Jt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new uy(t,5);Hd.setIndex([0,1,2,0,2,3]),Hd.setAttribute("position",new _u(r,3,0,!1)),Hd.setAttribute("uv",new _u(r,2,3,!1))}this.geometry=Hd,this.material=e,this.center=new Re(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Wd.setFromMatrixScale(this.matrixWorld),uC.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Gd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Wd.multiplyScalar(-Gd.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;Eg(bg.set(-.5,-.5,0),Gd,o,Wd,i,s),Eg(Uf.set(.5,-.5,0),Gd,o,Wd,i,s),Eg(Mg.set(.5,.5,0),Gd,o,Wd,i,s),oM.set(0,0),Kx.set(1,0),lM.set(1,1);let l=e.ray.intersectTriangle(bg,Uf,Mg,!1,If);if(l===null&&(Eg(Uf.set(-.5,.5,0),Gd,o,Wd,i,s),Kx.set(0,1),l=e.ray.intersectTriangle(bg,Mg,Uf,!1,If),l===null))return;const d=e.ray.origin.distanceTo(If);d<e.near||d>e.far||t.push({distance:d,point:If.clone(),uv:Ci.getInterpolation(If,bg,Uf,Mg,oM,Kx,lM,new Re),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Eg(n,e,t,r,i,s){Xd.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Df.x=s*Xd.x-i*Xd.y,Df.y=i*Xd.x+s*Xd.y):Df.copy(Xd),n.copy(e),n.x+=Df.x,n.y+=Df.y,n.applyMatrix4(uC)}const Tg=new q,cM=new q;class hC extends hn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Tg.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Tg);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Tg.setFromMatrixPosition(e.matrixWorld),cM.setFromMatrixPosition(this.matrixWorld);const r=Tg.distanceTo(cM)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const uM=new q,dM=new vn,hM=new vn,s6=new q,fM=new Ut,Ag=new q,Jx=new hi,pM=new Ut,Qx=new Th;class fC extends _r{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=n1,this.bindMatrix=new Ut,this.bindMatrixInverse=new Ut,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Pi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Ag),this.boundingBox.expandByPoint(Ag)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new hi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Ag),this.boundingSphere.expandByPoint(Ag)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Jx.copy(this.boundingSphere),Jx.applyMatrix4(i),e.ray.intersectsSphere(Jx)!==!1&&(pM.copy(i).invert(),Qx.copy(e.ray).applyMatrix4(pM),!(this.boundingBox!==null&&Qx.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Qx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new vn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===n1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===EA?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;dM.fromBufferAttribute(i.attributes.skinIndex,e),hM.fromBufferAttribute(i.attributes.skinWeight,e),uM.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=hM.getComponent(s);if(o!==0){const l=dM.getComponent(s);fM.multiplyMatrices(r.bones[l].matrixWorld,r.boneInverses[l]),t.addScaledVector(s6.copy(uM).applyMatrix4(fM),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class V_ extends hn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class mu extends dr{constructor(e=null,t=1,r=1,i,s,o,l,d,f=or,p=or,y,x){super(null,o,l,d,f,p,i,s,y,x),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const mM=new Ut,a6=new Ut;class dy{constructor(e=[],t=[]){this.uuid=fs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Ut)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Ut;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const l=e[s]?e[s].matrixWorld:a6;mM.multiplyMatrices(l,t[s]),mM.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new dy(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new mu(t,e,e,Ni,oa);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new V_),this.bones.push(o),this.boneInverses.push(new Ut().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const l=r[i];e.boneInverses.push(l.toArray())}return e}}class vh extends pn{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const $d=new Ut,gM=new Ut,Cg=[],yM=new Pi,o6=new Ut,Of=new _r,Ff=new hi;class pC extends _r{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new vh(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,o6)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Pi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,$d),yM.copy(e.boundingBox).applyMatrix4($d),this.boundingBox.union(yM)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new hi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,$d),Ff.copy(e.boundingSphere).applyMatrix4($d),this.boundingSphere.union(Ff)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Of.geometry=this.geometry,Of.material=this.material,Of.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ff.copy(this.boundingSphere),Ff.applyMatrix4(r),e.ray.intersectsSphere(Ff)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,$d),gM.multiplyMatrices(r,$d),Of.matrixWorld=gM,Of.raycast(e,Cg);for(let o=0,l=Cg.length;o<l;o++){const d=Cg[o];d.instanceId=s,d.object=this,t.push(d)}Cg.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new vh(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function l6(n,e){return n.z-e.z}function c6(n,e){return e.z-n.z}class u6{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const s=r[this.index];i.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const qd="batchId",El=new Ut,xM=new Ut,d6=new Ut,vM=new Ut,ev=new Yp,Ng=new Pi,Gc=new hi,zf=new q,tv=new u6,li=new _r,kg=[];function h6(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}class mC extends _r{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,r=t*2,i){super(new Jt,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new mu(t,e,e,Ni,oa);this._matricesTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const l in e.attributes){const d=e.getAttribute(l),{array:f,itemSize:p,normalized:y}=d,x=new f.constructor(r*p),v=new d.constructor(x,p,y);v.setUsage(d.usage),t.setAttribute(l,v)}if(e.getIndex()!==null){const l=r>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new pn(l,1))}const o=i>65536?new Uint32Array(r):new Uint16Array(r);t.setAttribute(qd,new pn(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(qd))throw new Error(`BatchedMesh: Geometry cannot use attribute "${qd}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(r===qd)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Pi);const e=this._geometryCount,t=this.boundingBox,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,El),this.getBoundingBoxAt(i,Ng).applyMatrix4(El),t.union(Ng))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new hi);const e=this._geometryCount,t=this.boundingSphere,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,El),this.getBoundingSphereAt(i,Gc).applyMatrix4(El),t.union(Gc))}addGeometry(e,t=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,l=this._drawRanges,d=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const f=e.getIndex(),p=f!==null;if(p&&(r===-1?i.indexCount=f.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const y=this._visibility,x=this._active,v=this._matricesTexture,b=this._matricesTexture.image.data;y.push(!0),x.push(!0);const T=this._geometryCount;this._geometryCount++,d6.toArray(b,T*16),v.needsUpdate=!0,o.push(i),l.push({start:p?i.indexStart:i.vertexStart,count:-1}),d.push({boxInitialized:!1,box:new Pi,sphereInitialized:!1,sphere:new hi});const M=this.geometry.getAttribute(qd);for(let _=0;_<i.vertexCount;_++)M.setX(i.vertexStart+_,T);return M.needsUpdate=!0,this.setGeometryAt(T,e),T}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=t.getIndex(),l=this._reservedRanges[e];if(i&&o.count>l.indexCount||t.attributes.position.count>l.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const d=l.vertexStart,f=l.vertexCount;for(const v in r.attributes){if(v===qd)continue;const b=t.getAttribute(v),T=r.getAttribute(v);h6(b,T,d);const M=b.itemSize;for(let _=b.count,N=f;_<N;_++){const A=d+_;for(let R=0;R<M;R++)T.setComponent(A,R,0)}T.needsUpdate=!0}if(i){const v=l.indexStart;for(let b=0;b<o.count;b++)s.setX(v+b,d+o.getX(b));for(let b=o.count,T=l.indexCount;b<T;b++)s.setX(v+b,d);s.needsUpdate=!0}const p=this._bounds[e];t.boundingBox!==null?(p.box.copy(t.boundingBox),p.boxInitialized=!0):p.boxInitialized=!1,t.boundingSphere!==null?(p.sphere.copy(t.boundingSphere),p.sphereInitialized=!0):p.sphereInitialized=!1;const y=this._drawRanges[e],x=t.getAttribute("position");return y.count=i?o.count:x.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.box,o=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const l=o.index,d=o.attributes.position,f=this._drawRanges[e];for(let p=f.start,y=f.start+f.count;p<y;p++){let x=p;l&&(x=l.getX(x)),s.expandByPoint(zf.fromBufferAttribute(d,x))}i.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.sphere,o=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,Ng),Ng.getCenter(s.center);const l=o.index,d=o.attributes.position,f=this._drawRanges[e];let p=0;for(let y=f.start,x=f.start+f.count;y<x;y++){let v=y;l&&(v=l.getX(v)),zf.fromBufferAttribute(d,v),p=Math.max(p,s.center.distanceToSquared(zf))}s.radius=Math.sqrt(p),i.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const r=this._active,i=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?this:(t.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const r=this._active,i=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:t.fromArray(i,e*16)}setVisibleAt(e,t){const r=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1||r[e]===t?this:(r[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:t[e]}raycast(e,t){const r=this._visibility,i=this._active,s=this._drawRanges,o=this._geometryCount,l=this.matrixWorld,d=this.geometry;li.material=this.material,li.geometry.index=d.index,li.geometry.attributes=d.attributes,li.geometry.boundingBox===null&&(li.geometry.boundingBox=new Pi),li.geometry.boundingSphere===null&&(li.geometry.boundingSphere=new hi);for(let f=0;f<o;f++){if(!r[f]||!i[f])continue;const p=s[f];li.geometry.setDrawRange(p.start,p.count),this.getMatrixAt(f,li.matrixWorld).premultiply(l),this.getBoundingBoxAt(f,li.geometry.boundingBox),this.getBoundingSphereAt(f,li.geometry.boundingSphere),li.raycast(e,kg);for(let y=0,x=kg.length;y<x;y++){const v=kg[y];v.object=this,v.batchId=f,t.push(v)}kg.length=0}li.material=null,li.geometry.index=null,li.geometry.attributes={},li.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),l=o===null?1:o.array.BYTES_PER_ELEMENT,d=this._visibility,f=this._multiDrawStarts,p=this._multiDrawCounts,y=this._drawRanges,x=this.perObjectFrustumCulled;x&&(vM.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),ev.setFromProjectionMatrix(vM,e.isWebGPURenderer?gh:la));let v=0;if(this.sortObjects){xM.copy(this.matrixWorld).invert(),zf.setFromMatrixPosition(r.matrixWorld).applyMatrix4(xM);for(let M=0,_=d.length;M<_;M++)if(d[M]){this.getMatrixAt(M,El),this.getBoundingSphereAt(M,Gc).applyMatrix4(El);let N=!1;if(x&&(N=!ev.intersectsSphere(Gc)),!N){const A=zf.distanceTo(Gc.center);tv.push(y[M],A)}}const b=tv.list,T=this.customSort;T===null?b.sort(s.transparent?c6:l6):T.call(this,b,r);for(let M=0,_=b.length;M<_;M++){const N=b[M];f[v]=N.start*l,p[v]=N.count,v++}tv.reset()}else for(let b=0,T=d.length;b<T;b++)if(d[b]){let M=!1;if(x&&(this.getMatrixAt(b,El),this.getBoundingSphereAt(b,Gc).applyMatrix4(El),M=!ev.intersectsSphere(Gc)),!M){const _=y[b];f[v]=_.start*l,p[v]=_.count,v++}}this._multiDrawCount=v,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Li extends fi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new at(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const _M=new q,wM=new q,SM=new Ut,nv=new Th,Rg=new hi;class Gl extends hn{constructor(e=new Jt,t=new Li){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)_M.fromBufferAttribute(t,i-1),wM.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=_M.distanceTo(wM);e.setAttribute("lineDistance",new yt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Rg.copy(r.boundingSphere),Rg.applyMatrix4(i),Rg.radius+=s,e.ray.intersectsSphere(Rg)===!1)return;SM.copy(i).invert(),nv.copy(e.ray).applyMatrix4(SM);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),d=l*l,f=new q,p=new q,y=new q,x=new q,v=this.isLineSegments?2:1,b=r.index,M=r.attributes.position;if(b!==null){const _=Math.max(0,o.start),N=Math.min(b.count,o.start+o.count);for(let A=_,R=N-1;A<R;A+=v){const D=b.getX(A),U=b.getX(A+1);if(f.fromBufferAttribute(M,D),p.fromBufferAttribute(M,U),nv.distanceSqToSegment(f,p,x,y)>d)continue;x.applyMatrix4(this.matrixWorld);const W=e.ray.origin.distanceTo(x);W<e.near||W>e.far||t.push({distance:W,point:y.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}else{const _=Math.max(0,o.start),N=Math.min(M.count,o.start+o.count);for(let A=_,R=N-1;A<R;A+=v){if(f.fromBufferAttribute(M,A),p.fromBufferAttribute(M,A+1),nv.distanceSqToSegment(f,p,x,y)>d)continue;x.applyMatrix4(this.matrixWorld);const U=e.ray.origin.distanceTo(x);U<e.near||U>e.far||t.push({distance:U,point:y.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}const bM=new q,MM=new q;class Ba extends Gl{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)bM.fromBufferAttribute(t,i),MM.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+bM.distanceTo(MM);e.setAttribute("lineDistance",new yt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class gC extends Gl{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class H_ extends fi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new at(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const EM=new Ut,L1=new Th,Pg=new hi,Lg=new q;class yC extends hn{constructor(e=new Jt,t=new H_){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Pg.copy(r.boundingSphere),Pg.applyMatrix4(i),Pg.radius+=s,e.ray.intersectsSphere(Pg)===!1)return;EM.copy(i).invert(),L1.copy(e.ray).applyMatrix4(EM);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),d=l*l,f=r.index,y=r.attributes.position;if(f!==null){const x=Math.max(0,o.start),v=Math.min(f.count,o.start+o.count);for(let b=x,T=v;b<T;b++){const M=f.getX(b);Lg.fromBufferAttribute(y,M),TM(Lg,M,d,i,e,t,this)}}else{const x=Math.max(0,o.start),v=Math.min(y.count,o.start+o.count);for(let b=x,T=v;b<T;b++)Lg.fromBufferAttribute(y,b),TM(Lg,b,d,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function TM(n,e,t,r,i,s,o){const l=L1.distanceSqToPoint(n);if(l<t){const d=new q;L1.closestPointToPoint(n,d),d.applyMatrix4(r);const f=i.ray.origin.distanceTo(d);if(f<i.near||f>i.far)return;s.push({distance:f,distanceToRay:Math.sqrt(l),point:d,index:e,face:null,object:o})}}class f6 extends dr{constructor(e,t,r,i,s,o,l,d,f){super(e,t,r,i,s,o,l,d,f),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:lr,this.magFilter=s!==void 0?s:lr,this.generateMipmaps=!1;const p=this;function y(){p.needsUpdate=!0,e.requestVideoFrameCallback(y)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(y)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class p6 extends dr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=or,this.minFilter=or,this.generateMipmaps=!1,this.needsUpdate=!0}}class hy extends dr{constructor(e,t,r,i,s,o,l,d,f,p,y,x){super(null,o,l,d,f,p,i,s,y,x),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class m6 extends hy{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=di}}class g6 extends hy{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,Uo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class y6 extends dr{constructor(e,t,r,i,s,o,l,d,f){super(e,t,r,i,s,o,l,d,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class fa{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let l=0,d=s-1,f;for(;l<=d;)if(i=Math.floor(l+(d-l)/2),f=r[i]-o,f<0)l=i+1;else if(f>0)d=i-1;else{d=i;break}if(i=d,r[i]===o)return i/(s-1);const p=r[i],x=r[i+1]-p,v=(o-p)/x;return(i+v)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),l=this.getPoint(s),d=t||(o.isVector2?new Re:new q);return d.copy(l).sub(o).normalize(),d}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new q,i=[],s=[],o=[],l=new q,d=new Ut;for(let v=0;v<=e;v++){const b=v/e;i[v]=this.getTangentAt(b,new q)}s[0]=new q,o[0]=new q;let f=Number.MAX_VALUE;const p=Math.abs(i[0].x),y=Math.abs(i[0].y),x=Math.abs(i[0].z);p<=f&&(f=p,r.set(1,0,0)),y<=f&&(f=y,r.set(0,1,0)),x<=f&&r.set(0,0,1),l.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],l),o[0].crossVectors(i[0],s[0]);for(let v=1;v<=e;v++){if(s[v]=s[v-1].clone(),o[v]=o[v-1].clone(),l.crossVectors(i[v-1],i[v]),l.length()>Number.EPSILON){l.normalize();const b=Math.acos(Qn(i[v-1].dot(i[v]),-1,1));s[v].applyMatrix4(d.makeRotationAxis(l,b))}o[v].crossVectors(i[v],s[v])}if(t===!0){let v=Math.acos(Qn(s[0].dot(s[e]),-1,1));v/=e,i[0].dot(l.crossVectors(s[0],s[e]))>0&&(v=-v);for(let b=1;b<=e;b++)s[b].applyMatrix4(d.makeRotationAxis(i[b],v*b)),o[b].crossVectors(i[b],s[b])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class fy extends fa{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,l=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=d}getPoint(e,t){const r=t||new Re,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const l=this.aStartAngle+e*s;let d=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const p=Math.cos(this.aRotation),y=Math.sin(this.aRotation),x=d-this.aX,v=f-this.aY;d=x*p-v*y+this.aX,f=x*y+v*p+this.aY}return r.set(d,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class xC extends fy{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function W_(){let n=0,e=0,t=0,r=0;function i(s,o,l,d){n=s,e=l,t=-3*s+3*o-2*l-d,r=2*s-2*o+l+d}return{initCatmullRom:function(s,o,l,d,f){i(o,l,f*(l-s),f*(d-o))},initNonuniformCatmullRom:function(s,o,l,d,f,p,y){let x=(o-s)/f-(l-s)/(f+p)+(l-o)/p,v=(l-o)/p-(d-o)/(p+y)+(d-l)/y;x*=p,v*=p,i(o,l,x,v)},calc:function(s){const o=s*s,l=o*s;return n+e*s+t*o+r*l}}}const Ig=new q,rv=new W_,iv=new W_,sv=new W_;class vC extends fa{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new q){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let l=Math.floor(o),d=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:d===0&&l===s-1&&(l=s-2,d=1);let f,p;this.closed||l>0?f=i[(l-1)%s]:(Ig.subVectors(i[0],i[1]).add(i[0]),f=Ig);const y=i[l%s],x=i[(l+1)%s];if(this.closed||l+2<s?p=i[(l+2)%s]:(Ig.subVectors(i[s-1],i[s-2]).add(i[s-1]),p=Ig),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let b=Math.pow(f.distanceToSquared(y),v),T=Math.pow(y.distanceToSquared(x),v),M=Math.pow(x.distanceToSquared(p),v);T<1e-4&&(T=1),b<1e-4&&(b=T),M<1e-4&&(M=T),rv.initNonuniformCatmullRom(f.x,y.x,x.x,p.x,b,T,M),iv.initNonuniformCatmullRom(f.y,y.y,x.y,p.y,b,T,M),sv.initNonuniformCatmullRom(f.z,y.z,x.z,p.z,b,T,M)}else this.curveType==="catmullrom"&&(rv.initCatmullRom(f.x,y.x,x.x,p.x,this.tension),iv.initCatmullRom(f.y,y.y,x.y,p.y,this.tension),sv.initCatmullRom(f.z,y.z,x.z,p.z,this.tension));return r.set(rv.calc(d),iv.calc(d),sv.calc(d)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new q().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function AM(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,l=n*n,d=n*l;return(2*t-2*r+s+o)*d+(-3*t+3*r-2*s-o)*l+s*n+t}function x6(n,e){const t=1-n;return t*t*e}function v6(n,e){return 2*(1-n)*n*e}function _6(n,e){return n*n*e}function rp(n,e,t,r){return x6(n,e)+v6(n,t)+_6(n,r)}function w6(n,e){const t=1-n;return t*t*t*e}function S6(n,e){const t=1-n;return 3*t*t*n*e}function b6(n,e){return 3*(1-n)*n*n*e}function M6(n,e){return n*n*n*e}function ip(n,e,t,r,i){return w6(n,e)+S6(n,t)+b6(n,r)+M6(n,i)}class G_ extends fa{constructor(e=new Re,t=new Re,r=new Re,i=new Re){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Re){const r=t,i=this.v0,s=this.v1,o=this.v2,l=this.v3;return r.set(ip(e,i.x,s.x,o.x,l.x),ip(e,i.y,s.y,o.y,l.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class _C extends fa{constructor(e=new q,t=new q,r=new q,i=new q){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new q){const r=t,i=this.v0,s=this.v1,o=this.v2,l=this.v3;return r.set(ip(e,i.x,s.x,o.x,l.x),ip(e,i.y,s.y,o.y,l.y),ip(e,i.z,s.z,o.z,l.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class X_ extends fa{constructor(e=new Re,t=new Re){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Re){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Re){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class wC extends fa{constructor(e=new q,t=new q){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new q){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new q){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $_ extends fa{constructor(e=new Re,t=new Re,r=new Re){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Re){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(rp(e,i.x,s.x,o.x),rp(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class q_ extends fa{constructor(e=new q,t=new q,r=new q){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new q){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(rp(e,i.x,s.x,o.x),rp(e,i.y,s.y,o.y),rp(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Y_ extends fa{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Re){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),l=s-o,d=i[o===0?o:o-1],f=i[o],p=i[o>i.length-2?i.length-1:o+1],y=i[o>i.length-3?i.length-1:o+2];return r.set(AM(l,d.x,f.x,p.x,y.x),AM(l,d.y,f.y,p.y,y.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Re().fromArray(i))}return this}}var R0=Object.freeze({__proto__:null,ArcCurve:xC,CatmullRomCurve3:vC,CubicBezierCurve:G_,CubicBezierCurve3:_C,EllipseCurve:fy,LineCurve:X_,LineCurve3:wC,QuadraticBezierCurve:$_,QuadraticBezierCurve3:q_,SplineCurve:Y_});class SC extends fa{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new R0[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,l=this.curves[s],d=l.getLength(),f=d===0?0:1-o/d;return l.getPointAt(f,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],l=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,d=o.getPoints(l);for(let f=0;f<d.length;f++){const p=d[f];r&&r.equals(p)||(t.push(p),r=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new R0[i.type]().fromJSON(i))}return this}}class Ap extends SC{constructor(e){super(),this.type="Path",this.currentPoint=new Re,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new X_(this.currentPoint.clone(),new Re(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new $_(this.currentPoint.clone(),new Re(e,t),new Re(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const l=new G_(this.currentPoint.clone(),new Re(e,t),new Re(r,i),new Re(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new Y_(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const l=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(e+l,t+d,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,l,d){const f=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+f,t+p,r,i,s,o,l,d),this}absellipse(e,t,r,i,s,o,l,d){const f=new fy(e,t,r,i,s,o,l,d);if(this.curves.length>0){const y=f.getPoint(0);y.equals(this.currentPoint)||this.lineTo(y.x,y.y)}this.curves.push(f);const p=f.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Jp extends Jt{constructor(e=[new Re(0,-.5),new Re(.5,0),new Re(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Qn(i,0,Math.PI*2);const s=[],o=[],l=[],d=[],f=[],p=1/t,y=new q,x=new Re,v=new q,b=new q,T=new q;let M=0,_=0;for(let N=0;N<=e.length-1;N++)switch(N){case 0:M=e[N+1].x-e[N].x,_=e[N+1].y-e[N].y,v.x=_*1,v.y=-M,v.z=_*0,T.copy(v),v.normalize(),d.push(v.x,v.y,v.z);break;case e.length-1:d.push(T.x,T.y,T.z);break;default:M=e[N+1].x-e[N].x,_=e[N+1].y-e[N].y,v.x=_*1,v.y=-M,v.z=_*0,b.copy(v),v.x+=T.x,v.y+=T.y,v.z+=T.z,v.normalize(),d.push(v.x,v.y,v.z),T.copy(b)}for(let N=0;N<=t;N++){const A=r+N*p*i,R=Math.sin(A),D=Math.cos(A);for(let U=0;U<=e.length-1;U++){y.x=e[U].x*R,y.y=e[U].y,y.z=e[U].x*D,o.push(y.x,y.y,y.z),x.x=N/t,x.y=U/(e.length-1),l.push(x.x,x.y);const z=d[3*U+0]*R,W=d[3*U+1],O=d[3*U+0]*D;f.push(z,W,O)}}for(let N=0;N<t;N++)for(let A=0;A<e.length-1;A++){const R=A+N*e.length,D=R,U=R+e.length,z=R+e.length+1,W=R+1;s.push(D,U,W),s.push(z,W,U)}this.setIndex(s),this.setAttribute("position",new yt(o,3)),this.setAttribute("uv",new yt(l,2)),this.setAttribute("normal",new yt(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jp(e.points,e.segments,e.phiStart,e.phiLength)}}class py extends Jp{constructor(e=1,t=1,r=4,i=8){const s=new Ap;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new py(e.radius,e.length,e.capSegments,e.radialSegments)}}class my extends Jt{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],l=[],d=[],f=new q,p=new Re;o.push(0,0,0),l.push(0,0,1),d.push(.5,.5);for(let y=0,x=3;y<=t;y++,x+=3){const v=r+y/t*i;f.x=e*Math.cos(v),f.y=e*Math.sin(v),o.push(f.x,f.y,f.z),l.push(0,0,1),p.x=(o[x]/e+1)/2,p.y=(o[x+1]/e+1)/2,d.push(p.x,p.y)}for(let y=1;y<=t;y++)s.push(y,y+1,0);this.setIndex(s),this.setAttribute("position",new yt(o,3)),this.setAttribute("normal",new yt(l,3)),this.setAttribute("uv",new yt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new my(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Ch extends Jt{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,l=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:d};const f=this;i=Math.floor(i),s=Math.floor(s);const p=[],y=[],x=[],v=[];let b=0;const T=[],M=r/2;let _=0;N(),o===!1&&(e>0&&A(!0),t>0&&A(!1)),this.setIndex(p),this.setAttribute("position",new yt(y,3)),this.setAttribute("normal",new yt(x,3)),this.setAttribute("uv",new yt(v,2));function N(){const R=new q,D=new q;let U=0;const z=(t-e)/r;for(let W=0;W<=s;W++){const O=[],I=W/s,K=I*(t-e)+e;for(let ie=0;ie<=i;ie++){const oe=ie/i,Z=oe*d+l,le=Math.sin(Z),Q=Math.cos(Z);D.x=K*le,D.y=-I*r+M,D.z=K*Q,y.push(D.x,D.y,D.z),R.set(le,z,Q).normalize(),x.push(R.x,R.y,R.z),v.push(oe,1-I),O.push(b++)}T.push(O)}for(let W=0;W<i;W++)for(let O=0;O<s;O++){const I=T[O][W],K=T[O+1][W],ie=T[O+1][W+1],oe=T[O][W+1];p.push(I,K,oe),p.push(K,ie,oe),U+=6}f.addGroup(_,U,0),_+=U}function A(R){const D=b,U=new Re,z=new q;let W=0;const O=R===!0?e:t,I=R===!0?1:-1;for(let ie=1;ie<=i;ie++)y.push(0,M*I,0),x.push(0,I,0),v.push(.5,.5),b++;const K=b;for(let ie=0;ie<=i;ie++){const Z=ie/i*d+l,le=Math.cos(Z),Q=Math.sin(Z);z.x=O*Q,z.y=M*I,z.z=O*le,y.push(z.x,z.y,z.z),x.push(0,I,0),U.x=le*.5+.5,U.y=Q*.5*I+.5,v.push(U.x,U.y),b++}for(let ie=0;ie<i;ie++){const oe=D+ie,Z=K+ie;R===!0?p.push(Z,Z+1,oe):p.push(Z+1,Z,oe),W+=3}f.addGroup(_,W,R===!0?1:2),_+=W}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ch(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class gy extends Ch{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,l=Math.PI*2){super(0,e,t,r,i,s,o,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:l}}static fromJSON(e){return new gy(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Kl extends Jt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];l(i),f(r),p(),this.setAttribute("position",new yt(s,3)),this.setAttribute("normal",new yt(s.slice(),3)),this.setAttribute("uv",new yt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function l(N){const A=new q,R=new q,D=new q;for(let U=0;U<t.length;U+=3)v(t[U+0],A),v(t[U+1],R),v(t[U+2],D),d(A,R,D,N)}function d(N,A,R,D){const U=D+1,z=[];for(let W=0;W<=U;W++){z[W]=[];const O=N.clone().lerp(R,W/U),I=A.clone().lerp(R,W/U),K=U-W;for(let ie=0;ie<=K;ie++)ie===0&&W===U?z[W][ie]=O:z[W][ie]=O.clone().lerp(I,ie/K)}for(let W=0;W<U;W++)for(let O=0;O<2*(U-W)-1;O++){const I=Math.floor(O/2);O%2===0?(x(z[W][I+1]),x(z[W+1][I]),x(z[W][I])):(x(z[W][I+1]),x(z[W+1][I+1]),x(z[W+1][I]))}}function f(N){const A=new q;for(let R=0;R<s.length;R+=3)A.x=s[R+0],A.y=s[R+1],A.z=s[R+2],A.normalize().multiplyScalar(N),s[R+0]=A.x,s[R+1]=A.y,s[R+2]=A.z}function p(){const N=new q;for(let A=0;A<s.length;A+=3){N.x=s[A+0],N.y=s[A+1],N.z=s[A+2];const R=M(N)/2/Math.PI+.5,D=_(N)/Math.PI+.5;o.push(R,1-D)}b(),y()}function y(){for(let N=0;N<o.length;N+=6){const A=o[N+0],R=o[N+2],D=o[N+4],U=Math.max(A,R,D),z=Math.min(A,R,D);U>.9&&z<.1&&(A<.2&&(o[N+0]+=1),R<.2&&(o[N+2]+=1),D<.2&&(o[N+4]+=1))}}function x(N){s.push(N.x,N.y,N.z)}function v(N,A){const R=N*3;A.x=e[R+0],A.y=e[R+1],A.z=e[R+2]}function b(){const N=new q,A=new q,R=new q,D=new q,U=new Re,z=new Re,W=new Re;for(let O=0,I=0;O<s.length;O+=9,I+=6){N.set(s[O+0],s[O+1],s[O+2]),A.set(s[O+3],s[O+4],s[O+5]),R.set(s[O+6],s[O+7],s[O+8]),U.set(o[I+0],o[I+1]),z.set(o[I+2],o[I+3]),W.set(o[I+4],o[I+5]),D.copy(N).add(A).add(R).divideScalar(3);const K=M(D);T(U,I+0,N,K),T(z,I+2,A,K),T(W,I+4,R,K)}}function T(N,A,R,D){D<0&&N.x===1&&(o[A]=N.x-1),R.x===0&&R.z===0&&(o[A]=D/2/Math.PI+.5)}function M(N){return Math.atan2(N.z,-N.x)}function _(N){return Math.atan2(-N.y,Math.sqrt(N.x*N.x+N.z*N.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kl(e.vertices,e.indices,e.radius,e.details)}}class yy extends Kl{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new yy(e.radius,e.detail)}}const Dg=new q,Ug=new q,av=new q,Og=new Ci;class bC extends Jt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(fu*t),o=e.getIndex(),l=e.getAttribute("position"),d=o?o.count:l.count,f=[0,0,0],p=["a","b","c"],y=new Array(3),x={},v=[];for(let b=0;b<d;b+=3){o?(f[0]=o.getX(b),f[1]=o.getX(b+1),f[2]=o.getX(b+2)):(f[0]=b,f[1]=b+1,f[2]=b+2);const{a:T,b:M,c:_}=Og;if(T.fromBufferAttribute(l,f[0]),M.fromBufferAttribute(l,f[1]),_.fromBufferAttribute(l,f[2]),Og.getNormal(av),y[0]=`${Math.round(T.x*i)},${Math.round(T.y*i)},${Math.round(T.z*i)}`,y[1]=`${Math.round(M.x*i)},${Math.round(M.y*i)},${Math.round(M.z*i)}`,y[2]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,!(y[0]===y[1]||y[1]===y[2]||y[2]===y[0]))for(let N=0;N<3;N++){const A=(N+1)%3,R=y[N],D=y[A],U=Og[p[N]],z=Og[p[A]],W=`${R}_${D}`,O=`${D}_${R}`;O in x&&x[O]?(av.dot(x[O].normal)<=s&&(v.push(U.x,U.y,U.z),v.push(z.x,z.y,z.z)),x[O]=null):W in x||(x[W]={index0:f[N],index1:f[A],normal:av.clone()})}}for(const b in x)if(x[b]){const{index0:T,index1:M}=x[b];Dg.fromBufferAttribute(l,T),Ug.fromBufferAttribute(l,M),v.push(Dg.x,Dg.y,Dg.z),v.push(Ug.x,Ug.y,Ug.z)}this.setAttribute("position",new yt(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class gu extends Ap{constructor(e){super(e),this.uuid=fs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new Ap().fromJSON(i))}return this}}const E6={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=MC(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let l,d,f,p,y,x,v;if(r&&(s=k6(n,e,s,t)),n.length>80*t){l=f=n[0],d=p=n[1];for(let b=t;b<i;b+=t)y=n[b],x=n[b+1],y<l&&(l=y),x<d&&(d=x),y>f&&(f=y),x>p&&(p=x);v=Math.max(f-l,p-d),v=v!==0?32767/v:0}return Cp(s,o,t,l,d,v,0),o}};function MC(n,e,t,r,i){let s,o;if(i===j6(n,e,t,r)>0)for(s=e;s<t;s+=r)o=CM(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=CM(s,n[s],n[s+1],o);return o&&xy(o,o.next)&&(kp(o),o=o.next),o}function wu(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(xy(t,t.next)||qn(t.prev,t,t.next)===0)){if(kp(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Cp(n,e,t,r,i,s,o){if(!n)return;!o&&s&&D6(n,r,i,s);let l=n,d,f;for(;n.prev!==n.next;){if(d=n.prev,f=n.next,s?A6(n,r,i,s):T6(n)){e.push(d.i/t|0),e.push(n.i/t|0),e.push(f.i/t|0),kp(n),n=f.next,l=f.next;continue}if(n=f,n===l){o?o===1?(n=C6(wu(n),e,t),Cp(n,e,t,r,i,s,2)):o===2&&N6(n,e,t,r,i,s):Cp(wu(n),e,t,r,i,s,1);break}}}function T6(n){const e=n.prev,t=n,r=n.next;if(qn(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,l=e.y,d=t.y,f=r.y,p=i<s?i<o?i:o:s<o?s:o,y=l<d?l<f?l:f:d<f?d:f,x=i>s?i>o?i:o:s>o?s:o,v=l>d?l>f?l:f:d>f?d:f;let b=r.next;for(;b!==e;){if(b.x>=p&&b.x<=x&&b.y>=y&&b.y<=v&&lh(i,l,s,d,o,f,b.x,b.y)&&qn(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function A6(n,e,t,r){const i=n.prev,s=n,o=n.next;if(qn(i,s,o)>=0)return!1;const l=i.x,d=s.x,f=o.x,p=i.y,y=s.y,x=o.y,v=l<d?l<f?l:f:d<f?d:f,b=p<y?p<x?p:x:y<x?y:x,T=l>d?l>f?l:f:d>f?d:f,M=p>y?p>x?p:x:y>x?y:x,_=I1(v,b,e,t,r),N=I1(T,M,e,t,r);let A=n.prevZ,R=n.nextZ;for(;A&&A.z>=_&&R&&R.z<=N;){if(A.x>=v&&A.x<=T&&A.y>=b&&A.y<=M&&A!==i&&A!==o&&lh(l,p,d,y,f,x,A.x,A.y)&&qn(A.prev,A,A.next)>=0||(A=A.prevZ,R.x>=v&&R.x<=T&&R.y>=b&&R.y<=M&&R!==i&&R!==o&&lh(l,p,d,y,f,x,R.x,R.y)&&qn(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;A&&A.z>=_;){if(A.x>=v&&A.x<=T&&A.y>=b&&A.y<=M&&A!==i&&A!==o&&lh(l,p,d,y,f,x,A.x,A.y)&&qn(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;R&&R.z<=N;){if(R.x>=v&&R.x<=T&&R.y>=b&&R.y<=M&&R!==i&&R!==o&&lh(l,p,d,y,f,x,R.x,R.y)&&qn(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function C6(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!xy(i,s)&&EC(i,r,r.next,s)&&Np(i,s)&&Np(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),kp(r),kp(r.next),r=n=s),r=r.next}while(r!==n);return wu(r)}function N6(n,e,t,r,i,s){let o=n;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&F6(o,l)){let d=TC(o,l);o=wu(o,o.next),d=wu(d,d.next),Cp(o,e,t,r,i,s,0),Cp(d,e,t,r,i,s,0);return}l=l.next}o=o.next}while(o!==n)}function k6(n,e,t,r){const i=[];let s,o,l,d,f;for(s=0,o=e.length;s<o;s++)l=e[s]*r,d=s<o-1?e[s+1]*r:n.length,f=MC(n,l,d,r,!1),f===f.next&&(f.steiner=!0),i.push(O6(f));for(i.sort(R6),s=0;s<i.length;s++)t=P6(i[s],t);return t}function R6(n,e){return n.x-e.x}function P6(n,e){const t=L6(n,e);if(!t)return e;const r=TC(t,n);return wu(r,r.next),wu(t,t.next)}function L6(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const x=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(x<=s&&x>r&&(r=x,i=t.x<t.next.x?t:t.next,x===s))return i}t=t.next}while(t!==e);if(!i)return null;const l=i,d=i.x,f=i.y;let p=1/0,y;t=i;do s>=t.x&&t.x>=d&&s!==t.x&&lh(o<f?s:r,o,d,f,o<f?r:s,o,t.x,t.y)&&(y=Math.abs(o-t.y)/(s-t.x),Np(t,n)&&(y<p||y===p&&(t.x>i.x||t.x===i.x&&I6(i,t)))&&(i=t,p=y)),t=t.next;while(t!==l);return i}function I6(n,e){return qn(n.prev,n,e.prev)<0&&qn(e.next,n,n.next)<0}function D6(n,e,t,r){let i=n;do i.z===0&&(i.z=I1(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,U6(i)}function U6(n){let e,t,r,i,s,o,l,d,f=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,l=0,e=0;e<f&&(l++,r=r.nextZ,!!r);e++);for(d=f;l>0||d>0&&r;)l!==0&&(d===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,l--):(i=r,r=r.nextZ,d--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,f*=2}while(o>1);return n}function I1(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function O6(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function lh(n,e,t,r,i,s,o,l){return(i-o)*(e-l)>=(n-o)*(s-l)&&(n-o)*(r-l)>=(t-o)*(e-l)&&(t-o)*(s-l)>=(i-o)*(r-l)}function F6(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!z6(n,e)&&(Np(n,e)&&Np(e,n)&&B6(n,e)&&(qn(n.prev,n,e.prev)||qn(n,e.prev,e))||xy(n,e)&&qn(n.prev,n,n.next)>0&&qn(e.prev,e,e.next)>0)}function qn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function xy(n,e){return n.x===e.x&&n.y===e.y}function EC(n,e,t,r){const i=zg(qn(n,e,t)),s=zg(qn(n,e,r)),o=zg(qn(t,r,n)),l=zg(qn(t,r,e));return!!(i!==s&&o!==l||i===0&&Fg(n,t,e)||s===0&&Fg(n,r,e)||o===0&&Fg(t,n,r)||l===0&&Fg(t,e,r))}function Fg(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function zg(n){return n>0?1:n<0?-1:0}function z6(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&EC(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Np(n,e){return qn(n.prev,n,n.next)<0?qn(n,e,n.next)>=0&&qn(n,n.prev,e)>=0:qn(n,e,n.prev)<0||qn(n,n.next,e)<0}function B6(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function TC(n,e){const t=new D1(n.i,n.x,n.y),r=new D1(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function CM(n,e,t,r){const i=new D1(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function kp(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function D1(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function j6(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class Da{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Da.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];NM(e),kM(r,e);let o=e.length;t.forEach(NM);for(let d=0;d<t.length;d++)i.push(o),o+=t[d].length,kM(r,t[d]);const l=E6.triangulate(r,i);for(let d=0;d<l.length;d+=3)s.push(l.slice(d,d+3));return s}}function NM(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function kM(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Qp extends Jt{constructor(e=new gu([new Re(.5,.5),new Re(-.5,.5),new Re(-.5,-.5),new Re(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let l=0,d=e.length;l<d;l++){const f=e[l];o(f)}this.setAttribute("position",new yt(i,3)),this.setAttribute("uv",new yt(s,2)),this.computeVertexNormals();function o(l){const d=[],f=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,y=t.depth!==void 0?t.depth:1;let x=t.bevelEnabled!==void 0?t.bevelEnabled:!0,v=t.bevelThickness!==void 0?t.bevelThickness:.2,b=t.bevelSize!==void 0?t.bevelSize:v-.1,T=t.bevelOffset!==void 0?t.bevelOffset:0,M=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,N=t.UVGenerator!==void 0?t.UVGenerator:V6;let A,R=!1,D,U,z,W;_&&(A=_.getSpacedPoints(p),R=!0,x=!1,D=_.computeFrenetFrames(p,!1),U=new q,z=new q,W=new q),x||(M=0,v=0,b=0,T=0);const O=l.extractPoints(f);let I=O.shape;const K=O.holes;if(!Da.isClockWise(I)){I=I.reverse();for(let ne=0,ze=K.length;ne<ze;ne++){const Ce=K[ne];Da.isClockWise(Ce)&&(K[ne]=Ce.reverse())}}const oe=Da.triangulateShape(I,K),Z=I;for(let ne=0,ze=K.length;ne<ze;ne++){const Ce=K[ne];I=I.concat(Ce)}function le(ne,ze,Ce){return ze||console.error("THREE.ExtrudeGeometry: vec does not exist"),ne.clone().addScaledVector(ze,Ce)}const Q=I.length,me=oe.length;function $(ne,ze,Ce){let je,Ne,xt;const et=ne.x-ze.x,H=ne.y-ze.y,B=Ce.x-ne.x,pe=Ce.y-ne.y,Ue=et*et+H*H,Oe=et*pe-H*B;if(Math.abs(Oe)>Number.EPSILON){const Le=Math.sqrt(Ue),pt=Math.sqrt(B*B+pe*pe),Ze=ze.x-H/Le,it=ze.y+et/Le,St=Ce.x-pe/pt,Ot=Ce.y+B/pt,Ie=((St-Ze)*pe-(Ot-it)*B)/(et*pe-H*B);je=Ze+et*Ie-ne.x,Ne=it+H*Ie-ne.y;const Qt=je*je+Ne*Ne;if(Qt<=2)return new Re(je,Ne);xt=Math.sqrt(Qt/2)}else{let Le=!1;et>Number.EPSILON?B>Number.EPSILON&&(Le=!0):et<-Number.EPSILON?B<-Number.EPSILON&&(Le=!0):Math.sign(H)===Math.sign(pe)&&(Le=!0),Le?(je=-H,Ne=et,xt=Math.sqrt(Ue)):(je=et,Ne=H,xt=Math.sqrt(Ue/2))}return new Re(je/xt,Ne/xt)}const re=[];for(let ne=0,ze=Z.length,Ce=ze-1,je=ne+1;ne<ze;ne++,Ce++,je++)Ce===ze&&(Ce=0),je===ze&&(je=0),re[ne]=$(Z[ne],Z[Ce],Z[je]);const te=[];let j,X=re.concat();for(let ne=0,ze=K.length;ne<ze;ne++){const Ce=K[ne];j=[];for(let je=0,Ne=Ce.length,xt=Ne-1,et=je+1;je<Ne;je++,xt++,et++)xt===Ne&&(xt=0),et===Ne&&(et=0),j[je]=$(Ce[je],Ce[xt],Ce[et]);te.push(j),X=X.concat(j)}for(let ne=0;ne<M;ne++){const ze=ne/M,Ce=v*Math.cos(ze*Math.PI/2),je=b*Math.sin(ze*Math.PI/2)+T;for(let Ne=0,xt=Z.length;Ne<xt;Ne++){const et=le(Z[Ne],re[Ne],je);Pe(et.x,et.y,-Ce)}for(let Ne=0,xt=K.length;Ne<xt;Ne++){const et=K[Ne];j=te[Ne];for(let H=0,B=et.length;H<B;H++){const pe=le(et[H],j[H],je);Pe(pe.x,pe.y,-Ce)}}}const ee=b+T;for(let ne=0;ne<Q;ne++){const ze=x?le(I[ne],X[ne],ee):I[ne];R?(z.copy(D.normals[0]).multiplyScalar(ze.x),U.copy(D.binormals[0]).multiplyScalar(ze.y),W.copy(A[0]).add(z).add(U),Pe(W.x,W.y,W.z)):Pe(ze.x,ze.y,0)}for(let ne=1;ne<=p;ne++)for(let ze=0;ze<Q;ze++){const Ce=x?le(I[ze],X[ze],ee):I[ze];R?(z.copy(D.normals[ne]).multiplyScalar(Ce.x),U.copy(D.binormals[ne]).multiplyScalar(Ce.y),W.copy(A[ne]).add(z).add(U),Pe(W.x,W.y,W.z)):Pe(Ce.x,Ce.y,y/p*ne)}for(let ne=M-1;ne>=0;ne--){const ze=ne/M,Ce=v*Math.cos(ze*Math.PI/2),je=b*Math.sin(ze*Math.PI/2)+T;for(let Ne=0,xt=Z.length;Ne<xt;Ne++){const et=le(Z[Ne],re[Ne],je);Pe(et.x,et.y,y+Ce)}for(let Ne=0,xt=K.length;Ne<xt;Ne++){const et=K[Ne];j=te[Ne];for(let H=0,B=et.length;H<B;H++){const pe=le(et[H],j[H],je);R?Pe(pe.x,pe.y+A[p-1].y,A[p-1].x+Ce):Pe(pe.x,pe.y,y+Ce)}}}fe(),Ae();function fe(){const ne=i.length/3;if(x){let ze=0,Ce=Q*ze;for(let je=0;je<me;je++){const Ne=oe[je];Xe(Ne[2]+Ce,Ne[1]+Ce,Ne[0]+Ce)}ze=p+M*2,Ce=Q*ze;for(let je=0;je<me;je++){const Ne=oe[je];Xe(Ne[0]+Ce,Ne[1]+Ce,Ne[2]+Ce)}}else{for(let ze=0;ze<me;ze++){const Ce=oe[ze];Xe(Ce[2],Ce[1],Ce[0])}for(let ze=0;ze<me;ze++){const Ce=oe[ze];Xe(Ce[0]+Q*p,Ce[1]+Q*p,Ce[2]+Q*p)}}r.addGroup(ne,i.length/3-ne,0)}function Ae(){const ne=i.length/3;let ze=0;ke(Z,ze),ze+=Z.length;for(let Ce=0,je=K.length;Ce<je;Ce++){const Ne=K[Ce];ke(Ne,ze),ze+=Ne.length}r.addGroup(ne,i.length/3-ne,1)}function ke(ne,ze){let Ce=ne.length;for(;--Ce>=0;){const je=Ce;let Ne=Ce-1;Ne<0&&(Ne=ne.length-1);for(let xt=0,et=p+M*2;xt<et;xt++){const H=Q*xt,B=Q*(xt+1),pe=ze+je+H,Ue=ze+Ne+H,Oe=ze+Ne+B,Le=ze+je+B;Ke(pe,Ue,Oe,Le)}}}function Pe(ne,ze,Ce){d.push(ne),d.push(ze),d.push(Ce)}function Xe(ne,ze,Ce){qe(ne),qe(ze),qe(Ce);const je=i.length/3,Ne=N.generateTopUV(r,i,je-3,je-2,je-1);lt(Ne[0]),lt(Ne[1]),lt(Ne[2])}function Ke(ne,ze,Ce,je){qe(ne),qe(ze),qe(je),qe(ze),qe(Ce),qe(je);const Ne=i.length/3,xt=N.generateSideWallUV(r,i,Ne-6,Ne-3,Ne-2,Ne-1);lt(xt[0]),lt(xt[1]),lt(xt[3]),lt(xt[1]),lt(xt[2]),lt(xt[3])}function qe(ne){i.push(d[ne*3+0]),i.push(d[ne*3+1]),i.push(d[ne*3+2])}function lt(ne){s.push(ne.x),s.push(ne.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return H6(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];r.push(l)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new R0[i.type]().fromJSON(i)),new Qp(r,e.options)}}const V6={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],l=e[r*3],d=e[r*3+1],f=e[i*3],p=e[i*3+1];return[new Re(s,o),new Re(l,d),new Re(f,p)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],l=e[t*3+1],d=e[t*3+2],f=e[r*3],p=e[r*3+1],y=e[r*3+2],x=e[i*3],v=e[i*3+1],b=e[i*3+2],T=e[s*3],M=e[s*3+1],_=e[s*3+2];return Math.abs(l-p)<Math.abs(o-f)?[new Re(o,1-d),new Re(f,1-y),new Re(x,1-b),new Re(T,1-_)]:[new Re(l,1-d),new Re(p,1-y),new Re(v,1-b),new Re(M,1-_)]}};function H6(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class vy extends Kl{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new vy(e.radius,e.detail)}}class em extends Kl{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new em(e.radius,e.detail)}}class _y extends Jt{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const l=[],d=[],f=[],p=[];let y=e;const x=(t-e)/i,v=new q,b=new Re;for(let T=0;T<=i;T++){for(let M=0;M<=r;M++){const _=s+M/r*o;v.x=y*Math.cos(_),v.y=y*Math.sin(_),d.push(v.x,v.y,v.z),f.push(0,0,1),b.x=(v.x/t+1)/2,b.y=(v.y/t+1)/2,p.push(b.x,b.y)}y+=x}for(let T=0;T<i;T++){const M=T*(r+1);for(let _=0;_<r;_++){const N=_+M,A=N,R=N+r+1,D=N+r+2,U=N+1;l.push(A,R,U),l.push(R,D,U)}}this.setIndex(l),this.setAttribute("position",new yt(d,3)),this.setAttribute("normal",new yt(f,3)),this.setAttribute("uv",new yt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _y(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class wy extends Jt{constructor(e=new gu([new Re(0,.5),new Re(-.5,-.5),new Re(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let l=0,d=0;if(Array.isArray(e)===!1)f(e);else for(let p=0;p<e.length;p++)f(e[p]),this.addGroup(l,d,p),l+=d,d=0;this.setIndex(r),this.setAttribute("position",new yt(i,3)),this.setAttribute("normal",new yt(s,3)),this.setAttribute("uv",new yt(o,2));function f(p){const y=i.length/3,x=p.extractPoints(t);let v=x.shape;const b=x.holes;Da.isClockWise(v)===!1&&(v=v.reverse());for(let M=0,_=b.length;M<_;M++){const N=b[M];Da.isClockWise(N)===!0&&(b[M]=N.reverse())}const T=Da.triangulateShape(v,b);for(let M=0,_=b.length;M<_;M++){const N=b[M];v=v.concat(N)}for(let M=0,_=v.length;M<_;M++){const N=v[M];i.push(N.x,N.y,0),s.push(0,0,1),o.push(N.x,N.y)}for(let M=0,_=T.length;M<_;M++){const N=T[M],A=N[0]+y,R=N[1]+y,D=N[2]+y;r.push(A,R,D),d+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return W6(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new wy(r,e.curveSegments)}}function W6(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class tm extends Jt{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:l},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const d=Math.min(o+l,Math.PI);let f=0;const p=[],y=new q,x=new q,v=[],b=[],T=[],M=[];for(let _=0;_<=r;_++){const N=[],A=_/r;let R=0;_===0&&o===0?R=.5/t:_===r&&d===Math.PI&&(R=-.5/t);for(let D=0;D<=t;D++){const U=D/t;y.x=-e*Math.cos(i+U*s)*Math.sin(o+A*l),y.y=e*Math.cos(o+A*l),y.z=e*Math.sin(i+U*s)*Math.sin(o+A*l),b.push(y.x,y.y,y.z),x.copy(y).normalize(),T.push(x.x,x.y,x.z),M.push(U+R,1-A),N.push(f++)}p.push(N)}for(let _=0;_<r;_++)for(let N=0;N<t;N++){const A=p[_][N+1],R=p[_][N],D=p[_+1][N],U=p[_+1][N+1];(_!==0||o>0)&&v.push(A,R,U),(_!==r-1||d<Math.PI)&&v.push(R,D,U)}this.setIndex(v),this.setAttribute("position",new yt(b,3)),this.setAttribute("normal",new yt(T,3)),this.setAttribute("uv",new yt(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tm(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Sy extends Kl{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Sy(e.radius,e.detail)}}class by extends Jt{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],l=[],d=[],f=[],p=new q,y=new q,x=new q;for(let v=0;v<=r;v++)for(let b=0;b<=i;b++){const T=b/i*s,M=v/r*Math.PI*2;y.x=(e+t*Math.cos(M))*Math.cos(T),y.y=(e+t*Math.cos(M))*Math.sin(T),y.z=t*Math.sin(M),l.push(y.x,y.y,y.z),p.x=e*Math.cos(T),p.y=e*Math.sin(T),x.subVectors(y,p).normalize(),d.push(x.x,x.y,x.z),f.push(b/i),f.push(v/r)}for(let v=1;v<=r;v++)for(let b=1;b<=i;b++){const T=(i+1)*v+b-1,M=(i+1)*(v-1)+b-1,_=(i+1)*(v-1)+b,N=(i+1)*v+b;o.push(T,M,N),o.push(M,_,N)}this.setIndex(o),this.setAttribute("position",new yt(l,3)),this.setAttribute("normal",new yt(d,3)),this.setAttribute("uv",new yt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new by(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class My extends Jt{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const l=[],d=[],f=[],p=[],y=new q,x=new q,v=new q,b=new q,T=new q,M=new q,_=new q;for(let A=0;A<=r;++A){const R=A/r*s*Math.PI*2;N(R,s,o,e,v),N(R+.01,s,o,e,b),M.subVectors(b,v),_.addVectors(b,v),T.crossVectors(M,_),_.crossVectors(T,M),T.normalize(),_.normalize();for(let D=0;D<=i;++D){const U=D/i*Math.PI*2,z=-t*Math.cos(U),W=t*Math.sin(U);y.x=v.x+(z*_.x+W*T.x),y.y=v.y+(z*_.y+W*T.y),y.z=v.z+(z*_.z+W*T.z),d.push(y.x,y.y,y.z),x.subVectors(y,v).normalize(),f.push(x.x,x.y,x.z),p.push(A/r),p.push(D/i)}}for(let A=1;A<=r;A++)for(let R=1;R<=i;R++){const D=(i+1)*(A-1)+(R-1),U=(i+1)*A+(R-1),z=(i+1)*A+R,W=(i+1)*(A-1)+R;l.push(D,U,W),l.push(U,z,W)}this.setIndex(l),this.setAttribute("position",new yt(d,3)),this.setAttribute("normal",new yt(f,3)),this.setAttribute("uv",new yt(p,2));function N(A,R,D,U,z){const W=Math.cos(A),O=Math.sin(A),I=D/R*A,K=Math.cos(I);z.x=U*(2+K)*.5*W,z.y=U*(2+K)*O*.5,z.z=U*Math.sin(I)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new My(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Ey extends Jt{constructor(e=new q_(new q(-1,-1,0),new q(-1,1,0),new q(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new q,d=new q,f=new Re;let p=new q;const y=[],x=[],v=[],b=[];T(),this.setIndex(b),this.setAttribute("position",new yt(y,3)),this.setAttribute("normal",new yt(x,3)),this.setAttribute("uv",new yt(v,2));function T(){for(let A=0;A<t;A++)M(A);M(s===!1?t:0),N(),_()}function M(A){p=e.getPointAt(A/t,p);const R=o.normals[A],D=o.binormals[A];for(let U=0;U<=i;U++){const z=U/i*Math.PI*2,W=Math.sin(z),O=-Math.cos(z);d.x=O*R.x+W*D.x,d.y=O*R.y+W*D.y,d.z=O*R.z+W*D.z,d.normalize(),x.push(d.x,d.y,d.z),l.x=p.x+r*d.x,l.y=p.y+r*d.y,l.z=p.z+r*d.z,y.push(l.x,l.y,l.z)}}function _(){for(let A=1;A<=t;A++)for(let R=1;R<=i;R++){const D=(i+1)*(A-1)+(R-1),U=(i+1)*A+(R-1),z=(i+1)*A+R,W=(i+1)*(A-1)+R;b.push(D,U,W),b.push(U,z,W)}}function N(){for(let A=0;A<=t;A++)for(let R=0;R<=i;R++)f.x=A/t,f.y=R/i,v.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Ey(new R0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class AC extends Jt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new q,s=new q;if(e.index!==null){const o=e.attributes.position,l=e.index;let d=e.groups;d.length===0&&(d=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,p=d.length;f<p;++f){const y=d[f],x=y.start,v=y.count;for(let b=x,T=x+v;b<T;b+=3)for(let M=0;M<3;M++){const _=l.getX(b+M),N=l.getX(b+(M+1)%3);i.fromBufferAttribute(o,_),s.fromBufferAttribute(o,N),RM(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let l=0,d=o.count/3;l<d;l++)for(let f=0;f<3;f++){const p=3*l+f,y=3*l+(f+1)%3;i.fromBufferAttribute(o,p),s.fromBufferAttribute(o,y),RM(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new yt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function RM(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var PM=Object.freeze({__proto__:null,BoxGeometry:Eu,CapsuleGeometry:py,CircleGeometry:my,ConeGeometry:gy,CylinderGeometry:Ch,DodecahedronGeometry:yy,EdgesGeometry:bC,ExtrudeGeometry:Qp,IcosahedronGeometry:vy,LatheGeometry:Jp,OctahedronGeometry:em,PlaneGeometry:Zp,PolyhedronGeometry:Kl,RingGeometry:_y,ShapeGeometry:wy,SphereGeometry:tm,TetrahedronGeometry:Sy,TorusGeometry:by,TorusKnotGeometry:My,TubeGeometry:Ey,WireframeGeometry:AC});class CC extends fi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new at(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class NC extends Fa{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Z_ extends fi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new at(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yl,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kC extends Z_{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Re(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Qn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new at(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new at(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new at(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class RC extends fi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new at(16777215),this.specular=new at(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yl,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Wp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class PC extends fi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new at(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yl,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class LC extends fi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yl,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class IC extends fi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new at(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yl,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Wp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class DC extends fi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new at(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yl,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class UC extends Li{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function cu(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function OC(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function FC(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function U1(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const l=t[s]*e;for(let d=0;d!==e;++d)i[o++]=n[l+d]}return i}function K_(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function G6(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let d=0;d<s.tracks.length;++d){const f=s.tracks[d],p=f.getValueSize(),y=[],x=[];for(let v=0;v<f.times.length;++v){const b=f.times[v]*i;if(!(b<t||b>=r)){y.push(f.times[v]);for(let T=0;T<p;++T)x.push(f.values[v*p+T])}}y.length!==0&&(f.times=cu(y,f.times.constructor),f.values=cu(x,f.values.constructor),o.push(f))}s.tracks=o;let l=1/0;for(let d=0;d<s.tracks.length;++d)l>s.tracks[d].times[0]&&(l=s.tracks[d].times[0]);for(let d=0;d<s.tracks.length;++d)s.tracks[d].shift(-1*l);return s.resetDuration(),s}function X6(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const l=t.tracks[o],d=l.ValueTypeName;if(d==="bool"||d==="string")continue;const f=n.tracks.find(function(_){return _.name===l.name&&_.ValueTypeName===d});if(f===void 0)continue;let p=0;const y=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=y/3);let x=0;const v=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(x=v/3);const b=l.times.length-1;let T;if(s<=l.times[0]){const _=p,N=y-p;T=l.values.slice(_,N)}else if(s>=l.times[b]){const _=b*y+p,N=_+y-p;T=l.values.slice(_,N)}else{const _=l.createInterpolant(),N=p,A=y-p;_.evaluate(s),T=_.resultBuffer.slice(N,A)}d==="quaternion"&&new Ki().fromArray(T).normalize().conjugate().toArray(T);const M=f.times.length;for(let _=0;_<M;++_){const N=_*v+x;if(d==="quaternion")Ki.multiplyQuaternionsFlat(f.values,N,T,0,f.values,N);else{const A=v-x*2;for(let R=0;R<A;++R)f.values[N+R]-=T[R]}}}return n.blendMode=A_,n}const $6={convertArray:cu,isTypedArray:OC,getKeyframeOrder:FC,sortedArray:U1,flattenJSON:K_,subclip:G6,makeClipAdditive:X6};class nm{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let l=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===l)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(r=2,s=l);for(let d=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===d)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const l=r+o>>>1;e<t[l]?o=l:r=l+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class zC extends nm{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:au,endingEnd:au}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,l=i[s],d=i[o];if(l===void 0)switch(this.getSettings_().endingStart){case ou:s=e,l=2*t-r;break;case wp:s=i.length-2,l=t+i[s]-i[s+1];break;default:s=e,l=r}if(d===void 0)switch(this.getSettings_().endingEnd){case ou:o=e,d=2*r-t;break;case wp:o=1,d=r+i[1]-i[0];break;default:o=e-1,d=t}const f=(r-t)*.5,p=this.valueSize;this._weightPrev=f/(t-l),this._weightNext=f/(d-r),this._offsetPrev=s*p,this._offsetNext=o*p}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,d=e*l,f=d-l,p=this._offsetPrev,y=this._offsetNext,x=this._weightPrev,v=this._weightNext,b=(r-t)/(i-t),T=b*b,M=T*b,_=-x*M+2*x*T-x*b,N=(1+x)*M+(-1.5-2*x)*T+(-.5+x)*b+1,A=(-1-v)*M+(1.5+v)*T+.5*b,R=v*M-v*T;for(let D=0;D!==l;++D)s[D]=_*o[p+D]+N*o[f+D]+A*o[d+D]+R*o[y+D];return s}}class J_ extends nm{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,d=e*l,f=d-l,p=(r-t)/(i-t),y=1-p;for(let x=0;x!==l;++x)s[x]=o[f+x]*y+o[d+x]*p;return s}}class BC extends nm{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class pa{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=cu(t,this.TimeBufferType),this.values=cu(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:cu(e.times,Array),values:cu(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new BC(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new J_(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new zC(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case vp:t=this.InterpolantFactoryMethodDiscrete;break;case _p:t=this.InterpolantFactoryMethodLinear;break;case c0:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return vp;case this.InterpolantFactoryMethodLinear:return _p;case this.InterpolantFactoryMethodSmooth:return c0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==s;l++){const d=r[l];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,d),e=!1;break}if(o!==null&&o>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,d,o),e=!1;break}o=d}if(i!==void 0&&OC(i))for(let l=0,d=i.length;l!==d;++l){const f=i[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===c0,s=e.length-1;let o=1;for(let l=1;l<s;++l){let d=!1;const f=e[l],p=e[l+1];if(f!==p&&(l!==1||f!==e[0]))if(i)d=!0;else{const y=l*r,x=y-r,v=y+r;for(let b=0;b!==r;++b){const T=t[y+b];if(T!==t[x+b]||T!==t[v+b]){d=!0;break}}}if(d){if(l!==o){e[o]=e[l];const y=l*r,x=o*r;for(let v=0;v!==r;++v)t[x+v]=t[y+v]}++o}}if(s>0){e[o]=e[s];for(let l=s*r,d=o*r,f=0;f!==r;++f)t[d+f]=t[l+f];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}pa.prototype.TimeBufferType=Float32Array;pa.prototype.ValueBufferType=Float32Array;pa.prototype.DefaultInterpolation=_p;class Tu extends pa{}Tu.prototype.ValueTypeName="bool";Tu.prototype.ValueBufferType=Array;Tu.prototype.DefaultInterpolation=vp;Tu.prototype.InterpolantFactoryMethodLinear=void 0;Tu.prototype.InterpolantFactoryMethodSmooth=void 0;class Q_ extends pa{}Q_.prototype.ValueTypeName="color";class Rp extends pa{}Rp.prototype.ValueTypeName="number";class jC extends nm{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,d=(r-t)/(i-t);let f=e*l;for(let p=f+l;f!==p;f+=4)Ki.slerpFlat(s,0,o,f-l,o,f,d);return s}}class Nh extends pa{InterpolantFactoryMethodLinear(e){return new jC(this.times,this.values,this.getValueSize(),e)}}Nh.prototype.ValueTypeName="quaternion";Nh.prototype.DefaultInterpolation=_p;Nh.prototype.InterpolantFactoryMethodSmooth=void 0;class Au extends pa{}Au.prototype.ValueTypeName="string";Au.prototype.ValueBufferType=Array;Au.prototype.DefaultInterpolation=vp;Au.prototype.InterpolantFactoryMethodLinear=void 0;Au.prototype.InterpolantFactoryMethodSmooth=void 0;class Pp extends pa{}Pp.prototype.ValueTypeName="vector";class Lp{constructor(e,t=-1,r,i=iy){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=fs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,l=r.length;o!==l;++o)t.push(Y6(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(pa.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let l=0;l<s;l++){let d=[],f=[];d.push((l+s-1)%s,l,(l+1)%s),f.push(0,1,0);const p=FC(d);d=U1(d,1,p),f=U1(f,1,p),!i&&d[0]===0&&(d.push(s),f.push(f[0])),o.push(new Rp(".morphTargetInfluences["+t[l].name+"]",d,f).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,d=e.length;l<d;l++){const f=e[l],p=f.name.match(s);if(p&&p.length>1){const y=p[1];let x=i[y];x||(i[y]=x=[]),x.push(f)}}const o=[];for(const l in i)o.push(this.CreateFromMorphTargetSequence(l,i[l],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(y,x,v,b,T){if(v.length!==0){const M=[],_=[];K_(v,M,_,b),M.length!==0&&T.push(new y(x,M,_))}},i=[],s=e.name||"default",o=e.fps||30,l=e.blendMode;let d=e.length||-1;const f=e.hierarchy||[];for(let y=0;y<f.length;y++){const x=f[y].keys;if(!(!x||x.length===0))if(x[0].morphTargets){const v={};let b;for(b=0;b<x.length;b++)if(x[b].morphTargets)for(let T=0;T<x[b].morphTargets.length;T++)v[x[b].morphTargets[T]]=-1;for(const T in v){const M=[],_=[];for(let N=0;N!==x[b].morphTargets.length;++N){const A=x[b];M.push(A.time),_.push(A.morphTarget===T?1:0)}i.push(new Rp(".morphTargetInfluence["+T+"]",M,_))}d=v.length*o}else{const v=".bones["+t[y].name+"]";r(Pp,v+".position",x,"pos",i),r(Nh,v+".quaternion",x,"rot",i),r(Pp,v+".scale",x,"scl",i)}}return i.length===0?null:new this(s,d,i,l)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function q6(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Rp;case"vector":case"vector2":case"vector3":case"vector4":return Pp;case"color":return Q_;case"quaternion":return Nh;case"bool":case"boolean":return Tu;case"string":return Au}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Y6(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=q6(n.type);if(n.times===void 0){const t=[],r=[];K_(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const ko={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class ew{constructor(e,t,r){const i=this;let s=!1,o=0,l=0,d;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(p){l++,s===!1&&i.onStart!==void 0&&i.onStart(p,o,l),s=!0},this.itemEnd=function(p){o++,i.onProgress!==void 0&&i.onProgress(p,o,l),o===l&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(p){i.onError!==void 0&&i.onError(p)},this.resolveURL=function(p){return d?d(p):p},this.setURLModifier=function(p){return d=p,this},this.addHandler=function(p,y){return f.push(p,y),this},this.removeHandler=function(p){const y=f.indexOf(p);return y!==-1&&f.splice(y,2),this},this.getHandler=function(p){for(let y=0,x=f.length;y<x;y+=2){const v=f[y],b=f[y+1];if(v.global&&(v.lastIndex=0),v.test(p))return b}return null}}}const VC=new ew;class Ii{constructor(e){this.manager=e!==void 0?e:VC,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ii.DEFAULT_MATERIAL_NAME="__DEFAULT";const Eo={};class Z6 extends Error{constructor(e,t){super(e),this.response=t}}class za extends Ii{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=ko.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Eo[e]!==void 0){Eo[e].push({onLoad:t,onProgress:r,onError:i});return}Eo[e]=[],Eo[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,d=this.responseType;fetch(o).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const p=Eo[e],y=f.body.getReader(),x=f.headers.get("Content-Length")||f.headers.get("X-File-Size"),v=x?parseInt(x):0,b=v!==0;let T=0;const M=new ReadableStream({start(_){N();function N(){y.read().then(({done:A,value:R})=>{if(A)_.close();else{T+=R.byteLength;const D=new ProgressEvent("progress",{lengthComputable:b,loaded:T,total:v});for(let U=0,z=p.length;U<z;U++){const W=p[U];W.onProgress&&W.onProgress(D)}_.enqueue(R),N()}})}}});return new Response(M)}else throw new Z6(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(d){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(p=>new DOMParser().parseFromString(p,l));case"json":return f.json();default:if(l===void 0)return f.text();{const y=/charset="?([^;"\s]*)"?/i.exec(l),x=y&&y[1]?y[1].toLowerCase():void 0,v=new TextDecoder(x);return f.arrayBuffer().then(b=>v.decode(b))}}}).then(f=>{ko.add(e,f);const p=Eo[e];delete Eo[e];for(let y=0,x=p.length;y<x;y++){const v=p[y];v.onLoad&&v.onLoad(f)}}).catch(f=>{const p=Eo[e];if(p===void 0)throw this.manager.itemError(e),f;delete Eo[e];for(let y=0,x=p.length;y<x;y++){const v=p[y];v.onError&&v.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class K6 extends Ii{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new za(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(d){i?i(d):console.error(d),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=Lp.parse(e[r]);t.push(i)}return t}}class J6 extends Ii{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],l=new hy,d=new za(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(s.withCredentials);let f=0;function p(y){d.load(e[y],function(x){const v=s.parse(x,!0);o[y]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},f+=1,f===6&&(v.mipmapCount===1&&(l.minFilter=lr),l.image=o,l.format=v.format,l.needsUpdate=!0,t&&t(l))},r,i)}if(Array.isArray(e))for(let y=0,x=e.length;y<x;++y)p(y);else d.load(e,function(y){const x=s.parse(y,!0);if(x.isCubemap){const v=x.mipmaps.length/x.mipmapCount;for(let b=0;b<v;b++){o[b]={mipmaps:[]};for(let T=0;T<x.mipmapCount;T++)o[b].mipmaps.push(x.mipmaps[b*x.mipmapCount+T]),o[b].format=x.format,o[b].width=x.width,o[b].height=x.height}l.image=o}else l.image.width=x.width,l.image.height=x.height,l.mipmaps=x.mipmaps;x.mipmapCount===1&&(l.minFilter=lr),l.format=x.format,l.needsUpdate=!0,t&&t(l)},r,i);return l}}class Ip extends Ii{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ko.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const l=Tp("img");function d(){p(),ko.add(e,this),t&&t(this),s.manager.itemEnd(e)}function f(y){p(),i&&i(y),s.manager.itemError(e),s.manager.itemEnd(e)}function p(){l.removeEventListener("load",d,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",d,!1),l.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class Q6 extends Ii{constructor(e){super(e)}load(e,t,r,i){const s=new qp;s.colorSpace=kr;const o=new Ip(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function d(f){o.load(e[f],function(p){s.images[f]=p,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let f=0;f<e.length;++f)d(f);return s}}class eV extends Ii{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new mu,l=new za(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(d){let f;try{f=s.parse(d)}catch(p){if(i!==void 0)i(p);else{console.error(p);return}}f.image!==void 0?o.image=f.image:f.data!==void 0&&(o.image.width=f.width,o.image.height=f.height,o.image.data=f.data),o.wrapS=f.wrapS!==void 0?f.wrapS:di,o.wrapT=f.wrapT!==void 0?f.wrapT:di,o.magFilter=f.magFilter!==void 0?f.magFilter:lr,o.minFilter=f.minFilter!==void 0?f.minFilter:lr,o.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0?o.colorSpace=f.colorSpace:f.encoding!==void 0&&(o.encoding=f.encoding),f.flipY!==void 0&&(o.flipY=f.flipY),f.format!==void 0&&(o.format=f.format),f.type!==void 0&&(o.type=f.type),f.mipmaps!==void 0&&(o.mipmaps=f.mipmaps,o.minFilter=Wl),f.mipmapCount===1&&(o.minFilter=lr),f.generateMipmaps!==void 0&&(o.generateMipmaps=f.generateMipmaps),o.needsUpdate=!0,t&&t(o,f)},r,i),o}}class tV extends Ii{constructor(e){super(e)}load(e,t,r,i){const s=new dr,o=new Ip(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class Jl extends hn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new at(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class HC extends Jl{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(hn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new at(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const ov=new Ut,LM=new q,IM=new q;class tw{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Re(512,512),this.map=null,this.mapPass=null,this.matrix=new Ut,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Yp,this._frameExtents=new Re(1,1),this._viewportCount=1,this._viewports=[new vn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;LM.setFromMatrixPosition(e.matrixWorld),t.position.copy(LM),IM.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(IM),t.updateMatrixWorld(),ov.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ov),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(ov)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class nV extends tw{constructor(){super(new Br(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=yh*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class WC extends Jl{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(hn.DEFAULT_UP),this.updateMatrix(),this.target=new hn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new nV}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const DM=new Ut,Bf=new q,lv=new q;class rV extends tw{constructor(){super(new Br(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Re(4,2),this._viewportCount=6,this._viewports=[new vn(2,1,1,1),new vn(0,1,1,1),new vn(3,1,1,1),new vn(1,1,1,1),new vn(3,0,1,1),new vn(1,0,1,1)],this._cubeDirections=[new q(1,0,0),new q(-1,0,0),new q(0,0,1),new q(0,0,-1),new q(0,1,0),new q(0,-1,0)],this._cubeUps=[new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,0,1),new q(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Bf.setFromMatrixPosition(e.matrixWorld),r.position.copy(Bf),lv.copy(r.position),lv.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(lv),r.updateMatrixWorld(),i.makeTranslation(-Bf.x,-Bf.y,-Bf.z),DM.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(DM)}}class GC extends Jl{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new rV}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class iV extends tw{constructor(){super(new Kp(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class XC extends Jl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(hn.DEFAULT_UP),this.updateMatrix(),this.target=new hn,this.shadow=new iV}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class $C extends Jl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class qC extends Jl{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class YC{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new q)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class ZC extends Jl{constructor(e=new YC,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Ty extends Ii{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new za(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(d){i?i(d):console.error(d),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=Ty.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new at().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new at().setHex(o.value);break;case"v2":i.uniforms[s].value=new Re().fromArray(o.value);break;case"v3":i.uniforms[s].value=new q().fromArray(o.value);break;case"v4":i.uniforms[s].value=new vn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Kt().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Ut().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Re().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Re().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:CC,SpriteMaterial:j_,RawShaderMaterial:NC,ShaderMaterial:Fa,PointsMaterial:H_,MeshPhysicalMaterial:kC,MeshStandardMaterial:Z_,MeshPhongMaterial:RC,MeshToonMaterial:PC,MeshNormalMaterial:LC,MeshLambertMaterial:IC,MeshDepthMaterial:O_,MeshDistanceMaterial:F_,MeshBasicMaterial:Zl,MeshMatcapMaterial:DC,LineDashedMaterial:UC,LineBasicMaterial:Li,Material:fi};return new t[e]}}class O1{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class KC extends Jt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class JC extends Ii{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new za(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(d){i?i(d):console.error(d),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(v,b){if(t[b]!==void 0)return t[b];const M=v.interleavedBuffers[b],_=s(v,M.buffer),N=ih(M.type,_),A=new uy(N,M.stride);return A.uuid=M.uuid,t[b]=A,A}function s(v,b){if(r[b]!==void 0)return r[b];const M=v.arrayBuffers[b],_=new Uint32Array(M).buffer;return r[b]=_,_}const o=e.isInstancedBufferGeometry?new KC:new Jt,l=e.data.index;if(l!==void 0){const v=ih(l.type,l.array);o.setIndex(new pn(v,1))}const d=e.data.attributes;for(const v in d){const b=d[v];let T;if(b.isInterleavedBufferAttribute){const M=i(e.data,b.data);T=new _u(M,b.itemSize,b.offset,b.normalized)}else{const M=ih(b.type,b.array),_=b.isInstancedBufferAttribute?vh:pn;T=new _(M,b.itemSize,b.normalized)}b.name!==void 0&&(T.name=b.name),b.usage!==void 0&&T.setUsage(b.usage),o.setAttribute(v,T)}const f=e.data.morphAttributes;if(f)for(const v in f){const b=f[v],T=[];for(let M=0,_=b.length;M<_;M++){const N=b[M];let A;if(N.isInterleavedBufferAttribute){const R=i(e.data,N.data);A=new _u(R,N.itemSize,N.offset,N.normalized)}else{const R=ih(N.type,N.array);A=new pn(R,N.itemSize,N.normalized)}N.name!==void 0&&(A.name=N.name),T.push(A)}o.morphAttributes[v]=T}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const y=e.data.groups||e.data.drawcalls||e.data.offsets;if(y!==void 0)for(let v=0,b=y.length;v!==b;++v){const T=y[v];o.addGroup(T.start,T.count,T.materialIndex)}const x=e.data.boundingSphere;if(x!==void 0){const v=new q;x.center!==void 0&&v.fromArray(x.center),o.boundingSphere=new hi(v,x.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class sV extends Ii{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?O1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new za(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(d){let f=null;try{f=JSON.parse(d)}catch(y){i!==void 0&&i(y),console.error("THREE:ObjectLoader: Can't parse "+e+".",y.message);return}const p=f.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(f,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?O1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new za(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),l=JSON.parse(o),d=l.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(l)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(f)}),l=this.parseTextures(e.textures,o),d=this.parseMaterials(e.materials,l),f=this.parseObject(e.object,s,d,l,r),p=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,p),t!==void 0){let y=!1;for(const x in o)if(o[x].data instanceof HTMLImageElement){y=!0;break}y===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),d=this.parseObject(e.object,i,l,o,t),f=this.parseSkeletons(e.skeletons,d);return this.bindSkeletons(d,f),d}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new gu().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=new dy().fromJSON(e[s],i);r[l.uuid]=l}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new JC;for(let s=0,o=e.length;s<o;s++){let l;const d=e[s];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":l=i.parse(d);break;default:d.type in PM?l=PM[d.type].fromJSON(d,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${d.type}"`)}l.uuid=d.uuid,d.name!==void 0&&(l.name=d.name),d.userData!==void 0&&(l.userData=d.userData),r[d.uuid]=l}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new Ty;s.setTextures(t);for(let o=0,l=e.length;o<l;o++){const d=e[o];r[d.uuid]===void 0&&(r[d.uuid]=s.parse(d)),i[d.uuid]=r[d.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Lp.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(d){return r.manager.itemStart(d),s.load(d,function(){r.manager.itemEnd(d)},void 0,function(){r.manager.itemError(d),r.manager.itemEnd(d)})}function l(d){if(typeof d=="string"){const f=d,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:r.resourcePath+f;return o(p)}else return d.data?{data:ih(d.type,d.data),width:d.width,height:d.height}:null}if(e!==void 0&&e.length>0){const d=new ew(t);s=new Ip(d),s.setCrossOrigin(this.crossOrigin);for(let f=0,p=e.length;f<p;f++){const y=e[f],x=y.url;if(Array.isArray(x)){const v=[];for(let b=0,T=x.length;b<T;b++){const M=x[b],_=l(M);_!==null&&(_ instanceof HTMLImageElement?v.push(_):v.push(new mu(_.data,_.width,_.height)))}i[y.uuid]=new lu(v)}else{const v=l(y.url);i[y.uuid]=new lu(v)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const l=o,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await i.loadAsync(d)}else return o.data?{data:ih(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Ip(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,l=e.length;o<l;o++){const d=e[o],f=d.url;if(Array.isArray(f)){const p=[];for(let y=0,x=f.length;y<x;y++){const v=f[y],b=await s(v);b!==null&&(b instanceof HTMLImageElement?p.push(b):p.push(new mu(b.data,b.width,b.height)))}r[d.uuid]=new lu(p)}else{const p=await s(d.url);r[d.uuid]=new lu(p)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const d=t[l.image],f=d.data;let p;Array.isArray(f)?(p=new qp,f.length===6&&(p.needsUpdate=!0)):(f&&f.data?p=new mu:p=new dr,f&&(p.needsUpdate=!0)),p.source=d,p.uuid=l.uuid,l.name!==void 0&&(p.name=l.name),l.mapping!==void 0&&(p.mapping=r(l.mapping,aV)),l.channel!==void 0&&(p.channel=l.channel),l.offset!==void 0&&p.offset.fromArray(l.offset),l.repeat!==void 0&&p.repeat.fromArray(l.repeat),l.center!==void 0&&p.center.fromArray(l.center),l.rotation!==void 0&&(p.rotation=l.rotation),l.wrap!==void 0&&(p.wrapS=r(l.wrap[0],UM),p.wrapT=r(l.wrap[1],UM)),l.format!==void 0&&(p.format=l.format),l.internalFormat!==void 0&&(p.internalFormat=l.internalFormat),l.type!==void 0&&(p.type=l.type),l.colorSpace!==void 0&&(p.colorSpace=l.colorSpace),l.encoding!==void 0&&(p.encoding=l.encoding),l.minFilter!==void 0&&(p.minFilter=r(l.minFilter,OM)),l.magFilter!==void 0&&(p.magFilter=r(l.magFilter,OM)),l.anisotropy!==void 0&&(p.anisotropy=l.anisotropy),l.flipY!==void 0&&(p.flipY=l.flipY),l.generateMipmaps!==void 0&&(p.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(p.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(p.compareFunction=l.compareFunction),l.userData!==void 0&&(p.userData=l.userData),i[l.uuid]=p}return i}parseObject(e,t,r,i,s){let o;function l(x){return t[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",x),t[x]}function d(x){if(x!==void 0){if(Array.isArray(x)){const v=[];for(let b=0,T=x.length;b<T;b++){const M=x[b];r[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),v.push(r[M])}return v}return r[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),r[x]}}function f(x){return i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",x),i[x]}let p,y;switch(e.type){case"Scene":o=new B_,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new at(e.background):o.background=f(e.background)),e.environment!==void 0&&(o.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new cy(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new ly(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Br(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Kp(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new $C(e.color,e.intensity);break;case"DirectionalLight":o=new XC(e.color,e.intensity);break;case"PointLight":o=new GC(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new qC(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new WC(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new HC(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new ZC().fromJSON(e);break;case"SkinnedMesh":p=l(e.geometry),y=d(e.material),o=new fC(p,y),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":p=l(e.geometry),y=d(e.material),o=new _r(p,y);break;case"InstancedMesh":p=l(e.geometry),y=d(e.material);const x=e.count,v=e.instanceMatrix,b=e.instanceColor;o=new pC(p,y,x),o.instanceMatrix=new vh(new Float32Array(v.array),16),b!==void 0&&(o.instanceColor=new vh(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":p=l(e.geometry),y=d(e.material),o=new mC(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,y),o.geometry=p,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(T=>{const M=new Pi;M.min.fromArray(T.boxMin),M.max.fromArray(T.boxMax);const _=new hi;return _.radius=T.sphereRadius,_.center.fromArray(T.sphereCenter),{boxInitialized:T.boxInitialized,box:M,sphereInitialized:T.sphereInitialized,sphere:_}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=f(e.matricesTexture.uuid);break;case"LOD":o=new hC;break;case"Line":o=new Gl(l(e.geometry),d(e.material));break;case"LineLoop":o=new gC(l(e.geometry),d(e.material));break;case"LineSegments":o=new Ba(l(e.geometry),d(e.material));break;case"PointCloud":case"Points":o=new yC(l(e.geometry),d(e.material));break;case"Sprite":o=new dC(d(e.material));break;case"Group":o=new oh;break;case"Bone":o=new V_;break;default:o=new hn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const x=e.children;for(let v=0;v<x.length;v++)o.add(this.parseObject(x[v],t,r,i,s))}if(e.animations!==void 0){const x=e.animations;for(let v=0;v<x.length;v++){const b=x[v];o.animations.push(s[b])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const x=e.levels;for(let v=0;v<x.length;v++){const b=x[v],T=o.getObjectByProperty("uuid",b.object);T!==void 0&&o.addLevel(T,b.distance,b.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const aV={UVMapping:ny,CubeReflectionMapping:Uo,CubeRefractionMapping:Hl,EquirectangularReflectionMapping:mp,EquirectangularRefractionMapping:gp,CubeUVReflectionMapping:Eh},UM={RepeatWrapping:yp,ClampToEdgeWrapping:di,MirroredRepeatWrapping:xp},OM={NearestFilter:or,NearestMipmapNearestFilter:C0,NearestMipmapLinearFilter:ep,LinearFilter:lr,LinearMipmapNearestFilter:v_,LinearMipmapLinearFilter:Wl};class oV extends Ii{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ko.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(f=>{t&&t(f),s.manager.itemEnd(e)}).catch(f=>{i&&i(f)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const d=fetch(e,l).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(f){return ko.add(e,f),t&&t(f),s.manager.itemEnd(e),f}).catch(function(f){i&&i(f),ko.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});ko.add(e,d),s.manager.itemStart(e)}}let Bg;class nw{static getContext(){return Bg===void 0&&(Bg=new(window.AudioContext||window.webkitAudioContext)),Bg}static setContext(e){Bg=e}}class lV extends Ii{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new za(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(d){try{const f=d.slice(0);nw.getContext().decodeAudioData(f,function(y){t(y)}).catch(l)}catch(f){l(f)}},r,i);function l(d){i?i(d):console.error(d),s.manager.itemError(e)}}}const FM=new Ut,zM=new Ut,Xc=new Ut;class cV{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Br,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Br,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Xc.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(fu*t.fov*.5)/t.zoom;let l,d;zM.elements[12]=-i,FM.elements[12]=i,l=-o*t.aspect+s,d=o*t.aspect+s,Xc.elements[0]=2*t.near/(d-l),Xc.elements[8]=(d+l)/(d-l),this.cameraL.projectionMatrix.copy(Xc),l=-o*t.aspect-s,d=o*t.aspect-s,Xc.elements[0]=2*t.near/(d-l),Xc.elements[8]=(d+l)/(d-l),this.cameraR.projectionMatrix.copy(Xc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(zM),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(FM)}}class rw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=BM(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=BM();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function BM(){return(typeof performance>"u"?Date:performance).now()}const $c=new q,jM=new Ki,uV=new q,qc=new q;class dV extends hn{constructor(){super(),this.type="AudioListener",this.context=nw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new rw}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose($c,jM,uV),qc.set(0,0,-1).applyQuaternion(jM),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime($c.x,i),t.positionY.linearRampToValueAtTime($c.y,i),t.positionZ.linearRampToValueAtTime($c.z,i),t.forwardX.linearRampToValueAtTime(qc.x,i),t.forwardY.linearRampToValueAtTime(qc.y,i),t.forwardZ.linearRampToValueAtTime(qc.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition($c.x,$c.y,$c.z),t.setOrientation(qc.x,qc.y,qc.z,r.x,r.y,r.z)}}class QC extends hn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Yc=new q,VM=new Ki,hV=new q,Zc=new q;class fV extends QC{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Yc,VM,hV),Zc.set(0,0,1).applyQuaternion(VM);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Yc.x,r),t.positionY.linearRampToValueAtTime(Yc.y,r),t.positionZ.linearRampToValueAtTime(Yc.z,r),t.orientationX.linearRampToValueAtTime(Zc.x,r),t.orientationY.linearRampToValueAtTime(Zc.y,r),t.orientationZ.linearRampToValueAtTime(Zc.z,r)}else t.setPosition(Yc.x,Yc.y,Yc.z),t.setOrientation(Zc.x,Zc.y,Zc.z)}}class pV{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class eN{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==i;++l)r[s+l]=r[l];o=t}else{o+=t;const l=t/o;this._mixBufferRegion(r,s,0,l,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const d=t*this._origIndex;this._mixBufferRegion(r,i,d,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let d=t,f=t+t;d!==f;++d)if(r[d]!==r[d+t]){l.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){Ki.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;Ki.multiplyQuaternionsFlat(e,o,e,t,e,r),Ki.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let l=0;l!==s;++l){const d=t+l;e[d]=e[d]*o+e[r+l]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]+e[r+o]*i}}}const iw="\\[\\]\\.:\\/",mV=new RegExp("["+iw+"]","g"),sw="[^"+iw+"]",gV="[^"+iw.replace("\\.","")+"]",yV=/((?:WC+[\/:])*)/.source.replace("WC",sw),xV=/(WCOD+)?/.source.replace("WCOD",gV),vV=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",sw),_V=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",sw),wV=new RegExp("^"+yV+xV+vV+_V+"$"),SV=["material","materials","bones","map"];class bV{constructor(e,t,r){const i=r||cn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class cn{constructor(e,t,r){this.path=t,this.parsedPath=r||cn.parseTrackName(t),this.node=cn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new cn.Composite(e,t,r):new cn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(mV,"")}static parseTrackName(e){const t=wV.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);SV.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const l=s[o];if(l.name===t||l.uuid===t)return l;const d=r(l.children);if(d)return d}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=cn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let f=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===f){f=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const o=e[i];if(o===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+i+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}d=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(d=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}cn.Composite=bV;cn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};cn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};cn.prototype.GetterByBindingType=[cn.prototype._getValue_direct,cn.prototype._getValue_array,cn.prototype._getValue_arrayElement,cn.prototype._getValue_toArray];cn.prototype.SetterByBindingTypeAndVersioning=[[cn.prototype._setValue_direct,cn.prototype._setValue_direct_setNeedsUpdate,cn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[cn.prototype._setValue_array,cn.prototype._setValue_array_setNeedsUpdate,cn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[cn.prototype._setValue_arrayElement,cn.prototype._setValue_arrayElement_setNeedsUpdate,cn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[cn.prototype._setValue_fromArray,cn.prototype._setValue_fromArray_setNeedsUpdate,cn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class MV{constructor(){this.isAnimationObjectGroup=!0,this.uuid=fs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let l,d=e.length,f=this.nCachedObjects_;for(let p=0,y=arguments.length;p!==y;++p){const x=arguments[p],v=x.uuid;let b=t[v];if(b===void 0){b=d++,t[v]=b,e.push(x);for(let T=0,M=o;T!==M;++T)s[T].push(new cn(x,r[T],i[T]))}else if(b<f){l=e[b];const T=--f,M=e[T];t[M.uuid]=b,e[b]=M,t[v]=T,e[T]=x;for(let _=0,N=o;_!==N;++_){const A=s[_],R=A[T];let D=A[b];A[b]=R,D===void 0&&(D=new cn(x,r[_],i[_])),A[T]=D}}else e[b]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const d=arguments[o],f=d.uuid,p=t[f];if(p!==void 0&&p>=s){const y=s++,x=e[y];t[x.uuid]=p,e[p]=x,t[f]=y,e[y]=d;for(let v=0,b=i;v!==b;++v){const T=r[v],M=T[y],_=T[p];T[p]=M,T[y]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let l=0,d=arguments.length;l!==d;++l){const f=arguments[l],p=f.uuid,y=t[p];if(y!==void 0)if(delete t[p],y<s){const x=--s,v=e[x],b=--o,T=e[b];t[v.uuid]=y,e[y]=v,t[T.uuid]=x,e[x]=T,e.pop();for(let M=0,_=i;M!==_;++M){const N=r[M],A=N[x],R=N[b];N[y]=A,N[x]=R,N.pop()}}else{const x=--o,v=e[x];x>0&&(t[v.uuid]=y),e[y]=v,e.pop();for(let b=0,T=i;b!==T;++b){const M=r[b];M[y]=M[x],M.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,l=this._parsedPaths,d=this._objects,f=d.length,p=this.nCachedObjects_,y=new Array(f);i=s.length,r[e]=i,o.push(e),l.push(t),s.push(y);for(let x=p,v=d.length;x!==v;++x){const b=d[x];y[x]=new cn(b,e,t)}return y}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length-1,d=o[l],f=e[l];t[f]=r,o[r]=d,o.pop(),s[r]=s[l],s.pop(),i[r]=i[l],i.pop()}}}class tN{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,l=new Array(o),d={endingStart:au,endingEnd:au};for(let f=0;f!==o;++f){const p=s[f].createInterpolant(null);l[f]=p,p.settings=d}this._interpolantSettings=d,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=DA,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,l=i/s;e.warp(1,o,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=i._lendControlInterpolant(),this._timeScaleInterpolant=l);const d=l.parameterPositions,f=l.sampleValues;return d[0]=s,d[1]=s+r,f[0]=e/o,f[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const d=(e-s)*r;d<0||r===0?t=0:(this._startTime=null,t=r*d)}t*=this._updateTimeScale(e);const o=this._updateTime(t),l=this._updateWeight(e);if(l>0){const d=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case A_:for(let p=0,y=d.length;p!==y;++p)d[p].evaluate(o),f[p].accumulateAdditive(l);break;case iy:default:for(let p=0,y=d.length;p!==y;++p)d[p].evaluate(o),f[p].accumulate(i,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===UA;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===IA){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const l=Math.floor(i/t);i-=t*l,s+=Math.abs(l);const d=this.repetitions-s;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(d===1){const f=e<0;this._setEndings(f,!f,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=ou,i.endingEnd=ou):(e?i.endingStart=this.zeroSlopeAtStart?ou:au:i.endingStart=wp,t?i.endingEnd=this.zeroSlopeAtEnd?ou:au:i.endingEnd=wp)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,d=o.sampleValues;return l[0]=s,d[0]=t,l[1]=s+e,d[1]=r,this}}const EV=new Float32Array(1);class TV extends zo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,l=e._interpolants,d=r.uuid,f=this._bindingsByRootAndName;let p=f[d];p===void 0&&(p={},f[d]=p);for(let y=0;y!==s;++y){const x=i[y],v=x.name;let b=p[v];if(b!==void 0)++b.referenceCount,o[y]=b;else{if(b=o[y],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,d,v));continue}const T=t&&t._propertyBindings[y].binding.parsedPath;b=new eN(cn.create(r,v,T),x.ValueTypeName,x.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,d,v),o[y]=b}l[y].resultBuffer=b.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,l=o[s],d=l.knownActions,f=d[d.length-1],p=e._byClipCacheIndex;f._byClipCacheIndex=p,d[p]=f,d.pop(),e._byClipCacheIndex=null;const y=l.actionByRoot,x=(e._localRoot||this._root).uuid;delete y[x],d.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,l=o[i],d=t[t.length-1],f=e._cacheIndex;d._cacheIndex=f,t[f]=d,t.pop(),delete l[s],Object.keys(l).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new J_(new Float32Array(2),new Float32Array(2),1,EV),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?Lp.findByName(i,e):e;const l=o!==null?o.uuid:e,d=this._actionsByClip[l];let f=null;if(r===void 0&&(o!==null?r=o.blendMode:r=iy),d!==void 0){const y=d.actionByRoot[s];if(y!==void 0&&y.blendMode===r)return y;f=d.knownActions[0],o===null&&(o=f._clip)}if(o===null)return null;const p=new tN(this,o,t,r);return this._bindAction(p,f),this._addInactiveAction(p,l,s),p}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?Lp.findByName(r,e):e,o=s?s.uuid:e,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let f=0;f!==r;++f)t[f]._update(i,e,s,o);const l=this._bindings,d=this._nActiveBindings;for(let f=0;f!==d;++f)l[f].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let l=0,d=o.length;l!==d;++l){const f=o[l];this._deactivateAction(f);const p=f._cacheIndex,y=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,y._cacheIndex=p,t[p]=y,t.pop(),this._removeInactiveBindingsForAction(f)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const l=r[o].actionByRoot,d=l[t];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const l=s[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class aw{constructor(e){this.value=e}clone(){return new aw(this.value.clone===void 0?this.value:this.value.clone())}}let AV=0;class CV extends zo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:AV++}),this.name="",this.usage=Ep,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class NV extends uy{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class kV{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class nN{constructor(e,t,r=0,i=1/0){this.ray=new Th(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new pu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return F1(e,this,r,t),r.sort(HM),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)F1(e[i],this,r,t);return r.sort(HM),r}}function HM(n,e){return n.distance-e.distance}function F1(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)F1(i[s],e,t,!0)}}class RV{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Qn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class PV{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const WM=new Re;class LV{constructor(e=new Re(1/0,1/0),t=new Re(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=WM.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,WM).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const GM=new q,jg=new q;class IV{constructor(e=new q,t=new q){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){GM.subVectors(e,this.start),jg.subVectors(this.end,this.start);const r=jg.dot(jg);let s=jg.dot(GM)/r;return t&&(s=Qn(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const XM=new q;class DV extends hn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new Jt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,d=32;o<d;o++,l++){const f=o/d*Math.PI*2,p=l/d*Math.PI*2;i.push(Math.cos(f),Math.sin(f),1,Math.cos(p),Math.sin(p),1)}r.setAttribute("position",new yt(i,3));const s=new Li({fog:!1,toneMapped:!1});this.cone=new Ba(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),XM.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(XM),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Tl=new q,Vg=new Ut,cv=new Ut;class UV extends Ba{constructor(e){const t=rN(e),r=new Jt,i=[],s=[],o=new at(0,0,1),l=new at(0,1,0);for(let f=0;f<t.length;f++){const p=t[f];p.parent&&p.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(l.r,l.g,l.b))}r.setAttribute("position",new yt(i,3)),r.setAttribute("color",new yt(s,3));const d=new Li({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,d),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");cv.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(Vg.multiplyMatrices(cv,l.matrixWorld),Tl.setFromMatrixPosition(Vg),i.setXYZ(o,Tl.x,Tl.y,Tl.z),Vg.multiplyMatrices(cv,l.parent.matrixWorld),Tl.setFromMatrixPosition(Vg),i.setXYZ(o+1,Tl.x,Tl.y,Tl.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function rN(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,rN(n.children[t]));return e}class OV extends _r{constructor(e,t,r){const i=new tm(t,4,2),s=new Zl({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const FV=new q,$M=new at,qM=new at;class zV extends hn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new em(t);i.rotateY(Math.PI*.5),this.material=new Zl({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new pn(o,3)),this.add(new _r(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");$M.copy(this.light.color),qM.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?$M:qM;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(FV.setFromMatrixPosition(this.light.matrixWorld).negate())}}class BV extends Ba{constructor(e=10,t=10,r=4473924,i=8947848){r=new at(r),i=new at(i);const s=t/2,o=e/t,l=e/2,d=[],f=[];for(let x=0,v=0,b=-l;x<=t;x++,b+=o){d.push(-l,0,b,l,0,b),d.push(b,0,-l,b,0,l);const T=x===s?r:i;T.toArray(f,v),v+=3,T.toArray(f,v),v+=3,T.toArray(f,v),v+=3,T.toArray(f,v),v+=3}const p=new Jt;p.setAttribute("position",new yt(d,3)),p.setAttribute("color",new yt(f,3));const y=new Li({vertexColors:!0,toneMapped:!1});super(p,y),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class jV extends Ba{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new at(s),o=new at(o);const l=[],d=[];if(t>1)for(let y=0;y<t;y++){const x=y/t*(Math.PI*2),v=Math.sin(x)*e,b=Math.cos(x)*e;l.push(0,0,0),l.push(v,0,b);const T=y&1?s:o;d.push(T.r,T.g,T.b),d.push(T.r,T.g,T.b)}for(let y=0;y<r;y++){const x=y&1?s:o,v=e-e/r*y;for(let b=0;b<i;b++){let T=b/i*(Math.PI*2),M=Math.sin(T)*v,_=Math.cos(T)*v;l.push(M,0,_),d.push(x.r,x.g,x.b),T=(b+1)/i*(Math.PI*2),M=Math.sin(T)*v,_=Math.cos(T)*v,l.push(M,0,_),d.push(x.r,x.g,x.b)}}const f=new Jt;f.setAttribute("position",new yt(l,3)),f.setAttribute("color",new yt(d,3));const p=new Li({vertexColors:!0,toneMapped:!1});super(f,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const YM=new q,Hg=new q,ZM=new q;class VV extends hn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Jt;i.setAttribute("position",new yt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Li({fog:!1,toneMapped:!1});this.lightPlane=new Gl(i,s),this.add(this.lightPlane),i=new Jt,i.setAttribute("position",new yt([0,0,0,0,0,1],3)),this.targetLine=new Gl(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),YM.setFromMatrixPosition(this.light.matrixWorld),Hg.setFromMatrixPosition(this.light.target.matrixWorld),ZM.subVectors(Hg,YM),this.lightPlane.lookAt(Hg),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Hg),this.targetLine.scale.z=ZM.length()}}const Wg=new q,Jn=new $p;class HV extends Ba{constructor(e){const t=new Jt,r=new Li({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(b,T){d(b),d(T)}function d(b){i.push(0,0,0),s.push(0,0,0),o[b]===void 0&&(o[b]=[]),o[b].push(i.length/3-1)}t.setAttribute("position",new yt(i,3)),t.setAttribute("color",new yt(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const f=new at(16755200),p=new at(16711680),y=new at(43775),x=new at(16777215),v=new at(3355443);this.setColors(f,p,y,x,v)}setColors(e,t,r,i,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,r.r,r.g,r.b),l.setXYZ(33,r.r,r.g,r.b),l.setXYZ(34,r.r,r.g,r.b),l.setXYZ(35,r.r,r.g,r.b),l.setXYZ(36,r.r,r.g,r.b),l.setXYZ(37,r.r,r.g,r.b),l.setXYZ(38,i.r,i.g,i.b),l.setXYZ(39,i.r,i.g,i.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Jn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ar("c",t,e,Jn,0,0,-1),ar("t",t,e,Jn,0,0,1),ar("n1",t,e,Jn,-r,-i,-1),ar("n2",t,e,Jn,r,-i,-1),ar("n3",t,e,Jn,-r,i,-1),ar("n4",t,e,Jn,r,i,-1),ar("f1",t,e,Jn,-r,-i,1),ar("f2",t,e,Jn,r,-i,1),ar("f3",t,e,Jn,-r,i,1),ar("f4",t,e,Jn,r,i,1),ar("u1",t,e,Jn,r*.7,i*1.1,-1),ar("u2",t,e,Jn,-r*.7,i*1.1,-1),ar("u3",t,e,Jn,0,i*2,-1),ar("cf1",t,e,Jn,-r,0,1),ar("cf2",t,e,Jn,r,0,1),ar("cf3",t,e,Jn,0,-i,1),ar("cf4",t,e,Jn,0,i,1),ar("cn1",t,e,Jn,-r,0,-1),ar("cn2",t,e,Jn,r,0,-1),ar("cn3",t,e,Jn,0,-i,-1),ar("cn4",t,e,Jn,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ar(n,e,t,r,i,s,o){Wg.set(i,s,o).unproject(r);const l=e[n];if(l!==void 0){const d=t.getAttribute("position");for(let f=0,p=l.length;f<p;f++)d.setXYZ(l[f],Wg.x,Wg.y,Wg.z)}}const Gg=new Pi;class WV extends Ba{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Jt;s.setIndex(new pn(r,1)),s.setAttribute("position",new pn(i,3)),super(s,new Li({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Gg.setFromObject(this.object),Gg.isEmpty())return;const t=Gg.min,r=Gg.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class GV extends Ba{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Jt;s.setIndex(new pn(r,1)),s.setAttribute("position",new yt(i,3)),super(s,new Li({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class XV extends Gl{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Jt;o.setAttribute("position",new yt(s,3)),o.computeBoundingSphere(),super(o,new Li({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new Jt;d.setAttribute("position",new yt(l,3)),d.computeBoundingSphere(),this.add(new _r(d,new Zl({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const KM=new q;let Xg,uv;class $V extends hn{constructor(e=new q(0,0,1),t=new q(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",Xg===void 0&&(Xg=new Jt,Xg.setAttribute("position",new yt([0,0,0,0,1,0],3)),uv=new Ch(0,.5,1,5,1),uv.translate(0,-.5,0)),this.position.copy(t),this.line=new Gl(Xg,new Li({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new _r(uv,new Zl({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{KM.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(KM,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class qV extends Ba{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Jt;i.setAttribute("position",new yt(t,3)),i.setAttribute("color",new yt(r,3));const s=new Li({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new at,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class iN{constructor(){this.type="ShapePath",this.color=new at,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Ap,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const N=[];for(let A=0,R=_.length;A<R;A++){const D=_[A],U=new gu;U.curves=D.curves,N.push(U)}return N}function r(_,N){const A=N.length;let R=!1;for(let D=A-1,U=0;U<A;D=U++){let z=N[D],W=N[U],O=W.x-z.x,I=W.y-z.y;if(Math.abs(I)>Number.EPSILON){if(I<0&&(z=N[U],O=-O,W=N[D],I=-I),_.y<z.y||_.y>W.y)continue;if(_.y===z.y){if(_.x===z.x)return!0}else{const K=I*(_.x-z.x)-O*(_.y-z.y);if(K===0)return!0;if(K<0)continue;R=!R}}else{if(_.y!==z.y)continue;if(W.x<=_.x&&_.x<=z.x||z.x<=_.x&&_.x<=W.x)return!0}}return R}const i=Da.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,l,d;const f=[];if(s.length===1)return l=s[0],d=new gu,d.curves=l.curves,f.push(d),f;let p=!i(s[0].getPoints());p=e?!p:p;const y=[],x=[];let v=[],b=0,T;x[b]=void 0,v[b]=[];for(let _=0,N=s.length;_<N;_++)l=s[_],T=l.getPoints(),o=i(T),o=e?!o:o,o?(!p&&x[b]&&b++,x[b]={s:new gu,p:T},x[b].s.curves=l.curves,p&&b++,v[b]=[]):v[b].push({h:l,p:T[0]});if(!x[0])return t(s);if(x.length>1){let _=!1,N=0;for(let A=0,R=x.length;A<R;A++)y[A]=[];for(let A=0,R=x.length;A<R;A++){const D=v[A];for(let U=0;U<D.length;U++){const z=D[U];let W=!0;for(let O=0;O<x.length;O++)r(z.p,x[O].p)&&(A!==O&&N++,W?(W=!1,y[O].push(z)):_=!0);W&&y[A].push(z)}}N>0&&_===!1&&(v=y)}let M;for(let _=0,N=x.length;_<N;_++){d=x[_].s,f.push(d),M=v[_];for(let A=0,R=M.length;A<R;A++)d.holes.push(M[A].h)}return f}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ey}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ey);const YV=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:x_,AddEquation:Ll,AddOperation:vA,AdditiveAnimationBlendMode:A_,AdditiveBlending:E0,AgXToneMapping:MA,AlphaFormat:CA,AlwaysCompare:XA,AlwaysDepth:hA,AlwaysStencilFunc:C1,AmbientLight:$C,AnimationAction:tN,AnimationClip:Lp,AnimationLoader:K6,AnimationMixer:TV,AnimationObjectGroup:MV,AnimationUtils:$6,ArcCurve:xC,ArrayCamera:lC,ArrowHelper:$V,AttachedBindMode:n1,Audio:QC,AudioAnalyser:pV,AudioContext:nw,AudioListener:dV,AudioLoader:lV,AxesHelper:qV,BackSide:Ri,BasicDepthPacking:OA,BasicShadowMap:qT,BatchedMesh:mC,Bone:V_,BooleanKeyframeTrack:Tu,Box2:LV,Box3:Pi,Box3Helper:GV,BoxGeometry:Eu,BoxHelper:WV,BufferAttribute:pn,BufferGeometry:Jt,BufferGeometryLoader:JC,ByteType:TA,Cache:ko,Camera:$p,CameraHelper:HV,CanvasTexture:y6,CapsuleGeometry:py,CatmullRomCurve3:vC,CineonToneMapping:SA,CircleGeometry:my,ClampToEdgeWrapping:di,Clock:rw,Color:at,ColorKeyframeTrack:Q_,ColorManagement:xn,CompressedArrayTexture:m6,CompressedCubeTexture:g6,CompressedTexture:hy,CompressedTextureLoader:J6,ConeGeometry:gy,ConstantAlphaFactor:cA,ConstantColorFactor:oA,CubeCamera:QA,CubeReflectionMapping:Uo,CubeRefractionMapping:Hl,CubeTexture:qp,CubeTextureLoader:Q6,CubeUVReflectionMapping:Eh,CubicBezierCurve:G_,CubicBezierCurve3:_C,CubicInterpolant:zC,CullFaceBack:Kv,CullFaceFront:$T,CullFaceFrontBack:i5,CullFaceNone:XT,Curve:fa,CurvePath:SC,CustomBlending:YT,CustomToneMapping:bA,CylinderGeometry:Ch,Cylindrical:PV,Data3DTexture:P_,DataArrayTexture:ay,DataTexture:mu,DataTextureLoader:eV,DataUtils:pO,DecrementStencilOp:g5,DecrementWrapStencilOp:x5,DefaultLoadingManager:VC,DepthFormat:zl,DepthStencilFormat:vu,DepthTexture:U_,DetachedBindMode:EA,DirectionalLight:XC,DirectionalLightHelper:VV,DiscreteInterpolant:BC,DisplayP3ColorSpace:sy,DodecahedronGeometry:yy,DoubleSide:Ra,DstAlphaFactor:nA,DstColorFactor:iA,DynamicCopyUsage:L5,DynamicDrawUsage:A5,DynamicReadUsage:k5,EdgesGeometry:bC,EllipseCurve:fy,EqualCompare:VA,EqualDepth:pA,EqualStencilFunc:S5,EquirectangularReflectionMapping:mp,EquirectangularRefractionMapping:gp,Euler:Xp,EventDispatcher:zo,ExtrudeGeometry:Qp,FileLoader:za,Float16BufferAttribute:_O,Float32BufferAttribute:yt,Float64BufferAttribute:wO,FloatType:oa,Fog:cy,FogExp2:ly,FramebufferTexture:p6,FrontSide:Do,Frustum:Yp,GLBufferAttribute:kV,GLSL1:D5,GLSL3:N1,GreaterCompare:HA,GreaterDepth:gA,GreaterEqualCompare:GA,GreaterEqualDepth:mA,GreaterEqualStencilFunc:T5,GreaterStencilFunc:M5,GridHelper:BV,Group:oh,HalfFloatType:mh,HemisphereLight:HC,HemisphereLightHelper:zV,IcosahedronGeometry:vy,ImageBitmapLoader:oV,ImageLoader:Ip,ImageUtils:R_,IncrementStencilOp:m5,IncrementWrapStencilOp:y5,InstancedBufferAttribute:vh,InstancedBufferGeometry:KC,InstancedInterleavedBuffer:NV,InstancedMesh:pC,Int16BufferAttribute:xO,Int32BufferAttribute:vO,Int8BufferAttribute:mO,IntType:__,InterleavedBuffer:uy,InterleavedBufferAttribute:_u,Interpolant:nm,InterpolateDiscrete:vp,InterpolateLinear:_p,InterpolateSmooth:c0,InvertStencilOp:v5,KeepStencilOp:eu,KeyframeTrack:pa,LOD:hC,LatheGeometry:Jp,Layers:pu,LessCompare:jA,LessDepth:fA,LessEqualCompare:N_,LessEqualDepth:pp,LessEqualStencilFunc:b5,LessStencilFunc:w5,Light:Jl,LightProbe:ZC,Line:Gl,Line3:IV,LineBasicMaterial:Li,LineCurve:X_,LineCurve3:wC,LineDashedMaterial:UC,LineLoop:gC,LineSegments:Ba,LinearDisplayP3ColorSpace:Gp,LinearEncoding:C_,LinearFilter:lr,LinearInterpolant:J_,LinearMipMapLinearFilter:c5,LinearMipMapNearestFilter:l5,LinearMipmapLinearFilter:Wl,LinearMipmapNearestFilter:v_,LinearSRGBColorSpace:Oa,LinearToneMapping:_A,LinearTransfer:Sp,Loader:Ii,LoaderUtils:O1,LoadingManager:ew,LoopOnce:IA,LoopPingPong:UA,LoopRepeat:DA,LuminanceAlphaFormat:kA,LuminanceFormat:NA,MOUSE:n5,Material:fi,MaterialLoader:Ty,MathUtils:Z5,Matrix3:Kt,Matrix4:Ut,MaxEquation:t1,Mesh:_r,MeshBasicMaterial:Zl,MeshDepthMaterial:O_,MeshDistanceMaterial:F_,MeshLambertMaterial:IC,MeshMatcapMaterial:DC,MeshNormalMaterial:LC,MeshPhongMaterial:RC,MeshPhysicalMaterial:kC,MeshStandardMaterial:Z_,MeshToonMaterial:PC,MinEquation:e1,MirroredRepeatWrapping:xp,MixOperation:xA,MultiplyBlending:Qv,MultiplyOperation:Wp,NearestFilter:or,NearestMipMapLinearFilter:o5,NearestMipMapNearestFilter:a5,NearestMipmapLinearFilter:ep,NearestMipmapNearestFilter:C0,NeverCompare:BA,NeverDepth:dA,NeverStencilFunc:_5,NoBlending:Lo,NoColorSpace:hs,NoToneMapping:La,NormalAnimationBlendMode:iy,NormalBlending:hu,NotEqualCompare:WA,NotEqualDepth:yA,NotEqualStencilFunc:E5,NumberKeyframeTrack:Rp,Object3D:hn,ObjectLoader:sV,ObjectSpaceNormalMap:zA,OctahedronGeometry:em,OneFactor:QT,OneMinusConstantAlphaFactor:uA,OneMinusConstantColorFactor:lA,OneMinusDstAlphaFactor:rA,OneMinusDstColorFactor:sA,OneMinusSrcAlphaFactor:A0,OneMinusSrcColorFactor:tA,OrthographicCamera:Kp,P3Primaries:Mp,PCFShadowMap:ty,PCFSoftShadowMap:Qf,PMREMGenerator:R1,Path:Ap,PerspectiveCamera:Br,Plane:Rl,PlaneGeometry:Zp,PlaneHelper:XV,PointLight:GC,PointLightHelper:OV,Points:yC,PointsMaterial:H_,PolarGridHelper:jV,PolyhedronGeometry:Kl,PositionalAudio:fV,PropertyBinding:cn,PropertyMixer:eN,QuadraticBezierCurve:$_,QuadraticBezierCurve3:q_,Quaternion:Ki,QuaternionKeyframeTrack:Nh,QuaternionLinearInterpolant:jC,RED_GREEN_RGTC2_Format:T1,RED_RGTC1_Format:LA,REVISION:ey,RGBADepthPacking:FA,RGBAFormat:Ni,RGBAIntegerFormat:E_,RGBA_ASTC_10x10_Format:_1,RGBA_ASTC_10x5_Format:y1,RGBA_ASTC_10x6_Format:x1,RGBA_ASTC_10x8_Format:v1,RGBA_ASTC_12x10_Format:w1,RGBA_ASTC_12x12_Format:S1,RGBA_ASTC_4x4_Format:c1,RGBA_ASTC_5x4_Format:u1,RGBA_ASTC_5x5_Format:d1,RGBA_ASTC_6x5_Format:h1,RGBA_ASTC_6x6_Format:f1,RGBA_ASTC_8x5_Format:p1,RGBA_ASTC_8x6_Format:m1,RGBA_ASTC_8x8_Format:g1,RGBA_BPTC_Format:l0,RGBA_ETC2_EAC_Format:l1,RGBA_PVRTC_2BPPV1_Format:a1,RGBA_PVRTC_4BPPV1_Format:s1,RGBA_S3TC_DXT1_Format:s0,RGBA_S3TC_DXT3_Format:a0,RGBA_S3TC_DXT5_Format:o0,RGB_BPTC_SIGNED_Format:b1,RGB_BPTC_UNSIGNED_Format:M1,RGB_ETC1_Format:T_,RGB_ETC2_Format:o1,RGB_PVRTC_2BPPV1_Format:i1,RGB_PVRTC_4BPPV1_Format:r1,RGB_S3TC_DXT1_Format:i0,RGFormat:PA,RGIntegerFormat:M_,RawShaderMaterial:NC,Ray:Th,Raycaster:nN,Rec709Primaries:bp,RectAreaLight:qC,RedFormat:RA,RedIntegerFormat:b_,ReinhardToneMapping:wA,RenderTarget:YA,RepeatWrapping:yp,ReplaceStencilOp:p5,ReverseSubtractEquation:KT,RingGeometry:_y,SIGNED_RED_GREEN_RGTC2_Format:A1,SIGNED_RED_RGTC1_Format:E1,SRGBColorSpace:kr,SRGBTransfer:Rn,Scene:B_,ShaderChunk:Yt,ShaderLib:aa,ShaderMaterial:Fa,ShadowMaterial:CC,Shape:gu,ShapeGeometry:wy,ShapePath:iN,ShapeUtils:Da,ShortType:AA,Skeleton:dy,SkeletonHelper:UV,SkinnedMesh:fC,Source:lu,Sphere:hi,SphereGeometry:tm,Spherical:RV,SphericalHarmonics3:YC,SplineCurve:Y_,SpotLight:WC,SpotLightHelper:DV,Sprite:dC,SpriteMaterial:j_,SrcAlphaFactor:T0,SrcAlphaSaturateFactor:aA,SrcColorFactor:eA,StaticCopyUsage:P5,StaticDrawUsage:Ep,StaticReadUsage:N5,StereoCamera:cV,StreamCopyUsage:I5,StreamDrawUsage:C5,StreamReadUsage:R5,StringKeyframeTrack:Au,SubtractEquation:ZT,SubtractiveBlending:Jv,TOUCH:r5,TangentSpaceNormalMap:Yl,TetrahedronGeometry:Sy,Texture:dr,TextureLoader:tV,TorusGeometry:by,TorusKnotGeometry:My,Triangle:Ci,TriangleFanDrawMode:h5,TriangleStripDrawMode:d5,TrianglesDrawMode:u5,TubeGeometry:Ey,TwoPassDoubleSide:s5,UVMapping:ny,Uint16BufferAttribute:L_,Uint32BufferAttribute:I_,Uint8BufferAttribute:gO,Uint8ClampedBufferAttribute:yO,Uniform:aw,UniformsGroup:CV,UniformsLib:Ye,UniformsUtils:JA,UnsignedByteType:Ia,UnsignedInt248Type:Fl,UnsignedIntType:No,UnsignedShort4444Type:w_,UnsignedShort5551Type:S_,UnsignedShortType:ry,VSMShadowMap:sa,Vector2:Re,Vector3:q,Vector4:vn,VectorKeyframeTrack:Pp,VideoTexture:f6,WebGL1Renderer:cC,WebGL3DRenderTarget:nO,WebGLArrayRenderTarget:tO,WebGLCoordinateSystem:la,WebGLCubeRenderTarget:eC,WebGLMultipleRenderTargets:rO,WebGLRenderTarget:ua,WebGLRenderer:z_,WebGLUtils:oC,WebGPUCoordinateSystem:gh,WireframeGeometry:AC,WrapAroundEnding:wp,ZeroCurvatureEnding:au,ZeroFactor:JT,ZeroSlopeEnding:ou,ZeroStencilOp:f5,_SRGBAFormat:N0,createCanvasElement:qA,sRGBEncoding:Bl},Symbol.toStringTag,{value:"Module"}));var dv={exports:{}},Al={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JM;function ZV(){return JM||(JM=1,Al.ConcurrentRoot=1,Al.ContinuousEventPriority=4,Al.DefaultEventPriority=16,Al.DiscreteEventPriority=1,Al.IdleEventPriority=536870912,Al.LegacyRoot=0),Al}var QM;function KV(){return QM||(QM=1,dv.exports=ZV()),dv.exports}var ch=KV();function JV(n){let e;const t=new Set,r=(f,p)=>{const y=typeof f=="function"?f(e):f;if(y!==e){const x=e;e=p?y:Object.assign({},e,y),t.forEach(v=>v(e,x))}},i=()=>e,s=(f,p=i,y=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let x=p(e);function v(){const b=p(e);if(!y(x,b)){const T=x;f(x=b,T)}}return t.add(v),()=>t.delete(v)},d={setState:r,getState:i,subscribe:(f,p,y)=>p||y?s(f,p,y):(t.add(f),()=>t.delete(f)),destroy:()=>t.clear()};return e=n(r,i,d),d}const QV=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),eE=QV?V.useEffect:V.useLayoutEffect;function eH(n){const e=typeof n=="function"?JV(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=V.useReducer(M=>M+1,0),o=e.getState(),l=V.useRef(o),d=V.useRef(r),f=V.useRef(i),p=V.useRef(!1),y=V.useRef();y.current===void 0&&(y.current=r(o));let x,v=!1;(l.current!==o||d.current!==r||f.current!==i||p.current)&&(x=r(o),v=!i(y.current,x)),eE(()=>{v&&(y.current=x),l.current=o,d.current=r,f.current=i,p.current=!1});const b=V.useRef(o);eE(()=>{const M=()=>{try{const N=e.getState(),A=d.current(N);f.current(y.current,A)||(l.current=N,y.current=A,s())}catch{p.current=!0,s()}},_=e.subscribe(M);return e.getState()!==b.current&&M(),_},[]);const T=v?x:y.current;return V.useDebugValue(T),T};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var hv={exports:{}},fv={exports:{}},pv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tE;function tH(){return tE||(tE=1,function(n){function e($,re){var te=$.length;$.push(re);e:for(;0<te;){var j=te-1>>>1,X=$[j];if(0<i(X,re))$[j]=re,$[te]=X,te=j;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var re=$[0],te=$.pop();if(te!==re){$[0]=te;e:for(var j=0,X=$.length,ee=X>>>1;j<ee;){var fe=2*(j+1)-1,Ae=$[fe],ke=fe+1,Pe=$[ke];if(0>i(Ae,te))ke<X&&0>i(Pe,Ae)?($[j]=Pe,$[ke]=te,j=ke):($[j]=Ae,$[fe]=te,j=fe);else if(ke<X&&0>i(Pe,te))$[j]=Pe,$[ke]=te,j=ke;else break e}}return re}function i($,re){var te=$.sortIndex-re.sortIndex;return te!==0?te:$.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var d=[],f=[],p=1,y=null,x=3,v=!1,b=!1,T=!1,M=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A($){for(var re=t(f);re!==null;){if(re.callback===null)r(f);else if(re.startTime<=$)r(f),re.sortIndex=re.expirationTime,e(d,re);else break;re=t(f)}}function R($){if(T=!1,A($),!b)if(t(d)!==null)b=!0,Q(D);else{var re=t(f);re!==null&&me(R,re.startTime-$)}}function D($,re){b=!1,T&&(T=!1,_(W),W=-1),v=!0;var te=x;try{for(A(re),y=t(d);y!==null&&(!(y.expirationTime>re)||$&&!K());){var j=y.callback;if(typeof j=="function"){y.callback=null,x=y.priorityLevel;var X=j(y.expirationTime<=re);re=n.unstable_now(),typeof X=="function"?y.callback=X:y===t(d)&&r(d),A(re)}else r(d);y=t(d)}if(y!==null)var ee=!0;else{var fe=t(f);fe!==null&&me(R,fe.startTime-re),ee=!1}return ee}finally{y=null,x=te,v=!1}}var U=!1,z=null,W=-1,O=5,I=-1;function K(){return!(n.unstable_now()-I<O)}function ie(){if(z!==null){var $=n.unstable_now();I=$;var re=!0;try{re=z(!0,$)}finally{re?oe():(U=!1,z=null)}}else U=!1}var oe;if(typeof N=="function")oe=function(){N(ie)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,le=Z.port2;Z.port1.onmessage=ie,oe=function(){le.postMessage(null)}}else oe=function(){M(ie,0)};function Q($){z=$,U||(U=!0,oe())}function me($,re){W=M(function(){$(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){b||v||(b=!0,Q(D))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function($){switch(x){case 1:case 2:case 3:var re=3;break;default:re=x}var te=x;x=re;try{return $()}finally{x=te}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,re){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var te=x;x=$;try{return re()}finally{x=te}},n.unstable_scheduleCallback=function($,re,te){var j=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?j+te:j):te=j,$){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=te+X,$={id:p++,callback:re,priorityLevel:$,startTime:te,expirationTime:X,sortIndex:-1},te>j?($.sortIndex=te,e(f,$),t(d)===null&&$===t(f)&&(T?(_(W),W=-1):T=!0,me(R,te-j))):($.sortIndex=X,e(d,$),b||v||(b=!0,Q(D))),$},n.unstable_shouldYield=K,n.unstable_wrapCallback=function($){var re=x;return function(){var te=x;x=re;try{return $.apply(this,arguments)}finally{x=te}}}}(pv)),pv}var nE;function sN(){return nE||(nE=1,fv.exports=tH()),fv.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mv,rE;function nH(){return rE||(rE=1,mv=function(e){var t={},r=I0(),i=sN(),s=Object.assign;function o(u){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+u,w=1;w<arguments.length;w++)h+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,d=Symbol.for("react.element"),f=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),b=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),D=Symbol.iterator;function U(u){return u===null||typeof u!="object"?null:(u=D&&u[D]||u["@@iterator"],typeof u=="function"?u:null)}function z(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case p:return"Fragment";case f:return"Portal";case x:return"Profiler";case y:return"StrictMode";case M:return"Suspense";case _:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case b:return(u.displayName||"Context")+".Consumer";case v:return(u._context.displayName||"Context")+".Provider";case T:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case N:return h=u.displayName||null,h!==null?h:z(u.type)||"Memo";case A:h=u._payload,u=u._init;try{return z(u(h))}catch{}}return null}function W(u){var h=u.type;switch(u.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=h.render,u=u.displayName||u.name||"",h.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(h);case 8:return h===y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function O(u){var h=u,w=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(w=h.return),u=h.return;while(u)}return h.tag===3?w:null}function I(u){if(O(u)!==u)throw Error(o(188))}function K(u){var h=u.alternate;if(!h){if(h=O(u),h===null)throw Error(o(188));return h!==u?null:u}for(var w=u,E=h;;){var k=w.return;if(k===null)break;var L=k.alternate;if(L===null){if(E=k.return,E!==null){w=E;continue}break}if(k.child===L.child){for(L=k.child;L;){if(L===w)return I(k),u;if(L===E)return I(k),h;L=L.sibling}throw Error(o(188))}if(w.return!==E.return)w=k,E=L;else{for(var Y=!1,ue=k.child;ue;){if(ue===w){Y=!0,w=k,E=L;break}if(ue===E){Y=!0,E=k,w=L;break}ue=ue.sibling}if(!Y){for(ue=L.child;ue;){if(ue===w){Y=!0,w=L,E=k;break}if(ue===E){Y=!0,E=L,w=k;break}ue=ue.sibling}if(!Y)throw Error(o(189))}}if(w.alternate!==E)throw Error(o(190))}if(w.tag!==3)throw Error(o(188));return w.stateNode.current===w?u:h}function ie(u){return u=K(u),u!==null?oe(u):null}function oe(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var h=oe(u);if(h!==null)return h;u=u.sibling}return null}function Z(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var h=Z(u);if(h!==null)return h}u=u.sibling}return null}var le=Array.isArray,Q=e.getPublicInstance,me=e.getRootHostContext,$=e.getChildHostContext,re=e.prepareForCommit,te=e.resetAfterCommit,j=e.createInstance,X=e.appendInitialChild,ee=e.finalizeInitialChildren,fe=e.prepareUpdate,Ae=e.shouldSetTextContent,ke=e.createTextInstance,Pe=e.scheduleTimeout,Xe=e.cancelTimeout,Ke=e.noTimeout,qe=e.isPrimaryRenderer,lt=e.supportsMutation,ne=e.supportsPersistence,ze=e.supportsHydration,Ce=e.getInstanceFromNode,je=e.preparePortalMount,Ne=e.getCurrentEventPriority,xt=e.detachDeletedInstance,et=e.supportsMicrotasks,H=e.scheduleMicrotask,B=e.supportsTestSelectors,pe=e.findFiberRoot,Ue=e.getBoundingRect,Oe=e.getTextContent,Le=e.isHiddenSubtree,pt=e.matchAccessibilityRole,Ze=e.setFocusIfFocusable,it=e.setupIntersectionObserver,St=e.appendChild,Ot=e.appendChildToContainer,Ie=e.commitTextUpdate,Qt=e.commitMount,Xt=e.commitUpdate,Pt=e.insertBefore,bt=e.insertInContainerBefore,ht=e.removeChild,Ft=e.removeChildFromContainer,tn=e.resetTextContent,_n=e.hideInstance,jt=e.hideTextInstance,We=e.unhideInstance,ae=e.unhideTextInstance,$e=e.clearContainer,Je=e.cloneInstance,Tt=e.createContainerChildSet,Mt=e.appendChildToContainerChildSet,fn=e.finalizeContainerChildren,un=e.replaceContainerChildren,Ln=e.cloneHiddenInstance,tr=e.cloneHiddenTextInstance,sn=e.canHydrateInstance,nr=e.canHydrateTextInstance,Lr=e.canHydrateSuspenseInstance,Ql=e.isSuspenseInstancePending,Ns=e.isSuspenseInstanceFallback,ks=e.registerSuspenseInstanceRetry,Qi=e.getNextHydratableSibling,ma=e.getFirstHydratableChild,Cu=e.getFirstHydratableChildWithinContainer,Nu=e.getFirstHydratableChildWithinSuspenseInstance,kh=e.hydrateInstance,Rs=e.hydrateTextInstance,ku=e.hydrateSuspenseInstance,G=e.getNextHydratableInstanceAfterSuspenseInstance,ge=e.commitHydratedContainer,Se=e.commitHydratedSuspenseInstance,be=e.clearSuspenseBoundary,_e=e.clearSuspenseBoundaryFromContainer,nt=e.shouldDeleteUnhydratedTailInstances,wt=e.didNotMatchHydratedContainerTextInstance,At=e.didNotMatchHydratedTextInstance,rt;function It(u){if(rt===void 0)try{throw Error()}catch(w){var h=w.stack.trim().match(/\n( *(at )?)/);rt=h&&h[1]||""}return`
`+rt+u}var kt=!1;function Lt(u,h){if(!u||kt)return"";kt=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Ve){var E=Ve}Reflect.construct(u,[],h)}else{try{h.call()}catch(Ve){E=Ve}u.call(h.prototype)}else{try{throw Error()}catch(Ve){E=Ve}u()}}catch(Ve){if(Ve&&E&&typeof Ve.stack=="string"){for(var k=Ve.stack.split(`
`),L=E.stack.split(`
`),Y=k.length-1,ue=L.length-1;1<=Y&&0<=ue&&k[Y]!==L[ue];)ue--;for(;1<=Y&&0<=ue;Y--,ue--)if(k[Y]!==L[ue]){if(Y!==1||ue!==1)do if(Y--,ue--,0>ue||k[Y]!==L[ue]){var Te=`
`+k[Y].replace(" at new "," at ");return u.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",u.displayName)),Te}while(1<=Y&&0<=ue);break}}}finally{kt=!1,Error.prepareStackTrace=w}return(u=u?u.displayName||u.name:"")?It(u):""}var wn=Object.prototype.hasOwnProperty,wr=[],Sn=-1;function Vn(u){return{current:u}}function vt(u){0>Sn||(u.current=wr[Sn],wr[Sn]=null,Sn--)}function ut(u,h){Sn++,wr[Sn]=u.current,u.current=h}var On={},$t=Vn(On),Fn=Vn(!1),ms=On;function jr(u,h){var w=u.type.contextTypes;if(!w)return On;var E=u.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===h)return E.__reactInternalMemoizedMaskedChildContext;var k={},L;for(L in w)k[L]=h[L];return E&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=h,u.__reactInternalMemoizedMaskedChildContext=k),k}function Hn(u){return u=u.childContextTypes,u!=null}function Tn(){vt(Fn),vt($t)}function pi(u,h,w){if($t.current!==On)throw Error(o(168));ut($t,h),ut(Fn,w)}function Bo(u,h,w){var E=u.stateNode;if(h=h.childContextTypes,typeof E.getChildContext!="function")return w;E=E.getChildContext();for(var k in E)if(!(k in h))throw Error(o(108,W(u)||"Unknown",k));return s({},w,E)}function Sr(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||On,ms=$t.current,ut($t,u),ut(Fn,Fn.current),!0}function ga(u,h,w){var E=u.stateNode;if(!E)throw Error(o(169));w?(u=Bo(u,h,ms),E.__reactInternalMemoizedMergedChildContext=u,vt(Fn),vt($t),ut($t,u)):vt(Fn),ut(Fn,w)}var Jr=Math.clz32?Math.clz32:Ay,jo=Math.log,ec=Math.LN2;function Ay(u){return u>>>=0,u===0?32:31-(jo(u)/ec|0)|0}var Vo=64,an=4194304;function Ho(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function tc(u,h){var w=u.pendingLanes;if(w===0)return 0;var E=0,k=u.suspendedLanes,L=u.pingedLanes,Y=w&268435455;if(Y!==0){var ue=Y&~k;ue!==0?E=Ho(ue):(L&=Y,L!==0&&(E=Ho(L)))}else Y=w&~k,Y!==0?E=Ho(Y):L!==0&&(E=Ho(L));if(E===0)return 0;if(h!==0&&h!==E&&(h&k)===0&&(k=E&-E,L=h&-h,k>=L||k===16&&(L&4194240)!==0))return h;if((E&4)!==0&&(E|=w&16),h=u.entangledLanes,h!==0)for(u=u.entanglements,h&=E;0<h;)w=31-Jr(h),k=1<<w,E|=u[w],h&=~k;return E}function Rh(u,h){switch(u){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function im(u,h){for(var w=u.suspendedLanes,E=u.pingedLanes,k=u.expirationTimes,L=u.pendingLanes;0<L;){var Y=31-Jr(L),ue=1<<Y,Te=k[Y];Te===-1?((ue&w)===0||(ue&E)!==0)&&(k[Y]=Rh(ue,h)):Te<=h&&(u.expiredLanes|=ue),L&=~ue}}function Ru(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function Pu(u){for(var h=[],w=0;31>w;w++)h.push(u);return h}function ja(u,h,w){u.pendingLanes|=h,h!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,h=31-Jr(h),u[h]=w}function Lu(u,h){var w=u.pendingLanes&~h;u.pendingLanes=h,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=h,u.mutableReadLanes&=h,u.entangledLanes&=h,h=u.entanglements;var E=u.eventTimes;for(u=u.expirationTimes;0<w;){var k=31-Jr(w),L=1<<k;h[k]=0,E[k]=-1,u[k]=-1,w&=~L}}function gs(u,h){var w=u.entangledLanes|=h;for(u=u.entanglements;w;){var E=31-Jr(w),k=1<<E;k&h|u[E]&h&&(u[E]|=h),w&=~k}}var qt=0;function Ps(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var Va=i.unstable_scheduleCallback,Wo=i.unstable_cancelCallback,ya=i.unstable_shouldYield,Cy=i.unstable_requestPaint,rr=i.unstable_now,Ha=i.unstable_ImmediatePriority,Ny=i.unstable_UserBlockingPriority,Iu=i.unstable_NormalPriority,Du=i.unstable_IdlePriority,nc=null,ys=null;function rc(u){if(ys&&typeof ys.onCommitFiberRoot=="function")try{ys.onCommitFiberRoot(nc,u,void 0,(u.current.flags&128)===128)}catch{}}function ic(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var Vr=typeof Object.is=="function"?Object.is:ic,Di=null,Uu=!1,Ph=!1;function Ou(u){Di===null?Di=[u]:Di.push(u)}function Fu(u){Uu=!0,Ou(u)}function Ui(){if(!Ph&&Di!==null){Ph=!0;var u=0,h=qt;try{var w=Di;for(qt=1;u<w.length;u++){var E=w[u];do E=E(!0);while(E!==null)}Di=null,Uu=!1}catch(k){throw Di!==null&&(Di=Di.slice(u+1)),Va(Ha,Ui),k}finally{qt=h,Ph=!1}}return null}var sm=l.ReactCurrentBatchConfig;function es(u,h){if(Vr(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var w=Object.keys(u),E=Object.keys(h);if(w.length!==E.length)return!1;for(E=0;E<w.length;E++){var k=w[E];if(!wn.call(h,k)||!Vr(u[k],h[k]))return!1}return!0}function Lh(u){switch(u.tag){case 5:return It(u.type);case 16:return It("Lazy");case 13:return It("Suspense");case 19:return It("SuspenseList");case 0:case 2:case 15:return u=Lt(u.type,!1),u;case 11:return u=Lt(u.type.render,!1),u;case 1:return u=Lt(u.type,!0),u;default:return""}}function Qr(u,h){if(u&&u.defaultProps){h=s({},h),u=u.defaultProps;for(var w in u)h[w]===void 0&&(h[w]=u[w]);return h}return h}var sc=Vn(null),Wa=null,Ls=null,zu=null;function Hr(){zu=Ls=Wa=null}function Ga(u,h,w){qe?(ut(sc,h._currentValue),h._currentValue=w):(ut(sc,h._currentValue2),h._currentValue2=w)}function ac(u){var h=sc.current;vt(sc),qe?u._currentValue=h:u._currentValue2=h}function Xa(u,h,w){for(;u!==null;){var E=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,E!==null&&(E.childLanes|=h)):E!==null&&(E.childLanes&h)!==h&&(E.childLanes|=h),u===w)break;u=u.return}}function Go(u,h){Wa=u,zu=Ls=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&h)!==0&&(mr=!0),u.firstContext=null)}function ei(u){var h=qe?u._currentValue:u._currentValue2;if(zu!==u)if(u={context:u,memoizedValue:h,next:null},Ls===null){if(Wa===null)throw Error(o(308));Ls=u,Wa.dependencies={lanes:0,firstContext:u}}else Ls=Ls.next=u;return h}var Oi=null,Fi=!1;function Xo(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ih(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Is(u,h){return{eventTime:u,lane:h,tag:0,payload:null,callback:null,next:null}}function xa(u,h){var w=u.updateQueue;w!==null&&(w=w.shared,Gn!==null&&(u.mode&1)!==0&&(Ht&2)===0?(u=w.interleaved,u===null?(h.next=h,Oi===null?Oi=[w]:Oi.push(w)):(h.next=u.next,u.next=h),w.interleaved=h):(u=w.pending,u===null?h.next=h:(h.next=u.next,u.next=h),w.pending=h))}function Bu(u,h,w){if(h=h.updateQueue,h!==null&&(h=h.shared,(w&4194240)!==0)){var E=h.lanes;E&=u.pendingLanes,w|=E,h.lanes=w,gs(u,w)}}function ju(u,h){var w=u.updateQueue,E=u.alternate;if(E!==null&&(E=E.updateQueue,w===E)){var k=null,L=null;if(w=w.firstBaseUpdate,w!==null){do{var Y={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};L===null?k=L=Y:L=L.next=Y,w=w.next}while(w!==null);L===null?k=L=h:L=L.next=h}else k=L=h;w={baseState:E.baseState,firstBaseUpdate:k,lastBaseUpdate:L,shared:E.shared,effects:E.effects},u.updateQueue=w;return}u=w.lastBaseUpdate,u===null?w.firstBaseUpdate=h:u.next=h,w.lastBaseUpdate=h}function Vu(u,h,w,E){var k=u.updateQueue;Fi=!1;var L=k.firstBaseUpdate,Y=k.lastBaseUpdate,ue=k.shared.pending;if(ue!==null){k.shared.pending=null;var Te=ue,Ve=Te.next;Te.next=null,Y===null?L=Ve:Y.next=Ve,Y=Te;var ct=u.alternate;ct!==null&&(ct=ct.updateQueue,ue=ct.lastBaseUpdate,ue!==Y&&(ue===null?ct.firstBaseUpdate=Ve:ue.next=Ve,ct.lastBaseUpdate=Te))}if(L!==null){var zt=k.baseState;Y=0,ct=Ve=Te=null,ue=L;do{var Et=ue.lane,Wt=ue.eventTime;if((E&Et)===Et){ct!==null&&(ct=ct.next={eventTime:Wt,lane:0,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null});e:{var tt=u,Cr=ue;switch(Et=h,Wt=w,Cr.tag){case 1:if(tt=Cr.payload,typeof tt=="function"){zt=tt.call(Wt,zt,Et);break e}zt=tt;break e;case 3:tt.flags=tt.flags&-65537|128;case 0:if(tt=Cr.payload,Et=typeof tt=="function"?tt.call(Wt,zt,Et):tt,Et==null)break e;zt=s({},zt,Et);break e;case 2:Fi=!0}}ue.callback!==null&&ue.lane!==0&&(u.flags|=64,Et=k.effects,Et===null?k.effects=[ue]:Et.push(ue))}else Wt={eventTime:Wt,lane:Et,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},ct===null?(Ve=ct=Wt,Te=zt):ct=ct.next=Wt,Y|=Et;if(ue=ue.next,ue===null){if(ue=k.shared.pending,ue===null)break;Et=ue,ue=Et.next,Et.next=null,k.lastBaseUpdate=Et,k.shared.pending=null}}while(!0);if(ct===null&&(Te=zt),k.baseState=Te,k.firstBaseUpdate=Ve,k.lastBaseUpdate=ct,h=k.shared.interleaved,h!==null){k=h;do Y|=k.lane,k=k.next;while(k!==h)}else L===null&&(k.shared.lanes=0);ws|=Y,u.lanes=Y,u.memoizedState=zt}}function am(u,h,w){if(u=h.effects,h.effects=null,u!==null)for(h=0;h<u.length;h++){var E=u[h],k=E.callback;if(k!==null){if(E.callback=null,E=w,typeof k!="function")throw Error(o(191,k));k.call(E)}}}var om=new r.Component().refs;function Dh(u,h,w,E){h=u.memoizedState,w=w(E,h),w=w==null?h:s({},h,w),u.memoizedState=w,u.lanes===0&&(u.updateQueue.baseState=w)}var Hu={isMounted:function(u){return(u=u._reactInternals)?O(u)===u:!1},enqueueSetState:function(u,h,w){u=u._reactInternals;var E=on(),k=os(u),L=Is(E,k);L.payload=h,w!=null&&(L.callback=w),xa(u,L),h=Ur(u,k,E),h!==null&&Bu(h,u,k)},enqueueReplaceState:function(u,h,w){u=u._reactInternals;var E=on(),k=os(u),L=Is(E,k);L.tag=1,L.payload=h,w!=null&&(L.callback=w),xa(u,L),h=Ur(u,k,E),h!==null&&Bu(h,u,k)},enqueueForceUpdate:function(u,h){u=u._reactInternals;var w=on(),E=os(u),k=Is(w,E);k.tag=2,h!=null&&(k.callback=h),xa(u,k),h=Ur(u,E,w),h!==null&&Bu(h,u,E)}};function Uh(u,h,w,E,k,L,Y){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(E,L,Y):h.prototype&&h.prototype.isPureReactComponent?!es(w,E)||!es(k,L):!0}function lm(u,h,w){var E=!1,k=On,L=h.contextType;return typeof L=="object"&&L!==null?L=ei(L):(k=Hn(h)?ms:$t.current,E=h.contextTypes,L=(E=E!=null)?jr(u,k):On),h=new h(w,L),u.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Hu,u.stateNode=h,h._reactInternals=u,E&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=k,u.__reactInternalMemoizedMaskedChildContext=L),h}function cm(u,h,w,E){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(w,E),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(w,E),h.state!==u&&Hu.enqueueReplaceState(h,h.state,null)}function Oh(u,h,w,E){var k=u.stateNode;k.props=w,k.state=u.memoizedState,k.refs=om,Xo(u);var L=h.contextType;typeof L=="object"&&L!==null?k.context=ei(L):(L=Hn(h)?ms:$t.current,k.context=jr(u,L)),k.state=u.memoizedState,L=h.getDerivedStateFromProps,typeof L=="function"&&(Dh(u,h,L,w),k.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(h=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),h!==k.state&&Hu.enqueueReplaceState(k,k.state,null),Vu(u,w,k,E),k.state=u.memoizedState),typeof k.componentDidMount=="function"&&(u.flags|=4194308)}var $o=[],va=0,Wu=null,Gu=0,zi=[],mi=0,$a=null,Ds=1,Us="";function qa(u,h){$o[va++]=Gu,$o[va++]=Wu,Wu=u,Gu=h}function um(u,h,w){zi[mi++]=Ds,zi[mi++]=Us,zi[mi++]=$a,$a=u;var E=Ds;u=Us;var k=32-Jr(E)-1;E&=~(1<<k),w+=1;var L=32-Jr(h)+k;if(30<L){var Y=k-k%5;L=(E&(1<<Y)-1).toString(32),E>>=Y,k-=Y,Ds=1<<32-Jr(h)+k|w<<k|E,Us=L+u}else Ds=1<<L|w<<k|E,Us=u}function Fh(u){u.return!==null&&(qa(u,1),um(u,1,0))}function zh(u){for(;u===Wu;)Wu=$o[--va],$o[va]=null,Gu=$o[--va],$o[va]=null;for(;u===$a;)$a=zi[--mi],zi[mi]=null,Us=zi[--mi],zi[mi]=null,Ds=zi[--mi],zi[mi]=null}var Wr=null,br=null,Nn=!1,qo=!1,Bi=null;function Bh(u,h){var w=Si(5,null,null,0);w.elementType="DELETED",w.stateNode=h,w.return=u,h=u.deletions,h===null?(u.deletions=[w],u.flags|=16):h.push(w)}function jh(u,h){switch(u.tag){case 5:return h=sn(h,u.type,u.pendingProps),h!==null?(u.stateNode=h,Wr=u,br=ma(h),!0):!1;case 6:return h=nr(h,u.pendingProps),h!==null?(u.stateNode=h,Wr=u,br=null,!0):!1;case 13:if(h=Lr(h),h!==null){var w=$a!==null?{id:Ds,overflow:Us}:null;return u.memoizedState={dehydrated:h,treeContext:w,retryLane:1073741824},w=Si(18,null,null,0),w.stateNode=h,w.return=u,u.child=w,Wr=u,br=null,!0}return!1;default:return!1}}function Xu(u){return(u.mode&1)!==0&&(u.flags&128)===0}function _a(u){if(Nn){var h=br;if(h){var w=h;if(!jh(u,h)){if(Xu(u))throw Error(o(418));h=Qi(w);var E=Wr;h&&jh(u,h)?Bh(E,w):(u.flags=u.flags&-4097|2,Nn=!1,Wr=u)}}else{if(Xu(u))throw Error(o(418));u.flags=u.flags&-4097|2,Nn=!1,Wr=u}}}function dm(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Wr=u}function oc(u){if(!ze||u!==Wr)return!1;if(!Nn)return dm(u),Nn=!0,!1;if(u.tag!==3&&(u.tag!==5||nt(u.type)&&!Ae(u.type,u.memoizedProps))){var h=br;if(h){if(Xu(u)){for(u=br;u;)u=Qi(u);throw Error(o(418))}for(;h;)Bh(u,h),h=Qi(h)}}if(dm(u),u.tag===13){if(!ze)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));br=G(u)}else br=Wr?Qi(u.stateNode):null;return!0}function Yo(){ze&&(br=Wr=null,qo=Nn=!1)}function $u(u){Bi===null?Bi=[u]:Bi.push(u)}function Zo(u,h,w){if(u=w.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(o(309));var E=w.stateNode}if(!E)throw Error(o(147,u));var k=E,L=""+u;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===L?h.ref:(h=function(Y){var ue=k.refs;ue===om&&(ue=k.refs={}),Y===null?delete ue[L]:ue[L]=Y},h._stringRef=L,h)}if(typeof u!="string")throw Error(o(284));if(!w._owner)throw Error(o(290,u))}return u}function wa(u,h){throw u=Object.prototype.toString.call(h),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u))}function Ko(u){var h=u._init;return h(u._payload)}function hm(u){function h(ve,he){if(u){var Me=ve.deletions;Me===null?(ve.deletions=[he],ve.flags|=16):Me.push(he)}}function w(ve,he){if(!u)return null;for(;he!==null;)h(ve,he),he=he.sibling;return null}function E(ve,he){for(ve=new Map;he!==null;)he.key!==null?ve.set(he.key,he):ve.set(he.index,he),he=he.sibling;return ve}function k(ve,he){return ve=Zs(ve,he),ve.index=0,ve.sibling=null,ve}function L(ve,he,Me){return ve.index=Me,u?(Me=ve.alternate,Me!==null?(Me=Me.index,Me<he?(ve.flags|=2,he):Me):(ve.flags|=2,he)):(ve.flags|=1048576,he)}function Y(ve){return u&&ve.alternate===null&&(ve.flags|=2),ve}function ue(ve,he,Me,Qe){return he===null||he.tag!==6?(he=_d(Me,ve.mode,Qe),he.return=ve,he):(he=k(he,Me),he.return=ve,he)}function Te(ve,he,Me,Qe){var gt=Me.type;return gt===p?ct(ve,he,Me.props.children,Qe,Me.key):he!==null&&(he.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===A&&Ko(gt)===he.type)?(Qe=k(he,Me.props),Qe.ref=Zo(ve,he,Me),Qe.return=ve,Qe):(Qe=vd(Me.type,Me.key,Me.props,null,ve.mode,Qe),Qe.ref=Zo(ve,he,Me),Qe.return=ve,Qe)}function Ve(ve,he,Me,Qe){return he===null||he.tag!==4||he.stateNode.containerInfo!==Me.containerInfo||he.stateNode.implementation!==Me.implementation?(he=wd(Me,ve.mode,Qe),he.return=ve,he):(he=k(he,Me.children||[]),he.return=ve,he)}function ct(ve,he,Me,Qe,gt){return he===null||he.tag!==7?(he=yo(Me,ve.mode,Qe,gt),he.return=ve,he):(he=k(he,Me),he.return=ve,he)}function zt(ve,he,Me){if(typeof he=="string"&&he!==""||typeof he=="number")return he=_d(""+he,ve.mode,Me),he.return=ve,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case d:return Me=vd(he.type,he.key,he.props,null,ve.mode,Me),Me.ref=Zo(ve,null,he),Me.return=ve,Me;case f:return he=wd(he,ve.mode,Me),he.return=ve,he;case A:var Qe=he._init;return zt(ve,Qe(he._payload),Me)}if(le(he)||U(he))return he=yo(he,ve.mode,Me,null),he.return=ve,he;wa(ve,he)}return null}function Et(ve,he,Me,Qe){var gt=he!==null?he.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number")return gt!==null?null:ue(ve,he,""+Me,Qe);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case d:return Me.key===gt?Te(ve,he,Me,Qe):null;case f:return Me.key===gt?Ve(ve,he,Me,Qe):null;case A:return gt=Me._init,Et(ve,he,gt(Me._payload),Qe)}if(le(Me)||U(Me))return gt!==null?null:ct(ve,he,Me,Qe,null);wa(ve,Me)}return null}function Wt(ve,he,Me,Qe,gt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return ve=ve.get(Me)||null,ue(he,ve,""+Qe,gt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case d:return ve=ve.get(Qe.key===null?Me:Qe.key)||null,Te(he,ve,Qe,gt);case f:return ve=ve.get(Qe.key===null?Me:Qe.key)||null,Ve(he,ve,Qe,gt);case A:var Vt=Qe._init;return Wt(ve,he,Me,Vt(Qe._payload),gt)}if(le(Qe)||U(Qe))return ve=ve.get(Me)||null,ct(he,ve,Qe,gt,null);wa(he,Qe)}return null}function tt(ve,he,Me,Qe){for(var gt=null,Vt=null,Bt=he,rn=he=0,Zn=null;Bt!==null&&rn<Me.length;rn++){Bt.index>rn?(Zn=Bt,Bt=null):Zn=Bt.sibling;var nn=Et(ve,Bt,Me[rn],Qe);if(nn===null){Bt===null&&(Bt=Zn);break}u&&Bt&&nn.alternate===null&&h(ve,Bt),he=L(nn,he,rn),Vt===null?gt=nn:Vt.sibling=nn,Vt=nn,Bt=Zn}if(rn===Me.length)return w(ve,Bt),Nn&&qa(ve,rn),gt;if(Bt===null){for(;rn<Me.length;rn++)Bt=zt(ve,Me[rn],Qe),Bt!==null&&(he=L(Bt,he,rn),Vt===null?gt=Bt:Vt.sibling=Bt,Vt=Bt);return Nn&&qa(ve,rn),gt}for(Bt=E(ve,Bt);rn<Me.length;rn++)Zn=Wt(Bt,ve,rn,Me[rn],Qe),Zn!==null&&(u&&Zn.alternate!==null&&Bt.delete(Zn.key===null?rn:Zn.key),he=L(Zn,he,rn),Vt===null?gt=Zn:Vt.sibling=Zn,Vt=Zn);return u&&Bt.forEach(function(Ks){return h(ve,Ks)}),Nn&&qa(ve,rn),gt}function Cr(ve,he,Me,Qe){var gt=U(Me);if(typeof gt!="function")throw Error(o(150));if(Me=gt.call(Me),Me==null)throw Error(o(151));for(var Vt=gt=null,Bt=he,rn=he=0,Zn=null,nn=Me.next();Bt!==null&&!nn.done;rn++,nn=Me.next()){Bt.index>rn?(Zn=Bt,Bt=null):Zn=Bt.sibling;var Ks=Et(ve,Bt,nn.value,Qe);if(Ks===null){Bt===null&&(Bt=Zn);break}u&&Bt&&Ks.alternate===null&&h(ve,Bt),he=L(Ks,he,rn),Vt===null?gt=Ks:Vt.sibling=Ks,Vt=Ks,Bt=Zn}if(nn.done)return w(ve,Bt),Nn&&qa(ve,rn),gt;if(Bt===null){for(;!nn.done;rn++,nn=Me.next())nn=zt(ve,nn.value,Qe),nn!==null&&(he=L(nn,he,rn),Vt===null?gt=nn:Vt.sibling=nn,Vt=nn);return Nn&&qa(ve,rn),gt}for(Bt=E(ve,Bt);!nn.done;rn++,nn=Me.next())nn=Wt(Bt,ve,rn,nn.value,Qe),nn!==null&&(u&&nn.alternate!==null&&Bt.delete(nn.key===null?rn:nn.key),he=L(nn,he,rn),Vt===null?gt=nn:Vt.sibling=nn,Vt=nn);return u&&Bt.forEach(function(vf){return h(ve,vf)}),Nn&&qa(ve,rn),gt}function bi(ve,he,Me,Qe){if(typeof Me=="object"&&Me!==null&&Me.type===p&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case d:e:{for(var gt=Me.key,Vt=he;Vt!==null;){if(Vt.key===gt){if(gt=Me.type,gt===p){if(Vt.tag===7){w(ve,Vt.sibling),he=k(Vt,Me.props.children),he.return=ve,ve=he;break e}}else if(Vt.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===A&&Ko(gt)===Vt.type){w(ve,Vt.sibling),he=k(Vt,Me.props),he.ref=Zo(ve,Vt,Me),he.return=ve,ve=he;break e}w(ve,Vt);break}else h(ve,Vt);Vt=Vt.sibling}Me.type===p?(he=yo(Me.props.children,ve.mode,Qe,Me.key),he.return=ve,ve=he):(Qe=vd(Me.type,Me.key,Me.props,null,ve.mode,Qe),Qe.ref=Zo(ve,he,Me),Qe.return=ve,ve=Qe)}return Y(ve);case f:e:{for(Vt=Me.key;he!==null;){if(he.key===Vt)if(he.tag===4&&he.stateNode.containerInfo===Me.containerInfo&&he.stateNode.implementation===Me.implementation){w(ve,he.sibling),he=k(he,Me.children||[]),he.return=ve,ve=he;break e}else{w(ve,he);break}else h(ve,he);he=he.sibling}he=wd(Me,ve.mode,Qe),he.return=ve,ve=he}return Y(ve);case A:return Vt=Me._init,bi(ve,he,Vt(Me._payload),Qe)}if(le(Me))return tt(ve,he,Me,Qe);if(U(Me))return Cr(ve,he,Me,Qe);wa(ve,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"?(Me=""+Me,he!==null&&he.tag===6?(w(ve,he.sibling),he=k(he,Me),he.return=ve,ve=he):(w(ve,he),he=_d(Me,ve.mode,Qe),he.return=ve,ve=he),Y(ve)):w(ve,he)}return bi}var Os=hm(!0),fm=hm(!1),Jo={},ti=Vn(Jo),Ya=Vn(Jo),Za=Vn(Jo);function ts(u){if(u===Jo)throw Error(o(174));return u}function qu(u,h){ut(Za,h),ut(Ya,u),ut(ti,Jo),u=me(h),vt(ti),ut(ti,u)}function Qo(){vt(ti),vt(Ya),vt(Za)}function pm(u){var h=ts(Za.current),w=ts(ti.current);h=$(w,u.type,h),w!==h&&(ut(Ya,u),ut(ti,h))}function Vh(u){Ya.current===u&&(vt(ti),vt(Ya))}var In=Vn(0);function Yu(u){for(var h=u;h!==null;){if(h.tag===13){var w=h.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||Ql(w)||Ns(w)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var gi=[];function Ka(){for(var u=0;u<gi.length;u++){var h=gi[u];qe?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}gi.length=0}var lc=l.ReactCurrentDispatcher,yi=l.ReactCurrentBatchConfig,Ja=0,Dn=null,hr=null,fr=null,Zu=!1,xs=!1,Qa=0,cc=0;function pr(){throw Error(o(321))}function Ku(u,h){if(h===null)return!1;for(var w=0;w<h.length&&w<u.length;w++)if(!Vr(u[w],h[w]))return!1;return!0}function el(u,h,w,E,k,L){if(Ja=L,Dn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,lc.current=u===null||u.memoizedState===null?qh:Yh,u=w(E,k),xs){L=0;do{if(xs=!1,Qa=0,25<=L)throw Error(o(301));L+=1,fr=hr=null,h.updateQueue=null,lc.current=Zh,u=w(E,k)}while(xs)}if(lc.current=il,h=hr!==null&&hr.next!==null,Ja=0,fr=hr=Dn=null,Zu=!1,h)throw Error(o(300));return u}function Sa(){var u=Qa!==0;return Qa=0,u}function ns(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?Dn.memoizedState=fr=u:fr=fr.next=u,fr}function rs(){if(hr===null){var u=Dn.alternate;u=u!==null?u.memoizedState:null}else u=hr.next;var h=fr===null?Dn.memoizedState:fr.next;if(h!==null)fr=h,hr=u;else{if(u===null)throw Error(o(310));hr=u,u={memoizedState:hr.memoizedState,baseState:hr.baseState,baseQueue:hr.baseQueue,queue:hr.queue,next:null},fr===null?Dn.memoizedState=fr=u:fr=fr.next=u}return fr}function vs(u,h){return typeof h=="function"?h(u):h}function uc(u){var h=rs(),w=h.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=u;var E=hr,k=E.baseQueue,L=w.pending;if(L!==null){if(k!==null){var Y=k.next;k.next=L.next,L.next=Y}E.baseQueue=k=L,w.pending=null}if(k!==null){L=k.next,E=E.baseState;var ue=Y=null,Te=null,Ve=L;do{var ct=Ve.lane;if((Ja&ct)===ct)Te!==null&&(Te=Te.next={lane:0,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null}),E=Ve.hasEagerState?Ve.eagerState:u(E,Ve.action);else{var zt={lane:ct,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null};Te===null?(ue=Te=zt,Y=E):Te=Te.next=zt,Dn.lanes|=ct,ws|=ct}Ve=Ve.next}while(Ve!==null&&Ve!==L);Te===null?Y=E:Te.next=ue,Vr(E,h.memoizedState)||(mr=!0),h.memoizedState=E,h.baseState=Y,h.baseQueue=Te,w.lastRenderedState=E}if(u=w.interleaved,u!==null){k=u;do L=k.lane,Dn.lanes|=L,ws|=L,k=k.next;while(k!==u)}else k===null&&(w.lanes=0);return[h.memoizedState,w.dispatch]}function dc(u){var h=rs(),w=h.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=u;var E=w.dispatch,k=w.pending,L=h.memoizedState;if(k!==null){w.pending=null;var Y=k=k.next;do L=u(L,Y.action),Y=Y.next;while(Y!==k);Vr(L,h.memoizedState)||(mr=!0),h.memoizedState=L,h.baseQueue===null&&(h.baseState=L),w.lastRenderedState=L}return[L,E]}function Hh(){}function Wh(u,h){var w=Dn,E=rs(),k=h(),L=!Vr(E.memoizedState,k);if(L&&(E.memoizedState=k,mr=!0),E=E.queue,tl(Fs.bind(null,w,E,u),[u]),E.getSnapshot!==h||L||fr!==null&&fr.memoizedState.tag&1){if(w.flags|=2048,fc(9,Xh.bind(null,w,E,k,h),void 0,null),Gn===null)throw Error(o(349));(Ja&30)!==0||Gh(w,h,k)}return k}function Gh(u,h,w){u.flags|=16384,u={getSnapshot:h,value:w},h=Dn.updateQueue,h===null?(h={lastEffect:null,stores:null},Dn.updateQueue=h,h.stores=[u]):(w=h.stores,w===null?h.stores=[u]:w.push(u))}function Xh(u,h,w,E){h.value=w,h.getSnapshot=E,Ju(h)&&Ur(u,1,-1)}function Fs(u,h,w){return w(function(){Ju(h)&&Ur(u,1,-1)})}function Ju(u){var h=u.getSnapshot;u=u.value;try{var w=h();return!Vr(u,w)}catch{return!0}}function hc(u){var h=ns();return typeof u=="function"&&(u=u()),h.memoizedState=h.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:u},h.queue=u,u=u.dispatch=ky.bind(null,Dn,u),[h.memoizedState,u]}function fc(u,h,w,E){return u={tag:u,create:h,destroy:w,deps:E,next:null},h=Dn.updateQueue,h===null?(h={lastEffect:null,stores:null},Dn.updateQueue=h,h.lastEffect=u.next=u):(w=h.lastEffect,w===null?h.lastEffect=u.next=u:(E=w.next,w.next=u,u.next=E,h.lastEffect=u)),u}function mm(){return rs().memoizedState}function ba(u,h,w,E){var k=ns();Dn.flags|=u,k.memoizedState=fc(1|h,w,void 0,E===void 0?null:E)}function Qu(u,h,w,E){var k=rs();E=E===void 0?null:E;var L=void 0;if(hr!==null){var Y=hr.memoizedState;if(L=Y.destroy,E!==null&&Ku(E,Y.deps)){k.memoizedState=fc(h,w,L,E);return}}Dn.flags|=u,k.memoizedState=fc(1|h,w,L,E)}function ed(u,h){return ba(8390656,8,u,h)}function tl(u,h){return Qu(2048,8,u,h)}function bn(u,h){return Qu(4,2,u,h)}function td(u,h){return Qu(4,4,u,h)}function pc(u,h){if(typeof h=="function")return u=u(),h(u),function(){h(null)};if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function nl(u,h,w){return w=w!=null?w.concat([u]):null,Qu(4,4,pc.bind(null,h,u),w)}function nd(){}function rd(u,h){var w=rs();h=h===void 0?null:h;var E=w.memoizedState;return E!==null&&h!==null&&Ku(h,E[1])?E[0]:(w.memoizedState=[u,h],u)}function rl(u,h){var w=rs();h=h===void 0?null:h;var E=w.memoizedState;return E!==null&&h!==null&&Ku(h,E[1])?E[0]:(u=u(),w.memoizedState=[u,h],u)}function id(u,h){var w=qt;qt=w!==0&&4>w?w:4,u(!0);var E=yi.transition;yi.transition={};try{u(!1),h()}finally{qt=w,yi.transition=E}}function eo(){return rs().memoizedState}function gm(u,h,w){var E=os(u);w={lane:E,action:w,hasEagerState:!1,eagerState:null,next:null},ym(u)?$h(h,w):(mc(u,h,w),w=on(),u=Ur(u,E,w),u!==null&&gc(u,h,E))}function ky(u,h,w){var E=os(u),k={lane:E,action:w,hasEagerState:!1,eagerState:null,next:null};if(ym(u))$h(h,k);else{mc(u,h,k);var L=u.alternate;if(u.lanes===0&&(L===null||L.lanes===0)&&(L=h.lastRenderedReducer,L!==null))try{var Y=h.lastRenderedState,ue=L(Y,w);if(k.hasEagerState=!0,k.eagerState=ue,Vr(ue,Y))return}catch{}finally{}w=on(),u=Ur(u,E,w),u!==null&&gc(u,h,E)}}function ym(u){var h=u.alternate;return u===Dn||h!==null&&h===Dn}function $h(u,h){xs=Zu=!0;var w=u.pending;w===null?h.next=h:(h.next=w.next,w.next=h),u.pending=h}function mc(u,h,w){Gn!==null&&(u.mode&1)!==0&&(Ht&2)===0?(u=h.interleaved,u===null?(w.next=w,Oi===null?Oi=[h]:Oi.push(h)):(w.next=u.next,u.next=w),h.interleaved=w):(u=h.pending,u===null?w.next=w:(w.next=u.next,u.next=w),h.pending=w)}function gc(u,h,w){if((w&4194240)!==0){var E=h.lanes;E&=u.pendingLanes,w|=E,h.lanes=w,gs(u,w)}}var il={readContext:ei,useCallback:pr,useContext:pr,useEffect:pr,useImperativeHandle:pr,useInsertionEffect:pr,useLayoutEffect:pr,useMemo:pr,useReducer:pr,useRef:pr,useState:pr,useDebugValue:pr,useDeferredValue:pr,useTransition:pr,useMutableSource:pr,useSyncExternalStore:pr,useId:pr,unstable_isNewReconciler:!1},qh={readContext:ei,useCallback:function(u,h){return ns().memoizedState=[u,h===void 0?null:h],u},useContext:ei,useEffect:ed,useImperativeHandle:function(u,h,w){return w=w!=null?w.concat([u]):null,ba(4194308,4,pc.bind(null,h,u),w)},useLayoutEffect:function(u,h){return ba(4194308,4,u,h)},useInsertionEffect:function(u,h){return ba(4,2,u,h)},useMemo:function(u,h){var w=ns();return h=h===void 0?null:h,u=u(),w.memoizedState=[u,h],u},useReducer:function(u,h,w){var E=ns();return h=w!==void 0?w(h):h,E.memoizedState=E.baseState=h,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:h},E.queue=u,u=u.dispatch=gm.bind(null,Dn,u),[E.memoizedState,u]},useRef:function(u){var h=ns();return u={current:u},h.memoizedState=u},useState:hc,useDebugValue:nd,useDeferredValue:function(u){var h=hc(u),w=h[0],E=h[1];return ed(function(){var k=yi.transition;yi.transition={};try{E(u)}finally{yi.transition=k}},[u]),w},useTransition:function(){var u=hc(!1),h=u[0];return u=id.bind(null,u[1]),ns().memoizedState=u,[h,u]},useMutableSource:function(){},useSyncExternalStore:function(u,h,w){var E=Dn,k=ns();if(Nn){if(w===void 0)throw Error(o(407));w=w()}else{if(w=h(),Gn===null)throw Error(o(349));(Ja&30)!==0||Gh(E,h,w)}k.memoizedState=w;var L={value:w,getSnapshot:h};return k.queue=L,ed(Fs.bind(null,E,L,u),[u]),E.flags|=2048,fc(9,Xh.bind(null,E,L,w,h),void 0,null),w},useId:function(){var u=ns(),h=Gn.identifierPrefix;if(Nn){var w=Us,E=Ds;w=(E&~(1<<32-Jr(E)-1)).toString(32)+w,h=":"+h+"R"+w,w=Qa++,0<w&&(h+="H"+w.toString(32)),h+=":"}else w=cc++,h=":"+h+"r"+w.toString(32)+":";return u.memoizedState=h},unstable_isNewReconciler:!1},Yh={readContext:ei,useCallback:rd,useContext:ei,useEffect:tl,useImperativeHandle:nl,useInsertionEffect:bn,useLayoutEffect:td,useMemo:rl,useReducer:uc,useRef:mm,useState:function(){return uc(vs)},useDebugValue:nd,useDeferredValue:function(u){var h=uc(vs),w=h[0],E=h[1];return tl(function(){var k=yi.transition;yi.transition={};try{E(u)}finally{yi.transition=k}},[u]),w},useTransition:function(){var u=uc(vs)[0],h=rs().memoizedState;return[u,h]},useMutableSource:Hh,useSyncExternalStore:Wh,useId:eo,unstable_isNewReconciler:!1},Zh={readContext:ei,useCallback:rd,useContext:ei,useEffect:tl,useImperativeHandle:nl,useInsertionEffect:bn,useLayoutEffect:td,useMemo:rl,useReducer:dc,useRef:mm,useState:function(){return dc(vs)},useDebugValue:nd,useDeferredValue:function(u){var h=dc(vs),w=h[0],E=h[1];return tl(function(){var k=yi.transition;yi.transition={};try{E(u)}finally{yi.transition=k}},[u]),w},useTransition:function(){var u=dc(vs)[0],h=rs().memoizedState;return[u,h]},useMutableSource:Hh,useSyncExternalStore:Wh,useId:eo,unstable_isNewReconciler:!1};function Kh(u,h){try{var w="",E=h;do w+=Lh(E),E=E.return;while(E);var k=w}catch(L){k=`
Error generating stack: `+L.message+`
`+L.stack}return{value:u,source:h,stack:k}}function sd(u,h){try{console.error(h.value)}catch(w){setTimeout(function(){throw w})}}var Ry=typeof WeakMap=="function"?WeakMap:Map;function xm(u,h,w){w=Is(-1,w),w.tag=3,w.payload={element:null};var E=h.value;return w.callback=function(){ul||(ul=!0,Cn=E),sd(u,h)},w}function ad(u,h,w){w=Is(-1,w),w.tag=3;var E=u.type.getDerivedStateFromError;if(typeof E=="function"){var k=h.value;w.payload=function(){return E(k)},w.callback=function(){sd(u,h)}}var L=u.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(w.callback=function(){sd(u,h),typeof E!="function"&&(as===null?as=new Set([this]):as.add(this));var Y=h.stack;this.componentDidCatch(h.value,{componentStack:Y!==null?Y:""})}),w}function zs(u,h,w){var E=u.pingCache;if(E===null){E=u.pingCache=new Ry;var k=new Set;E.set(h,k)}else k=E.get(h),k===void 0&&(k=new Set,E.set(h,k));k.has(w)||(k.add(w),u=gf.bind(null,u,h,w),h.then(u,u))}function Jh(u){do{var h;if((h=u.tag===13)&&(h=u.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return u;u=u.return}while(u!==null);return null}function to(u,h,w,E,k){return(u.mode&1)===0?(u===h?u.flags|=65536:(u.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(h=Is(-1,1),h.tag=2,xa(w,h))),w.lanes|=1),u):(u.flags|=65536,u.lanes=k,u)}function ir(u){u.flags|=4}function sl(u,h){if(u!==null&&u.child===h.child)return!0;if((h.flags&16)!==0)return!1;for(u=h.child;u!==null;){if((u.flags&12854)!==0||(u.subtreeFlags&12854)!==0)return!1;u=u.sibling}return!0}var xi,no,od,ld;if(lt)xi=function(u,h){for(var w=h.child;w!==null;){if(w.tag===5||w.tag===6)X(u,w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===h)break;for(;w.sibling===null;){if(w.return===null||w.return===h)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},no=function(){},od=function(u,h,w,E,k){if(u=u.memoizedProps,u!==E){var L=h.stateNode,Y=ts(ti.current);w=fe(L,w,u,E,k,Y),(h.updateQueue=w)&&ir(h)}},ld=function(u,h,w,E){w!==E&&ir(h)};else if(ne){xi=function(u,h,w,E){for(var k=h.child;k!==null;){if(k.tag===5){var L=k.stateNode;w&&E&&(L=Ln(L,k.type,k.memoizedProps,k)),X(u,L)}else if(k.tag===6)L=k.stateNode,w&&E&&(L=tr(L,k.memoizedProps,k)),X(u,L);else if(k.tag!==4){if(k.tag===22&&k.memoizedState!==null)L=k.child,L!==null&&(L.return=k),xi(u,k,!0,!0);else if(k.child!==null){k.child.return=k,k=k.child;continue}}if(k===h)break;for(;k.sibling===null;){if(k.return===null||k.return===h)return;k=k.return}k.sibling.return=k.return,k=k.sibling}};var Ma=function(u,h,w,E){for(var k=h.child;k!==null;){if(k.tag===5){var L=k.stateNode;w&&E&&(L=Ln(L,k.type,k.memoizedProps,k)),Mt(u,L)}else if(k.tag===6)L=k.stateNode,w&&E&&(L=tr(L,k.memoizedProps,k)),Mt(u,L);else if(k.tag!==4){if(k.tag===22&&k.memoizedState!==null)L=k.child,L!==null&&(L.return=k),Ma(u,k,!0,!0);else if(k.child!==null){k.child.return=k,k=k.child;continue}}if(k===h)break;for(;k.sibling===null;){if(k.return===null||k.return===h)return;k=k.return}k.sibling.return=k.return,k=k.sibling}};no=function(u,h){var w=h.stateNode;if(!sl(u,h)){u=w.containerInfo;var E=Tt(u);Ma(E,h,!1,!1),w.pendingChildren=E,ir(h),fn(u,E)}},od=function(u,h,w,E,k){var L=u.stateNode,Y=u.memoizedProps;if((u=sl(u,h))&&Y===E)h.stateNode=L;else{var ue=h.stateNode,Te=ts(ti.current),Ve=null;Y!==E&&(Ve=fe(ue,w,Y,E,k,Te)),u&&Ve===null?h.stateNode=L:(L=Je(L,Ve,w,Y,E,h,u,ue),ee(L,w,E,k,Te)&&ir(h),h.stateNode=L,u?ir(h):xi(L,h,!1,!1))}},ld=function(u,h,w,E){w!==E?(u=ts(Za.current),w=ts(ti.current),h.stateNode=ke(E,u,w,h),ir(h)):h.stateNode=u.stateNode}}else no=function(){},od=function(){},ld=function(){};function Bs(u,h){if(!Nn)switch(u.tailMode){case"hidden":h=u.tail;for(var w=null;h!==null;)h.alternate!==null&&(w=h),h=h.sibling;w===null?u.tail=null:w.sibling=null;break;case"collapsed":w=u.tail;for(var E=null;w!==null;)w.alternate!==null&&(E=w),w=w.sibling;E===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:E.sibling=null}}function Wn(u){var h=u.alternate!==null&&u.alternate.child===u.child,w=0,E=0;if(h)for(var k=u.child;k!==null;)w|=k.lanes|k.childLanes,E|=k.subtreeFlags&14680064,E|=k.flags&14680064,k.return=u,k=k.sibling;else for(k=u.child;k!==null;)w|=k.lanes|k.childLanes,E|=k.subtreeFlags,E|=k.flags,k.return=u,k=k.sibling;return u.subtreeFlags|=E,u.childLanes=w,h}function cd(u,h,w){var E=h.pendingProps;switch(zh(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wn(h),null;case 1:return Hn(h.type)&&Tn(),Wn(h),null;case 3:return E=h.stateNode,Qo(),vt(Fn),vt($t),Ka(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(u===null||u.child===null)&&(oc(h)?ir(h):u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Bi!==null&&(Nc(Bi),Bi=null))),no(u,h),Wn(h),null;case 5:Vh(h),w=ts(Za.current);var k=h.type;if(u!==null&&h.stateNode!=null)od(u,h,k,E,w),u.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!E){if(h.stateNode===null)throw Error(o(166));return Wn(h),null}if(u=ts(ti.current),oc(h)){if(!ze)throw Error(o(175));u=kh(h.stateNode,h.type,h.memoizedProps,w,u,h,!qo),h.updateQueue=u,u!==null&&ir(h)}else{var L=j(k,E,w,u,h);xi(L,h,!1,!1),h.stateNode=L,ee(L,k,E,w,u)&&ir(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Wn(h),null;case 6:if(u&&h.stateNode!=null)ld(u,h,u.memoizedProps,E);else{if(typeof E!="string"&&h.stateNode===null)throw Error(o(166));if(u=ts(Za.current),w=ts(ti.current),oc(h)){if(!ze)throw Error(o(176));if(u=h.stateNode,E=h.memoizedProps,(w=Rs(u,E,h,!qo))&&(k=Wr,k!==null))switch(L=(k.mode&1)!==0,k.tag){case 3:wt(k.stateNode.containerInfo,u,E,L);break;case 5:At(k.type,k.memoizedProps,k.stateNode,u,E,L)}w&&ir(h)}else h.stateNode=ke(E,u,w,h)}return Wn(h),null;case 13:if(vt(In),E=h.memoizedState,Nn&&br!==null&&(h.mode&1)!==0&&(h.flags&128)===0){for(u=br;u;)u=Qi(u);return Yo(),h.flags|=98560,h}if(E!==null&&E.dehydrated!==null){if(E=oc(h),u===null){if(!E)throw Error(o(318));if(!ze)throw Error(o(344));if(u=h.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));ku(u,h)}else Yo(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;return Wn(h),null}return Bi!==null&&(Nc(Bi),Bi=null),(h.flags&128)!==0?(h.lanes=w,h):(E=E!==null,w=!1,u===null?oc(h):w=u.memoizedState!==null,E&&!w&&(h.child.flags|=8192,(h.mode&1)!==0&&(u===null||(In.current&1)!==0?Bn===0&&(Bn=3):gd())),h.updateQueue!==null&&(h.flags|=4),Wn(h),null);case 4:return Qo(),no(u,h),u===null&&je(h.stateNode.containerInfo),Wn(h),null;case 10:return ac(h.type._context),Wn(h),null;case 17:return Hn(h.type)&&Tn(),Wn(h),null;case 19:if(vt(In),k=h.memoizedState,k===null)return Wn(h),null;if(E=(h.flags&128)!==0,L=k.rendering,L===null)if(E)Bs(k,!1);else{if(Bn!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(L=Yu(u),L!==null){for(h.flags|=128,Bs(k,!1),u=L.updateQueue,u!==null&&(h.updateQueue=u,h.flags|=4),h.subtreeFlags=0,u=w,E=h.child;E!==null;)w=E,k=u,w.flags&=14680066,L=w.alternate,L===null?(w.childLanes=0,w.lanes=k,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=L.childLanes,w.lanes=L.lanes,w.child=L.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=L.memoizedProps,w.memoizedState=L.memoizedState,w.updateQueue=L.updateQueue,w.type=L.type,k=L.dependencies,w.dependencies=k===null?null:{lanes:k.lanes,firstContext:k.firstContext}),E=E.sibling;return ut(In,In.current&1|2),h.child}u=u.sibling}k.tail!==null&&rr()>Aa&&(h.flags|=128,E=!0,Bs(k,!1),h.lanes=4194304)}else{if(!E)if(u=Yu(L),u!==null){if(h.flags|=128,E=!0,u=u.updateQueue,u!==null&&(h.updateQueue=u,h.flags|=4),Bs(k,!0),k.tail===null&&k.tailMode==="hidden"&&!L.alternate&&!Nn)return Wn(h),null}else 2*rr()-k.renderingStartTime>Aa&&w!==1073741824&&(h.flags|=128,E=!0,Bs(k,!1),h.lanes=4194304);k.isBackwards?(L.sibling=h.child,h.child=L):(u=k.last,u!==null?u.sibling=L:h.child=L,k.last=L)}return k.tail!==null?(h=k.tail,k.rendering=h,k.tail=h.sibling,k.renderingStartTime=rr(),h.sibling=null,u=In.current,ut(In,E?u&1|2:u&1),h):(Wn(h),null);case 22:case 23:return kc(),E=h.memoizedState!==null,u!==null&&u.memoizedState!==null!==E&&(h.flags|=8192),E&&(h.mode&1)!==0?(Dr&1073741824)!==0&&(Wn(h),lt&&h.subtreeFlags&6&&(h.flags|=8192)):Wn(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var Qh=l.ReactCurrentOwner,mr=!1;function zn(u,h,w,E){h.child=u===null?fm(h,null,w,E):Os(h,u.child,w,E)}function Mn(u,h,w,E,k){w=w.render;var L=h.ref;return Go(h,k),E=el(u,h,w,E,L,k),w=Sa(),u!==null&&!mr?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~k,ni(u,h,k)):(Nn&&w&&Fh(h),h.flags|=1,zn(u,h,E,k),h.child)}function yn(u,h,w,E,k){if(u===null){var L=w.type;return typeof L=="function"&&!xd(L)&&L.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(h.tag=15,h.type=L,js(u,h,L,E,k)):(u=vd(w.type,null,E,h,h.mode,k),u.ref=h.ref,u.return=h,h.child=u)}if(L=u.child,(u.lanes&k)===0){var Y=L.memoizedProps;if(w=w.compare,w=w!==null?w:es,w(Y,E)&&u.ref===h.ref)return ni(u,h,k)}return h.flags|=1,u=Zs(L,E),u.ref=h.ref,u.return=h,h.child=u}function js(u,h,w,E,k){if(u!==null&&es(u.memoizedProps,E)&&u.ref===h.ref)if(mr=!1,(u.lanes&k)!==0)(u.flags&131072)!==0&&(mr=!0);else return h.lanes=u.lanes,ni(u,h,k);return Vs(u,h,w,E,k)}function Mr(u,h,w){var E=h.pendingProps,k=E.children,L=u!==null?u.memoizedState:null;if(E.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null},ut(ho,Dr),Dr|=w;else if((w&1073741824)!==0)h.memoizedState={baseLanes:0,cachePool:null},E=L!==null?L.baseLanes:w,ut(ho,Dr),Dr|=E;else return u=L!==null?L.baseLanes|w:w,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:u,cachePool:null},h.updateQueue=null,ut(ho,Dr),Dr|=u,null;else L!==null?(E=L.baseLanes|w,h.memoizedState=null):E=w,ut(ho,Dr),Dr|=E;return zn(u,h,k,w),h.child}function Gr(u,h){var w=h.ref;(u===null&&w!==null||u!==null&&u.ref!==w)&&(h.flags|=512,h.flags|=2097152)}function Vs(u,h,w,E,k){var L=Hn(w)?ms:$t.current;return L=jr(h,L),Go(h,k),w=el(u,h,w,E,L,k),E=Sa(),u!==null&&!mr?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~k,ni(u,h,k)):(Nn&&E&&Fh(h),h.flags|=1,zn(u,h,w,k),h.child)}function ro(u,h,w,E,k){if(Hn(w)){var L=!0;Sr(h)}else L=!1;if(Go(h,k),h.stateNode===null)u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),lm(h,w,E),Oh(h,w,E,k),E=!0;else if(u===null){var Y=h.stateNode,ue=h.memoizedProps;Y.props=ue;var Te=Y.context,Ve=w.contextType;typeof Ve=="object"&&Ve!==null?Ve=ei(Ve):(Ve=Hn(w)?ms:$t.current,Ve=jr(h,Ve));var ct=w.getDerivedStateFromProps,zt=typeof ct=="function"||typeof Y.getSnapshotBeforeUpdate=="function";zt||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ue!==E||Te!==Ve)&&cm(h,Y,E,Ve),Fi=!1;var Et=h.memoizedState;Y.state=Et,Vu(h,E,Y,k),Te=h.memoizedState,ue!==E||Et!==Te||Fn.current||Fi?(typeof ct=="function"&&(Dh(h,w,ct,E),Te=h.memoizedState),(ue=Fi||Uh(h,w,ue,E,Et,Te,Ve))?(zt||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(h.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=E,h.memoizedState=Te),Y.props=E,Y.state=Te,Y.context=Ve,E=ue):(typeof Y.componentDidMount=="function"&&(h.flags|=4194308),E=!1)}else{Y=h.stateNode,Ih(u,h),ue=h.memoizedProps,Ve=h.type===h.elementType?ue:Qr(h.type,ue),Y.props=Ve,zt=h.pendingProps,Et=Y.context,Te=w.contextType,typeof Te=="object"&&Te!==null?Te=ei(Te):(Te=Hn(w)?ms:$t.current,Te=jr(h,Te));var Wt=w.getDerivedStateFromProps;(ct=typeof Wt=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ue!==zt||Et!==Te)&&cm(h,Y,E,Te),Fi=!1,Et=h.memoizedState,Y.state=Et,Vu(h,E,Y,k);var tt=h.memoizedState;ue!==zt||Et!==tt||Fn.current||Fi?(typeof Wt=="function"&&(Dh(h,w,Wt,E),tt=h.memoizedState),(Ve=Fi||Uh(h,w,Ve,E,Et,tt,Te)||!1)?(ct||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(E,tt,Te),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(E,tt,Te)),typeof Y.componentDidUpdate=="function"&&(h.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof Y.componentDidUpdate!="function"||ue===u.memoizedProps&&Et===u.memoizedState||(h.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ue===u.memoizedProps&&Et===u.memoizedState||(h.flags|=1024),h.memoizedProps=E,h.memoizedState=tt),Y.props=E,Y.state=tt,Y.context=Te,E=Ve):(typeof Y.componentDidUpdate!="function"||ue===u.memoizedProps&&Et===u.memoizedState||(h.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ue===u.memoizedProps&&Et===u.memoizedState||(h.flags|=1024),E=!1)}return Ir(u,h,w,E,L,k)}function Ir(u,h,w,E,k,L){Gr(u,h);var Y=(h.flags&128)!==0;if(!E&&!Y)return k&&ga(h,w,!1),ni(u,h,L);E=h.stateNode,Qh.current=h;var ue=Y&&typeof w.getDerivedStateFromError!="function"?null:E.render();return h.flags|=1,u!==null&&Y?(h.child=Os(h,u.child,null,L),h.child=Os(h,null,ue,L)):zn(u,h,ue,L),h.memoizedState=E.state,k&&ga(h,w,!0),h.child}function yc(u){var h=u.stateNode;h.pendingContext?pi(u,h.pendingContext,h.pendingContext!==h.context):h.context&&pi(u,h.context,!1),qu(u,h.containerInfo)}function ef(u,h,w,E,k){return Yo(),$u(k),h.flags|=256,zn(u,h,w,E),h.child}var xc={dehydrated:null,treeContext:null,retryLane:0};function io(u){return{baseLanes:u,cachePool:null}}function tf(u,h,w){var E=h.pendingProps,k=In.current,L=!1,Y=(h.flags&128)!==0,ue;if((ue=Y)||(ue=u!==null&&u.memoizedState===null?!1:(k&2)!==0),ue?(L=!0,h.flags&=-129):(u===null||u.memoizedState!==null)&&(k|=1),ut(In,k&1),u===null)return _a(h),u=h.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((h.mode&1)===0?h.lanes=1:Ns(u)?h.lanes=8:h.lanes=1073741824,null):(k=E.children,u=E.fallback,L?(E=h.mode,L=h.child,k={mode:"hidden",children:k},(E&1)===0&&L!==null?(L.childLanes=0,L.pendingProps=k):L=Lc(k,E,0,null),u=yo(u,E,w,null),L.return=h,u.return=h,L.sibling=u,h.child=L,h.child.memoizedState=io(w),h.memoizedState=xc,u):is(h,k));if(k=u.memoizedState,k!==null){if(ue=k.dehydrated,ue!==null){if(Y)return h.flags&256?(h.flags&=-257,_c(u,h,w,Error(o(422)))):h.memoizedState!==null?(h.child=u.child,h.flags|=128,null):(L=E.fallback,k=h.mode,E=Lc({mode:"visible",children:E.children},k,0,null),L=yo(L,k,w,null),L.flags|=2,E.return=h,L.return=h,E.sibling=L,h.child=E,(h.mode&1)!==0&&Os(h,u.child,null,w),h.child.memoizedState=io(w),h.memoizedState=xc,L);if((h.mode&1)===0)h=_c(u,h,w,null);else if(Ns(ue))h=_c(u,h,w,Error(o(419)));else if(E=(w&u.childLanes)!==0,mr||E){if(E=Gn,E!==null){switch(w&-w){case 4:L=2;break;case 16:L=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:L=32;break;case 536870912:L=268435456;break;default:L=0}E=(L&(E.suspendedLanes|w))!==0?0:L,E!==0&&E!==k.retryLane&&(k.retryLane=E,Ur(u,E,-1))}gd(),h=_c(u,h,w,Error(o(421)))}else Ql(ue)?(h.flags|=128,h.child=u.child,h=bm.bind(null,u),ks(ue,h),h=null):(w=k.treeContext,ze&&(br=Nu(ue),Wr=h,Nn=!0,Bi=null,qo=!1,w!==null&&(zi[mi++]=Ds,zi[mi++]=Us,zi[mi++]=$a,Ds=w.id,Us=w.overflow,$a=h)),h=is(h,h.pendingProps.children),h.flags|=4096);return h}return L?(E=ud(u,h,E.children,E.fallback,w),L=h.child,k=u.child.memoizedState,L.memoizedState=k===null?io(w):{baseLanes:k.baseLanes|w,cachePool:null},L.childLanes=u.childLanes&~w,h.memoizedState=xc,E):(w=vc(u,h,E.children,w),h.memoizedState=null,w)}return L?(E=ud(u,h,E.children,E.fallback,w),L=h.child,k=u.child.memoizedState,L.memoizedState=k===null?io(w):{baseLanes:k.baseLanes|w,cachePool:null},L.childLanes=u.childLanes&~w,h.memoizedState=xc,E):(w=vc(u,h,E.children,w),h.memoizedState=null,w)}function is(u,h){return h=Lc({mode:"visible",children:h},u.mode,0,null),h.return=u,u.child=h}function vc(u,h,w,E){var k=u.child;return u=k.sibling,w=Zs(k,{mode:"visible",children:w}),(h.mode&1)===0&&(w.lanes=E),w.return=h,w.sibling=null,u!==null&&(E=h.deletions,E===null?(h.deletions=[u],h.flags|=16):E.push(u)),h.child=w}function ud(u,h,w,E,k){var L=h.mode;u=u.child;var Y=u.sibling,ue={mode:"hidden",children:w};return(L&1)===0&&h.child!==u?(w=h.child,w.childLanes=0,w.pendingProps=ue,h.deletions=null):(w=Zs(u,ue),w.subtreeFlags=u.subtreeFlags&14680064),Y!==null?E=Zs(Y,E):(E=yo(E,L,k,null),E.flags|=2),E.return=h,w.return=h,w.sibling=E,h.child=w,E}function _c(u,h,w,E){return E!==null&&$u(E),Os(h,u.child,null,w),u=is(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function vm(u,h,w){u.lanes|=h;var E=u.alternate;E!==null&&(E.lanes|=h),Xa(u.return,h,w)}function _s(u,h,w,E,k){var L=u.memoizedState;L===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:E,tail:w,tailMode:k}:(L.isBackwards=h,L.rendering=null,L.renderingStartTime=0,L.last=E,L.tail=w,L.tailMode=k)}function so(u,h,w){var E=h.pendingProps,k=E.revealOrder,L=E.tail;if(zn(u,h,E.children,w),E=In.current,(E&2)!==0)E=E&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&vm(u,w,h);else if(u.tag===19)vm(u,w,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}E&=1}if(ut(In,E),(h.mode&1)===0)h.memoizedState=null;else switch(k){case"forwards":for(w=h.child,k=null;w!==null;)u=w.alternate,u!==null&&Yu(u)===null&&(k=w),w=w.sibling;w=k,w===null?(k=h.child,h.child=null):(k=w.sibling,w.sibling=null),_s(h,!1,k,w,L);break;case"backwards":for(w=null,k=h.child,h.child=null;k!==null;){if(u=k.alternate,u!==null&&Yu(u)===null){h.child=k;break}u=k.sibling,k.sibling=w,w=k,k=u}_s(h,!0,w,null,L);break;case"together":_s(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function ni(u,h,w){if(u!==null&&(h.dependencies=u.dependencies),ws|=h.lanes,(w&h.childLanes)===0)return null;if(u!==null&&h.child!==u.child)throw Error(o(153));if(h.child!==null){for(u=h.child,w=Zs(u,u.pendingProps),h.child=w,w.return=h;u.sibling!==null;)u=u.sibling,w=w.sibling=Zs(u,u.pendingProps),w.return=h;w.sibling=null}return h.child}function dd(u,h,w){switch(h.tag){case 3:yc(h),Yo();break;case 5:pm(h);break;case 1:Hn(h.type)&&Sr(h);break;case 4:qu(h,h.stateNode.containerInfo);break;case 10:Ga(h,h.type._context,h.memoizedProps.value);break;case 13:var E=h.memoizedState;if(E!==null)return E.dehydrated!==null?(ut(In,In.current&1),h.flags|=128,null):(w&h.child.childLanes)!==0?tf(u,h,w):(ut(In,In.current&1),u=ni(u,h,w),u!==null?u.sibling:null);ut(In,In.current&1);break;case 19:if(E=(w&h.childLanes)!==0,(u.flags&128)!==0){if(E)return so(u,h,w);h.flags|=128}var k=h.memoizedState;if(k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),ut(In,In.current),E)break;return null;case 22:case 23:return h.lanes=0,Mr(u,h,w)}return ni(u,h,w)}function hd(u,h){switch(zh(h),h.tag){case 1:return Hn(h.type)&&Tn(),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return Qo(),vt(Fn),vt($t),Ka(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 5:return Vh(h),null;case 13:if(vt(In),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(o(340));Yo()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return vt(In),null;case 4:return Qo(),null;case 10:return ac(h.type._context),null;case 22:case 23:return kc(),null;case 24:return null;default:return null}}var Xr=!1,gr=!1,ao=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function ji(u,h){var w=u.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(E){qr(u,h,E)}else w.current=null}function Hs(u,h,w){try{w()}catch(E){qr(u,h,E)}}var nf=!1;function rf(u,h){for(re(u.containerInfo),Ge=h;Ge!==null;)if(u=Ge,h=u.child,(u.subtreeFlags&1028)!==0&&h!==null)h.return=u,Ge=h;else for(;Ge!==null;){u=Ge;try{var w=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var E=w.memoizedProps,k=w.memoizedState,L=u.stateNode,Y=L.getSnapshotBeforeUpdate(u.elementType===u.type?E:Qr(u.type,E),k);L.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:lt&&$e(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ue){qr(u,u.return,ue)}if(h=u.sibling,h!==null){h.return=u.return,Ge=h;break}Ge=u.return}return w=nf,nf=!1,w}function Ws(u,h,w){var E=h.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var k=E=E.next;do{if((k.tag&u)===u){var L=k.destroy;k.destroy=void 0,L!==void 0&&Hs(h,w,L)}k=k.next}while(k!==E)}}function Er(u,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var w=h=h.next;do{if((w.tag&u)===u){var E=w.create;w.destroy=E()}w=w.next}while(w!==h)}}function $r(u){var h=u.ref;if(h!==null){var w=u.stateNode;switch(u.tag){case 5:u=Q(w);break;default:u=w}typeof h=="function"?h(u):h.current=u}}function An(u,h,w){if(ys&&typeof ys.onCommitFiberUnmount=="function")try{ys.onCommitFiberUnmount(nc,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(u=h.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var E=u=u.next;do{var k=E,L=k.destroy;k=k.tag,L!==void 0&&((k&2)!==0||(k&4)!==0)&&Hs(h,w,L),E=E.next}while(E!==u)}break;case 1:if(ji(h,w),u=h.stateNode,typeof u.componentWillUnmount=="function")try{u.props=h.memoizedProps,u.state=h.memoizedState,u.componentWillUnmount()}catch(Y){qr(h,w,Y)}break;case 5:ji(h,w);break;case 4:lt?of(u,h,w):ne&&ne&&(h=h.stateNode.containerInfo,w=Tt(h),un(h,w))}}function Vi(u,h,w){for(var E=h;;)if(An(u,E,w),E.child===null||lt&&E.tag===4){if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function sf(u){var h=u.alternate;h!==null&&(u.alternate=null,sf(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&xt(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function af(u){return u.tag===5||u.tag===3||u.tag===4}function fd(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||af(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function pd(u){if(lt){e:{for(var h=u.return;h!==null;){if(af(h))break e;h=h.return}throw Error(o(160))}var w=h;switch(w.tag){case 5:h=w.stateNode,w.flags&32&&(tn(h),w.flags&=-33),w=fd(u),al(u,w,h);break;case 3:case 4:h=w.stateNode.containerInfo,w=fd(u),md(u,w,h);break;default:throw Error(o(161))}}}function md(u,h,w){var E=u.tag;if(E===5||E===6)u=u.stateNode,h?bt(w,u,h):Ot(w,u);else if(E!==4&&(u=u.child,u!==null))for(md(u,h,w),u=u.sibling;u!==null;)md(u,h,w),u=u.sibling}function al(u,h,w){var E=u.tag;if(E===5||E===6)u=u.stateNode,h?Pt(w,u,h):St(w,u);else if(E!==4&&(u=u.child,u!==null))for(al(u,h,w),u=u.sibling;u!==null;)al(u,h,w),u=u.sibling}function of(u,h,w){for(var E=h,k=!1,L,Y;;){if(!k){k=E.return;e:for(;;){if(k===null)throw Error(o(160));switch(L=k.stateNode,k.tag){case 5:Y=!1;break e;case 3:L=L.containerInfo,Y=!0;break e;case 4:L=L.containerInfo,Y=!0;break e}k=k.return}k=!0}if(E.tag===5||E.tag===6)Vi(u,E,w),Y?Ft(L,E.stateNode):ht(L,E.stateNode);else if(E.tag===18)Y?_e(L,E.stateNode):be(L,E.stateNode);else if(E.tag===4){if(E.child!==null){L=E.stateNode.containerInfo,Y=!0,E.child.return=E,E=E.child;continue}}else if(An(u,E,w),E.child!==null){E.child.return=E,E=E.child;continue}if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return,E.tag===4&&(k=!1)}E.sibling.return=E.return,E=E.sibling}}function Ea(u,h){if(lt){switch(h.tag){case 0:case 11:case 14:case 15:Ws(3,h,h.return),Er(3,h),Ws(5,h,h.return);return;case 1:return;case 5:var w=h.stateNode;if(w!=null){var E=h.memoizedProps;u=u!==null?u.memoizedProps:E;var k=h.type,L=h.updateQueue;h.updateQueue=null,L!==null&&Xt(w,L,k,u,E,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));w=h.memoizedProps,Ie(h.stateNode,u!==null?u.memoizedProps:w,w);return;case 3:ze&&u!==null&&u.memoizedState.isDehydrated&&ge(h.stateNode.containerInfo);return;case 12:return;case 13:ol(h);return;case 19:ol(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:Ws(3,h,h.return),Er(3,h),Ws(5,h,h.return);return;case 12:return;case 13:ol(h);return;case 19:ol(h);return;case 3:ze&&u!==null&&u.memoizedState.isDehydrated&&ge(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(ne){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,un(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function ol(u){var h=u.updateQueue;if(h!==null){u.updateQueue=null;var w=u.stateNode;w===null&&(w=u.stateNode=new ao),h.forEach(function(E){var k=Mm.bind(null,u,E);w.has(E)||(w.add(E),E.then(k,k))})}}function Py(u,h){for(Ge=h;Ge!==null;){h=Ge;var w=h.deletions;if(w!==null)for(var E=0;E<w.length;E++){var k=w[E];try{var L=u;lt?of(L,k,h):Vi(L,k,h);var Y=k.alternate;Y!==null&&(Y.return=null),k.return=null}catch(gt){qr(k,h,gt)}}if(w=h.child,(h.subtreeFlags&12854)!==0&&w!==null)w.return=h,Ge=w;else for(;Ge!==null;){h=Ge;try{var ue=h.flags;if(ue&32&&lt&&tn(h.stateNode),ue&512){var Te=h.alternate;if(Te!==null){var Ve=Te.ref;Ve!==null&&(typeof Ve=="function"?Ve(null):Ve.current=null)}}if(ue&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var ct=h.alternate;(ct===null||ct.memoizedState===null)&&(Ac=rr())}break;case 22:var zt=h.memoizedState!==null,Et=h.alternate,Wt=Et!==null&&Et.memoizedState!==null;if(w=h,lt){e:if(E=w,k=zt,L=null,lt)for(var tt=E;;){if(tt.tag===5){if(L===null){L=tt;var Cr=tt.stateNode;k?_n(Cr):We(tt.stateNode,tt.memoizedProps)}}else if(tt.tag===6){if(L===null){var bi=tt.stateNode;k?jt(bi):ae(bi,tt.memoizedProps)}}else if((tt.tag!==22&&tt.tag!==23||tt.memoizedState===null||tt===E)&&tt.child!==null){tt.child.return=tt,tt=tt.child;continue}if(tt===E)break;for(;tt.sibling===null;){if(tt.return===null||tt.return===E)break e;L===tt&&(L=null),tt=tt.return}L===tt&&(L=null),tt.sibling.return=tt.return,tt=tt.sibling}}if(zt&&!Wt&&(w.mode&1)!==0){Ge=w;for(var ve=w.child;ve!==null;){for(w=Ge=ve;Ge!==null;){E=Ge;var he=E.child;switch(E.tag){case 0:case 11:case 14:case 15:Ws(4,E,E.return);break;case 1:ji(E,E.return);var Me=E.stateNode;if(typeof Me.componentWillUnmount=="function"){var Qe=E.return;try{Me.props=E.memoizedProps,Me.state=E.memoizedState,Me.componentWillUnmount()}catch(gt){qr(E,Qe,gt)}}break;case 5:ji(E,E.return);break;case 22:if(E.memoizedState!==null){cf(w);continue}}he!==null?(he.return=E,Ge=he):cf(w)}ve=ve.sibling}}}switch(ue&4102){case 2:pd(h),h.flags&=-3;break;case 6:pd(h),h.flags&=-3,Ea(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,Ea(h.alternate,h);break;case 4:Ea(h.alternate,h)}}catch(gt){qr(h,h.return,gt)}if(w=h.sibling,w!==null){w.return=h.return,Ge=w;break}Ge=h.return}}}function wc(u,h,w){Ge=u,Sc(u)}function Sc(u,h,w){for(var E=(u.mode&1)!==0;Ge!==null;){var k=Ge,L=k.child;if(k.tag===22&&E){var Y=k.memoizedState!==null||Xr;if(!Y){var ue=k.alternate,Te=ue!==null&&ue.memoizedState!==null||gr;ue=Xr;var Ve=gr;if(Xr=Y,(gr=Te)&&!Ve)for(Ge=k;Ge!==null;)Y=Ge,Te=Y.child,Y.tag===22&&Y.memoizedState!==null?oo(k):Te!==null?(Te.return=Y,Ge=Te):oo(k);for(;L!==null;)Ge=L,Sc(L),L=L.sibling;Ge=k,Xr=ue,gr=Ve}lf(u)}else(k.subtreeFlags&8772)!==0&&L!==null?(L.return=k,Ge=L):lf(u)}}function lf(u){for(;Ge!==null;){var h=Ge;if((h.flags&8772)!==0){var w=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:gr||Er(5,h);break;case 1:var E=h.stateNode;if(h.flags&4&&!gr)if(w===null)E.componentDidMount();else{var k=h.elementType===h.type?w.memoizedProps:Qr(h.type,w.memoizedProps);E.componentDidUpdate(k,w.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var L=h.updateQueue;L!==null&&am(h,L,E);break;case 3:var Y=h.updateQueue;if(Y!==null){if(w=null,h.child!==null)switch(h.child.tag){case 5:w=Q(h.child.stateNode);break;case 1:w=h.child.stateNode}am(h,Y,w)}break;case 5:var ue=h.stateNode;w===null&&h.flags&4&&Qt(ue,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(ze&&h.memoizedState===null){var Te=h.alternate;if(Te!==null){var Ve=Te.memoizedState;if(Ve!==null){var ct=Ve.dehydrated;ct!==null&&Se(ct)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}gr||h.flags&512&&$r(h)}catch(zt){qr(h,h.return,zt)}}if(h===u){Ge=null;break}if(w=h.sibling,w!==null){w.return=h.return,Ge=w;break}Ge=h.return}}function cf(u){for(;Ge!==null;){var h=Ge;if(h===u){Ge=null;break}var w=h.sibling;if(w!==null){w.return=h.return,Ge=w;break}Ge=h.return}}function oo(u){for(;Ge!==null;){var h=Ge;try{switch(h.tag){case 0:case 11:case 15:var w=h.return;try{Er(4,h)}catch(Te){qr(h,w,Te)}break;case 1:var E=h.stateNode;if(typeof E.componentDidMount=="function"){var k=h.return;try{E.componentDidMount()}catch(Te){qr(h,k,Te)}}var L=h.return;try{$r(h)}catch(Te){qr(h,L,Te)}break;case 5:var Y=h.return;try{$r(h)}catch(Te){qr(h,Y,Te)}}}catch(Te){qr(h,h.return,Te)}if(h===u){Ge=null;break}var ue=h.sibling;if(ue!==null){ue.return=h.return,Ge=ue;break}Ge=h.return}}var bc=0,lo=1,co=2,Gs=3,ll=4;if(typeof Symbol=="function"&&Symbol.for){var uo=Symbol.for;bc=uo("selector.component"),lo=uo("selector.has_pseudo_class"),co=uo("selector.role"),Gs=uo("selector.test_id"),ll=uo("selector.text")}function Mc(u){var h=Ce(u);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(u=pe(u),u===null)throw Error(o(362));return u.stateNode.current}function Ec(u,h){switch(h.$$typeof){case bc:if(u.type===h.value)return!0;break;case lo:e:{h=h.value,u=[u,0];for(var w=0;w<u.length;){var E=u[w++],k=u[w++],L=h[k];if(E.tag!==5||!Le(E)){for(;L!=null&&Ec(E,L);)k++,L=h[k];if(k===h.length){h=!0;break e}else for(E=E.child;E!==null;)u.push(E,k),E=E.sibling}}h=!1}return h;case co:if(u.tag===5&&pt(u.stateNode,h.value))return!0;break;case ll:if((u.tag===5||u.tag===6)&&(u=Oe(u),u!==null&&0<=u.indexOf(h.value)))return!0;break;case Gs:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Ta(u){switch(u.$$typeof){case bc:return"<"+(z(u.value)||"Unknown")+">";case lo:return":has("+(Ta(u)||"")+")";case co:return'[role="'+u.value+'"]';case ll:return'"'+u.value+'"';case Gs:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function vi(u,h){var w=[];u=[u,0];for(var E=0;E<u.length;){var k=u[E++],L=u[E++],Y=h[L];if(k.tag!==5||!Le(k)){for(;Y!=null&&Ec(k,Y);)L++,Y=h[L];if(L===h.length)w.push(k);else for(k=k.child;k!==null;)u.push(k,L),k=k.sibling}}return w}function Xs(u,h){if(!B)throw Error(o(363));u=Mc(u),u=vi(u,h),h=[],u=Array.from(u);for(var w=0;w<u.length;){var E=u[w++];if(E.tag===5)Le(E)||h.push(E.stateNode);else for(E=E.child;E!==null;)u.push(E),E=E.sibling}return h}var uf=Math.ceil,Tc=l.ReactCurrentDispatcher,ss=l.ReactCurrentOwner,mn=l.ReactCurrentBatchConfig,Ht=0,Gn=null,gn=null,kn=0,Dr=0,ho=Vn(0),Bn=0,cl=null,ws=0,_i=0,fo=0,$s=null,Yn=null,Ac=0,Aa=1/0;function po(){Aa=rr()+500}var ul=!1,Cn=null,as=null,dl=!1,Ss=null,mo=0,go=0,qs=null,En=-1,jn=0;function on(){return(Ht&6)!==0?rr():En!==-1?En:En=rr()}function os(u){return(u.mode&1)===0?1:(Ht&2)!==0&&kn!==0?kn&-kn:sm.transition!==null?(jn===0&&(u=Vo,Vo<<=1,(Vo&4194240)===0&&(Vo=64),jn=u),jn):(u=qt,u!==0?u:Ne())}function Ur(u,h,w){if(50<go)throw go=0,qs=null,Error(o(185));var E=Ca(u,h);return E===null?null:(ja(E,h,w),((Ht&2)===0||E!==Gn)&&(E===Gn&&((Ht&2)===0&&(_i|=h),Bn===4&&Ar(E,kn)),ri(E,w),h===1&&Ht===0&&(u.mode&1)===0&&(po(),Uu&&Ui())),E)}function Ca(u,h){u.lanes|=h;var w=u.alternate;for(w!==null&&(w.lanes|=h),w=u,u=u.return;u!==null;)u.childLanes|=h,w=u.alternate,w!==null&&(w.childLanes|=h),w=u,u=u.return;return w.tag===3?w.stateNode:null}function ri(u,h){var w=u.callbackNode;im(u,h);var E=tc(u,u===Gn?kn:0);if(E===0)w!==null&&Wo(w),u.callbackNode=null,u.callbackPriority=0;else if(h=E&-E,u.callbackPriority!==h){if(w!=null&&Wo(w),h===1)u.tag===0?Fu(wi.bind(null,u)):Ou(wi.bind(null,u)),et?H(function(){Ht===0&&Ui()}):Va(Ha,Ui),w=null;else{switch(Ps(E)){case 1:w=Ha;break;case 4:w=Ny;break;case 16:w=Iu;break;case 536870912:w=Du;break;default:w=Iu}w=yd(w,Tr.bind(null,u))}u.callbackPriority=h,u.callbackNode=w}}function Tr(u,h){if(En=-1,jn=0,(Ht&6)!==0)throw Error(o(327));var w=u.callbackNode;if(bs()&&u.callbackNode!==w)return null;var E=tc(u,u===Gn?kn:0);if(E===0)return null;if((E&30)!==0||(E&u.expiredLanes)!==0||h)h=Rc(u,E);else{h=E;var k=Ht;Ht|=2;var L=ff();(Gn!==u||kn!==h)&&(po(),Ys(u,h));do try{wm();break}catch(ue){hf(u,ue)}while(!0);Hr(),Tc.current=L,Ht=k,gn!==null?h=0:(Gn=null,kn=0,h=Bn)}if(h!==0){if(h===2&&(k=Ru(u),k!==0&&(E=k,h=Cc(u,k))),h===1)throw w=cl,Ys(u,0),Ar(u,E),ri(u,rr()),w;if(h===6)Ar(u,E);else{if(k=u.current.alternate,(E&30)===0&&!df(k)&&(h=Rc(u,E),h===2&&(L=Ru(u),L!==0&&(E=L,h=Cc(u,L))),h===1))throw w=cl,Ys(u,0),Ar(u,E),ri(u,rr()),w;switch(u.finishedWork=k,u.finishedLanes=E,h){case 0:case 1:throw Error(o(345));case 2:ls(u,Yn);break;case 3:if(Ar(u,E),(E&130023424)===E&&(h=Ac+500-rr(),10<h)){if(tc(u,0)!==0)break;if(k=u.suspendedLanes,(k&E)!==E){on(),u.pingedLanes|=u.suspendedLanes&k;break}u.timeoutHandle=Pe(ls.bind(null,u,Yn),h);break}ls(u,Yn);break;case 4:if(Ar(u,E),(E&4194240)===E)break;for(h=u.eventTimes,k=-1;0<E;){var Y=31-Jr(E);L=1<<Y,Y=h[Y],Y>k&&(k=Y),E&=~L}if(E=k,E=rr()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*uf(E/1960))-E,10<E){u.timeoutHandle=Pe(ls.bind(null,u,Yn),E);break}ls(u,Yn);break;case 5:ls(u,Yn);break;default:throw Error(o(329))}}}return ri(u,rr()),u.callbackNode===w?Tr.bind(null,u):null}function Cc(u,h){var w=$s;return u.current.memoizedState.isDehydrated&&(Ys(u,h).flags|=256),u=Rc(u,h),u!==2&&(h=Yn,Yn=w,h!==null&&Nc(h)),u}function Nc(u){Yn===null?Yn=u:Yn.push.apply(Yn,u)}function df(u){for(var h=u;;){if(h.flags&16384){var w=h.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var E=0;E<w.length;E++){var k=w[E],L=k.getSnapshot;k=k.value;try{if(!Vr(L(),k))return!1}catch{return!1}}}if(w=h.child,h.subtreeFlags&16384&&w!==null)w.return=h,h=w;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Ar(u,h){for(h&=~fo,h&=~_i,u.suspendedLanes|=h,u.pingedLanes&=~h,u=u.expirationTimes;0<h;){var w=31-Jr(h),E=1<<w;u[w]=-1,h&=~E}}function wi(u){if((Ht&6)!==0)throw Error(o(327));bs();var h=tc(u,0);if((h&1)===0)return ri(u,rr()),null;var w=Rc(u,h);if(u.tag!==0&&w===2){var E=Ru(u);E!==0&&(h=E,w=Cc(u,E))}if(w===1)throw w=cl,Ys(u,0),Ar(u,h),ri(u,rr()),w;if(w===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=h,ls(u,Yn),ri(u,rr()),null}function hl(u){Ss!==null&&Ss.tag===0&&(Ht&6)===0&&bs();var h=Ht;Ht|=1;var w=mn.transition,E=qt;try{if(mn.transition=null,qt=1,u)return u()}finally{qt=E,mn.transition=w,Ht=h,(Ht&6)===0&&Ui()}}function kc(){Dr=ho.current,vt(ho)}function Ys(u,h){u.finishedWork=null,u.finishedLanes=0;var w=u.timeoutHandle;if(w!==Ke&&(u.timeoutHandle=Ke,Xe(w)),gn!==null)for(w=gn.return;w!==null;){var E=w;switch(zh(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&Tn();break;case 3:Qo(),vt(Fn),vt($t),Ka();break;case 5:Vh(E);break;case 4:Qo();break;case 13:vt(In);break;case 19:vt(In);break;case 10:ac(E.type._context);break;case 22:case 23:kc()}w=w.return}if(Gn=u,gn=u=Zs(u.current,null),kn=Dr=h,Bn=0,cl=null,fo=_i=ws=0,Yn=$s=null,Oi!==null){for(h=0;h<Oi.length;h++)if(w=Oi[h],E=w.interleaved,E!==null){w.interleaved=null;var k=E.next,L=w.pending;if(L!==null){var Y=L.next;L.next=k,E.next=Y}w.pending=E}Oi=null}return u}function hf(u,h){do{var w=gn;try{if(Hr(),lc.current=il,Zu){for(var E=Dn.memoizedState;E!==null;){var k=E.queue;k!==null&&(k.pending=null),E=E.next}Zu=!1}if(Ja=0,fr=hr=Dn=null,xs=!1,Qa=0,ss.current=null,w===null||w.return===null){Bn=1,cl=h,gn=null;break}e:{var L=u,Y=w.return,ue=w,Te=h;if(h=kn,ue.flags|=32768,Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var Ve=Te,ct=ue,zt=ct.tag;if((ct.mode&1)===0&&(zt===0||zt===11||zt===15)){var Et=ct.alternate;Et?(ct.updateQueue=Et.updateQueue,ct.memoizedState=Et.memoizedState,ct.lanes=Et.lanes):(ct.updateQueue=null,ct.memoizedState=null)}var Wt=Jh(Y);if(Wt!==null){Wt.flags&=-257,to(Wt,Y,ue,L,h),Wt.mode&1&&zs(L,Ve,h),h=Wt,Te=Ve;var tt=h.updateQueue;if(tt===null){var Cr=new Set;Cr.add(Te),h.updateQueue=Cr}else tt.add(Te);break e}else{if((h&1)===0){zs(L,Ve,h),gd();break e}Te=Error(o(426))}}else if(Nn&&ue.mode&1){var bi=Jh(Y);if(bi!==null){(bi.flags&65536)===0&&(bi.flags|=256),to(bi,Y,ue,L,h),$u(Te);break e}}L=Te,Bn!==4&&(Bn=2),$s===null?$s=[L]:$s.push(L),Te=Kh(Te,ue),ue=Y;do{switch(ue.tag){case 3:ue.flags|=65536,h&=-h,ue.lanes|=h;var ve=xm(ue,Te,h);ju(ue,ve);break e;case 1:L=Te;var he=ue.type,Me=ue.stateNode;if((ue.flags&128)===0&&(typeof he.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(as===null||!as.has(Me)))){ue.flags|=65536,h&=-h,ue.lanes|=h;var Qe=ad(ue,L,h);ju(ue,Qe);break e}}ue=ue.return}while(ue!==null)}mf(w)}catch(gt){h=gt,gn===w&&w!==null&&(gn=w=w.return);continue}break}while(!0)}function ff(){var u=Tc.current;return Tc.current=il,u===null?il:u}function gd(){(Bn===0||Bn===3||Bn===2)&&(Bn=4),Gn===null||(ws&268435455)===0&&(_i&268435455)===0||Ar(Gn,kn)}function Rc(u,h){var w=Ht;Ht|=2;var E=ff();Gn===u&&kn===h||Ys(u,h);do try{_m();break}catch(k){hf(u,k)}while(!0);if(Hr(),Ht=w,Tc.current=E,gn!==null)throw Error(o(261));return Gn=null,kn=0,Bn}function _m(){for(;gn!==null;)pf(gn)}function wm(){for(;gn!==null&&!ya();)pf(gn)}function pf(u){var h=xf(u.alternate,u,Dr);u.memoizedProps=u.pendingProps,h===null?mf(u):gn=h,ss.current=null}function mf(u){var h=u;do{var w=h.alternate;if(u=h.return,(h.flags&32768)===0){if(w=cd(w,h,Dr),w!==null){gn=w;return}}else{if(w=hd(w,h),w!==null){w.flags&=32767,gn=w;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Bn=6,gn=null;return}}if(h=h.sibling,h!==null){gn=h;return}gn=h=u}while(h!==null);Bn===0&&(Bn=5)}function ls(u,h){var w=qt,E=mn.transition;try{mn.transition=null,qt=1,Sm(u,h,w)}finally{mn.transition=E,qt=w}return null}function Sm(u,h,w){do bs();while(Ss!==null);if((Ht&6)!==0)throw Error(o(327));var E=u.finishedWork,k=u.finishedLanes;if(E===null)return null;if(u.finishedWork=null,u.finishedLanes=0,E===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var L=E.lanes|E.childLanes;if(Lu(u,L),u===Gn&&(gn=Gn=null,kn=0),(E.subtreeFlags&2064)===0&&(E.flags&2064)===0||dl||(dl=!0,yd(Iu,function(){return bs(),null})),L=(E.flags&15990)!==0,(E.subtreeFlags&15990)!==0||L){L=mn.transition,mn.transition=null;var Y=qt;qt=1;var ue=Ht;Ht|=4,ss.current=null,rf(u,E),Py(u,E),te(u.containerInfo),u.current=E,wc(E),Cy(),Ht=ue,qt=Y,mn.transition=L}else u.current=E;if(dl&&(dl=!1,Ss=u,mo=k),L=u.pendingLanes,L===0&&(as=null),rc(E.stateNode),ri(u,rr()),h!==null)for(w=u.onRecoverableError,E=0;E<h.length;E++)w(h[E]);if(ul)throw ul=!1,u=Cn,Cn=null,u;return(mo&1)!==0&&u.tag!==0&&bs(),L=u.pendingLanes,(L&1)!==0?u===qs?go++:(go=0,qs=u):go=0,Ui(),null}function bs(){if(Ss!==null){var u=Ps(mo),h=mn.transition,w=qt;try{if(mn.transition=null,qt=16>u?16:u,Ss===null)var E=!1;else{if(u=Ss,Ss=null,mo=0,(Ht&6)!==0)throw Error(o(331));var k=Ht;for(Ht|=4,Ge=u.current;Ge!==null;){var L=Ge,Y=L.child;if((Ge.flags&16)!==0){var ue=L.deletions;if(ue!==null){for(var Te=0;Te<ue.length;Te++){var Ve=ue[Te];for(Ge=Ve;Ge!==null;){var ct=Ge;switch(ct.tag){case 0:case 11:case 15:Ws(8,ct,L)}var zt=ct.child;if(zt!==null)zt.return=ct,Ge=zt;else for(;Ge!==null;){ct=Ge;var Et=ct.sibling,Wt=ct.return;if(sf(ct),ct===Ve){Ge=null;break}if(Et!==null){Et.return=Wt,Ge=Et;break}Ge=Wt}}}var tt=L.alternate;if(tt!==null){var Cr=tt.child;if(Cr!==null){tt.child=null;do{var bi=Cr.sibling;Cr.sibling=null,Cr=bi}while(Cr!==null)}}Ge=L}}if((L.subtreeFlags&2064)!==0&&Y!==null)Y.return=L,Ge=Y;else e:for(;Ge!==null;){if(L=Ge,(L.flags&2048)!==0)switch(L.tag){case 0:case 11:case 15:Ws(9,L,L.return)}var ve=L.sibling;if(ve!==null){ve.return=L.return,Ge=ve;break e}Ge=L.return}}var he=u.current;for(Ge=he;Ge!==null;){Y=Ge;var Me=Y.child;if((Y.subtreeFlags&2064)!==0&&Me!==null)Me.return=Y,Ge=Me;else e:for(Y=he;Ge!==null;){if(ue=Ge,(ue.flags&2048)!==0)try{switch(ue.tag){case 0:case 11:case 15:Er(9,ue)}}catch(gt){qr(ue,ue.return,gt)}if(ue===Y){Ge=null;break e}var Qe=ue.sibling;if(Qe!==null){Qe.return=ue.return,Ge=Qe;break e}Ge=ue.return}}if(Ht=k,Ui(),ys&&typeof ys.onPostCommitFiberRoot=="function")try{ys.onPostCommitFiberRoot(nc,u)}catch{}E=!0}return E}finally{qt=w,mn.transition=h}}return!1}function Pc(u,h,w){h=Kh(w,h),h=xm(u,h,1),xa(u,h),h=on(),u=Ca(u,1),u!==null&&(ja(u,1,h),ri(u,h))}function qr(u,h,w){if(u.tag===3)Pc(u,u,w);else for(;h!==null;){if(h.tag===3){Pc(h,u,w);break}else if(h.tag===1){var E=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(as===null||!as.has(E))){u=Kh(w,u),u=ad(h,u,1),xa(h,u),u=on(),h=Ca(h,1),h!==null&&(ja(h,1,u),ri(h,u));break}}h=h.return}}function gf(u,h,w){var E=u.pingCache;E!==null&&E.delete(h),h=on(),u.pingedLanes|=u.suspendedLanes&w,Gn===u&&(kn&w)===w&&(Bn===4||Bn===3&&(kn&130023424)===kn&&500>rr()-Ac?Ys(u,0):fo|=w),ri(u,h)}function yf(u,h){h===0&&((u.mode&1)===0?h=1:(h=an,an<<=1,(an&130023424)===0&&(an=4194304)));var w=on();u=Ca(u,h),u!==null&&(ja(u,h,w),ri(u,w))}function bm(u){var h=u.memoizedState,w=0;h!==null&&(w=h.retryLane),yf(u,w)}function Mm(u,h){var w=0;switch(u.tag){case 13:var E=u.stateNode,k=u.memoizedState;k!==null&&(w=k.retryLane);break;case 19:E=u.stateNode;break;default:throw Error(o(314))}E!==null&&E.delete(h),yf(u,w)}var xf;xf=function(u,h,w){if(u!==null)if(u.memoizedProps!==h.pendingProps||Fn.current)mr=!0;else{if((u.lanes&w)===0&&(h.flags&128)===0)return mr=!1,dd(u,h,w);mr=(u.flags&131072)!==0}else mr=!1,Nn&&(h.flags&1048576)!==0&&um(h,Gu,h.index);switch(h.lanes=0,h.tag){case 2:var E=h.type;u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),u=h.pendingProps;var k=jr(h,$t.current);Go(h,w),k=el(null,h,E,u,k,w);var L=Sa();return h.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Hn(E)?(L=!0,Sr(h)):L=!1,h.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,Xo(h),k.updater=Hu,h.stateNode=k,k._reactInternals=h,Oh(h,E,u,w),h=Ir(null,h,E,!0,L,w)):(h.tag=0,Nn&&L&&Fh(h),zn(null,h,k,w),h=h.child),h;case 16:E=h.elementType;e:{switch(u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),u=h.pendingProps,k=E._init,E=k(E._payload),h.type=E,k=h.tag=Ly(E),u=Qr(E,u),k){case 0:h=Vs(null,h,E,u,w);break e;case 1:h=ro(null,h,E,u,w);break e;case 11:h=Mn(null,h,E,u,w);break e;case 14:h=yn(null,h,E,Qr(E.type,u),w);break e}throw Error(o(306,E,""))}return h;case 0:return E=h.type,k=h.pendingProps,k=h.elementType===E?k:Qr(E,k),Vs(u,h,E,k,w);case 1:return E=h.type,k=h.pendingProps,k=h.elementType===E?k:Qr(E,k),ro(u,h,E,k,w);case 3:e:{if(yc(h),u===null)throw Error(o(387));E=h.pendingProps,L=h.memoizedState,k=L.element,Ih(u,h),Vu(h,E,null,w);var Y=h.memoizedState;if(E=Y.element,ze&&L.isDehydrated)if(L={element:E,isDehydrated:!1,cache:Y.cache,transitions:Y.transitions},h.updateQueue.baseState=L,h.memoizedState=L,h.flags&256){k=Error(o(423)),h=ef(u,h,E,w,k);break e}else if(E!==k){k=Error(o(424)),h=ef(u,h,E,w,k);break e}else for(ze&&(br=Cu(h.stateNode.containerInfo),Wr=h,Nn=!0,Bi=null,qo=!1),w=fm(h,null,E,w),h.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(Yo(),E===k){h=ni(u,h,w);break e}zn(u,h,E,w)}h=h.child}return h;case 5:return pm(h),u===null&&_a(h),E=h.type,k=h.pendingProps,L=u!==null?u.memoizedProps:null,Y=k.children,Ae(E,k)?Y=null:L!==null&&Ae(E,L)&&(h.flags|=32),Gr(u,h),zn(u,h,Y,w),h.child;case 6:return u===null&&_a(h),null;case 13:return tf(u,h,w);case 4:return qu(h,h.stateNode.containerInfo),E=h.pendingProps,u===null?h.child=Os(h,null,E,w):zn(u,h,E,w),h.child;case 11:return E=h.type,k=h.pendingProps,k=h.elementType===E?k:Qr(E,k),Mn(u,h,E,k,w);case 7:return zn(u,h,h.pendingProps,w),h.child;case 8:return zn(u,h,h.pendingProps.children,w),h.child;case 12:return zn(u,h,h.pendingProps.children,w),h.child;case 10:e:{if(E=h.type._context,k=h.pendingProps,L=h.memoizedProps,Y=k.value,Ga(h,E,Y),L!==null)if(Vr(L.value,Y)){if(L.children===k.children&&!Fn.current){h=ni(u,h,w);break e}}else for(L=h.child,L!==null&&(L.return=h);L!==null;){var ue=L.dependencies;if(ue!==null){Y=L.child;for(var Te=ue.firstContext;Te!==null;){if(Te.context===E){if(L.tag===1){Te=Is(-1,w&-w),Te.tag=2;var Ve=L.updateQueue;if(Ve!==null){Ve=Ve.shared;var ct=Ve.pending;ct===null?Te.next=Te:(Te.next=ct.next,ct.next=Te),Ve.pending=Te}}L.lanes|=w,Te=L.alternate,Te!==null&&(Te.lanes|=w),Xa(L.return,w,h),ue.lanes|=w;break}Te=Te.next}}else if(L.tag===10)Y=L.type===h.type?null:L.child;else if(L.tag===18){if(Y=L.return,Y===null)throw Error(o(341));Y.lanes|=w,ue=Y.alternate,ue!==null&&(ue.lanes|=w),Xa(Y,w,h),Y=L.sibling}else Y=L.child;if(Y!==null)Y.return=L;else for(Y=L;Y!==null;){if(Y===h){Y=null;break}if(L=Y.sibling,L!==null){L.return=Y.return,Y=L;break}Y=Y.return}L=Y}zn(u,h,k.children,w),h=h.child}return h;case 9:return k=h.type,E=h.pendingProps.children,Go(h,w),k=ei(k),E=E(k),h.flags|=1,zn(u,h,E,w),h.child;case 14:return E=h.type,k=Qr(E,h.pendingProps),k=Qr(E.type,k),yn(u,h,E,k,w);case 15:return js(u,h,h.type,h.pendingProps,w);case 17:return E=h.type,k=h.pendingProps,k=h.elementType===E?k:Qr(E,k),u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,Hn(E)?(u=!0,Sr(h)):u=!1,Go(h,w),lm(h,E,k),Oh(h,E,k,w),Ir(null,h,E,!0,u,w);case 19:return so(u,h,w);case 22:return Mr(u,h,w)}throw Error(o(156,h.tag))};function yd(u,h){return Va(u,h)}function Em(u,h,w,E){this.tag=u,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Si(u,h,w,E){return new Em(u,h,w,E)}function xd(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Ly(u){if(typeof u=="function")return xd(u)?1:0;if(u!=null){if(u=u.$$typeof,u===T)return 11;if(u===N)return 14}return 2}function Zs(u,h){var w=u.alternate;return w===null?(w=Si(u.tag,h,u.key,u.mode),w.elementType=u.elementType,w.type=u.type,w.stateNode=u.stateNode,w.alternate=u,u.alternate=w):(w.pendingProps=h,w.type=u.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=u.flags&14680064,w.childLanes=u.childLanes,w.lanes=u.lanes,w.child=u.child,w.memoizedProps=u.memoizedProps,w.memoizedState=u.memoizedState,w.updateQueue=u.updateQueue,h=u.dependencies,w.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},w.sibling=u.sibling,w.index=u.index,w.ref=u.ref,w}function vd(u,h,w,E,k,L){var Y=2;if(E=u,typeof u=="function")xd(u)&&(Y=1);else if(typeof u=="string")Y=5;else e:switch(u){case p:return yo(w.children,k,L,h);case y:Y=8,k|=8;break;case x:return u=Si(12,w,h,k|2),u.elementType=x,u.lanes=L,u;case M:return u=Si(13,w,h,k),u.elementType=M,u.lanes=L,u;case _:return u=Si(19,w,h,k),u.elementType=_,u.lanes=L,u;case R:return Lc(w,k,L,h);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case v:Y=10;break e;case b:Y=9;break e;case T:Y=11;break e;case N:Y=14;break e;case A:Y=16,E=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return h=Si(Y,w,h,k),h.elementType=u,h.type=E,h.lanes=L,h}function yo(u,h,w,E){return u=Si(7,u,E,h),u.lanes=w,u}function Lc(u,h,w,E){return u=Si(22,u,E,h),u.elementType=R,u.lanes=w,u.stateNode={},u}function _d(u,h,w){return u=Si(6,u,null,h),u.lanes=w,u}function wd(u,h,w){return h=Si(4,u.children!==null?u.children:[],u.key,h),h.lanes=w,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function Sd(u,h,w,E,k){this.tag=h,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ke,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pu(0),this.expirationTimes=Pu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pu(0),this.identifierPrefix=E,this.onRecoverableError=k,ze&&(this.mutableSourceEagerHydrationData=null)}function Tm(u,h,w,E,k,L,Y,ue,Te){return u=new Sd(u,h,w,ue,Te),h===1?(h=1,L===!0&&(h|=8)):h=0,L=Si(3,null,null,h),u.current=L,L.stateNode=u,L.memoizedState={element:E,isDehydrated:w,cache:null,transitions:null},Xo(L),u}function Am(u){if(!u)return On;u=u._reactInternals;e:{if(O(u)!==u||u.tag!==1)throw Error(o(170));var h=u;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Hn(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(u.tag===1){var w=u.type;if(Hn(w))return Bo(u,w,h)}return h}function Cm(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=ie(h),u===null?null:u.stateNode}function Hi(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var w=u.retryLane;u.retryLane=w!==0&&w<h?w:h}}function Ic(u,h){Hi(u,h),(u=u.alternate)&&Hi(u,h)}function bd(u){return u=ie(u),u===null?null:u.stateNode}function Nm(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var h=on();Ur(u,134217728,h),Ic(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var h=on(),w=os(u);Ur(u,w,h),Ic(u,w)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var h=u.stateNode;if(h.current.memoizedState.isDehydrated){var w=Ho(h.pendingLanes);w!==0&&(gs(h,w|1),ri(h,rr()),(Ht&6)===0&&(po(),Ui()))}break;case 13:var E=on();hl(function(){return Ur(u,1,E)}),Ic(u,1)}},t.batchedUpdates=function(u,h){var w=Ht;Ht|=1;try{return u(h)}finally{Ht=w,Ht===0&&(po(),Uu&&Ui())}},t.createComponentSelector=function(u){return{$$typeof:bc,value:u}},t.createContainer=function(u,h,w,E,k,L,Y){return Tm(u,h,!1,null,w,E,k,L,Y)},t.createHasPseudoClassSelector=function(u){return{$$typeof:lo,value:u}},t.createHydrationContainer=function(u,h,w,E,k,L,Y,ue,Te){return u=Tm(w,E,!0,u,k,L,Y,ue,Te),u.context=Am(null),w=u.current,E=on(),k=os(w),L=Is(E,k),L.callback=h??null,xa(w,L),u.current.lanes=k,ja(u,k,E),ri(u,E),u},t.createPortal=function(u,h,w){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:E==null?null:""+E,children:u,containerInfo:h,implementation:w}},t.createRoleSelector=function(u){return{$$typeof:co,value:u}},t.createTestNameSelector=function(u){return{$$typeof:Gs,value:u}},t.createTextSelector=function(u){return{$$typeof:ll,value:u}},t.deferredUpdates=function(u){var h=qt,w=mn.transition;try{return mn.transition=null,qt=16,u()}finally{qt=h,mn.transition=w}},t.discreteUpdates=function(u,h,w,E,k){var L=qt,Y=mn.transition;try{return mn.transition=null,qt=1,u(h,w,E,k)}finally{qt=L,mn.transition=Y,Ht===0&&po()}},t.findAllNodes=Xs,t.findBoundingRects=function(u,h){if(!B)throw Error(o(363));h=Xs(u,h),u=[];for(var w=0;w<h.length;w++)u.push(Ue(h[w]));for(h=u.length-1;0<h;h--){w=u[h];for(var E=w.x,k=E+w.width,L=w.y,Y=L+w.height,ue=h-1;0<=ue;ue--)if(h!==ue){var Te=u[ue],Ve=Te.x,ct=Ve+Te.width,zt=Te.y,Et=zt+Te.height;if(E>=Ve&&L>=zt&&k<=ct&&Y<=Et){u.splice(h,1);break}else if(E!==Ve||w.width!==Te.width||Et<L||zt>Y){if(!(L!==zt||w.height!==Te.height||ct<E||Ve>k)){Ve>E&&(Te.width+=Ve-E,Te.x=E),ct<k&&(Te.width=k-Ve),u.splice(h,1);break}}else{zt>L&&(Te.height+=zt-L,Te.y=L),Et<Y&&(Te.height=Y-zt),u.splice(h,1);break}}}return u},t.findHostInstance=Cm,t.findHostInstanceWithNoPortals=function(u){return u=K(u),u=u!==null?Z(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return Cm(u)},t.flushControlled=function(u){var h=Ht;Ht|=1;var w=mn.transition,E=qt;try{mn.transition=null,qt=1,u()}finally{qt=E,mn.transition=w,Ht=h,Ht===0&&(po(),Ui())}},t.flushPassiveEffects=bs,t.flushSync=hl,t.focusWithin=function(u,h){if(!B)throw Error(o(363));for(u=Mc(u),h=vi(u,h),h=Array.from(h),u=0;u<h.length;){var w=h[u++];if(!Le(w)){if(w.tag===5&&Ze(w.stateNode))return!0;for(w=w.child;w!==null;)h.push(w),w=w.sibling}}return!1},t.getCurrentUpdatePriority=function(){return qt},t.getFindAllNodesFailureDescription=function(u,h){if(!B)throw Error(o(363));var w=0,E=[];u=[Mc(u),0];for(var k=0;k<u.length;){var L=u[k++],Y=u[k++],ue=h[Y];if((L.tag!==5||!Le(L))&&(Ec(L,ue)&&(E.push(Ta(ue)),Y++,Y>w&&(w=Y)),Y<h.length))for(L=L.child;L!==null;)u.push(L,Y),L=L.sibling}if(w<h.length){for(u=[];w<h.length;w++)u.push(Ta(h[w]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return Q(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:bd,findFiberByHostInstance:u.findFiberByHostInstance||Nm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)u=!0;else{try{nc=h.inject(u),ys=h}catch{}u=!!h.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,h,w,E){if(!B)throw Error(o(363));u=Xs(u,h);var k=it(u,w,E).disconnect;return{disconnect:function(){k()}}},t.registerMutableSourceForHydration=function(u,h){var w=h._getVersion;w=w(h._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[h,w]:u.mutableSourceEagerHydrationData.push(h,w)},t.runWithPriority=function(u,h){var w=qt;try{return qt=u,h()}finally{qt=w}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,h,w,E){var k=h.current,L=on(),Y=os(k);return w=Am(w),h.context===null?h.context=w:h.pendingContext=w,h=Is(L,Y),h.payload={element:u},E=E===void 0?null:E,E!==null&&(h.callback=E),xa(k,h),u=Ur(k,Y,L),u!==null&&Bu(u,k,Y),Y},t}),mv}var iE;function rH(){return iE||(iE=1,hv.exports=nH()),hv.exports}var iH=rH();const sH=ME(iH);var sE=sN();const ow={},aH=n=>void Object.assign(ow,n);function oH(n,e){function t(p,{args:y=[],attach:x,...v},b){let T=`${p[0].toUpperCase()}${p.slice(1)}`,M;if(p==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const _=v.object;M=Kd(_,{type:p,root:b,attach:x,primitive:!0})}else{const _=ow[T];if(!_)throw new Error(`R3F: ${T} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(y))throw new Error("R3F: The args prop must be an array!");M=Kd(new _(...y),{type:p,root:b,attach:x,memoizedProps:{args:y}})}return M.__r3f.attach===void 0&&(M.isBufferGeometry?M.__r3f.attach="geometry":M.isMaterial&&(M.__r3f.attach="material")),T!=="inject"&&xv(M,v),M}function r(p,y){let x=!1;if(y){var v,b;(v=y.__r3f)!=null&&v.attach?yv(p,y,y.__r3f.attach):y.isObject3D&&p.isObject3D&&(p.add(y),x=!0),x||(b=p.__r3f)==null||b.objects.push(y),y.__r3f||Kd(y,{}),y.__r3f.parent=p,B1(y),Jd(y)}}function i(p,y,x){let v=!1;if(y){var b,T;if((b=y.__r3f)!=null&&b.attach)yv(p,y,y.__r3f.attach);else if(y.isObject3D&&p.isObject3D){y.parent=p,y.dispatchEvent({type:"added"}),p.dispatchEvent({type:"childadded",child:y});const M=p.children.filter(N=>N!==y),_=M.indexOf(x);p.children=[...M.slice(0,_),y,...M.slice(_)],v=!0}v||(T=p.__r3f)==null||T.objects.push(y),y.__r3f||Kd(y,{}),y.__r3f.parent=p,B1(y),Jd(y)}}function s(p,y,x=!1){p&&[...p].forEach(v=>o(y,v,x))}function o(p,y,x){if(y){var v,b,T;if(y.__r3f&&(y.__r3f.parent=null),(v=p.__r3f)!=null&&v.objects&&(p.__r3f.objects=p.__r3f.objects.filter(R=>R!==y)),(b=y.__r3f)!=null&&b.attach)uE(p,y,y.__r3f.attach);else if(y.isObject3D&&p.isObject3D){var M;p.remove(y),(M=y.__r3f)!=null&&M.root&&pH(d0(y),y)}const N=(T=y.__r3f)==null?void 0:T.primitive,A=!N&&(x===void 0?y.dispose!==null:x);if(!N){var _;s((_=y.__r3f)==null?void 0:_.objects,y,A),s(y.children,y,A)}if(delete y.__r3f,A&&y.dispose&&y.type!=="Scene"){const R=()=>{try{y.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?sE.unstable_scheduleCallback(sE.unstable_IdlePriority,R):R()}Jd(p)}}function l(p,y,x,v){var b;const T=(b=p.__r3f)==null?void 0:b.parent;if(!T)return;const M=t(y,x,p.__r3f.root);if(p.children){for(const _ of p.children)_.__r3f&&r(M,_);p.children=p.children.filter(_=>!_.__r3f)}p.__r3f.objects.forEach(_=>r(M,_)),p.__r3f.objects=[],p.__r3f.autoRemovedBeforeAppend||o(T,p),M.parent&&(M.__r3f.autoRemovedBeforeAppend=!0),r(T,M),M.raycast&&M.__r3f.eventCount&&d0(M).getState().internal.interaction.push(M),[v,v.alternate].forEach(_=>{_!==null&&(_.stateNode=M,_.ref&&(typeof _.ref=="function"?_.ref(M):_.ref.current=M))})}const d=()=>{};return{reconciler:sH({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(p,y)=>{if(!y)return;const x=p.getState().scene;x.__r3f&&(x.__r3f.root=p,r(x,y))},removeChildFromContainer:(p,y)=>{y&&o(p.getState().scene,y)},insertInContainerBefore:(p,y,x)=>{if(!y||!x)return;const v=p.getState().scene;v.__r3f&&i(v,y,x)},getRootHostContext:()=>null,getChildHostContext:p=>p,finalizeInitialChildren(p){var y;return!!((y=p==null?void 0:p.__r3f)!=null?y:{}).handlers},prepareUpdate(p,y,x,v){var b;if(((b=p==null?void 0:p.__r3f)!=null?b:{}).primitive&&v.object&&v.object!==p)return[!0];{const{args:M=[],children:_,...N}=v,{args:A=[],children:R,...D}=x;if(!Array.isArray(M))throw new Error("R3F: the args prop must be an array!");if(M.some((z,W)=>z!==A[W]))return[!0];const U=hN(p,N,D,!0);return U.changes.length?[!1,U]:null}},commitUpdate(p,[y,x],v,b,T,M){y?l(p,v,T,M):xv(p,x)},commitMount(p,y,x,v){var b;const T=(b=p.__r3f)!=null?b:{};p.raycast&&T.handlers&&T.eventCount&&d0(p).getState().internal.interaction.push(p)},getPublicInstance:p=>p,prepareForCommit:()=>null,preparePortalMount:p=>Kd(p.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(p){var y;const{attach:x,parent:v}=(y=p.__r3f)!=null?y:{};x&&v&&uE(v,p,x),p.isObject3D&&(p.visible=!1),Jd(p)},unhideInstance(p,y){var x;const{attach:v,parent:b}=(x=p.__r3f)!=null?x:{};v&&b&&yv(b,p,v),(p.isObject3D&&y.visible==null||y.visible)&&(p.visible=!0),Jd(p)},createTextInstance:d,hideTextInstance:d,unhideTextInstance:d,getCurrentEventPriority:()=>e?e():ch.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Un.fun(performance.now)?performance.now:Un.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Un.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Un.fun(clearTimeout)?clearTimeout:void 0}),applyProps:xv}}var aE,oE;const gv=n=>"colorSpace"in n||"outputColorSpace"in n,aN=()=>{var n;return(n=ow.ColorManagement)!=null?n:null},oN=n=>n&&n.isOrthographicCamera,lH=n=>n&&n.hasOwnProperty("current"),rm=typeof window<"u"&&((aE=window.document)!=null&&aE.createElement||((oE=window.navigator)==null?void 0:oE.product)==="ReactNative")?V.useLayoutEffect:V.useEffect;function lN(n){const e=V.useRef(n);return rm(()=>void(e.current=n),[n]),e}function cH({set:n}){return rm(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class cN extends V.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}cN.getDerivedStateFromError=()=>({error:!0});const uN="__default",lE=new Map,uH=n=>n&&!!n.memoized&&!!n.changes;function dN(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const jf=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function d0(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Un={obj:n=>n===Object(n)&&!Un.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Un.str(n)||Un.num(n)||Un.boo(n))return n===e;const s=Un.obj(n);if(s&&r==="reference")return n===e;const o=Un.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let l;for(l in n)if(!(l in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(l in i?e:n)if(!Un.equ(n[l],e[l],{strict:i,objects:"reference"}))return!1}else for(l in i?e:n)if(n[l]!==e[l])return!1;if(Un.und(l)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function dH(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Kd(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function z1(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const cE=/-\d+$/;function yv(n,e,t){if(Un.str(t)){if(cE.test(t)){const s=t.replace(cE,""),{target:o,key:l}=z1(n,s);Array.isArray(o[l])||(o[l]=[])}const{target:r,key:i}=z1(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function uE(n,e,t){var r,i;if(Un.str(t)){const{target:s,key:o}=z1(n,t),l=e.__r3f.previousAttach;l===void 0?delete s[o]:s[o]=l}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function hN(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:l,...d}={},f=!1){const p=n.__r3f,y=Object.entries(i),x=[];if(f){const b=Object.keys(d);for(let T=0;T<b.length;T++)i.hasOwnProperty(b[T])||y.unshift([b[T],uN+"remove"])}y.forEach(([b,T])=>{var M;if((M=n.__r3f)!=null&&M.primitive&&b==="object"||Un.equ(T,d[b]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(b))return x.push([b,T,!0,[]]);let _=[];b.includes("-")&&(_=b.split("-")),x.push([b,T,!1,_]);for(const N in i){const A=i[N];N.startsWith(`${b}-`)&&x.push([N,A,!1,N.split("-")])}});const v={...i};return p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.args&&(v.args=p.memoizedProps.args),p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.attach&&(v.attach=p.memoizedProps.attach),{memoized:v,changes:x}}function xv(n,e){var t;const r=n.__r3f,i=r==null?void 0:r.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:l}=uH(e)?e:hN(n,e),d=r==null?void 0:r.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let x=0;x<l.length;x++){let[v,b,T,M]=l[x];if(gv(n)){const R="srgb",D="srgb-linear";v==="encoding"?(v="colorSpace",b=b===3001?R:D):v==="outputEncoding"&&(v="outputColorSpace",b=b===3001?R:D)}let _=n,N=_[v];if(M.length&&(N=M.reduce((A,R)=>A[R],n),!(N&&N.set))){const[A,...R]=M.reverse();_=R.reverse().reduce((D,U)=>D[U],n),v=A}if(b===uN+"remove")if(_.constructor){let A=lE.get(_.constructor);A||(A=new _.constructor,lE.set(_.constructor,A)),b=A[v]}else b=0;if(T&&r)b?r.handlers[v]=b:delete r.handlers[v],r.eventCount=Object.keys(r.handlers).length;else if(N&&N.set&&(N.copy||N instanceof pu)){if(Array.isArray(b))N.fromArray?N.fromArray(b):N.set(...b);else if(N.copy&&b&&b.constructor&&N.constructor===b.constructor)N.copy(b);else if(b!==void 0){var f;const A=(f=N)==null?void 0:f.isColor;!A&&N.setScalar?N.setScalar(b):N instanceof pu&&b instanceof pu?N.mask=b.mask:N.set(b),!aN()&&s&&!s.linear&&A&&N.convertSRGBToLinear()}}else{var p;if(_[v]=b,(p=_[v])!=null&&p.isTexture&&_[v].format===Ni&&_[v].type===Ia&&s){const A=_[v];gv(A)&&gv(s.gl)?A.colorSpace=s.gl.outputColorSpace:A.encoding=s.gl.outputEncoding}}Jd(n)}if(r&&r.parent&&n.raycast&&d!==r.eventCount){const x=d0(n).getState().internal,v=x.interaction.indexOf(n);v>-1&&x.interaction.splice(v,1),r.eventCount&&x.interaction.push(n)}return!(l.length===1&&l[0][0]==="onUpdate")&&l.length&&(t=n.__r3f)!=null&&t.parent&&B1(n),n}function Jd(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function B1(n){n.onUpdate==null||n.onUpdate(n)}function hH(n,e){n.manual||(oN(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function $g(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function fH(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return ch.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ch.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ch.ContinuousEventPriority;default:return ch.DefaultEventPriority}}function fN(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function pH(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{fN(t.capturedMap,e,r,i)})}function mH(n){function e(d){const{internal:f}=n.getState(),p=d.offsetX-f.initialClick[0],y=d.offsetY-f.initialClick[1];return Math.round(Math.sqrt(p*p+y*y))}function t(d){return d.filter(f=>["Move","Over","Enter","Out","Leave"].some(p=>{var y;return(y=f.__r3f)==null?void 0:y.handlers["onPointer"+p]}))}function r(d,f){const p=n.getState(),y=new Set,x=[],v=f?f(p.internal.interaction):p.internal.interaction;for(let _=0;_<v.length;_++){const N=jf(v[_]);N&&(N.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(d,p);function b(_){const N=jf(_);if(!N||!N.events.enabled||N.raycaster.camera===null)return[];if(N.raycaster.camera===void 0){var A;N.events.compute==null||N.events.compute(d,N,(A=N.previousRoot)==null?void 0:A.getState()),N.raycaster.camera===void 0&&(N.raycaster.camera=null)}return N.raycaster.camera?N.raycaster.intersectObject(_,!0):[]}let T=v.flatMap(b).sort((_,N)=>{const A=jf(_.object),R=jf(N.object);return!A||!R?_.distance-N.distance:R.events.priority-A.events.priority||_.distance-N.distance}).filter(_=>{const N=$g(_);return y.has(N)?!1:(y.add(N),!0)});p.events.filter&&(T=p.events.filter(T,p));for(const _ of T){let N=_.object;for(;N;){var M;(M=N.__r3f)!=null&&M.eventCount&&x.push({..._,eventObject:N}),N=N.parent}}if("pointerId"in d&&p.internal.capturedMap.has(d.pointerId))for(let _ of p.internal.capturedMap.get(d.pointerId).values())y.has($g(_.intersection))||x.push(_.intersection);return x}function i(d,f,p,y){const x=n.getState();if(d.length){const v={stopped:!1};for(const b of d){const T=jf(b.object)||x,{raycaster:M,pointer:_,camera:N,internal:A}=T,R=new q(_.x,_.y,0).unproject(N),D=I=>{var K,ie;return(K=(ie=A.capturedMap.get(I))==null?void 0:ie.has(b.eventObject))!=null?K:!1},U=I=>{const K={intersection:b,target:f.target};A.capturedMap.has(I)?A.capturedMap.get(I).set(b.eventObject,K):A.capturedMap.set(I,new Map([[b.eventObject,K]])),f.target.setPointerCapture(I)},z=I=>{const K=A.capturedMap.get(I);K&&fN(A.capturedMap,b.eventObject,K,I)};let W={};for(let I in f){let K=f[I];typeof K!="function"&&(W[I]=K)}let O={...b,...W,pointer:_,intersections:d,stopped:v.stopped,delta:p,unprojectedPoint:R,ray:M.ray,camera:N,stopPropagation(){const I="pointerId"in f&&A.capturedMap.get(f.pointerId);if((!I||I.has(b.eventObject))&&(O.stopped=v.stopped=!0,A.hovered.size&&Array.from(A.hovered.values()).find(K=>K.eventObject===b.eventObject))){const K=d.slice(0,d.indexOf(b));s([...K,b])}},target:{hasPointerCapture:D,setPointerCapture:U,releasePointerCapture:z},currentTarget:{hasPointerCapture:D,setPointerCapture:U,releasePointerCapture:z},nativeEvent:f};if(y(O),v.stopped===!0)break}}return d}function s(d){const{internal:f}=n.getState();for(const p of f.hovered.values())if(!d.length||!d.find(y=>y.object===p.object&&y.index===p.index&&y.instanceId===p.instanceId)){const x=p.eventObject.__r3f,v=x==null?void 0:x.handlers;if(f.hovered.delete($g(p)),x!=null&&x.eventCount){const b={...p,intersections:d};v.onPointerOut==null||v.onPointerOut(b),v.onPointerLeave==null||v.onPointerLeave(b)}}}function o(d,f){for(let p=0;p<f.length;p++){const y=f[p].__r3f;y==null||y.handlers.onPointerMissed==null||y.handlers.onPointerMissed(d)}}function l(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return f=>{const{internal:p}=n.getState();"pointerId"in f&&p.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(f.pointerId)&&(p.capturedMap.delete(f.pointerId),s([]))})}}return function(p){const{onPointerMissed:y,internal:x}=n.getState();x.lastEvent.current=p;const v=d==="onPointerMove",b=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",M=r(p,v?t:void 0),_=b?e(p):0;d==="onPointerDown"&&(x.initialClick=[p.offsetX,p.offsetY],x.initialHits=M.map(A=>A.eventObject)),b&&!M.length&&_<=2&&(o(p,x.interaction),y&&y(p)),v&&s(M);function N(A){const R=A.eventObject,D=R.__r3f,U=D==null?void 0:D.handlers;if(D!=null&&D.eventCount)if(v){if(U.onPointerOver||U.onPointerEnter||U.onPointerOut||U.onPointerLeave){const z=$g(A),W=x.hovered.get(z);W?W.stopped&&A.stopPropagation():(x.hovered.set(z,A),U.onPointerOver==null||U.onPointerOver(A),U.onPointerEnter==null||U.onPointerEnter(A))}U.onPointerMove==null||U.onPointerMove(A)}else{const z=U[d];z?(!b||x.initialHits.includes(R))&&(o(p,x.interaction.filter(W=>!x.initialHits.includes(W))),z(A)):b&&x.initialHits.includes(R)&&o(p,x.interaction.filter(W=>!x.initialHits.includes(W)))}}i(M,p,_,N)}}return{handlePointer:l}}const pN=n=>!!(n!=null&&n.render),mN=V.createContext(null),gH=(n,e)=>{const t=eH((l,d)=>{const f=new q,p=new q,y=new q;function x(_=d().camera,N=p,A=d().size){const{width:R,height:D,top:U,left:z}=A,W=R/D;N.isVector3?y.copy(N):y.set(...N);const O=_.getWorldPosition(f).distanceTo(y);if(oN(_))return{width:R/_.zoom,height:D/_.zoom,top:U,left:z,factor:1,distance:O,aspect:W};{const I=_.fov*Math.PI/180,K=2*Math.tan(I/2)*O,ie=K*(R/D);return{width:ie,height:K,top:U,left:z,factor:R/ie,distance:O,aspect:W}}}let v;const b=_=>l(N=>({performance:{...N.performance,current:_}})),T=new Re;return{set:l,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(_=1)=>n(d(),_),advance:(_,N)=>e(_,N,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new rw,pointer:T,mouse:T,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=d();v&&clearTimeout(v),_.performance.current!==_.performance.min&&b(_.performance.min),v=setTimeout(()=>b(d().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:x},setEvents:_=>l(N=>({...N,events:{...N.events,..._}})),setSize:(_,N,A,R,D)=>{const U=d().camera,z={width:_,height:N,top:R||0,left:D||0,updateStyle:A};l(W=>({size:z,viewport:{...W.viewport,...x(U,p,z)}}))},setDpr:_=>l(N=>{const A=dN(_);return{viewport:{...N.viewport,dpr:A,initialDpr:N.viewport.initialDpr||A}}}),setFrameloop:(_="always")=>{const N=d().clock;N.stop(),N.elapsedTime=0,_!=="never"&&(N.start(),N.elapsedTime=0),l(()=>({frameloop:_}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:V.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(_,N,A)=>{const R=d().internal;return R.priority=R.priority+(N>0?1:0),R.subscribers.push({ref:_,priority:N,store:A}),R.subscribers=R.subscribers.sort((D,U)=>D.priority-U.priority),()=>{const D=d().internal;D!=null&&D.subscribers&&(D.priority=D.priority-(N>0?1:0),D.subscribers=D.subscribers.filter(U=>U.ref!==_))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:l,size:d,viewport:f,gl:p,set:y}=t.getState();if(d.width!==i.width||d.height!==i.height||f.dpr!==s){var x;i=d,s=f.dpr,hH(l,d),p.setPixelRatio(f.dpr);const v=(x=d.updateStyle)!=null?x:typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(d.width,d.height,v)}l!==o&&(o=l,y(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>n(l)),t};let qg,yH=new Set,xH=new Set,vH=new Set;function vv(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Vf(n,e){switch(n){case"before":return vv(yH,e);case"after":return vv(xH,e);case"tail":return vv(vH,e)}}let _v,wv;function Sv(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),_v=e.internal.subscribers,qg=0;qg<_v.length;qg++)wv=_v[qg],wv.ref.current(wv.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function _H(n){let e=!1,t=!1,r,i,s;function o(f){i=requestAnimationFrame(o),e=!0,r=0,Vf("before",f),t=!0;for(const y of n.values()){var p;s=y.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((p=s.gl.xr)!=null&&p.isPresenting)&&(r+=Sv(f,s))}if(t=!1,Vf("after",f),r===0)return Vf("tail",f),e=!1,cancelAnimationFrame(i)}function l(f,p=1){var y;if(!f)return n.forEach(x=>l(x.store.getState(),p));(y=f.gl.xr)!=null&&y.isPresenting||!f.internal.active||f.frameloop==="never"||(p>1?f.internal.frames=Math.min(60,f.internal.frames+p):t?f.internal.frames=2:f.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function d(f,p=!0,y,x){if(p&&Vf("before",f),y)Sv(f,y,x);else for(const v of n.values())Sv(f,v.store.getState());p&&Vf("after",f)}return{loop:o,invalidate:l,advance:d}}function wH(){const n=V.useContext(mN);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function SH(n,e=0){const t=wH(),r=t.getState().internal.subscribe,i=lN(n);return rm(()=>r(i,e,t),[e,r,t]),null}const _h=new Map,{invalidate:dE,advance:hE}=_H(_h),{reconciler:P0,applyProps:Yd}=oH(_h,fH),Zd={objects:"shallow",strict:!1},bH=(n,e)=>{const t=typeof n=="function"?n(e):n;return pN(t)?t:new z_({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function MH(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:l=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:l}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function EH(n){const e=_h.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||gH(dE,hE),o=t||P0.createContainer(s,ch.ConcurrentRoot,null,!1,null,"",i,null);e||_h.set(n,{fiber:o,store:s});let l,d=!1,f;return{configure(p={}){let{gl:y,size:x,scene:v,events:b,onCreated:T,shadows:M=!1,linear:_=!1,flat:N=!1,legacy:A=!1,orthographic:R=!1,frameloop:D="always",dpr:U=[1,2],performance:z,raycaster:W,camera:O,onPointerMissed:I}=p,K=s.getState(),ie=K.gl;K.gl||K.set({gl:ie=bH(y,n)});let oe=K.raycaster;oe||K.set({raycaster:oe=new nN});const{params:Z,...le}=W||{};if(Un.equ(le,oe,Zd)||Yd(oe,{...le}),Un.equ(Z,oe.params,Zd)||Yd(oe,{params:{...oe.params,...Z}}),!K.camera||K.camera===f&&!Un.equ(f,O,Zd)){f=O;const te=O instanceof $p,j=te?O:R?new Kp(0,0,0,0,.1,1e3):new Br(75,0,.1,1e3);te||(j.position.z=5,O&&(Yd(j,O),("aspect"in O||"left"in O||"right"in O||"bottom"in O||"top"in O)&&(j.manual=!0,j.updateProjectionMatrix())),!K.camera&&!(O!=null&&O.rotation)&&j.lookAt(0,0,0)),K.set({camera:j}),oe.camera=j}if(!K.scene){let te;v!=null&&v.isScene?te=v:(te=new B_,v&&Yd(te,v)),K.set({scene:Kd(te)})}if(!K.xr){var Q;const te=(ee,fe)=>{const Ae=s.getState();Ae.frameloop!=="never"&&hE(ee,!0,Ae,fe)},j=()=>{const ee=s.getState();ee.gl.xr.enabled=ee.gl.xr.isPresenting,ee.gl.xr.setAnimationLoop(ee.gl.xr.isPresenting?te:null),ee.gl.xr.isPresenting||dE(ee)},X={connect(){const ee=s.getState().gl;ee.xr.addEventListener("sessionstart",j),ee.xr.addEventListener("sessionend",j)},disconnect(){const ee=s.getState().gl;ee.xr.removeEventListener("sessionstart",j),ee.xr.removeEventListener("sessionend",j)}};typeof((Q=ie.xr)==null?void 0:Q.addEventListener)=="function"&&X.connect(),K.set({xr:X})}if(ie.shadowMap){const te=ie.shadowMap.enabled,j=ie.shadowMap.type;if(ie.shadowMap.enabled=!!M,Un.boo(M))ie.shadowMap.type=Qf;else if(Un.str(M)){var me;const X={basic:qT,percentage:ty,soft:Qf,variance:sa};ie.shadowMap.type=(me=X[M])!=null?me:Qf}else Un.obj(M)&&Object.assign(ie.shadowMap,M);(te!==ie.shadowMap.enabled||j!==ie.shadowMap.type)&&(ie.shadowMap.needsUpdate=!0)}const $=aN();$&&("enabled"in $?$.enabled=!A:"legacyMode"in $&&($.legacyMode=A)),d||Yd(ie,{outputEncoding:_?3e3:3001,toneMapping:N?La:x_}),K.legacy!==A&&K.set(()=>({legacy:A})),K.linear!==_&&K.set(()=>({linear:_})),K.flat!==N&&K.set(()=>({flat:N})),y&&!Un.fun(y)&&!pN(y)&&!Un.equ(y,ie,Zd)&&Yd(ie,y),b&&!K.events.handlers&&K.set({events:b(s)});const re=MH(n,x);return Un.equ(re,K.size,Zd)||K.setSize(re.width,re.height,re.updateStyle,re.top,re.left),U&&K.viewport.dpr!==dN(U)&&K.setDpr(U),K.frameloop!==D&&K.setFrameloop(D),K.onPointerMissed||K.set({onPointerMissed:I}),z&&!Un.equ(z,K.performance,Zd)&&K.set(te=>({performance:{...te.performance,...z}})),l=T,d=!0,this},render(p){return d||this.configure(),P0.updateContainer(m.jsx(TH,{store:s,children:p,onCreated:l,rootElement:n}),o,null,()=>{}),s},unmount(){gN(n)}}}function TH({store:n,children:e,onCreated:t,rootElement:r}){return rm(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),m.jsx(mN.Provider,{value:n,children:e})}function gN(n,e){const t=_h.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),P0.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,l,d;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(l=i.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(d=i.gl)!=null&&d.xr&&i.xr.disconnect(),dH(i),_h.delete(n)}catch{}},500)})}}P0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:V.version});const bv={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function AH(n){const{handlePointer:e}=mH(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(bv).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,l])=>{const[d,f]=bv[o];t.addEventListener(d,l,{passive:f})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[l]=bv[s];r.connected.removeEventListener(l,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function fE(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function CH({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=V.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=V.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),d=n?typeof n=="number"?n:n.scroll:null,f=n?typeof n=="number"?n:n.resize:null,p=V.useRef(!1);V.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[y,x,v]=V.useMemo(()=>{const _=()=>{if(!l.current.element)return;const{left:N,top:A,width:R,height:D,bottom:U,right:z,x:W,y:O}=l.current.element.getBoundingClientRect(),I={left:N,top:A,width:R,height:D,bottom:U,right:z,x:W,y:O};l.current.element instanceof HTMLElement&&r&&(I.height=l.current.element.offsetHeight,I.width=l.current.element.offsetWidth),Object.freeze(I),p.current&&!PH(l.current.lastBounds,I)&&o(l.current.lastBounds=I)};return[_,f?fE(_,f):_,d?fE(_,d):_]},[o,r,d,f]);function b(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function T(){l.current.element&&(l.current.resizeObserver=new i(v),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(_=>_.addEventListener("scroll",v,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const M=_=>{!_||_===l.current.element||(b(),l.current.element=_,l.current.scrollContainers=yN(_),T())};return kH(v,!!e),NH(x),V.useEffect(()=>{b(),T()},[e,v,x]),V.useEffect(()=>b,[]),[M,s,y]}function NH(n){V.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function kH(n,e){V.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function yN(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...yN(n.parentElement)]}const RH=["x","y","top","bottom","left","right","width","height"],PH=(n,e)=>RH.every(t=>n[t]===e[t]);var LH=Object.defineProperty,IH=Object.defineProperties,DH=Object.getOwnPropertyDescriptors,pE=Object.getOwnPropertySymbols,UH=Object.prototype.hasOwnProperty,OH=Object.prototype.propertyIsEnumerable,mE=(n,e,t)=>e in n?LH(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gE=(n,e)=>{for(var t in e||(e={}))UH.call(e,t)&&mE(n,t,e[t]);if(pE)for(var t of pE(e))OH.call(e,t)&&mE(n,t,e[t]);return n},FH=(n,e)=>IH(n,DH(e)),yE,xE;typeof window<"u"&&((yE=window.document)!=null&&yE.createElement||((xE=window.navigator)==null?void 0:xE.product)==="ReactNative")?V.useLayoutEffect:V.useEffect;function xN(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=xN(r,e,t);if(i)return i;r=r.sibling}}function vN(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const vE=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=vE;return}return vE.apply(this,arguments)};const lw=vN(V.createContext(null));class _N extends V.Component{render(){return V.createElement(lw.Provider,{value:this._reactInternals},this.props.children)}}function zH(){const n=V.useContext(lw);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=V.useId();return V.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=xN(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function BH(){const n=zH(),[e]=V.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==lw&&!e.has(i)&&e.set(i,V.useContext(vN(i)))}t=t.return}return e}function jH(){const n=BH();return V.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>V.createElement(e,null,V.createElement(t.Provider,FH(gE({},r),{value:n.get(t)}))),e=>V.createElement(_N,gE({},e))),[n])}const VH=V.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=AH,eventSource:l,eventPrefix:d,shadows:f,linear:p,flat:y,legacy:x,orthographic:v,frameloop:b,dpr:T,performance:M,raycaster:_,camera:N,scene:A,onPointerMissed:R,onCreated:D,...U},z){V.useMemo(()=>aH(YV),[]);const W=jH(),[O,I]=CH({scroll:!0,debounce:{scroll:50,resize:0},...r}),K=V.useRef(null),ie=V.useRef(null);V.useImperativeHandle(z,()=>K.current);const oe=lN(R),[Z,le]=V.useState(!1),[Q,me]=V.useState(!1);if(Z)throw Z;if(Q)throw Q;const $=V.useRef(null);rm(()=>{const te=K.current;I.width>0&&I.height>0&&te&&($.current||($.current=EH(te)),$.current.configure({gl:s,events:o,shadows:f,linear:p,flat:y,legacy:x,orthographic:v,frameloop:b,dpr:T,performance:M,raycaster:_,camera:N,scene:A,size:I,onPointerMissed:(...j)=>oe.current==null?void 0:oe.current(...j),onCreated:j=>{j.events.connect==null||j.events.connect(l?lH(l)?l.current:l:ie.current),d&&j.setEvents({compute:(X,ee)=>{const fe=X[d+"X"],Ae=X[d+"Y"];ee.pointer.set(fe/ee.size.width*2-1,-(Ae/ee.size.height)*2+1),ee.raycaster.setFromCamera(ee.pointer,ee.camera)}}),D==null||D(j)}}),$.current.render(m.jsx(W,{children:m.jsx(cN,{set:me,children:m.jsx(V.Suspense,{fallback:m.jsx(cH,{set:le}),children:e??null})})})))}),V.useEffect(()=>{const te=K.current;if(te)return()=>gN(te)},[]);const re=l?"none":"auto";return m.jsx("div",{ref:ie,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:re,...i},...U,children:m.jsx("div",{ref:O,style:{width:"100%",height:"100%"},children:m.jsx("canvas",{ref:K,style:{display:"block"},children:t})})})}),HH=V.forwardRef(function(e,t){return m.jsx(_N,{children:m.jsx(VH,{...e,ref:t})})});class WH extends Ii{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new za(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){const d=s.parse(JSON.parse(l));t&&t(d)},r,i)}parse(e){return new GH(e)}}class GH{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){const r=[],i=XH(e,t,this.data);for(let s=0,o=i.length;s<o;s++)r.push(...i[s].toShapes());return r}}function XH(n,e,t){const r=Array.from(n),i=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*i,o=[];let l=0,d=0;for(let f=0;f<r.length;f++){const p=r[f];if(p===`
`)l=0,d-=s;else{const y=$H(p,i,l,d,t);l+=y.offsetX,o.push(y.path)}}return o}function $H(n,e,t,r,i){const s=i.glyphs[n]||i.glyphs["?"];if(!s){console.error('THREE.Font: character "'+n+'" does not exists in font family '+i.familyName+".");return}const o=new iN;let l,d,f,p,y,x,v,b;if(s.o){const T=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let M=0,_=T.length;M<_;)switch(T[M++]){case"m":l=T[M++]*e+t,d=T[M++]*e+r,o.moveTo(l,d);break;case"l":l=T[M++]*e+t,d=T[M++]*e+r,o.lineTo(l,d);break;case"q":f=T[M++]*e+t,p=T[M++]*e+r,y=T[M++]*e+t,x=T[M++]*e+r,o.quadraticCurveTo(y,x,f,p);break;case"b":f=T[M++]*e+t,p=T[M++]*e+r,y=T[M++]*e+t,x=T[M++]*e+r,v=T[M++]*e+t,b=T[M++]*e+r,o.bezierCurveTo(y,x,v,b,f,p);break}}return{offsetX:s.ha*e,path:o}}class qH extends Qp{constructor(e,t={}){const r=t.font;if(r===void 0)super();else{const i=r.generateShapes(e,t.size);t.depth=t.height!==void 0?t.height:50,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),super(i,t)}this.type="TextGeometry"}}const Xn=new Ci,Yg=new q,_E=new Re,wE=new Re,SE=new Re;class YH{constructor(e){this.geometry=e.geometry,this.randomFunction=Math.random,this.indexAttribute=this.geometry.index,this.positionAttribute=this.geometry.getAttribute("position"),this.normalAttribute=this.geometry.getAttribute("normal"),this.colorAttribute=this.geometry.getAttribute("color"),this.uvAttribute=this.geometry.getAttribute("uv"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){const e=this.indexAttribute,t=this.positionAttribute,r=this.weightAttribute,i=e?e.count/3:t.count/3,s=new Float32Array(i);for(let d=0;d<i;d++){let f=1,p=3*d,y=3*d+1,x=3*d+2;e&&(p=e.getX(p),y=e.getX(y),x=e.getX(x)),r&&(f=r.getX(p)+r.getX(y)+r.getX(x)),Xn.a.fromBufferAttribute(t,p),Xn.b.fromBufferAttribute(t,y),Xn.c.fromBufferAttribute(t,x),f*=Xn.getArea(),s[d]=f}const o=new Float32Array(i);let l=0;for(let d=0;d<i;d++)l+=s[d],o[d]=l;return this.distribution=o,this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t,r,i){const s=this.sampleFaceIndex();return this.sampleFace(s,e,t,r,i)}sampleFaceIndex(){const e=this.distribution[this.distribution.length-1];return this.binarySearch(this.randomFunction()*e)}binarySearch(e){const t=this.distribution;let r=0,i=t.length-1,s=-1;for(;r<=i;){const o=Math.ceil((r+i)/2);if(o===0||t[o-1]<=e&&t[o]>e){s=o;break}else e<t[o]?i=o-1:r=o+1}return s}sampleFace(e,t,r,i,s){let o=this.randomFunction(),l=this.randomFunction();o+l>1&&(o=1-o,l=1-l);const d=this.indexAttribute;let f=e*3,p=e*3+1,y=e*3+2;return d&&(f=d.getX(f),p=d.getX(p),y=d.getX(y)),Xn.a.fromBufferAttribute(this.positionAttribute,f),Xn.b.fromBufferAttribute(this.positionAttribute,p),Xn.c.fromBufferAttribute(this.positionAttribute,y),t.set(0,0,0).addScaledVector(Xn.a,o).addScaledVector(Xn.b,l).addScaledVector(Xn.c,1-(o+l)),r!==void 0&&(this.normalAttribute!==void 0?(Xn.a.fromBufferAttribute(this.normalAttribute,f),Xn.b.fromBufferAttribute(this.normalAttribute,p),Xn.c.fromBufferAttribute(this.normalAttribute,y),r.set(0,0,0).addScaledVector(Xn.a,o).addScaledVector(Xn.b,l).addScaledVector(Xn.c,1-(o+l)).normalize()):Xn.getNormal(r)),i!==void 0&&this.colorAttribute!==void 0&&(Xn.a.fromBufferAttribute(this.colorAttribute,f),Xn.b.fromBufferAttribute(this.colorAttribute,p),Xn.c.fromBufferAttribute(this.colorAttribute,y),Yg.set(0,0,0).addScaledVector(Xn.a,o).addScaledVector(Xn.b,l).addScaledVector(Xn.c,1-(o+l)),i.r=Yg.x,i.g=Yg.y,i.b=Yg.z),s!==void 0&&this.uvAttribute!==void 0&&(_E.fromBufferAttribute(this.uvAttribute,f),wE.fromBufferAttribute(this.uvAttribute,p),SE.fromBufferAttribute(this.uvAttribute,y),s.set(0,0).addScaledVector(_E,o).addScaledVector(wE,l).addScaledVector(SE,1-(o+l))),this}}const L0=()=>{const n=window.innerWidth;return n>=1280?{size:1.2,cameraZ:11,particles:4e4,text:"WELCOME TO BCBUZZ"}:n>=1024?{size:1,cameraZ:10,particles:38e3,text:"WELCOME TO BCBUZZ"}:n>=786?{size:.8,cameraZ:9,particles:35e3,text:`WELCOME TO
     BCBUZZ`}:n>=620?{size:.7,cameraZ:8.5,particles:3e4,text:`WELCOME TO
     BCBUZZ`}:n>=480?{size:.6,cameraZ:7.5,particles:25e3,text:`WELCOME TO
     BCBUZZ`}:{size:.4,cameraZ:6.5,particles:2e4,text:`WELCOME TO
     BCBUZZ`}},ZH=["#3b82f6","#60a5fa","#93c5fd","#1e3a8a","#0f172a"],KH=(n,e)=>{const t=ZH.map(i=>new at(i)),r=n/e;return r<.25?t[0].lerp(t[1],r*4):r<.5?t[1].lerp(t[2],(r-.25)*4):r<.75?t[2].lerp(t[3],(r-.5)*4):t[3].lerp(t[4],(r-.75)*4)},JH=({onComplete:n})=>{const e=V.useRef(null),[t,r]=V.useState(null),[i,s]=V.useState("assemble"),[o,l]=V.useState(L0()),{size:d,particles:f,text:p}=o,y=V.useMemo(()=>new Float32Array(f*3),[f]),x=V.useMemo(()=>new Float32Array(f*3),[f]),v=V.useMemo(()=>new Float32Array(f*3),[f]),b=V.useMemo(()=>new Float32Array(f*3),[f]);return V.useEffect(()=>{new WH().load("/fonts/helvetiker_regular.typeface.json",r)},[]),V.useEffect(()=>{const T=()=>l(L0());return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),V.useEffect(()=>{if(!t)return;const T=o.cameraZ,M=75,_=window.innerWidth/window.innerHeight,N=M*Math.PI/180,A=2*Math.tan(N/2)*T,D=A*_*1.5,U=A*1.5,z=20;for(let Z=0;Z<f;Z++){const le=Z*3;v.set([(Math.random()-.5)*D,(Math.random()-.5)*U,(Math.random()-.5)*z],le)}y.set(v);const W=new qH(p,{font:t,size:d,height:.2*d,curveSegments:24,bevelEnabled:!1});W.computeBoundingBox();const O=W.boundingBox.max.x-W.boundingBox.min.x,I=W.boundingBox.max.y-W.boundingBox.min.y;W.translate(-O/2,-I/2,0);const K=new _r(W),ie=new YH(K).build(),oe=new q;for(let Z=0;Z<f;Z++){ie.sample(oe),oe.addScalar((Math.random()-.5)*.04);const le=Z*3;x.set([oe.x,oe.y,oe.z],le);const Q=KH(Z,f);b.set([Q.r,Q.g,Q.b],le)}if(e.current){const Z=e.current.geometry;Z.setAttribute("position",new pn(y,3)),Z.setAttribute("color",new pn(b,3))}},[t,d,f,o]),SH(({clock:T})=>{if(!e.current||!t)return;const M=T.getElapsedTime(),_=.05;i==="assemble"&&M>2.5?s("stable"):i==="stable"&&M>5.5?s("disperse"):i==="disperse"&&M>8&&n();for(let N=0;N<f;N++){const A=N*3,R=i==="disperse"?v[A]:x[A],D=i==="disperse"?v[A+1]:x[A+1],U=i==="disperse"?v[A+2]:x[A+2];y[A]+=(R-y[A])*_,y[A+1]+=(D-y[A+1])*_,y[A+2]+=(U-y[A+2])*_}e.current.geometry.attributes.position.needsUpdate=!0}),t?m.jsxs("points",{ref:e,children:[m.jsx("bufferGeometry",{}),m.jsx("pointsMaterial",{size:.06,vertexColors:!0,transparent:!0,opacity:1,sizeAttenuation:!0,blending:E0,depthWrite:!1})]}):null},QH=({onComplete:n})=>{const[e,t]=V.useState(L0().cameraZ);return V.useEffect(()=>{const r=()=>t(L0().cameraZ);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),m.jsx("div",{className:"fixed inset-0 z-50 gradient-background -mt-[27%]  sm:-mt-[25%] md:-mt-[23%]  lg:-mt-[0%]  xl:-mt-[2%]",children:m.jsxs(HH,{camera:{position:[0,0,e]},style:{background:"transparent"},onCreated:({gl:r})=>r.setClearColor(new at("black"),0),children:[m.jsx("ambientLight",{intensity:.7}),m.jsx(JH,{onComplete:n})]})})},wN=V.createContext(void 0),SN=()=>{const n=V.useContext(wN);if(!n)throw new Error("useWorkflow must be used within a WorkflowProvider");return n},e8=({children:n})=>{const[e,t]=V.useState([]),[r]=V.useState({id:"user-1",role:"user",name:"Test User",email:"test@example.com"});V.useEffect(()=>{const _=localStorage.getItem("auditRequests");if(_)t(JSON.parse(_));else{const N=[];t(N),localStorage.setItem("auditRequests",JSON.stringify(N))}},[]),V.useEffect(()=>{localStorage.setItem("auditRequests",JSON.stringify(e))},[e]);const M={auditRequests:e,currentUser:r,submitAuditRequest:_=>{const N={..._,id:`audit-${Date.now()}`,submittedAt:new Date().toISOString(),status:"pending",progress:0,testingPhase:"Pending Approval",vulnerabilities:{critical:0,high:0,medium:0,low:0,informational:0,total:0},findings:[],documents:[],timeline:[{id:`timeline-${Date.now()}`,phase:"Request Submitted",status:"completed",startDate:new Date().toISOString().split("T")[0],description:"Audit request submitted for review"}]};t(A=>[...A,N])},approveRequest:(_,N)=>{t(A=>A.map(R=>R.id===_?{...R,status:"assigned",testerId:N,assignedTester:"Security Expert",testingPhase:"Planning & Scoping",timeline:[...R.timeline,{id:`timeline-${Date.now()}`,phase:"Request Approved",status:"completed",startDate:new Date().toISOString().split("T")[0],description:"Request approved and assigned to tester"}]}:R))},rejectRequest:(_,N)=>{t(A=>A.map(R=>R.id===_?{...R,status:"rejected",timeline:[...R.timeline,{id:`timeline-${Date.now()}`,phase:"Request Rejected",status:"completed",startDate:new Date().toISOString().split("T")[0],description:`Request rejected: ${N}`}]}:R))},updateAuditStatus:(_,N,A)=>{t(R=>R.map(D=>{if(D.id===_){const U={...D,status:N,...A,timeline:[...D.timeline,{id:`timeline-${Date.now()}`,phase:N.charAt(0).toUpperCase()+N.slice(1).replace("-"," "),status:"completed",startDate:new Date().toISOString().split("T")[0],description:`Status updated to ${N.replace("-"," ")}`}]};return N==="completed"&&(U.completedAt=new Date().toISOString(),U.progress=100,U.testingPhase="Completed"),U}return D}))},addFinding:(_,N)=>{const A={...N,id:`finding-${Date.now()}`,foundAt:new Date().toISOString()};t(R=>R.map(D=>{if(D.id===_){const U=[...D.findings,A],z={critical:U.filter(W=>W.severity==="critical").length,high:U.filter(W=>W.severity==="high").length,medium:U.filter(W=>W.severity==="medium").length,low:U.filter(W=>W.severity==="low").length,informational:U.filter(W=>W.severity==="informational").length,total:U.length};return{...D,findings:U,vulnerabilities:z}}return D}))},updateProgress:(_,N,A)=>{t(R=>R.map(D=>D.id===_?{...D,progress:N,testingPhase:A}:D))},uploadDocument:(_,N)=>{const A={...N,id:`doc-${Date.now()}`,uploadDate:new Date().toISOString().split("T")[0]};t(R=>R.map(D=>D.id===_?{...D,documents:[...D.documents,A]}:D))},generateReport:_=>{const N={id:`report-${Date.now()}`,name:"Final Security Audit Report.pdf",type:"PDF",size:"5.2 MB",uploadDate:new Date().toISOString().split("T")[0],category:"report",downloadUrl:`/reports/final-report-${_}.pdf`,status:"ready"};t(A=>A.map(R=>R.id===_?{...R,documents:[...R.documents,N],reportUrl:N.downloadUrl}:R))},requestReaudit:(_,N)=>{const A=e.find(D=>D.id===_);if(!A)return;const R={...A,...N,id:`reaudit-${Date.now()}`,submittedAt:new Date().toISOString(),status:"pending",progress:0,testingPhase:"Pending Approval",vulnerabilities:{critical:0,high:0,medium:0,low:0,informational:0,total:0},findings:[],documents:[],timeline:[{id:`timeline-${Date.now()}`,phase:"Re-audit Requested",status:"completed",startDate:new Date().toISOString().split("T")[0],description:`Re-audit requested for ${A.companyName}`}]};t(D=>[...D,R])},getUserRequests:_=>e.filter(N=>N.userId===_),getTesterRequests:_=>e.filter(N=>N.testerId===_),getPendingRequests:()=>e.filter(_=>_.status==="pending")};return m.jsx(wN.Provider,{value:M,children:n})},t8=[{label:"Active Audits",value:"1",icon:Kr,color:"info",trend:"",description:"Currently running security audits"},{label:"Completed Audits",value:"1",icon:ki,color:"success",trend:"",description:"Successfully completed this month"}],n8=[],bE=[],r8=()=>{var le;const{theme:n,toggleTheme:e}=da(),{getUserRequests:t}=SN(),[r,i]=V.useState(!0),[s,o]=V.useState("dashboard"),[l,d]=V.useState(!1),[f,p]=V.useState(!1),[y,x]=V.useState(()=>!localStorage.getItem("introSeen")),[v,b]=V.useState(null),[T,M]=V.useState([]);V.useEffect(()=>{const Q=localStorage.getItem("user");if(Q)try{b(JSON.parse(Q))}catch(me){console.error("Failed to parse user from localStorage",me)}},[]),V.useEffect(()=>{document.title="Dashboard | syra"},[]);const _=Fo(),N=Q=>{switch(Q){case"dashboard":_("/dashboard");break;case"projects":_("/projects");break;case"settings":_("/settings");break;case"help":_("/help");break;case"scan":_("/get-started");break;default:_("/dashboard");break}},[A,R]=V.useState(!1),[D,U]=V.useState(n8),z=Q=>{U(me=>me.map($=>$.id===Q?{...$,unread:!1}:$))},W=Q=>{U(me=>me.filter($=>$.id!==Q))},O=()=>{U(Q=>Q.map(me=>({...me,unread:!1})))},I=(Q,me)=>{var te;const $=Q,re={info:{bg:n==="dark"?"bg-info/20":"bg-sky-50",text:n==="dark"?"text-info":"text-sky-600",border:n==="dark"?"border-info/30":"border-sky-200"},success:{bg:n==="dark"?"bg-success-dark/20":"bg-emerald-50",text:n==="dark"?"text-success-dark":"text-emerald-600",border:n==="dark"?"border-success-dark/30":"border-emerald-200"},warning:{bg:n==="dark"?"bg-warning-dark/20":"bg-amber-50",text:n==="dark"?"text-warning-dark":"text-amber-600",border:n==="dark"?"border-warning-dark/30":"border-amber-200"},error:{bg:n==="dark"?"bg-error-dark/20":"bg-red-50",text:n==="dark"?"text-error-dark":"text-red-600",border:n==="dark"?"border-error-dark/30":"border-red-200"},secondary:{bg:n==="dark"?"bg-secondary-dark/20":"bg-blue-50",text:n==="dark"?"text-secondary-dark":"text-blue-600",border:n==="dark"?"border-secondary-dark/30":"border-blue-200"}};return((te=re[$])==null?void 0:te[me||"bg"])||re.info[me||"bg"]},K=Q=>{alert(`Starting download for: ${Q.name}`)},ie=Q=>{alert(`Opening preview for: ${Q.name}`)},oe=Q=>{_("/projects",{state:{filter:Q.label.toLowerCase()}})},Z=Q=>{_(`/audit/${Q.id}`)};return V.useEffect(()=>{if(v){const Q=t(v.id);if(Q.length===0){const me={id:"audit-web-001",name:"Web Audit",contactName:"Web Admin",contactEmail:"admin@example.com",contactPhone:"+1234567890",auditType:"web",targetUrl:"https://example.com",description:"Web application security assessment",priority:"medium",methodology:"OWASP Testing Guide",estimatedDuration:"3 days",budget:"Standard",preferredStartDate:new Date().toISOString().split("T")[0],additionalRequirements:"Focus on OWASP Top 10 vulnerabilities",status:"in-progress",submittedAt:new Date().toISOString(),progress:65,testingPhase:"Penetration Testing",vulnerabilities:{critical:1,high:3,medium:5,low:2,informational:4,total:15},findings:[],documents:[],timeline:[{id:"timeline-001",phase:"Request Submitted",status:"completed",startDate:new Date(Date.now()-432e6).toISOString().split("T")[0],description:"Audit request submitted for review"},{id:"timeline-002",phase:"Testing",status:"in-progress",startDate:new Date(Date.now()-3456e5).toISOString().split("T")[0],description:"Security testing in progress"},{id:"timeline-003",phase:"Completed",status:"pending",startDate:new Date(Date.now()+1728e5).toISOString().split("T")[0],description:"Audit will be completed"}],assignedTester:"Security Team",testerId:"tester-001",userId:v.id,reportUrl:"/reports/web-audit-001"};M([me]);const $=JSON.parse(localStorage.getItem("auditRequests")||"[]");localStorage.setItem("auditRequests",JSON.stringify([...$,me]))}else M(Q)}},[v,t]),V.useEffect(()=>{const Q=()=>{l&&d(!1)};return document.addEventListener("mousedown",Q),()=>document.removeEventListener("mousedown",Q)},[l]),V.useEffect(()=>{const Q=()=>{window.innerWidth<1024?i(!1):i(!0)};return Q(),window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)},[]),m.jsxs(m.Fragment,{children:[m.jsx(ca,{mode:"wait",children:y&&m.jsx(QH,{onComplete:()=>{localStorage.setItem("introSeen","true"),x(!1)}})}),m.jsx(ca,{children:!y&&m.jsxs(de.div,{className:`min-h-screen transition-all duration-300 ${n==="dark"?"bg-background-dark text-text-dark":"bg-background-light text-text-light"}`,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:[n==="dark"&&m.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[m.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-gradient-to-br from-pink-500/10 to-transparent rounded-full blur-3xl animate-float"}),m.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-tl from-blue-500/10 to-transparent rounded-full blur-3xl animate-pulse-slow"}),m.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full h-full bg-dark-mesh opacity-50"})]}),m.jsx(HT,{sidebarOpen:r,setSidebarOpen:i,activeTab:s,setActiveTab:o,handleNavigation:N,theme:n}),m.jsxs("div",{className:`flex-1 transition-all duration-300 ease-in-out ${r?"lg:ml-[70px]":"lg:ml-[70px] ml-0"}`,children:[m.jsx(GT,{sidebarOpen:r,setSidebarOpen:i,theme:n,toggleTheme:e,userDropdownOpen:l,setUserDropdownOpen:d,notifications:D,showNotifications:A,setShowNotifications:R,markAsRead:z,removeNotification:W,getColorClasses:I}),m.jsxs("div",{className:"block sm:hidden px-6 py-4",children:[m.jsxs("h1",{className:"text-xl font-bold",children:["Welcome back, ",((le=v==null?void 0:v.fullName)==null?void 0:le.split(" ")[0])||"User"]}),m.jsx("p",{className:`text-sm ${n==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:"Here's an overview of your security audits"})]}),m.jsxs("main",{className:"px-4 lg:px-6 py-6 space-y-6",children:[m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-4 lg:gap-6",children:t8.map((Q,me)=>m.jsx(ZU,{...Q,index:me,theme:n,getColorClasses:I,onClick:()=>oe(Q)},me))}),m.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[m.jsx("div",{className:"xl:col-span-2",children:m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:`p-4 lg:p-6 rounded-2xl border backdrop-blur-sm ${n==="dark"?"bg-gradient-to-br from-surface-dark/80 to-surface-secondary-dark/50 border-surface-secondary-dark/30 shadow-dark-card":"bg-surface-light/80 border-gray-200"}`,children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsx("h3",{className:"text-lg lg:text-xl font-semibold",children:"Your Audits"}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("button",{onClick:()=>alert("Filter clicked"),className:`p-2 rounded-lg transition-all duration-200 ${n==="dark"?"hover:bg-surface-secondary-dark/50 text-text-secondary-dark hover:text-text-dark":"hover:bg-gray-100 text-text-secondary-light hover:text-text-light"}`,children:m.jsx(dD,{className:"w-4 h-4"})}),m.jsx("button",{onClick:()=>_("/projects"),className:"text-secondary-dark hover:underline text-sm font-medium",children:"View All "})]})]}),m.jsx("div",{className:"space-y-4",children:T.length>0?T.map(Q=>m.jsx(KU,{audit:Q,onClick:()=>Z(Q),theme:n,getColorClasses:I},Q.id)):m.jsxs("div",{className:`p-8 text-center border-2 border-dashed rounded-xl ${n==="dark"?"border-surface-secondary-dark/30 text-text-secondary-dark":"border-gray-200 text-gray-500"}`,children:[m.jsx("p",{className:"font-medium",children:"No audits found"}),m.jsx("p",{className:"text-sm mt-1",children:"Start by requesting your first security audit"})]})}),m.jsxs(de.button,{onClick:()=>p(!0),className:`w-full mt-4 p-3 border-2 border-dashed rounded-xl transition-all duration-300 flex items-center justify-center space-x-2 group ${n==="dark"?"border-secondary-dark/30 text-secondary-dark hover:bg-secondary-dark/10 hover:border-secondary-dark/50":"border-blue-300 text-blue-600 hover:bg-blue-50 hover:border-blue-400"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[m.jsx(fT,{className:"w-5 h-5 transition-transform duration-200 group-hover:rotate-90"}),m.jsx("span",{className:"font-medium",children:"Request New Audit"})]})]})}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:`p-4 lg:p-6 rounded-2xl border backdrop-blur-sm ${n==="dark"?"bg-gradient-to-br from-surface-dark/80 to-surface-secondary-dark/50 border-surface-secondary-dark/30 shadow-dark-card":"bg-surface-light/80 border-gray-200"}`,children:[m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Documents"}),m.jsx("div",{className:"space-y-3",children:bE.length>0?bE.map(Q=>m.jsx(JU,{doc:Q,onPreview:()=>ie(Q),onDownload:()=>K(Q),theme:n,getColorClasses:I},Q.id)):m.jsx("div",{className:`p-6 text-center border-2 border-dashed rounded-xl ${n==="dark"?"border-surface-secondary-dark/30 text-text-secondary-dark":"border-gray-200 text-gray-500"}`,children:m.jsx("p",{className:"text-sm font-medium",children:"No documents yet"})})})]}),m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:`p-4 lg:p-6 rounded-2xl border backdrop-blur-sm ${n==="dark"?"bg-gradient-to-br from-surface-dark/80 to-surface-secondary-dark/50 border-surface-secondary-dark/30 shadow-dark-card":"bg-surface-light/80 border-gray-200"}`,children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("h3",{className:"text-lg font-semibold",children:"Notifications"}),m.jsxs("div",{className:"flex items-center space-x-1",children:[m.jsx(PI,{className:"w-4 h-4 text-secondary-dark"}),m.jsx("span",{className:"text-xs bg-error-dark text-white px-2 py-0.5 rounded-full",children:D.filter(Q=>Q.unread).length})]})]}),m.jsx("button",{onClick:()=>R(!0),className:"text-secondary-dark hover:underline text-sm font-medium",children:"See All "})]}),m.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:D.length>0?D.map(Q=>m.jsx(WT,{notification:Q,theme:n,getColorClasses:I,onMarkRead:()=>z(Q.id),onRemove:()=>W(Q.id)},Q.id)):m.jsx("div",{className:`p-6 text-center border-2 border-dashed rounded-xl ${n==="dark"?"border-surface-secondary-dark/30 text-text-secondary-dark":"border-gray-200 text-gray-500"}`,children:m.jsx("p",{className:"text-sm font-medium",children:"No new notifications"})})}),m.jsx(de.button,{onClick:O,className:`w-full mt-4 p-2 text-sm rounded-lg transition-all duration-200 ${n==="dark"?"text-secondary-dark hover:bg-secondary-dark/10":"text-blue-600 hover:bg-blue-50"}`,whileHover:{scale:1.01},whileTap:{scale:.99},children:"Mark all as read"})]})]})]})]})]}),r&&m.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40 lg:hidden backdrop-blur-sm",onClick:()=>i(!1)}),m.jsx(QU,{show:f,onClose:()=>p(!1),theme:n})]})})]})},Su=({children:n,userRole:e="user"})=>{var O;const{theme:t,toggleTheme:r}=da(),i=Fo(),s=$l(),[o,l]=V.useState(!0),[d,f]=V.useState(!1),[p,y]=V.useState(!1),[x,v]=V.useState(null);V.useEffect(()=>{const I=localStorage.getItem("user");if(I)try{v(JSON.parse(I))}catch(K){console.error("Failed to parse user from localStorage",K)}},[]);const[b,T]=V.useState([{id:1,title:"Audit Request Approved",description:"Your security audit request has been approved and assigned to a tester",time:"2 hours ago",type:"success",unread:!0},{id:2,title:"New Vulnerability Found",description:"Critical vulnerability detected in your web application",time:"1 day ago",type:"warning",unread:!0}]),_=(()=>{switch(e){case"admin":return[{id:"admin",label:"Admin Panel",icon:Kr,path:"/admin"},{id:"users",label:"User Management",icon:hp,path:"/admin/users"},{id:"audit-requests",label:"Audit Requests",icon:Kf,path:"/admin/requests"},{id:"settings",label:"Settings",icon:iu,path:"/admin/settings"},{id:"help",label:"Help",icon:rh,path:"/help"}];case"tester":return[{id:"testing",label:"Testing Dashboard",icon:r4,path:"/testing"},{id:"assigned-audits",label:"Assigned Audits",icon:Kf,path:"/testing/audits"},{id:"tools",label:"Testing Tools",icon:Hv,path:"/testing/tools"},{id:"settings",label:"Settings",icon:iu,path:"/settings"},{id:"help",label:"Help",icon:rh,path:"/help"}];default:return[{id:"dashboard",label:"Dashboard",icon:oT,path:"/dashboard"},{id:"projects",label:"Projects",icon:Kf,path:"/projects"},{id:"scan",label:"Request Audit",icon:Hv,path:"/request-audit"},{id:"settings",label:"Settings",icon:iu,path:"/settings"},{id:"help",label:"Help",icon:rh,path:"/help"}]}})(),N=s.pathname,A=((O=_.find(I=>I.path===N))==null?void 0:O.id)||"dashboard",R=I=>{i(I),window.innerWidth<1024&&l(!1)},D=()=>{localStorage.removeItem("token"),localStorage.removeItem("userRole"),i("/")},U=I=>{T(K=>K.map(ie=>ie.id===I?{...ie,unread:!1}:ie))},z=I=>{T(K=>K.filter(ie=>ie.id!==I))},W=b.filter(I=>I.unread).length;return V.useEffect(()=>{const I=()=>{f(!1),y(!1)};return document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[]),V.useEffect(()=>{const I=()=>{window.innerWidth<1024?l(!1):l(!0)};return I(),window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]),m.jsxs("div",{className:`min-h-screen transition-all duration-300 ${t==="dark"?"bg-background-dark text-text-dark":"bg-background-light text-text-light"}`,children:[m.jsx(ca,{children:o&&m.jsxs(de.div,{initial:{x:-280},animate:{x:0},exit:{x:-280},transition:{duration:.3,ease:"easeInOut"},className:`fixed left-0 top-0 h-full w-70 z-50 backdrop-blur-xl ${t==="dark"?"bg-surface-dark/95 border-surface-secondary-dark/30 shadow-dark-elevated":"bg-surface-light/95 border-gray-200 shadow-xl"} border-r`,children:[m.jsx("div",{className:`p-6 border-b ${t==="dark"?"border-surface-secondary-dark/30":"border-gray-200"}`,children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:`w-10 h-10 bg-gradient-to-br from-secondary-dark to-accent-dark rounded-xl flex items-center justify-center ${t==="dark"?"shadow-glow":"shadow-lg"}`,children:m.jsx("span",{className:"text-white font-bold text-lg",children:"BC"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-secondary-dark to-accent-dark bg-clip-text text-transparent",children:"BCBUZZ"}),m.jsx("p",{className:`text-xs ${t==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:"Security Platform"})]})]}),m.jsx(de.button,{onClick:()=>l(!1),className:`p-2 rounded-lg transition-all duration-200  ${t==="dark"?"hover:bg-surface-secondary-dark/50 text-text-secondary-dark hover:text-text-dark":"hover:bg-gray-100 text-text-secondary-light hover:text-text-light"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:m.jsx(Ua,{className:"w-5 h-5"})})]})}),m.jsx("nav",{className:"p-4 flex-1",children:m.jsx("div",{className:"space-y-2",children:_.map(I=>{const K=I.icon,ie=A===I.id;return m.jsxs(de.button,{onClick:()=>R(I.path),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-200 group ${ie?t==="dark"?"bg-gradient-to-r from-secondary-dark/30 to-accent-dark/30 text-secondary-dark border border-secondary-dark/30 shadow-inner-glow":"bg-gradient-to-r from-blue-50 to-sky-50 text-blue-600 border border-blue-200":t==="dark"?"hover:bg-surface-secondary-dark/30 text-text-secondary-dark hover:text-text-dark":"hover:bg-gray-50 text-text-secondary-light hover:text-text-light"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[m.jsx(K,{className:`w-5 h-5 transition-transform duration-200 ${ie?"scale-110":"group-hover:scale-105"}`}),m.jsx("span",{className:"font-medium",children:I.label}),ie&&m.jsx(de.div,{layoutId:"activeTab",className:"ml-auto w-2 h-2 bg-secondary-dark rounded-full",initial:{scale:0},animate:{scale:1},transition:{duration:.2}})]},I.id)})})}),m.jsxs("div",{className:`p-4 border-t ${t==="dark"?"border-surface-secondary-dark/30":"border-gray-200"}`,children:[m.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-xl ${t==="dark"?"bg-gradient-to-r from-secondary-dark/20 to-accent-dark/20 border border-secondary-dark/30":"bg-gradient-to-r from-blue-50 to-sky-50 border border-blue-100"}`,children:[m.jsx("div",{className:`w-10 h-10 bg-gradient-to-br from-secondary-dark to-accent-dark rounded-full flex items-center justify-center ${t==="dark"?"shadow-glow":"shadow-lg"}`,children:m.jsx(Ol,{className:"w-5 h-5 text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"font-medium text-sm",children:(x==null?void 0:x.fullName)||"User"}),m.jsx("p",{className:`text-xs capitalize ${t==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:(x==null?void 0:x.email)||e})]})]}),m.jsxs(de.button,{onClick:D,className:`w-full flex items-center space-x-3 px-4 py-3 mt-3 rounded-xl transition-all duration-200 ${t==="dark"?"hover:bg-error-dark/20 text-error-dark hover:text-red-300":"hover:bg-red-50 text-red-600 hover:text-red-700"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[m.jsx(w0,{className:"w-5 h-5"}),m.jsx("span",{className:"font-medium",children:"Logout"})]})]})]})}),m.jsx("header",{className:`${t==="dark"?"bg-surface-dark/80 border-b border-surface-secondary-dark/30 shadow-dark-card":"bg-surface-light/80 border-b border-gray-200"} backdrop-blur-xl sticky top-0 z-40 ${o?"lg:ml-70":"ml-0"} transition-all duration-300`,children:m.jsxs("div",{className:"flex items-center justify-between p-4 lg:p-6",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[!o&&m.jsx(de.button,{onClick:()=>l(!0),className:`p-2 rounded-lg transition-all duration-200 ${t==="dark"?"hover:bg-surface-secondary-dark/50 text-text-secondary-dark hover:text-text-dark":"hover:bg-gray-100 text-text-secondary-light hover:text-text-light"}`,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Toggle Sidebar",children:m.jsx(dT,{className:"w-5 h-5"})}),!o&&m.jsxs(de.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center space-x-3",children:[m.jsx("div",{className:`w-8 h-8 bg-gradient-to-br from-secondary-dark to-accent-dark rounded-lg flex items-center justify-center ${t==="dark"?"shadow-glow":"shadow-lg"}`,children:m.jsx("span",{className:"text-white font-bold text-sm",children:"BC"})}),m.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-secondary-dark to-accent-dark bg-clip-text text-transparent hidden sm:block",style:{WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"BCBUZZ"})]})]}),m.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-4",children:[m.jsx(de.button,{onClick:r,className:`p-2 rounded-lg transition-all duration-200 ${t==="dark"?"hover:bg-surface-secondary-dark/50 text-text-secondary-dark hover:text-text-dark":"hover:bg-gray-100 text-text-secondary-light hover:text-text-light"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:t==="dark"?m.jsx(jp,{className:"w-5 h-5 text-yellow-400"}):m.jsx(Bp,{className:"w-5 h-5 text-indigo-600"})}),m.jsxs("div",{className:"relative hidden md:block",children:[m.jsx(yu,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${t==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`}),m.jsx("input",{type:"text",placeholder:"Search...",className:`pl-10 pr-4 py-2 rounded-lg border transition-all duration-200 ${t==="dark"?"bg-surface-secondary-dark/50 border-surface-secondary-dark text-text-dark placeholder:text-text-secondary-dark":"bg-gray-50 border-gray-200 text-text-light placeholder:text-text-secondary-light"} focus:outline-none focus:ring-2 focus:ring-secondary-dark/20`})]}),m.jsxs("div",{className:"relative",children:[m.jsxs(de.button,{onClick:()=>y(!p),className:`relative p-2 rounded-lg transition-all duration-200 ${t==="dark"?"hover:bg-surface-secondary-dark/50 text-text-secondary-dark hover:text-text-dark":"hover:bg-gray-100 text-text-secondary-light hover:text-text-light"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[m.jsx(up,{className:"w-5 h-5"}),W>0&&m.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-error-dark rounded-full animate-pulse"})]}),p&&m.jsxs(de.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`absolute right-0 top-full mt-2 w-80 max-h-96 overflow-y-auto z-50 rounded-xl border backdrop-blur-xl ${t==="dark"?"bg-surface-dark/95 border-surface-secondary-dark/30 shadow-dark-card":"bg-white border-gray-200 shadow-lg"}`,onClick:I=>I.stopPropagation(),children:[m.jsx("div",{className:`p-4 border-b ${t==="dark"?"border-surface-secondary-dark/30":"border-gray-200"}`,children:m.jsx("h3",{className:"text-sm font-medium",children:"Notifications"})}),m.jsx("div",{className:"divide-y divide-surface-secondary-dark/20",children:b.map(I=>m.jsx("div",{onClick:()=>U(I.id),className:`p-4 transition-colors cursor-pointer group relative ${I.unread?t==="dark"?"bg-secondary-dark/5 shadow-inner":"bg-blue-50/50":"hover:bg-gray-50/50 dark:hover:bg-gray-700/30"}`,children:m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h4",{className:`font-medium text-sm ${I.unread?"text-blue-500":""}`,children:I.title}),m.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:I.description}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2 block",children:I.time})]}),m.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[I.unread&&m.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full ml-2 mt-1"}),m.jsx("button",{onClick:K=>{K.stopPropagation(),z(I.id)},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-red-500/10 text-red-500 rounded-full transition-all",children:m.jsx(Ua,{className:"w-3 h-3"})})]})]})},I.id))})]})]}),!o&&m.jsxs("div",{className:"relative",children:[m.jsxs(de.button,{onClick:()=>f(!d),className:`flex items-center space-x-3 p-2 rounded-lg transition-all duration-200 ${t==="dark"?"hover:bg-surface-secondary-dark/50":"hover:bg-gray-100"}`,whileHover:{scale:1.02},whileTap:{scale:.95},children:[m.jsx("div",{className:`w-8 h-8 bg-gradient-to-br from-secondary-dark to-accent-dark rounded-full flex items-center justify-center ${t==="dark"?"shadow-glow":"shadow-lg"}`,children:m.jsx(Ol,{className:"w-4 h-4 text-white"})}),m.jsxs("div",{className:"text-left hidden lg:block",children:[m.jsx("p",{className:"font-medium text-sm",children:(x==null?void 0:x.fullName)||"User"}),m.jsx("p",{className:`text-xs capitalize ${t==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:(x==null?void 0:x.email)||e})]}),m.jsx(G0,{className:`w-4 h-4 transition-transform duration-200 hidden lg:block ${d?"rotate-180":""}`})]}),m.jsx(ca,{children:d&&m.jsxs(de.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:`absolute right-0 top-full mt-2 w-64 z-50 rounded-xl backdrop-blur-xl border ${t==="dark"?"bg-surface-dark/95 border-surface-secondary-dark/30 shadow-dark-elevated":"bg-white border-gray-200 shadow-lg"}`,onClick:I=>I.stopPropagation(),children:[m.jsx("div",{className:`p-4 border-b ${t==="dark"?"border-surface-secondary-dark/30":"border-gray-200"}`,children:m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:`w-12 h-12 bg-gradient-to-br from-secondary-dark to-accent-dark rounded-full flex items-center justify-center ${t==="dark"?"shadow-glow":"shadow-lg"}`,children:m.jsx(Ol,{className:"w-6 h-6 text-white"})}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:(x==null?void 0:x.fullName)||"User"}),m.jsx("p",{className:`text-sm capitalize ${t==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:(x==null?void 0:x.email)||e})]})]})}),m.jsxs("div",{className:"p-2",children:[m.jsxs("button",{onClick:()=>i("/settings"),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-all duration-200 text-left ${t==="dark"?"hover:bg-surface-secondary-dark/50":"hover:bg-gray-50"}`,children:[m.jsx(iu,{className:"w-4 h-4"}),m.jsx("span",{className:"text-sm",children:"Settings"})]}),m.jsxs("button",{onClick:()=>i("/help"),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-all duration-200 text-left ${t==="dark"?"hover:bg-surface-secondary-dark/50":"hover:bg-gray-50"}`,children:[m.jsx(rh,{className:"w-4 h-4"}),m.jsx("span",{className:"text-sm",children:"Help"})]})]}),m.jsx("div",{className:`p-2 border-t ${t==="dark"?"border-surface-secondary-dark/30":"border-gray-200"}`,children:m.jsxs("button",{onClick:D,className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-all duration-200 text-left ${t==="dark"?"hover:bg-error-dark/20 text-error-dark":"hover:bg-red-50 text-red-600"}`,children:[m.jsx(w0,{className:"w-4 h-4"}),m.jsx("span",{className:"text-sm",children:"Logout"})]})})]})})]})]})]})}),m.jsx("main",{className:`flex-1 transition-all duration-300 ease-in-out ${o?"lg:ml-[70px]":"lg:ml-[70px] ml-0"}`,children:n}),o&&m.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40 lg:hidden backdrop-blur-sm",onClick:()=>l(!1)})]})},i8=()=>{const[n,e]=V.useState(""),[t,r]=V.useState(null),s=[{id:"1",question:"How do I start my first security audit?",answer:'To start your first security audit, navigate to the Dashboard and click on "Request New Audit". Fill in the required information including target URL, audit type, and priority level. Our team will review your request and begin the audit process within 24 hours.',category:"getting-started",helpful:45}].filter(o=>o.question.toLowerCase().includes(n.toLowerCase())||o.answer.toLowerCase().includes(n.toLowerCase()));return m.jsxs("div",{className:"p-6 space-y-8",children:[m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[m.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-secondary-dark to-accent-dark dark:from-secondary-light dark:to-accent-light bg-clip-text text-transparent mb-4",children:"Help & Support Center"}),m.jsx("p",{className:"text-lg text-text-secondary-light dark:text-text-secondary-dark max-w-3xl mx-auto mb-8",children:"Find answers to your questions, learn from our comprehensive guides, and get the support you need"}),m.jsxs("div",{className:"max-w-2xl mx-auto relative",children:[m.jsx(yu,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-6 h-6 text-gray-400"}),m.jsx("input",{type:"text",value:n,onChange:o=>e(o.target.value),placeholder:"Search for help articles, FAQs, tutorials, or topics...",className:"w-full pl-16 pr-6 py-5 border border-gray-300/50 dark:border-gray-600/50 rounded-2xl bg-white/50 dark:bg-gray-800/50 backdrop-blur-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg transition-all duration-300"})]})]}),m.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{title:"Live Chat Support",description:"Get instant help from our expert support team",icon:ED,color:"from-blue-500 to-cyan-500",action:"Start Chat"},{title:"Email Support",description:"Send us a detailed message for complex issues",icon:X0,color:"from-green-500 to-emerald-500",action:"Send Email"},{title:"Schedule a Call",description:"Book a consultation with our security experts",icon:hT,color:"from-purple-500 to-indigo-500",action:"Book Call"}].map((o,l)=>m.jsxs(de.div,{className:"group relative bg-white/10 dark:bg-gray-800/30 backdrop-blur-xl rounded-2xl p-6 border border-white/20 dark:border-gray-700/30 hover:bg-white/20 dark:hover:bg-gray-800/50 transition-all duration-300 cursor-pointer overflow-hidden",whileHover:{scale:1.02,y:-4},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1+l*.1},children:[m.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${o.color} opacity-0 group-hover:opacity-10 transition-opacity duration-300`}),m.jsxs("div",{className:"relative z-10",children:[m.jsx("div",{className:`p-4 rounded-xl bg-gradient-to-r ${o.color} text-white mb-4 w-fit`,children:m.jsx(o.icon,{className:"w-6 h-6"})}),m.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:o.title}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:o.description}),m.jsxs("button",{onClick:d=>{d.stopPropagation(),alert(`Starting: ${o.title}`)},className:`flex items-center gap-2 text-sm font-medium bg-gradient-to-r ${o.color} bg-clip-text text-transparent group-hover:text-white transition-all duration-300`,children:[o.action,m.jsx(aT,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform duration-300"})]})]})]},l))}),m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/10 dark:bg-gray-800/30 backdrop-blur-xl rounded-2xl p-8 border border-white/20 dark:border-gray-700/30",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Frequently Asked Questions"}),m.jsx("div",{className:"space-y-4",children:s.length>0?s.map((o,l)=>m.jsxs(de.div,{className:"border border-gray-200/50 dark:border-gray-700/50 rounded-xl bg-gray-50/30 dark:bg-gray-800/30 backdrop-blur-sm overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},children:[m.jsxs("button",{onClick:()=>r(t===o.id?null:o.id),className:"w-full flex items-center justify-between p-6 text-left hover:bg-gray-50/50 dark:hover:bg-gray-700/30 transition-all duration-300",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:o.question}),m.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[m.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o.helpful," people found this helpful"]}),m.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((d,f)=>m.jsx(ZD,{className:"w-3 h-3 text-yellow-400 fill-current"},f))})]})]}),m.jsx(de.div,{animate:{rotate:t===o.id?180:0},transition:{duration:.3},children:m.jsx(G0,{className:"w-6 h-6 text-gray-400"})})]}),t===o.id&&m.jsx(de.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"px-6 pb-6",children:m.jsxs("div",{className:"pt-4 border-t border-gray-200/50 dark:border-gray-700/50",children:[m.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:o.answer}),m.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[m.jsxs("button",{onClick:()=>alert("Thanks for your feedback!"),className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300 transition-colors",children:[m.jsx(ki,{className:"w-4 h-4"}),"Helpful"]}),m.jsxs("button",{onClick:()=>alert("FAQ saved to your bookmarks"),className:"flex items-center gap-2 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors",children:[m.jsx(DI,{className:"w-4 h-4"}),"Save"]})]})]})})]},o.id)):m.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-200/50 dark:border-gray-700/50 rounded-2xl",children:[m.jsx(yu,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),m.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"No results found"}),m.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:[`We couldn't find any FAQs matching "`,n,'"']})]})})]})]})},s8=()=>m.jsx(Su,{children:m.jsx(i8,{})}),a8=[],o8=()=>{var O;const{theme:n,toggleTheme:e}=da(),[t,r]=V.useState(null),[i,s]=V.useState(""),[o,l]=V.useState("all"),[d,f]=V.useState("all"),[p]=V.useState(a8),[y,x]=V.useState(!0),[v,b]=V.useState(!1),[T,M]=V.useState(!1),[_,N]=V.useState(null),A=Fo(),R=$l();V.useEffect(()=>{if(R.state&&R.state.filter){const I=R.state.filter;["web","network","mobile","cloud"].includes(I)?l(I):["completed","in-progress","scheduled"].includes(I)&&f(I)}},[R.state]),V.useEffect(()=>{const I=localStorage.getItem("user");if(I)try{N(JSON.parse(I))}catch(K){console.error("Failed to parse user from localStorage",K)}},[]);const[D]=V.useState([{id:1,title:"Audit Request Approved",description:"Your security audit request has been approved.",time:"2 hours ago",unread:!0}]);V.useEffect(()=>{const I=()=>{window.innerWidth<1024?x(!1):x(!0)};return I(),window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]),V.useEffect(()=>{const I=()=>r(null);return t&&document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[t]);const U=I=>{switch(I){case"completed":return"text-green-500";case"in-progress":return"text-blue-500";case"scheduled":return"text-orange-500";default:return"text-gray-500"}},z=I=>{switch(I){case"completed":return ki;case"in-progress":return f_;case"scheduled":return zp;default:return qI}},W=p.filter(({name:I,client:K,type:ie,status:oe})=>{const Z=I.toLowerCase().includes(i.toLowerCase())||K.toLowerCase().includes(i.toLowerCase())||ie.toLowerCase().includes(i.toLowerCase()),le=o==="all"||ie.toLowerCase()===o.toLowerCase();return Z&&le&&(d==="all"||oe===d)});return m.jsxs("div",{className:`min-h-screen transition-all duration-300 ${n==="dark"?"bg-background-dark text-text-dark":"bg-background-light text-text-light"}`,children:[m.jsx(HT,{sidebarOpen:y,setSidebarOpen:x,activeTab:"projects",setActiveTab:()=>{},handleNavigation:I=>{switch(I){case"dashboard":A("/dashboard");break;case"projects":A("/projects");break;case"settings":A("/settings");break;case"help":A("/help");break}},theme:n}),m.jsx(GT,{sidebarOpen:y,setSidebarOpen:x,theme:n,toggleTheme:e,userDropdownOpen:v,setUserDropdownOpen:b,notifications:D,showNotifications:T,setShowNotifications:M,markAsRead:I=>console.log("Marked as read:",I),removeNotification:I=>console.log("Removed notification:",I),getColorClasses:(I,K="default")=>{const ie={default:n==="dark"?"text-white":"text-black",success:"text-green-500",warning:"text-yellow-500",error:"text-red-500"};return ie[K]||ie.default}}),m.jsxs("main",{className:`flex-1 transition-all duration-300 ease-in-out ${y?"lg:ml-[70px]":"lg:ml-[70px] ml-0"} pt-20 pb-8 px-4`,children:[m.jsxs("div",{className:"block sm:hidden mb-6",children:[m.jsxs("h1",{className:"text-xl font-bold",children:["Welcome back, ",((O=_==null?void 0:_.fullName)==null?void 0:O.split(" ")[0])||"User"]}),m.jsx("p",{className:`text-sm ${n==="dark"?"text-text-secondary-dark":"text-text-secondary-light"}`,children:"Manage and track all your security audit projects"})]}),m.jsxs("div",{className:"max-w-screen-xl mx-auto",children:[m.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6 mb-8",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Projects"}),m.jsx("p",{className:`mt-2 ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:"Manage and track all your security audit projects"})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-3 w-full sm:w-auto gap-3",children:[m.jsxs("div",{className:"relative flex-1 min-w-0",children:[m.jsx(yu,{className:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 ${n==="dark"?"text-gray-400":"text-gray-500"} pointer-events-none`}),m.jsx("input",{type:"text",placeholder:"Search projects...",value:i,onChange:I=>s(I.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg border transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${n==="dark"?"bg-surface-dark/50 border-surface-secondary-dark/30 text-text-dark placeholder:text-text-secondary-dark":"bg-white border-gray-200 text-text-light placeholder:text-text-secondary-light"}`})]}),m.jsxs("select",{value:o,onChange:I=>l(I.target.value),className:`px-4 py-2 rounded-lg border ${n==="dark"?"bg-surface-dark/50 border-surface-secondary-dark/30 text-text-dark":"bg-white border-gray-200 text-text-light"}`,children:[m.jsx("option",{value:"all",children:"All Types"}),m.jsx("option",{value:"web",children:"Web Application"}),m.jsx("option",{value:"network",children:"Network Security"}),m.jsx("option",{value:"mobile",children:"Mobile Security"}),m.jsx("option",{value:"cloud",children:"Cloud Infrastructure"})]}),m.jsxs("select",{value:d,onChange:I=>f(I.target.value),className:`px-4 py-2 rounded-lg border ${n==="dark"?"bg-surface-dark/50 border-surface-secondary-dark/30 text-text-dark":"bg-white border-gray-200 text-text-light"}`,children:[m.jsx("option",{value:"all",children:"All Status"}),m.jsx("option",{value:"completed",children:"Completed"}),m.jsx("option",{value:"in-progress",children:"In Progress"}),m.jsx("option",{value:"scheduled",children:"Scheduled"})]})]})]}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:W.map(I=>{const K=z(I.status),ie=I.icon,oe=I.score??0;return m.jsxs(de.div,{whileHover:{y:-4,scale:1.02},className:`group relative ${n==="dark"?"bg-surface-dark/70 border-surface-secondary-dark/30 hover:border-accent-dark/30":"bg-white border border-gray-200 hover:border-blue-300"} backdrop-blur-sm rounded-2xl p-6 border shadow-sm hover:shadow-md transition-all duration-300 cursor-pointer`,onClick:()=>A(`/audit/${I.id}`),children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[m.jsx("div",{className:`p-2 rounded-lg ${n==="dark"?"bg-blue-900/30":"bg-blue-100"} shrink-0`,children:m.jsx(ie,{className:`w-6 h-6 ${n==="dark"?"text-blue-400":"text-blue-600"}`})}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("h3",{className:`font-semibold truncate ${n==="dark"?"text-white":"text-gray-900"} group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors`,children:I.name}),m.jsx("p",{className:`text-sm truncate ${n==="dark"?"text-gray-400":"text-gray-500"}`,children:I.client})]})]}),m.jsxs("div",{className:"relative",children:[m.jsx("button",{onClick:Z=>{Z.stopPropagation(),r(t===I.id?null:I.id)},className:`opacity-0 group-hover:opacity-100 transition-opacity ml-2 p-1 rounded-lg ${n==="dark"?"hover:bg-surface-secondary-dark/50 text-gray-400":"hover:bg-gray-100 text-gray-500"} ${t===I.id?"opacity-100":""}`,children:m.jsx(cT,{className:"w-5 h-5"})}),m.jsx(ca,{children:t===I.id&&m.jsx(de.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:`absolute right-0 top-full mt-2 w-48 z-50 rounded-xl border shadow-2xl backdrop-blur-xl ${n==="dark"?"bg-surface-dark/95 border-surface-secondary-dark/30":"bg-white border-gray-100"}`,onClick:Z=>Z.stopPropagation(),children:m.jsxs("div",{className:"p-1.5",children:[m.jsxs("button",{onClick:()=>{r(null),A(`/audit/${I.id}`)},className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-sm transition-colors ${n==="dark"?"hover:bg-surface-secondary-dark/50":"hover:bg-gray-50"}`,children:[m.jsx(uh,{className:"w-4 h-4"}),m.jsx("span",{children:"View Details"})]}),m.jsxs("button",{onClick:()=>{r(null),alert(`Archiving project ${I.name}`)},className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-sm transition-colors ${n==="dark"?"hover:bg-surface-secondary-dark/50":"hover:bg-gray-50"}`,children:[m.jsx(sT,{className:"w-4 h-4"}),m.jsx("span",{children:"Archive"})]}),m.jsx("div",{className:`my-1.5 border-t ${n==="dark"?"border-surface-secondary-dark/20":"border-gray-100"}`}),m.jsxs("button",{onClick:()=>{r(null),alert(`Deleting project ${I.name}`)},className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-sm transition-colors text-red-500 ${n==="dark"?"hover:bg-red-500/10":"hover:bg-red-50"}`,children:[m.jsx(p_,{className:"w-4 h-4"}),m.jsx("span",{children:"Delete Project"})]})]})})})]})]}),m.jsxs("div",{className:"space-y-3 flex-grow",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:`text-sm ${n==="dark"?"text-gray-400":"text-gray-500"}`,children:"Type"}),m.jsx("span",{className:`text-sm font-medium truncate max-w-[50%] ${n==="dark"?"text-gray-200":"text-gray-800"}`,children:I.type})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:`text-sm ${n==="dark"?"text-gray-400":"text-gray-500"}`,children:"Status"}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(K,{className:`w-4 h-4 ${U(I.status)} shrink-0`}),m.jsx("span",{className:`text-sm font-medium capitalize ${U(I.status)} truncate max-w-[50%]`,children:I.status.replace("-"," ")})]})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:`text-sm ${n==="dark"?"text-gray-400":"text-gray-500"}`,children:"Date"}),m.jsx("span",{className:`text-sm font-medium ${n==="dark"?"text-gray-200":"text-gray-800"} truncate max-w-[50%]`,children:new Date(I.date).toLocaleDateString()})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:`text-sm ${n==="dark"?"text-gray-400":"text-gray-500"}`,children:"Security Score"}),m.jsxs("div",{className:"flex items-center space-x-2 min-w-[120px]",children:[m.jsx("div",{className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:m.jsx("div",{className:`h-full transition-all duration-300 ${oe>=90?"bg-green-500":oe>=70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${oe}%`}})}),m.jsxs("span",{className:`text-sm font-medium ${n==="dark"?"text-gray-200":"text-gray-800"}`,children:[oe,"%"]})]})]})]}),m.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex justify-between text-xs",children:[m.jsxs("div",{className:"flex items-center space-x-1 min-w-[20px]",children:[m.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),m.jsx("span",{children:I.vulnerabilities.critical})]}),m.jsxs("div",{className:"flex items-center space-x-1 min-w-[20px]",children:[m.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),m.jsx("span",{children:I.vulnerabilities.high})]}),m.jsxs("div",{className:"flex items-center space-x-1 min-w-[20px]",children:[m.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),m.jsx("span",{children:I.vulnerabilities.medium})]}),m.jsxs("div",{className:"flex items-center space-x-1 min-w-[20px]",children:[m.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),m.jsx("span",{children:I.vulnerabilities.low})]})]})]},I.id)})}),W.length===0&&m.jsxs("div",{className:"text-center py-12",children:[m.jsx(Kf,{className:"w-16 h-16 mx-auto text-gray-400"}),m.jsx("h3",{className:"text-lg font-medium mt-4",children:d==="in-progress"?"No active audits found":d!=="all"?`No ${d.replace("-"," ")} audits found`:"No audits found"}),m.jsx("p",{className:`mt-1 ${n==="dark"?"text-gray-400":"text-gray-500"}`,children:i?`We couldn't find any results matching "${i}"`:"Try adjusting your filters to see more results"})]})]})]})]})},l8=()=>{const{theme:n,toggleTheme:e}=da(),[t,r]=V.useState("profile"),[i,s]=V.useState(!1),[o,l]=V.useState(!1),[d,f]=V.useState(!1),[p,y]=V.useState(!1),[x,v]=V.useState(!1),[b,T]=V.useState({fullName:"Test User",email:"test@example.com",company:"BCBUZZ Technologies",phone:"+1 (555) 123-4567",timezone:"UTC-5 (Eastern Time)",language:"English",avatar:null}),[M,_]=V.useState({currentPassword:"",newPassword:"",confirmPassword:"",twoFactorEnabled:!0,loginAlerts:!0,sessionTimeout:"30",ipWhitelist:!0,deviceTracking:!0}),[N,A]=V.useState({emailNotifications:!0,pushNotifications:!0,smsNotifications:!1,scanCompleted:!0,vulnerabilityFound:!0,weeklyReports:!0,securityAlerts:!0,maintenanceUpdates:!1,marketingEmails:!1,auditReminders:!0,teamUpdates:!0}),[R,D]=V.useState({apiKey:"bcbuzz_sk_1234567890abcdef",webhookUrl:"https://your-app.com/webhook",rateLimitEnabled:!0,ipWhitelist:"192.168.1.0/24, 10.0.0.0/8",apiVersion:"v2",maxRequests:"1000"}),[U,z]=V.useState({theme:n,accentColor:"blue",fontSize:"medium",compactMode:!1,animations:!0,highContrast:!1}),W=oe=>{v(!0),setTimeout(()=>v(!1),3e3)},O=()=>{const oe="bcbuzz_sk_"+Math.random().toString(36).substring(2,18);D({...R,apiKey:oe})},I=oe=>{var le;const Z=(le=oe.target.files)==null?void 0:le[0];Z&&T({...b,avatar:Z})},K=[{id:"profile",label:"Profile",icon:Ol,color:"from-blue-500 to-cyan-500"},{id:"security",label:"Security",icon:Kr,color:"from-red-500 to-pink-500"},{id:"notifications",label:"Notifications",icon:up,color:"from-yellow-500 to-orange-500"},{id:"api",label:"API & Integrations",icon:ob,color:"from-purple-500 to-indigo-500"},{id:"appearance",label:"Appearance",icon:lb,color:"from-green-500 to-emerald-500"},{id:"data",label:"Data & Privacy",icon:Vv,color:"from-gray-500 to-slate-500"}],ie=[{name:"Blue",value:"blue",color:"bg-blue-500"},{name:"Purple",value:"purple",color:"bg-purple-500"},{name:"Green",value:"green",color:"bg-green-500"},{name:"Red",value:"red",color:"bg-red-500"},{name:"Orange",value:"orange",color:"bg-orange-500"},{name:"Pink",value:"pink",color:"bg-pink-500"}];return m.jsxs("div",{className:"p-6 space-y-8",children:[m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[m.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-secondary-dark to-accent-dark dark:from-secondary-light dark:to-accent-light bg-clip-text text-transparent mb-4",children:"Settings"}),m.jsx("p",{className:"text-lg text-text-secondary-light dark:text-text-secondary-dark max-w-2xl mx-auto",children:"Customize your experience and manage your account preferences"})]}),x&&m.jsxs(de.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:"fixed top-4 right-4 z-50 bg-green-500/20 border border-green-500/30 text-green-400 px-6 py-4 rounded-xl flex items-center gap-3 backdrop-blur-xl",children:[m.jsx(ki,{className:"w-5 h-5"}),m.jsx("span",{className:"font-medium",children:"Settings saved successfully!"}),m.jsx("button",{onClick:()=>v(!1),children:m.jsx(Ua,{className:"w-4 h-4"})})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[m.jsx(de.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"lg:col-span-1",children:m.jsx("div",{className:"bg-white/10 dark:bg-gray-800/30 backdrop-blur-xl rounded-2xl p-6 border border-white/20 dark:border-gray-700/30 sticky top-6",children:m.jsx("nav",{className:"space-y-3",children:K.map((oe,Z)=>{const le=oe.icon,Q=t===oe.id;return m.jsxs(de.button,{onClick:()=>r(oe.id),className:`w-full flex items-center gap-4 px-4 py-4 rounded-xl text-left transition-all duration-300 group relative overflow-hidden ${Q?"bg-gradient-to-r from-secondary-dark/20 to-accent-dark/20 text-secondary-dark dark:text-secondary-light border border-secondary-dark/30 dark:border-secondary-light/30":"text-gray-600 dark:text-gray-400 hover:bg-gray-100/50 dark:hover:bg-gray-700/30 hover:text-gray-900 dark:hover:text-gray-100"}`,whileHover:{scale:1.02},whileTap:{scale:.98},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:Z*.1},children:[Q&&m.jsx(de.div,{layoutId:"activeTabBg",className:`absolute inset-0 bg-gradient-to-r ${oe.color} opacity-10 rounded-xl`,initial:!1,transition:{type:"spring",bounce:.2,duration:.6}}),m.jsx("div",{className:`p-2 rounded-lg transition-all duration-300 ${Q?`bg-gradient-to-r ${oe.color} text-white shadow-lg`:"bg-gray-100 dark:bg-gray-700 group-hover:bg-gray-200 dark:group-hover:bg-gray-600"}`,children:m.jsx(le,{className:"w-5 h-5"})}),m.jsx("span",{className:"font-medium relative z-10",children:oe.label}),Q&&m.jsx(de.div,{layoutId:"activeTabIndicator",className:"ml-auto w-2 h-2 bg-secondary-dark dark:bg-secondary-light rounded-full",initial:!1,transition:{type:"spring",bounce:.2,duration:.6}})]},oe.id)})})})}),m.jsx(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"lg:col-span-3",children:m.jsxs("div",{className:"bg-white/10 dark:bg-gray-800/30 backdrop-blur-xl rounded-2xl p-8 border border-white/20 dark:border-gray-700/30",children:[t==="profile"&&m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[m.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[m.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-r from-blue-500 to-cyan-500 text-white",children:m.jsx(Ol,{className:"w-6 h-6"})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Profile Information"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your personal information and preferences"})]})]}),m.jsxs("div",{className:"flex items-center gap-6 p-6 bg-gray-50/50 dark:bg-gray-800/50 rounded-xl border border-gray-200/50 dark:border-gray-700/50",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-secondary-dark to-accent-dark rounded-full flex items-center justify-center text-white text-2xl font-bold",children:b.fullName.split(" ").map(oe=>oe[0]).join("")}),m.jsx("button",{className:"absolute -bottom-1 -right-1 p-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-colors",children:m.jsx(cb,{className:"w-4 h-4"})})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Profile Picture"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Upload a new avatar for your profile"}),m.jsx("input",{type:"file",accept:"image/*",onChange:I,className:"hidden",id:"avatar-upload"}),m.jsxs("label",{htmlFor:"avatar-upload",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors cursor-pointer",children:[m.jsx(cb,{className:"w-4 h-4"}),"Choose File"]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Full Name"}),m.jsx("input",{type:"text",value:b.fullName,onChange:oe=>T({...b,fullName:oe.target.value}),className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-xl bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all backdrop-blur-sm"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email Address"}),m.jsx("input",{type:"email",value:b.email,onChange:oe=>T({...b,email:oe.target.value}),className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-xl bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all backdrop-blur-sm"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Company"}),m.jsx("input",{type:"text",value:b.company,onChange:oe=>T({...b,company:oe.target.value}),className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-xl bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all backdrop-blur-sm"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Phone Number"}),m.jsx("input",{type:"tel",value:b.phone,onChange:oe=>T({...b,phone:oe.target.value}),className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-xl bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all backdrop-blur-sm"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Timezone"}),m.jsxs("select",{value:b.timezone,onChange:oe=>T({...b,timezone:oe.target.value}),className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-xl bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all backdrop-blur-sm",children:[m.jsx("option",{value:"UTC-5 (Eastern Time)",children:"UTC-5 (Eastern Time)"}),m.jsx("option",{value:"UTC-6 (Central Time)",children:"UTC-6 (Central Time)"}),m.jsx("option",{value:"UTC-7 (Mountain Time)",children:"UTC-7 (Mountain Time)"}),m.jsx("option",{value:"UTC-8 (Pacific Time)",children:"UTC-8 (Pacific Time)"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Language"}),m.jsxs("select",{value:b.language,onChange:oe=>T({...b,language:oe.target.value}),className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-xl bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all backdrop-blur-sm",children:[m.jsx("option",{value:"English",children:"English"}),m.jsx("option",{value:"Spanish",children:"Spanish"}),m.jsx("option",{value:"French",children:"French"}),m.jsx("option",{value:"German",children:"German"})]})]})]}),m.jsxs(de.button,{onClick:()=>W(),className:"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white rounded-xl transition-all duration-300 font-medium shadow-lg hover:shadow-xl",whileHover:{scale:1.02},whileTap:{scale:.98},children:[m.jsx(To,{className:"w-5 h-5"}),"Save Changes"]})]}),t==="security"&&m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[m.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[m.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-r from-red-500 to-pink-500 text-white",children:m.jsx(Kr,{className:"w-6 h-6"})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Security Settings"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Control your account security and authentication methods"})]})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"p-6 bg-gray-50/50 dark:bg-gray-800/50 rounded-xl border border-gray-200/50 dark:border-gray-700/50",children:[m.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Change Password"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-sm font-medium",children:"Current Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:o?"text":"password",value:M.currentPassword,onChange:oe=>_({...M,currentPassword:oe.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent"}),m.jsx("button",{onClick:()=>l(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:o?m.jsx(bx,{className:"w-4 h-4"}):m.jsx(uh,{className:"w-4 h-4"})})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-sm font-medium",children:"New Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:d?"text":"password",value:M.newPassword,onChange:oe=>_({...M,newPassword:oe.target.value}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent"}),m.jsx("button",{onClick:()=>f(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:d?m.jsx(bx,{className:"w-4 h-4"}):m.jsx(uh,{className:"w-4 h-4"})})]})]})]})]}),m.jsxs("div",{className:"p-6 bg-gray-50/50 dark:bg-gray-800/50 rounded-xl border border-gray-200/50 dark:border-gray-700/50 flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold",children:"Two-Factor Authentication"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add an extra layer of security to your account"})]}),m.jsx("button",{onClick:()=>_({...M,twoFactorEnabled:!M.twoFactorEnabled}),className:`w-12 h-6 rounded-full transition-colors relative ${M.twoFactorEnabled?"bg-secondary-dark":"bg-gray-400"}`,children:m.jsx(de.div,{animate:{x:M.twoFactorEnabled?26:2},className:"absolute top-1 left-0 w-4 h-4 bg-white rounded-full shadow-sm"})})]})]}),m.jsxs(de.button,{onClick:()=>W(),className:"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white rounded-xl transition-all duration-300 font-medium shadow-lg",whileHover:{scale:1.02},whileTap:{scale:.98},children:[m.jsx(To,{className:"w-5 h-5"}),"Save Security Preferences"]})]}),t==="notifications"&&m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[m.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[m.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-r from-yellow-500 to-orange-500 text-white",children:m.jsx(up,{className:"w-6 h-6"})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Email & Push Notifications"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Choose what you want to be notified about"})]})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{key:"emailNotifications",label:"Email Notifications",icon:X0},{key:"pushNotifications",label:"Push Notifications",icon:S0},{key:"scanCompleted",label:"Scan Completed",icon:ki},{key:"vulnerabilityFound",label:"New Vulnerability Alert",icon:pT}].map(oe=>m.jsxs("div",{className:"p-4 bg-gray-50/50 dark:bg-gray-800/50 rounded-xl border border-gray-200/50 dark:border-gray-700/50 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-2 rounded-lg bg-white/50 dark:bg-gray-700/50",children:m.jsx(oe.icon,{className:"w-4 h-4"})}),m.jsx("span",{className:"font-medium",children:oe.label})]}),m.jsx("button",{onClick:()=>A({...N,[oe.key]:!N[oe.key]}),className:`w-10 h-5 rounded-full transition-colors relative ${N[oe.key]?"bg-secondary-dark":"bg-gray-400"}`,children:m.jsx(de.div,{animate:{x:N[oe.key]?20:2},className:"absolute top-0.5 left-0 w-4 h-4 bg-white rounded-full"})})]},oe.key))}),m.jsxs(de.button,{onClick:()=>W(),className:"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white rounded-xl transition-all duration-300 font-medium shadow-lg",whileHover:{scale:1.02},whileTap:{scale:.98},children:[m.jsx(To,{className:"w-5 h-5"}),"Save Notifications"]})]}),t==="api"&&m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[m.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[m.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-r from-purple-500 to-indigo-500 text-white",children:m.jsx(ob,{className:"w-6 h-6"})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"API & Integrations"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your API keys and webhook configurations"})]})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"p-6 bg-gray-50/50 dark:bg-gray-800/50 rounded-xl border border-gray-200/50 dark:border-gray-700/50",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h3",{className:"font-semibold",children:"API Key"}),m.jsxs("button",{onClick:O,className:"text-sm text-secondary-dark hover:underline flex items-center gap-1",children:[m.jsx(mT,{className:"w-3 h-3"}),"Generate New Key"]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{type:i?"text":"password",value:R.apiKey,readOnly:!0,className:"flex-1 p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100/50 dark:bg-gray-700/50"}),m.jsx("button",{onClick:()=>s(!i),className:"p-3 border border-gray-300 dark:border-gray-600 rounded-lg",children:i?m.jsx(bx,{className:"w-4 h-4"}):m.jsx(uh,{className:"w-4 h-4"})})]})]}),m.jsxs("div",{className:"p-6 bg-gray-50/50 dark:bg-gray-800/50 rounded-xl border border-gray-200/50 dark:border-gray-700/50",children:[m.jsx("h3",{className:"font-semibold mb-4",children:"Webhook URL"}),m.jsx("input",{type:"url",value:R.webhookUrl,onChange:oe=>D({...R,webhookUrl:oe.target.value}),placeholder:"https://your-domain.com/webhook",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent"})]})]}),m.jsxs(de.button,{onClick:()=>W(),className:"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white rounded-xl transition-all duration-300 font-medium shadow-lg",whileHover:{scale:1.02},whileTap:{scale:.98},children:[m.jsx(To,{className:"w-5 h-5"}),"Save API Settings"]})]}),t==="appearance"&&m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[m.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[m.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 text-white",children:m.jsx(lb,{className:"w-6 h-6"})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Appearance"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Customize look and feel of your dashboard"})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"font-semibold",children:"Interface Theme"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("button",{onClick:()=>n!=="light"&&e(),className:`p-4 rounded-xl border-2 transition-all ${n==="light"?"border-secondary-dark bg-secondary-dark/5":"border-gray-200 dark:border-gray-700"}`,children:[m.jsx(jp,{className:"w-6 h-6 mx-auto mb-2 text-yellow-500"}),m.jsx("span",{className:"text-sm font-medium",children:"Light Mode"})]}),m.jsxs("button",{onClick:()=>n!=="dark"&&e(),className:`p-4 rounded-xl border-2 transition-all ${n==="dark"?"border-secondary-dark bg-secondary-dark/5":"border-gray-200 dark:border-gray-700"}`,children:[m.jsx(Bp,{className:"w-6 h-6 mx-auto mb-2 text-indigo-500"}),m.jsx("span",{className:"text-sm font-medium",children:"Dark Mode"})]})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"font-semibold",children:"Accent Color"}),m.jsx("div",{className:"flex flex-wrap gap-3",children:ie.map(oe=>m.jsx("button",{onClick:()=>z({...U,accentColor:oe.value}),className:`w-10 h-10 rounded-full ${oe.color} relative border-2 ${U.accentColor===oe.value?"border-white ring-2 ring-secondary-dark":"border-transparent"}`,children:U.accentColor===oe.value&&m.jsx(ki,{className:"w-4 h-4 text-white absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"})},oe.value))})]})]}),m.jsxs(de.button,{onClick:()=>W(),className:"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white rounded-xl transition-all duration-300 font-medium shadow-lg",whileHover:{scale:1.02},whileTap:{scale:.98},children:[m.jsx(To,{className:"w-5 h-5"}),"Save Appearance"]})]}),t==="data"&&m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[m.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[m.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-r from-gray-500 to-slate-500 text-white",children:m.jsx(Vv,{className:"w-6 h-6"})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Data & Privacy"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your data and privacy preferences"})]})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"p-6 bg-gray-50/50 dark:bg-gray-800/50 rounded-xl border border-gray-200/50 dark:border-gray-700/50",children:[m.jsx("h3",{className:"font-semibold mb-2",children:"Export Data"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Download all your audit reports and account activity in JSON or CSV format."}),m.jsxs("button",{onClick:()=>alert("Exporting data..."),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[m.jsx(lT,{className:"w-4 h-4"}),"Download Export"]})]}),m.jsxs("div",{className:"p-6 bg-red-500/5 rounded-xl border border-red-500/20",children:[m.jsx("h3",{className:"font-semibold text-red-500 mb-2",children:"Delete Account"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Permanently delete your account and all associated data. This action cannot be undone."}),m.jsxs("button",{onClick:()=>confirm("Are you sure you want to delete your account?")&&alert("Account deleted"),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",children:[m.jsx(p_,{className:"w-4 h-4"}),"Delete My Account"]})]})]})]})]})})]})]})},c8=()=>m.jsx(Su,{children:m.jsx(l8,{})}),u8=()=>{const[n,e]=V.useState([]),[t,r]=V.useState([]),[i,s]=V.useState(""),[o,l]=V.useState("all"),[d,f]=V.useState(null),[p,y]=V.useState(!1),[x,v]=V.useState({totalRequests:0,pendingRequests:0,approvedRequests:0,activeAudits:0});V.useEffect(()=>{(async()=>{try{const R=await Pl.get("companies/pending");e(R.data),r(R.data)}catch(R){console.error("Failed to fetch audit requests:",R)}})()},[]),V.useEffect(()=>{(async()=>{try{let R="companies/pending";const D=o!=="all"?{status:o}:{},U=await Pl.get(R,{params:D});e(U.data),r(U.data)}catch(R){console.error("Failed to fetch audit requests:",R)}})()},[o]),V.useEffect(()=>{(async()=>{try{const R=await Pl.get("companies/stats");v(R.data)}catch(R){console.error("Failed to fetch statistics:",R)}})()},[]),V.useEffect(()=>{let A=n;i&&(A=A.filter(R=>R.companyName.toLowerCase().includes(i.toLowerCase())||R.contactName.toLowerCase().includes(i.toLowerCase())||R.contactEmail.toLowerCase().includes(i.toLowerCase()))),o!=="all"&&(A=A.filter(R=>R.status===o)),r(A)},[i,o,n]);const b=(A,R)=>{e(D=>D.map(U=>U.id===A?{...U,status:R}:U))},T=A=>{switch(A){case"pending":return"text-yellow-600 bg-yellow-100 dark:text-yellow-400 dark:bg-yellow-900/30";case"approved":return"text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/30";case"rejected":return"text-red-600 bg-red-100 dark:text-red-400 dark:bg-red-900/30";case"in-progress":return"text-blue-600 bg-blue-100 dark:text-blue-400 dark:bg-blue-900/30";case"completed":return"text-purple-600 bg-purple-100 dark:text-purple-400 dark:bg-purple-900/30";default:return"text-gray-600 bg-gray-100 dark:text-gray-400 dark:bg-gray-900/30"}},M=[{label:"Total Requests",value:x.totalRequests.toString(),icon:dp,color:"info",change:"+12%"},{label:"Pending Review",value:x.pendingRequests.toString(),icon:f_,color:"warning",change:"+5%"},{label:"Approved",value:x.approvedRequests.toString(),icon:ki,color:"success",change:"+18%"},{label:"Active Audits",value:x.activeAudits.toString(),icon:Kr,color:"info",change:"+8%"}],_=async()=>{try{if(d){const A=await Pl.post("companies/verify",{companyId:d.id,action:"approve",notes:""});b(d.id,"approved"),y(!1)}}catch(A){console.error("Failed to fetch audit requests:",A)}},N=async()=>{try{if(d){const A=await Pl.post("companies/verify",{companyId:d.id,action:"reject",notes:""});b(d.id,"rejected"),y(!1)}}catch(A){console.error("Failed to fetch audit requests:",A)}};return m.jsxs("div",{className:"p-6 space-y-6",children:[m.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Admin Dashboard"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage audit requests and oversee security operations"})]})}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:M.map((A,R)=>{const D=A.icon;return m.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:R*.1},className:"bg-white/10 dark:bg-gray-800/30 backdrop-blur-xl rounded-2xl p-6 border border-white/20 dark:border-gray-700/30",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:A.label}),m.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:A.value}),m.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:A.change})]}),m.jsx("div",{className:"p-3 rounded-xl bg-blue-500/20 text-blue-600 dark:text-blue-400",children:m.jsx(D,{className:"w-6 h-6"})})]})},R)})}),m.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/10 dark:bg-gray-800/30 backdrop-blur-xl rounded-2xl p-6 border border-white/20 dark:border-gray-700/30",children:m.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[m.jsxs("div",{className:"flex-1 relative",children:[m.jsx(yu,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),m.jsx("input",{type:"text",placeholder:"Search requests...",value:i,onChange:A=>s(A.target.value),className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300/50 dark:border-gray-600/50 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),m.jsxs("select",{value:o,onChange:A=>l(A.target.value),className:"px-4 py-3 rounded-xl border border-gray-300/50 dark:border-gray-600/50 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[m.jsx("option",{value:"all",children:"All Status"}),m.jsx("option",{value:"pending",children:"Pending"}),m.jsx("option",{value:"approved",children:"Approved"}),m.jsx("option",{value:"rejected",children:"Rejected"}),m.jsx("option",{value:"in-progress",children:"In Progress"}),m.jsx("option",{value:"completed",children:"Completed"})]})]})}),m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/10 dark:bg-gray-800/30 backdrop-blur-xl rounded-2xl border border-white/20 dark:border-gray-700/30 overflow-hidden",children:[m.jsx("div",{className:"p-6 border-b border-gray-200/50 dark:border-gray-700/50",children:m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Audit Requests"})}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-gray-50/50 dark:bg-gray-800/50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 dark:text-white",children:"Company"}),m.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 dark:text-white",children:"Contact"}),m.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 dark:text-white",children:"Type"}),m.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 dark:text-white",children:"Status"}),m.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 dark:text-white",children:"Submitted"}),m.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-900 dark:text-white",children:"Actions"})]})}),m.jsx("tbody",{className:"divide-y divide-gray-200/50 dark:divide-gray-700/50",children:t.map(A=>m.jsxs("tr",{className:"hover:bg-gray-50/30 dark:hover:bg-gray-800/30 transition-colors",children:[m.jsx("td",{className:"px-6 py-4",children:m.jsxs("div",{children:[m.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:A.companyName}),m.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:A.targetUrl})]})}),m.jsx("td",{className:"px-6 py-4",children:m.jsxs("div",{children:[m.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:A.contactName}),m.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:A.contactEmail})]})}),m.jsx("td",{className:"px-6 py-4",children:m.jsx("span",{className:"capitalize text-gray-900 dark:text-white",children:A.auditServices})}),m.jsx("td",{className:"px-6 py-4",children:m.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium capitalize ${T(A.status)}`,children:A.status})}),m.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:new Date(A.createdAt).toLocaleString("en-US",{dateStyle:"long",timeStyle:"short"})}),m.jsx("td",{className:"px-6 py-4",children:m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("button",{onClick:()=>{f(A),y(!0)},className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors",children:m.jsx(uh,{className:"w-4 h-4"})})})})]},A.id))})]})})]}),p&&d&&m.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>y(!1),children:m.jsxs(de.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",onClick:A=>A.stopPropagation(),children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Audit Request Details"}),m.jsx("button",{onClick:()=>y(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:m.jsx(Ua,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Company Information"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Qg,{className:"w-5 h-5 text-gray-400"}),m.jsx("span",{className:"text-gray-900 dark:text-white",children:d.companyName})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(ph,{className:"w-5 h-5 text-gray-400"}),m.jsx("span",{className:"text-gray-900 dark:text-white",children:d.targetUrl})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(nD,{className:"w-5 h-5 text-gray-400"}),m.jsx("span",{className:"text-gray-900 dark:text-white",children:d.budget})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Contact Information"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(hp,{className:"w-5 h-5 text-gray-400"}),m.jsx("span",{className:"text-gray-900 dark:text-white",children:d.contactName})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(X0,{className:"w-5 h-5 text-gray-400"}),m.jsx("span",{className:"text-gray-900 dark:text-white",children:d.contactEmail})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(hT,{className:"w-5 h-5 text-gray-400"}),m.jsx("span",{className:"text-gray-900 dark:text-white",children:d.contactPhone})]})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Audit Details"}),m.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:m.jsx("p",{className:"text-gray-900 dark:text-white",children:d.description})})]}),m.jsx("div",{className:"flex items-center gap-4",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(zp,{className:"w-5 h-5 text-gray-400"}),m.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Preferred Start:"," ",new Date(d.createdAt).toLocaleString("en-US",{dateStyle:"long",timeStyle:"short"})]})]})}),d.status==="pending"&&m.jsxs("div",{className:"flex gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[m.jsx("button",{onClick:_,className:"flex-1 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",children:"Approve Request"}),m.jsx("button",{onClick:N,className:"flex-1 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",children:"Reject Request"})]})]})]})})]})},d8=()=>m.jsx(Su,{userRole:"admin",children:m.jsx(u8,{})}),h8=()=>{const{theme:n}=da(),[e,t]=V.useState("users"),[r,i]=V.useState(!1),[s,o]=V.useState({maintenanceMode:!1,autoUpdates:!0,logRetention:"90",sessionTimeout:"30"}),[l,d]=V.useState({passwordPolicy:"strong",twoFactorRequired:!0,ipWhitelistEnabled:!0,failedAttempts:"5",lockoutDuration:"15"}),f=[{id:"users",label:"User Management",icon:hp,color:"from-blue-500 to-cyan-500"},{id:"policies",label:"Security Policies",icon:Kr,color:"from-red-500 to-pink-500"},{id:"system",label:"System Settings",icon:Vv,color:"from-purple-500 to-indigo-500"},{id:"logs",label:"Audit Logs",icon:Zf,color:"from-green-500 to-emerald-500"},{id:"notifications",label:"Notifications",icon:up,color:"from-yellow-500 to-orange-500"}],p=()=>{i(!0),setTimeout(()=>i(!1),3e3)};return m.jsx(Su,{userRole:"admin",children:m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`min-h-screen p-6 ${n==="dark"?"bg-background-dark text-text-dark":"bg-background-light text-text-light"}`,children:[m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[m.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-secondary-dark to-accent-dark dark:from-secondary-light dark:to-accent-light bg-clip-text text-transparent",children:"Admin Settings"}),m.jsx("p",{className:`mt-2 ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:"Manage system-wide configurations, policies, and user access"})]}),r&&m.jsxs(de.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-xl flex items-center gap-3 backdrop-blur-xl border ${n==="dark"?"bg-green-900/20 border-green-800/30 text-green-400":"bg-green-50 border-green-200 text-green-700"} shadow-lg`,children:[m.jsx(ki,{className:"w-5 h-5"}),m.jsx("span",{children:"Settings saved successfully!"}),m.jsx("button",{onClick:()=>i(!1),className:"ml-auto",children:m.jsx(Ua,{className:"w-4 h-4"})})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[m.jsx(de.nav,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`lg:col-span-1 mb-6 lg:mb-0 ${n==="dark"?"bg-surface-dark/70 rounded-xl p-4":"bg-white rounded-xl p-4 shadow-sm"}`,children:m.jsx("ul",{className:"space-y-2",children:f.map(y=>m.jsx("li",{children:m.jsxs("button",{onClick:()=>t(y.id),className:`flex items-center w-full space-x-3 px-4 py-3 rounded-xl transition-all duration-200 ${e===y.id?"bg-gradient-to-r from-secondary-dark to-accent-dark text-white":n==="dark"?"hover:bg-surface-secondary-dark/50 text-text-secondary-dark":"hover:bg-gray-100 text-text-secondary-light"}`,children:[m.jsx(y.icon,{className:"w-5 h-5"}),m.jsx("span",{children:y.label})]})},y.id))})}),m.jsxs(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:`lg:col-span-4 ${n==="dark"?"bg-surface-dark/70 rounded-xl p-6":"bg-white rounded-xl p-6 shadow-md"}`,children:[e==="users"&&m.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6",children:[m.jsx("h2",{className:"text-2xl font-semibold",children:"User Management"}),m.jsxs("div",{className:`p-4 rounded-xl ${n==="dark"?"bg-surface-secondary-dark/50":"bg-gray-50"}`,children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h3",{className:"font-medium",children:"User Roles & Permissions"}),m.jsx(de.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-4 py-2 rounded-lg ${n==="dark"?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600 text-white"} text-sm font-medium`,children:"Add New Role"})]}),m.jsxs("table",{className:"w-full text-left",children:[m.jsx("thead",{children:m.jsxs("tr",{className:`${n==="dark"?"text-gray-400":"text-gray-500"}`,children:[m.jsx("th",{className:"py-2",children:"Role"}),m.jsx("th",{className:"py-2",children:"Permissions"}),m.jsx("th",{className:"py-2",children:"Actions"})]})}),m.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[m.jsxs("tr",{children:[m.jsx("td",{className:"py-3 font-medium",children:"Admin"}),m.jsx("td",{className:"py-3",children:"All Access"}),m.jsxs("td",{className:"py-3",children:[m.jsx("button",{className:`mr-2 ${n==="dark"?"text-yellow-400":"text-yellow-600"}`,children:"Edit"}),m.jsx("button",{className:`${n==="dark"?"text-red-400":"text-red-600"}`,children:"Delete"})]})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"py-3 font-medium",children:"Tester"}),m.jsx("td",{className:"py-3",children:"Scan, Report, Dashboard"}),m.jsxs("td",{className:"py-3",children:[m.jsx("button",{className:`mr-2 ${n==="dark"?"text-yellow-400":"text-yellow-600"}`,children:"Edit"}),m.jsx("button",{className:`${n==="dark"?"text-red-400":"text-red-600"}`,children:"Delete"})]})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"py-3 font-medium",children:"User"}),m.jsx("td",{className:"py-3",children:"View Projects, Request Audit"}),m.jsxs("td",{className:"py-3",children:[m.jsx("button",{className:`mr-2 ${n==="dark"?"text-yellow-400":"text-yellow-600"}`,children:"Edit"}),m.jsx("button",{className:`${n==="dark"?"text-red-400":"text-red-600"}`,children:"Delete"})]})]})]})]})]}),m.jsxs(de.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:p,className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-xl shadow-lg hover:shadow-xl transition-all",children:[m.jsx(To,{className:"w-5 h-5"}),m.jsx("span",{children:"Save Changes"})]})]},"users"),e==="policies"&&m.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6",children:[m.jsx("h2",{className:"text-2xl font-semibold",children:"Security Policies"}),m.jsxs("div",{className:`p-4 rounded-xl ${n==="dark"?"bg-surface-secondary-dark/50":"bg-gray-50"} space-y-4`,children:[m.jsx("label",{className:"block text-sm font-medium",children:"Password Policy"}),m.jsxs("select",{value:l.passwordPolicy,onChange:y=>d({...l,passwordPolicy:y.target.value}),className:`w-full px-4 py-3 rounded-xl border ${n==="dark"?"bg-surface-dark/50 border-surface-secondary-dark/30 text-text-dark":"bg-white border-gray-200 text-text-light"}`,children:[m.jsx("option",{value:"basic",children:"Basic"}),m.jsx("option",{value:"medium",children:"Medium"}),m.jsx("option",{value:"strong",children:"Strong"})]}),m.jsxs("div",{className:"flex items-center mt-4",children:[m.jsx("input",{type:"checkbox",checked:l.twoFactorRequired,onChange:()=>d({...l,twoFactorRequired:!l.twoFactorRequired}),className:"mr-3"}),m.jsx("label",{children:"Require Two-Factor Authentication"})]}),m.jsxs("div",{className:"flex items-center mt-2",children:[m.jsx("input",{type:"checkbox",checked:l.ipWhitelistEnabled,onChange:()=>d({...l,ipWhitelistEnabled:!l.ipWhitelistEnabled}),className:"mr-3"}),m.jsx("label",{children:"Enable IP Whitelisting"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Failed Login Attempts Allowed"}),m.jsx("input",{type:"number",min:"1",max:"10",value:l.failedAttempts,onChange:y=>d({...l,failedAttempts:y.target.value}),className:`w-full px-4 py-2 rounded-xl border ${n==="dark"?"bg-surface-dark/50 border-surface-secondary-dark/30":"bg-white border-gray-200"}`})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Lockout Duration (minutes)"}),m.jsx("input",{type:"number",min:"5",max:"120",value:l.lockoutDuration,onChange:y=>d({...l,lockoutDuration:y.target.value}),className:`w-full px-4 py-2 rounded-xl border ${n==="dark"?"bg-surface-dark/50 border-surface-secondary-dark/30":"bg-white border-gray-200"}`})]})]})]}),m.jsxs(de.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:p,className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-xl shadow-lg hover:shadow-xl transition-all",children:[m.jsx(To,{className:"w-5 h-5"}),m.jsx("span",{children:"Update Policies"})]})]},"policies"),e==="system"&&m.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6",children:[m.jsx("h2",{className:"text-2xl font-semibold",children:"System Configuration"}),m.jsxs("div",{className:`p-4 rounded-xl ${n==="dark"?"bg-surface-secondary-dark/50":"bg-gray-50"} space-y-4`,children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",checked:s.maintenanceMode,onChange:()=>o({...s,maintenanceMode:!s.maintenanceMode}),className:"mr-3"}),m.jsx("label",{children:"Maintenance Mode"})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",checked:s.autoUpdates,onChange:()=>o({...s,autoUpdates:!s.autoUpdates}),className:"mr-3"}),m.jsx("label",{children:"Automatic System Updates"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Log Retention (days)"}),m.jsx("input",{type:"number",min:"30",max:"365",value:s.logRetention,onChange:y=>o({...s,logRetention:y.target.value}),className:`w-full px-4 py-2 rounded-xl border ${n==="dark"?"bg-surface-dark/50 border-surface-secondary-dark/30":"bg-white border-gray-200"}`})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Session Timeout (minutes)"}),m.jsx("input",{type:"number",min:"5",max:"120",value:s.sessionTimeout,onChange:y=>o({...s,sessionTimeout:y.target.value}),className:`w-full px-4 py-2 rounded-xl border ${n==="dark"?"bg-surface-dark/50 border-surface-secondary-dark/30":"bg-white border-gray-200"}`})]})]})]}),m.jsxs(de.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:p,className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-xl shadow-lg hover:shadow-xl transition-all",children:[m.jsx(To,{className:"w-5 h-5"}),m.jsx("span",{children:"Apply System Settings"})]})]},"system"),e==="logs"&&m.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6",children:[m.jsx("h2",{className:"text-2xl font-semibold",children:"Audit Logs"}),m.jsxs("div",{className:`p-4 rounded-xl ${n==="dark"?"bg-surface-secondary-dark/50":"bg-gray-50"} space-y-4`,children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{children:"Export Logs"}),m.jsx(de.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-4 py-2 rounded-xl ${n==="dark"?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600 text-white"} text-sm font-medium`,children:"Export All"})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{children:"Clear Logs Older Than"}),m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("input",{type:"number",min:"7",max:"365",className:`w-20 px-3 py-2 rounded-xl border ${n==="dark"?"bg-surface-dark/50 border-surface-secondary-dark/30":"bg-white border-gray-200"}`}),m.jsx("span",{children:"days"}),m.jsx(de.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-4 py-2 rounded-xl ${n==="dark"?"bg-red-600 hover:bg-red-700":"bg-red-500 hover:bg-red-600 text-white"} text-sm font-medium`,children:"Clear Logs"})]})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{children:"Download Last 30 Days"}),m.jsx(de.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-4 py-2 rounded-xl ${n==="dark"?"bg-cyan-600 hover:bg-cyan-700":"bg-cyan-500 hover:bg-cyan-600 text-white"} text-sm font-medium`,children:"Download CSV"})]})]})]},"logs"),e==="notifications"&&m.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-6",children:[m.jsx("h2",{className:"text-2xl font-semibold",children:"Notification Preferences"}),m.jsxs("div",{className:`p-4 rounded-xl ${n==="dark"?"bg-surface-secondary-dark/50":"bg-gray-50"} space-y-4`,children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",defaultChecked:!0,className:"mr-3"}),m.jsx("label",{children:"Email Notifications"})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",defaultChecked:!0,className:"mr-3"}),m.jsx("label",{children:"Slack Integration"})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",className:"mr-3"}),m.jsx("label",{children:"Push Notifications"})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",defaultChecked:!0,className:"mr-3"}),m.jsx("label",{children:"Send Weekly Reports"})]})]}),m.jsxs(de.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:p,className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-xl shadow-lg hover:shadow-xl transition-all",children:[m.jsx(To,{className:"w-5 h-5"}),m.jsx("span",{children:"Save Notification Rules"})]})]},"notifications")]})]})]})})},f8=()=>{const[n,e]=V.useState([]),[t,r]=V.useState([]),[i,s]=V.useState(""),[o,l]=V.useState("all"),[d,f]=V.useState(!0),[p,y]=V.useState(null);V.useEffect(()=>{(async()=>{try{f(!0),y(null);const N=await Pl.get("/tester/projects");console.log(N);const A=N.data.map(R=>({id:R.id,companyName:R.companyName||"Unknown Company",auditType:R.auditType||"web",targetUrl:R.targetUrl||"",description:R.description||"",priority:R.priority||"medium",status:R.status||"assigned",assignedAt:R.assignedAt||new Date().toISOString(),deadline:R.deadline||new Date(Date.now()+7*24*60*60*1e3).toISOString(),progress:R.progress||0,testingPhase:R.testingPhase||"Not started",vulnerabilitiesFound:R.vulnerabilitiesFound||{critical:0,high:0,medium:0,low:0}}));e(A),r(A)}catch(N){console.error("Failed to fetch assigned audits:",N),y("Failed to load audits. Please try again later.")}finally{f(!1)}})()},[]),V.useEffect(()=>{let _=n;i&&(_=_.filter(N=>N.companyName.toLowerCase().includes(i.toLowerCase())||N.auditType.toLowerCase().includes(i.toLowerCase()))),o!=="all"&&(_=_.filter(N=>N.status===o)),r(_)},[i,o,n]);const x=async(_,N)=>{try{const A=await Pl.patch(`/tester/projects/${_}/status`,{status:N});e(R=>R.map(D=>D.id===_?{...D,status:A.data.status}:D))}catch(A){console.error("Failed to update audit status:",A),y("Failed to update audit status")}},v=_=>{switch(_){case"assigned":return"text-blue-600 bg-blue-100 dark:text-blue-400 dark:bg-blue-900/30";case"in-progress":return"text-yellow-600 bg-yellow-100 dark:text-yellow-400 dark:bg-yellow-900/30";case"testing":return"text-purple-600 bg-purple-100 dark:text-purple-400 dark:bg-purple-900/30";case"reporting":return"text-orange-600 bg-orange-100 dark:text-orange-400 dark:bg-orange-900/30";case"completed":return"text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/30";default:return"text-gray-600 bg-gray-100 dark:text-gray-400 dark:bg-gray-900/30"}},b=_=>{switch(_){case"high":return"text-red-600 bg-red-100 dark:text-red-400 dark:bg-red-900/30";case"medium":return"text-yellow-600 bg-yellow-100 dark:text-yellow-400 dark:bg-yellow-900/30";case"low":return"text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/30";default:return"text-gray-600 bg-gray-100 dark:text-gray-400 dark:bg-gray-900/30"}},T=_=>{switch(_.toLowerCase()){case"web":return ph;case"mobile":return S0;case"network":return e0;case"cloud":return jv;default:return Kr}},M=[{label:"Assigned Audits",value:n.length.toString(),icon:dp,change:`${n.filter(_=>_.status==="assigned").length} new`},{label:"In Progress",value:n.filter(_=>_.status==="in-progress").length.toString(),icon:Zf,change:"Active testing"},{label:"Completed",value:n.filter(_=>_.status==="completed").length.toString(),icon:ki,change:`${n.filter(_=>_.status==="completed"&&new Date(_.assignedAt)>new Date(Date.now()-30*24*60*60*1e3)).length} this month`}];return d?m.jsx("div",{className:"flex items-center justify-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):p?m.jsxs("div",{className:"p-6 text-center text-red-500",children:[m.jsx(pT,{className:"w-12 h-12 mx-auto mb-4"}),m.jsx("h3",{className:"text-xl font-medium",children:p}),m.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Retry"})]}):m.jsxs("div",{className:"p-6 space-y-6",children:[m.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Testing Dashboard"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your assigned security audits and testing tasks"})]})}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:M.map((_,N)=>{const A=_.icon;return m.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:N*.1},className:"bg-white/10 dark:bg-gray-800/30 backdrop-blur-xl rounded-2xl p-6 border border-white/20 dark:border-gray-700/30",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:_.label}),m.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:_.value}),m.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:_.change})]}),m.jsx("div",{className:"p-3 rounded-xl bg-blue-500/20 text-blue-600 dark:text-blue-400",children:m.jsx(A,{className:"w-6 h-6"})})]})},N)})}),m.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/10 dark:bg-gray-800/30 backdrop-blur-xl rounded-2xl p-6 border border-white/20 dark:border-gray-700/30",children:m.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[m.jsxs("div",{className:"flex-1 relative",children:[m.jsx(yu,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),m.jsx("input",{type:"text",placeholder:"Search audits...",value:i,onChange:_=>s(_.target.value),className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300/50 dark:border-gray-600/50 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),m.jsxs("select",{value:o,onChange:_=>l(_.target.value),className:"px-4 py-3 rounded-xl border border-gray-300/50 dark:border-gray-600/50 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[m.jsx("option",{value:"all",children:"All Status"}),m.jsx("option",{value:"assigned",children:"Assigned"}),m.jsx("option",{value:"in-progress",children:"In Progress"}),m.jsx("option",{value:"testing",children:"Testing"}),m.jsx("option",{value:"reporting",children:"Reporting"}),m.jsx("option",{value:"completed",children:"Completed"})]})]})}),m.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.map((_,N)=>{var R,D,U,z;const A=T(_.auditType);return m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+N*.1},className:"bg-white/10 dark:bg-gray-800/30 backdrop-blur-xl rounded-2xl p-6 border border-white/20 dark:border-gray-700/30 hover:bg-white/20 dark:hover:bg-gray-800/50 transition-all duration-300",children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-3 rounded-xl bg-blue-500/20 text-blue-600 dark:text-blue-400",children:m.jsx(A,{className:"w-6 h-6"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:_.companyName}),m.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 capitalize",children:[_.auditType," Audit"]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium capitalize ${b(_.priority)}`,children:_.priority}),m.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium capitalize ${v(_.status)}`,children:_.status.replace("-"," ")})]})]}),m.jsxs("div",{className:"space-y-3 mb-4",children:[m.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[m.jsx(t4,{className:"w-4 h-4"}),m.jsx("span",{children:_.targetUrl})]}),m.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[m.jsx(zp,{className:"w-4 h-4"}),m.jsxs("span",{children:["Deadline: ",new Date(_.deadline).toLocaleDateString()]})]}),m.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[m.jsx(Zf,{className:"w-4 h-4"}),m.jsxs("span",{children:["Phase: ",_.testingPhase]})]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Progress"}),m.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[_.progress,"%"]})]}),m.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:m.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${_.progress}%`}})})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Vulnerabilities Found"}),m.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:((R=_.vulnerabilitiesFound)==null?void 0:R.critical)||0}),m.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Critical"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:((D=_.vulnerabilitiesFound)==null?void 0:D.high)||0}),m.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"High"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-lg font-bold text-yellow-600 dark:text-yellow-400",children:((U=_.vulnerabilitiesFound)==null?void 0:U.medium)||0}),m.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Medium"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:((z=_.vulnerabilitiesFound)==null?void 0:z.low)||0}),m.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Low"})]})]})]}),m.jsxs("div",{className:"flex gap-2",children:[_.status==="assigned"&&m.jsxs("button",{onClick:()=>x(_.id,"in-progress"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:[m.jsx(ID,{className:"w-4 h-4"}),"Start Audit"]}),_.status==="in-progress"&&m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:()=>x(_.id,"testing"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg transition-colors",children:[m.jsx(Zf,{className:"w-4 h-4"}),"Begin Testing"]}),m.jsx("button",{className:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-colors",children:m.jsx(ND,{className:"w-4 h-4"})})]}),_.status==="testing"&&m.jsxs("button",{onClick:()=>x(_.id,"reporting"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors",children:[m.jsx(dp,{className:"w-4 h-4"}),"Generate Report"]}),_.status==="reporting"&&m.jsxs("button",{onClick:()=>x(_.id,"completed"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",children:[m.jsx(ki,{className:"w-4 h-4"}),"Complete Audit"]}),_.status==="completed"&&m.jsxs("button",{disabled:!0,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg cursor-not-allowed",children:[m.jsx(ki,{className:"w-4 h-4"}),"Completed"]})]})]},_.id)})}),t.length===0&&!d&&m.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[m.jsx(Kr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No audits found"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No audits match your current filters"}),i||o!=="all"?m.jsx("button",{onClick:()=>{s(""),l("all")},className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Clear filters"}):null]})]})},p8=()=>m.jsx(Su,{userRole:"tester",children:m.jsx(f8,{})}),Zg=({icon:n,title:e,value:t,subtitle:r,progress:i})=>m.jsxs("div",{className:"bg-white dark:bg-gray-800/50 rounded-2xl p-5 shadow-sm border border-gray-100 dark:border-gray-700/50 flex flex-col justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[m.jsx("div",{className:"p-2 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400",children:m.jsx(n,{size:18})}),m.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:t}),r&&m.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:r}),i!==void 0&&m.jsxs("div",{className:"mt-3",children:[m.jsx("div",{className:"flex justify-between items-center mb-1.5",children:m.jsxs("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:[i,"% of tests complete"]})}),m.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2",children:m.jsx(de.div,{initial:{width:0},animate:{width:`${i}%`},className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full"})})]})]})]}),Hf=({label:n,description:e,status:t})=>{const r=t==="completed",i=t==="current";return m.jsxs("div",{className:"flex gap-4",children:[m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center border-2 transition-colors ${r?"bg-emerald-500 border-emerald-500 text-white":i?"bg-white dark:bg-gray-800 border-emerald-500 text-emerald-500":"bg-gray-100 dark:bg-gray-700 border-gray-200 dark:border-gray-600"}`,children:r?m.jsx(ki,{size:14}):m.jsx(ZI,{size:i?10:8,strokeWidth:i?3:2,fill:i?"currentColor":"none"})}),m.jsx("div",{className:"w-0.5 h-10 bg-gray-100 dark:bg-gray-700 last:hidden"})]}),m.jsxs("div",{className:"pb-6",children:[m.jsx("div",{className:`text-sm font-bold ${r||i?"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-500"}`,children:n}),m.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:e})]})]})},m8=({vulnerabilities:n})=>{const e=n||{critical:0,high:0,medium:0,low:0,informational:0,total:0},t=e.total||1,r=[{label:"Critical",count:e.critical||0,color:"#EF4444"},{label:"High",count:e.high||0,color:"#F97316"},{label:"Medium",count:e.medium||0,color:"#EAB308"},{label:"Low",count:e.low||0,color:"#10B981"},{label:"Info",count:e.informational||0,color:"#3B82F6"}];let i=0;const s=35,o=2*Math.PI*s;return m.jsxs("div",{className:"bg-white dark:bg-gray-800/50 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700/50 h-full",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"Reported Vulnerabilities"}),m.jsx("button",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium hover:underline",children:"View all"})]}),m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsxs("div",{className:"relative w-40 h-40 mb-6",children:[m.jsx("svg",{viewBox:"0 0 100 100",className:"w-full h-full -rotate-90",children:r.map((l,d)=>{const f=l.count/t,p=`${f*o} ${o}`,y=-i;return i+=f*o,l.count===0?null:m.jsx("circle",{cx:"50",cy:"50",r:s,fill:"transparent",stroke:l.color,strokeWidth:"10",strokeDasharray:p,strokeDashoffset:y,className:"transition-all duration-1000 ease-out"},d)})}),m.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center",children:[m.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Reported"}),m.jsx("span",{className:"text-2xl font-black text-gray-900 dark:text-white",children:e.total||0})]})]}),m.jsx("div",{className:"grid grid-cols-5 gap-2 w-full mt-auto",children:r.map((l,d)=>m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"h-1.5 rounded-full mb-2",style:{backgroundColor:l.color}}),m.jsx("div",{className:"text-[10px] font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:l.label}),m.jsx("div",{className:"text-sm font-bold text-gray-900 dark:text-white",children:l.count})]},d))})]})]})},g8=({severity:n,title:e,description:t})=>{const r={critical:"border-l-red-500 bg-red-50/30 dark:bg-red-900/10 text-red-700 dark:text-red-400",high:"border-l-orange-500 bg-orange-50/30 dark:bg-orange-900/10 text-orange-700 dark:text-orange-400",medium:"border-l-yellow-500 bg-yellow-50/30 dark:bg-yellow-900/10 text-yellow-700 dark:text-yellow-400",low:"border-l-emerald-500 bg-emerald-50/30 dark:bg-emerald-900/10 text-emerald-700 dark:text-emerald-400"},i=r[n]||r.low;return m.jsxs("div",{className:`p-4 rounded-xl border-l-[6px] shadow-sm mb-3 ${i}`,children:[m.jsxs("h4",{className:"text-sm font-bold mb-1",children:[n.charAt(0).toUpperCase()+n.slice(1),": ",e]}),m.jsx("p",{className:"text-xs opacity-80 leading-relaxed font-medium",children:t})]})},y8=({audit:n})=>{const e=Fo();if(console.log("Rendering AuditDetailsContent with audit:",n),!n)return m.jsxs("div",{className:"p-12 text-center",children:[m.jsx(Bv,{size:48,className:"mx-auto text-red-500 mb-4"}),m.jsx("h2",{className:"text-xl font-bold",children:"No Audit Data Found"}),m.jsx("button",{onClick:()=>e(-1),className:"mt-4 text-blue-500 font-bold",children:"Go Back"})]});const t=(i,s)=>{if(!i)return"N/A";try{const o=new Date(i),l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=`${l[o.getMonth()]} ${o.getDate()}`;if(!s)return`${d} - TBD`;const f=new Date(s),p=`${l[f.getMonth()]} ${f.getDate()}`;return`${d} - ${p}`}catch{return"Invalid Date"}},r=i=>{const s=["Draft","Launching","In progress","Finalizing","Completed"],o=(n.testingPhase||"").toLowerCase(),l=s.findIndex(f=>f.toLowerCase()===o),d=s.indexOf(i);return n.status==="completed"||d<l?"completed":d===l?"current":"upcoming"};return m.jsx("div",{className:"w-full p-4 md:p-6 bg-[#F8FAFC] dark:bg-gray-950 min-h-screen",children:m.jsxs("div",{className:"max-w-6xl mx-auto",children:[m.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-t-3xl p-6 flex justify-between items-start border-b border-gray-100 dark:border-gray-800 shadow-sm",children:[m.jsxs("div",{className:"flex gap-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400",children:m.jsx(Kr,{size:24})}),m.jsxs("div",{children:[m.jsxs("h1",{className:"text-xl font-black text-gray-900 dark:text-white capitalize",children:[n.auditType||"Security"," Audit"]}),m.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 font-medium",children:"Detailed audit information and results"})]})]}),m.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full text-gray-400 transition-colors",children:m.jsx(Ua,{size:20})})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 space-y-8 rounded-b-3xl shadow-sm border-x border-b border-gray-100 dark:border-gray-800",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[m.jsx(Zg,{icon:zp,title:"Testing Period",value:t(n.preferredStartDate,n.completedAt),subtitle:n.completedAt?"Delivered":"Scheduled"}),m.jsx(Zg,{icon:dp,title:"Report Delivery",value:n.completedAt?new Date(n.completedAt).toLocaleDateString():"Pending",subtitle:n.completedAt?"Delivered":"Estimated: TBD"}),m.jsx(Zg,{icon:iu,title:"Methodology",value:n.methodology||"Standard Security"}),m.jsx(Zg,{icon:Zf,title:"Testing Progress",value:`${n.progress||0}%`,progress:n.progress||0})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"bg-white dark:bg-gray-800/50 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700/50",children:[m.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white mb-8",children:"Status"}),m.jsxs("div",{className:"relative pl-2",children:[m.jsx(Hf,{label:"Draft",description:"Initial setup and scoping",status:r("Draft")}),m.jsx(Hf,{label:"Launching",description:"Audit launch and initial scan",status:r("Launching")}),m.jsx(Hf,{label:"In progress",description:"Active security testing",status:r("In progress")}),m.jsx(Hf,{label:"Finalizing",description:"Analysis and report generation",status:r("Finalizing")}),m.jsx(Hf,{label:"Completed",description:"Final report delivered",status:r("Completed")})]}),m.jsxs("button",{className:"text-xs text-blue-600 dark:text-blue-400 font-bold mt-4 flex items-center gap-1 hover:underline",children:["View reports ",m.jsx(aT,{size:12})]})]}),m.jsx(m8,{vulnerabilities:n.vulnerabilities})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800/50 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700/50",children:[m.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white mb-6",children:"Remediation Recommendations"}),m.jsx("div",{className:"space-y-1",children:n.findings&&n.findings.length>0?n.findings.filter(i=>["critical","high","low"].includes(i.severity)).map((i,s)=>m.jsx(g8,{severity:i.severity,title:i.title,description:i.recommendation||i.description},s)):m.jsxs("div",{className:"text-center py-8 text-gray-400",children:[m.jsx(gD,{size:32,className:"mx-auto mb-2 opacity-20"}),m.jsx("p",{className:"text-sm",children:"No findings reported yet."})]})})]}),m.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[m.jsx("button",{onClick:()=>e(-1),className:"px-8 py-2.5 rounded-xl font-bold text-sm text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:"Close"}),m.jsxs("button",{className:"px-8 py-2.5 rounded-xl font-bold text-sm bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg shadow-blue-500/20 flex items-center gap-2 hover:opacity-90 transition-all",children:[m.jsx(OD,{size:16}),"Re-audit"]})]})]})]})})},x8=()=>{const{id:n}=Pk(),{getUserRequests:e,currentUser:t}=SN(),i=e(t.id).find(s=>s.id===n);return i?m.jsx(Su,{children:m.jsx(y8,{audit:i})}):m.jsx(Su,{children:m.jsxs("div",{className:"p-6",children:[m.jsx("h1",{className:"text-2xl font-bold text-red-500",children:"Audit not found"}),m.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"The requested audit could not be found or you don't have permission to view it."})]})})},Cl=({children:n})=>localStorage.getItem("token")?n:m.jsx($k,{to:"/",replace:!0});function v8(){const n=$l(),{theme:e}=da();return V.useEffect(()=>{e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e]),m.jsx("div",{className:`min-h-screen ${e==="dark"?"bg-background-dark text-text-dark":"bg-gray-300 text-text-light"} transition-colors duration-300`,children:m.jsx(e8,{children:m.jsx(ca,{mode:"wait",children:m.jsxs(Yk,{location:n,children:[m.jsx(ia,{path:"/",element:m.jsx(g4,{})}),m.jsx(ia,{path:"/get-started",element:m.jsx(YU,{})}),m.jsx(ia,{path:"/dashboard",element:m.jsx(Cl,{children:m.jsx(r8,{})})}),m.jsx(ia,{path:"/help",element:m.jsx(Cl,{children:m.jsx(s8,{})})}),m.jsx(ia,{path:"/projects",element:m.jsx(Cl,{children:m.jsx(o8,{})})}),m.jsx(ia,{path:"/settings",element:m.jsx(Cl,{children:m.jsx(c8,{})})}),m.jsx(ia,{path:"/admin",element:m.jsx(Cl,{children:m.jsx(d8,{})})}),m.jsx(ia,{path:"/admin/settings",element:m.jsx(Cl,{children:m.jsx(h8,{})})}),m.jsx(ia,{path:"/testing",element:m.jsx(Cl,{children:m.jsx(p8,{})})}),m.jsx(ia,{path:"/audit/:id",element:m.jsx(Cl,{children:m.jsx(x8,{})})})]},n.pathname)})})})}nk.createRoot(document.getElementById("root")).render(m.jsx(V.StrictMode,{children:m.jsx(nR,{children:m.jsx(f4,{children:m.jsx(v8,{})})})}));
